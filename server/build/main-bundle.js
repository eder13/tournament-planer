"use strict";var i_=Object.create;var bc=Object.defineProperty;var bd=Object.getOwnPropertyDescriptor;var n_=Object.getOwnPropertyNames;var s_=Object.getPrototypeOf,a_=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var r_=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of n_(t))!a_.call(e,s)&&s!==i&&bc(e,s,{get:()=>t[s],enumerable:!(n=bd(t,s))||n.enumerable});return e};var $t=(e,t,i)=>(i=e!=null?i_(s_(e)):{},r_(t||!e||!e.__esModule?bc(i,"default",{value:e,enumerable:!0}):i,e));var ms=(e,t,i,n)=>{for(var s=n>1?void 0:n?bd(t,i):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(s=(n?r(t,i,s):r(s))||s);return n&&s&&bc(t,i,s),s};var xr=w((j4,yd)=>{"use strict";yd.exports=class extends Error{name="AssertError";constructor(t,i){super(t||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,i)}}});var yc=w((R4,wd)=>{"use strict";wd.exports=function(...e){try{return JSON.stringify(...e)}catch(t){return"[Cannot display object: "+t.message+"]"}}});var Z=w((q4,_d)=>{"use strict";var o_=xr(),c_=yc(),l_=_d.exports=function(e,...t){if(e)return;if(t.length===1&&t[0]instanceof Error)throw t[0];let i=t.filter(n=>n!=="").map(n=>typeof n=="string"?n:n instanceof Error?n.message:c_(n));throw new o_(i.join(" "),l_)}});var en=w((P4,kd)=>{"use strict";var wc=Z(),Ed={};kd.exports=function(e,t,i){if(t===!1||t===null||t===void 0)return e;i=i||{},typeof i=="string"&&(i={separator:i});let n=Array.isArray(t);wc(!n||!i.separator,"Separator option is not valid for array-based chain");let s=n?t:t.split(i.separator||"."),a=e;for(let r=0;r<s.length;++r){let o=s[r],c=i.iterables&&Ed.iterables(a);if(Array.isArray(a)||c==="set"){let l=Number(o);Number.isInteger(l)&&(o=l<0?a.length+l:l)}if(!a||typeof a=="function"&&i.functions===!1||!c&&a[o]===void 0){wc(!i.strict||r+1===s.length,"Missing segment",o,"in reach path ",t),wc(typeof a=="object"||i.functions===!0||typeof a!="function","Invalid segment",o,"in reach path ",t),a=i.default;break}c?c==="set"?a=[...a][o]:a=a.get(o):a=a[o]}return a};Ed.iterables=function(e){if(e instanceof Set)return"set";if(e instanceof Map)return"map"}});var _c=w((Ze,Ad)=>{"use strict";var Sd={};Ze=Ad.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,url:URL.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype};Sd.typeMap=new Map([["[object Error]",Ze.error],["[object Map]",Ze.map],["[object Promise]",Ze.promise],["[object Set]",Ze.set],["[object URL]",Ze.url],["[object WeakMap]",Ze.weakMap],["[object WeakSet]",Ze.weakSet]]);Ze.getInternalProto=function(e){if(Array.isArray(e))return Ze.array;if(Buffer&&e instanceof Buffer)return Ze.buffer;if(e instanceof Date)return Ze.date;if(e instanceof RegExp)return Ze.regex;if(e instanceof Error)return Ze.error;let t=Object.prototype.toString.call(e);return Sd.typeMap.get(t)||Ze.generic}});var vr=w(Td=>{"use strict";Td.keys=function(e,t={}){return t.symbols!==!1?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}});var gt=w((I4,Cd)=>{"use strict";var p_=en(),Xe=_c(),u_=vr(),Zt={needsProtoHack:new Set([Xe.set,Xe.map,Xe.weakSet,Xe.weakMap]),structuredCloneExists:typeof structuredClone=="function"};Cd.exports=Zt.clone=function(e,t={},i=null){if(typeof e!="object"||e===null)return e;let n=Zt.clone,s=i;if(t.shallow){if(t.shallow!==!0)return Zt.cloneWithShallow(e,t);n=c=>c}else if(s){let c=s.get(e);if(c)return c}else s=new Map;let a=Xe.getInternalProto(e);switch(a){case Xe.buffer:return Buffer?.from(e);case Xe.date:return new Date(e.getTime());case Xe.regex:case Xe.url:return new a.constructor(e)}let r=Zt.base(e,a,t);if(r===e)return e;if(s&&s.set(e,r),a===Xe.set)for(let c of e)r.add(n(c,t,s));else if(a===Xe.map)for(let[c,l]of e)r.set(c,n(l,t,s));let o=u_.keys(e,t);for(let c of o){if(c==="__proto__")continue;if(a===Xe.array&&c==="length"){r.length=e.length;continue}if(Zt.structuredCloneExists&&a===Xe.error&&c==="stack")continue;let l=Object.getOwnPropertyDescriptor(e,c);l?l.get||l.set?Object.defineProperty(r,c,l):l.enumerable?r[c]=n(e[c],t,s):Object.defineProperty(r,c,{enumerable:!1,writable:!0,configurable:!0,value:n(e[c],t,s)}):Object.defineProperty(r,c,{enumerable:!0,writable:!0,configurable:!0,value:n(e[c],t,s)})}return r};Zt.cloneWithShallow=function(e,t){let i=t.shallow;t=Object.assign({},t),t.shallow=!1;let n=new Map;for(let s of i){let a=p_(e,s);(typeof a=="object"||typeof a=="function")&&n.set(a,a)}return Zt.clone(e,t,n)};Zt.base=function(e,t,i){if(i.prototype===!1)return Zt.needsProtoHack.has(t)?new t.constructor:t===Xe.array?[]:{};let n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===Xe.array){let s=[];return n!==t&&Object.setPrototypeOf(s,n),s}else if(t===Xe.error&&Zt.structuredCloneExists&&(n===t||Error.isPrototypeOf(n.constructor))){let s=structuredClone(e);return Object.getPrototypeOf(s)!==n&&Object.setPrototypeOf(s,n),s}if(Zt.needsProtoHack.has(t)){let s=new n.constructor;return n!==t&&Object.setPrototypeOf(s,n),s}return Object.create(n)}});var br=w(($4,qd)=>{"use strict";var Ec=Z(),jd=gt(),d_=vr(),Rd={};qd.exports=Rd.merge=function(e,t,i){if(Ec(e&&typeof e=="object","Invalid target value: must be an object"),Ec(t==null||typeof t=="object","Invalid source value: must be null, undefined, or an object"),!t)return e;if(i=Object.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(t)){Ec(Array.isArray(e),"Cannot merge array onto an object"),i.mergeArrays||(e.length=0);for(let s=0;s<t.length;++s)e.push(jd(t[s],{symbols:i.symbols}));return e}let n=d_.keys(t,i);for(let s=0;s<n.length;++s){let a=n[s];if(a==="__proto__"||!Object.prototype.propertyIsEnumerable.call(t,a))continue;let r=t[a];if(r&&typeof r=="object"){if(e[a]===r)continue;!e[a]||typeof e[a]!="object"||Array.isArray(e[a])!==Array.isArray(r)||r instanceof Date||Buffer&&Buffer.isBuffer(r)||r instanceof RegExp?e[a]=jd(r,{symbols:i.symbols}):Rd.merge(e[a],r,i)}else(r!=null||i.nullOverride)&&(e[a]=r)}return e}});var kc=w((N4,$d)=>{"use strict";var yr=Z(),Od=gt(),Id=br(),Pd=en(),wr={};$d.exports=function(e,t,i={}){if(yr(e&&typeof e=="object","Invalid defaults value: must be an object"),yr(!t||t===!0||typeof t=="object","Invalid source value: must be true, falsy or an object"),yr(typeof i=="object","Invalid options: must be an object"),!t)return null;if(i.shallow)return wr.applyToDefaultsWithShallow(e,t,i);let n=Od(e);if(t===!0)return n;let s=i.nullOverride!==void 0?i.nullOverride:!1;return Id(n,t,{nullOverride:s,mergeArrays:!1})};wr.applyToDefaultsWithShallow=function(e,t,i){let n=i.shallow;yr(Array.isArray(n),"Invalid keys");let s=new Map,a=t===!0?null:new Set;for(let c of n){c=Array.isArray(c)?c:c.split(".");let l=Pd(e,c);l&&typeof l=="object"?s.set(l,a&&Pd(t,c)||l):a&&a.add(c)}let r=Od(e,{},s);if(!a)return r;for(let c of a)wr.reachCopy(r,t,c);let o=i.nullOverride!==void 0?i.nullOverride:!1;return Id(r,t,{nullOverride:o,mergeArrays:!1})};wr.reachCopy=function(e,t,i){for(let a of i){if(!(a in t))return;let r=t[a];if(typeof r!="object"||r===null)return;t=r}let n=t,s=e;for(let a=0;a<i.length-1;++a){let r=i[a];typeof s[r]!="object"&&(s[r]={}),s=s[r]}s[i[i.length-1]]=n}});var Fd=w((F4,Nd)=>{"use strict";var Sc={};Nd.exports=Sc.Bench=class{constructor(){this.ts=0,this.reset()}reset(){this.ts=Sc.Bench.now()}elapsed(){return Sc.Bench.now()-this.ts}static now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}}});var Ac=w((M4,Ld)=>{"use strict";Ld.exports=function(){}});var Dd=w((D4,Md)=>{"use strict";var m_=Ac();Md.exports=function(){return new Promise(m_)}});var hs=w((B4,Bd)=>{"use strict";var Xt=_c(),et={mismatched:null};Bd.exports=function(e,t,i){return i=Object.assign({prototype:!0},i),!!et.isDeepEqual(e,t,i,[])};et.isDeepEqual=function(e,t,i,n){if(e===t)return e!==0||1/e===1/t;let s=typeof e;if(s!==typeof t||e===null||t===null)return!1;if(s==="function"){if(!i.deepFunction||e.toString()!==t.toString())return!1}else if(s!=="object")return e!==e&&t!==t;let a=et.getSharedType(e,t,!!i.prototype);switch(a){case Xt.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case Xt.promise:return e===t;case Xt.regex:case Xt.url:return e.toString()===t.toString();case et.mismatched:return!1}for(let r=n.length-1;r>=0;--r)if(n[r].isSame(e,t))return!0;n.push(new et.SeenEntry(e,t));try{return!!et.isDeepEqualObj(a,e,t,i,n)}finally{n.pop()}};et.getSharedType=function(e,t,i){if(i)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?et.mismatched:Xt.getInternalProto(e);let n=Xt.getInternalProto(e);return n!==Xt.getInternalProto(t)?et.mismatched:n};et.valueOf=function(e){let t=e.valueOf;if(t===void 0)return e;try{return t.call(e)}catch(i){return i}};et.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)};et.isSetSimpleEqual=function(e,t){for(let i of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,i))return!1;return!0};et.isDeepEqualObj=function(e,t,i,n,s){let{isDeepEqual:a,valueOf:r,hasOwnEnumerableProperty:o}=et,{keys:c,getOwnPropertySymbols:l}=Object;if(e===Xt.array)if(n.part){for(let f of t)for(let x of i)if(a(f,x,n,s))return!0}else{if(t.length!==i.length)return!1;for(let f=0;f<t.length;++f)if(!a(t[f],i[f],n,s))return!1;return!0}else if(e===Xt.set){if(t.size!==i.size)return!1;if(!et.isSetSimpleEqual(t,i)){let f=new Set(Set.prototype.values.call(i));for(let x of Set.prototype.values.call(t)){if(f.delete(x))continue;let E=!1;for(let j of f)if(a(x,j,n,s)){f.delete(j),E=!0;break}if(!E)return!1}}}else if(e===Xt.map){if(t.size!==i.size)return!1;for(let[f,x]of Map.prototype.entries.call(t))if(x===void 0&&!Map.prototype.has.call(i,f)||!a(x,Map.prototype.get.call(i,f),n,s))return!1}else if(e===Xt.error&&(t.name!==i.name||t.message!==i.message))return!1;let p=r(t),u=r(i);if((t!==p||i!==u)&&!a(p,u,n,s))return!1;let d=c(t);if(!n.part&&d.length!==c(i).length&&!n.skip)return!1;let m=0;for(let f of d){if(n.skip&&n.skip.includes(f)){i[f]===void 0&&++m;continue}if(!o(i,f)||!a(t[f],i[f],n,s))return!1}if(!n.part&&d.length-m!==c(i).length)return!1;if(n.symbols!==!1){let f=l(t),x=new Set(l(i));for(let E of f){if(!n.skip?.includes(E)){if(o(t,E)){if(!o(i,E)||!a(t[E],i[E],n,s))return!1}else if(o(i,E))return!1}x.delete(E)}for(let E of x)if(o(i,E))return!1}return!0};et.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}});var _r=w((U4,zd)=>{"use strict";zd.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}});var Hd=w((H4,Ud)=>{"use strict";var Er=Z(),h_=hs(),f_=_r(),g_=vr(),jt={};Ud.exports=function(e,t,i={}){return typeof t!="object"&&(t=[t]),Er(!Array.isArray(t)||t.length,"Values array cannot be empty"),typeof e=="string"?jt.string(e,t,i):Array.isArray(e)?jt.array(e,t,i):(Er(typeof e=="object","Reference must be string or an object"),jt.object(e,t,i))};jt.array=function(e,t,i){if(Array.isArray(t)||(t=[t]),!e.length||i.only&&i.once&&e.length!==t.length)return!1;let n,s=new Map;for(let r of t)if(!i.deep||!r||typeof r!="object"){let o=s.get(r);o?++o.allowed:s.set(r,{allowed:1,hits:0})}else{n=n??jt.compare(i);let o=!1;for(let[c,l]of s.entries())if(n(c,r)){++l.allowed,o=!0;break}o||s.set(r,{allowed:1,hits:0})}let a=0;for(let r of e){let o;if(!i.deep||!r||typeof r!="object")o=s.get(r);else{n=n??jt.compare(i);for(let[c,l]of s.entries())if(n(c,r)){o=l;break}}if(o&&(++o.hits,++a,i.once&&o.hits>o.allowed))return!1}if(i.only&&a!==e.length)return!1;for(let r of s.values())if(r.hits!==r.allowed&&r.hits<r.allowed&&!i.part)return!1;return!!a};jt.object=function(e,t,i){Er(i.once===void 0,"Cannot use option once with object");let n=g_.keys(e,i);if(!n.length)return!1;if(Array.isArray(t))return jt.array(n,t,i);let s=Object.getOwnPropertySymbols(t).filter(c=>t.propertyIsEnumerable(c)),a=[...Object.keys(t),...s],r=jt.compare(i),o=new Set(a);for(let c of n){if(!o.has(c)){if(i.only)return!1;continue}if(!r(t[c],e[c]))return!1;o.delete(c)}return o.size?i.part?o.size<a.length:!1:!0};jt.string=function(e,t,i){if(e==="")return t.length===1&&t[0]===""||!i.once&&!t.some(c=>c!=="");let n=new Map,s=[];for(let c of t)if(Er(typeof c=="string","Cannot compare string reference to non-string value"),c){let l=n.get(c);l?++l.allowed:(n.set(c,{allowed:1,hits:0}),s.push(f_(c)))}else if(i.once||i.only)return!1;if(!s.length)return!0;let a=new RegExp(`(${s.join("|")})`,"g"),r=e.replace(a,(c,l)=>(++n.get(l).hits,""));if(i.only&&r)return!1;let o=!1;for(let c of n.values())if(c.hits&&(o=!0),c.hits!==c.allowed&&(c.hits<c.allowed&&!i.part||i.once))return!1;return!!o};jt.compare=function(e){if(!e.deep)return jt.shallow;let t=e.only!==void 0,i=e.part!==void 0,n={prototype:t?e.only:i?!e.part:!1,part:t?!e.only:i?e.part:!1};return(s,a)=>h_(s,a,n)};jt.shallow=function(e,t){return e===t}});var Kd=w((V4,Vd)=>{"use strict";var x_=Z();Vd.exports=function(e){return x_(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}});var Tc=w((K4,Wd)=>{"use strict";var tn={};Wd.exports=function(e){if(!e)return"";let t="";for(let i=0;i<e.length;++i){let n=e.charCodeAt(i);tn.isSafe(n)?t+=e[i]:t+=tn.escapeHtmlChar(n)}return t};tn.escapeHtmlChar=function(e){let t=tn.namedHtml.get(e);return t||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)};tn.isSafe=function(e){return tn.safeCharCodes.has(e)};tn.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]);tn.safeCharCodes=function(){let e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||t===32||t===46||t===44||t===45||t===58||t===95)&&e.add(t);return e}()});var Jd=w((W4,Gd)=>{"use strict";var kr={};Gd.exports=function(e){return e?e.replace(/[<>&\u2028\u2029]/g,kr.escape):""};kr.escape=function(e){return kr.replacements.get(e)};kr.replacements=new Map([["<","\\u003c"],[">","\\u003e"],["&","\\u0026"],["\u2028","\\u2028"],["\u2029","\\u2029"]])});var Zd=w((G4,Yd)=>{"use strict";var Qd={};Yd.exports=Qd.flatten=function(e,t){let i=t||[];for(let n of e)Array.isArray(n)?Qd.flatten(n,i):i.push(n);return i}});var tm=w((J4,em)=>{"use strict";var Xd={};em.exports=function(e,t,i={}){if(!e||!t)return i.first?null:[];let n=[],s=Array.isArray(e)?new Set(e):e,a=new Set;for(let r of t)if(Xd.has(s,r)&&!a.has(r)){if(i.first)return r;n.push(r),a.add(r)}return i.first?null:n};Xd.has=function(e,t){return typeof e.has=="function"?e.has(t):e[t]!==void 0}});var nm=w((Q4,im)=>{"use strict";im.exports=function(e){return typeof e?.then=="function"}});var rm=w((Y4,am)=>{"use strict";var sm={wrapped:Symbol("wrapped")};am.exports=function(e){if(e[sm.wrapped])return e;let t=!1,i=function(...n){t||(t=!0,e(...n))};return i[sm.wrapped]=!0,i}});var cm=w((Z4,om)=>{"use strict";var v_=en();om.exports=function(e,t,i){return t.replace(/{([^{}]+)}/g,(n,s)=>v_(e,s,i)??"")}});var pm=w((X4,lm)=>{"use strict";var b_={maxTimer:2147483647};lm.exports=function(e,t,i){if(typeof e=="bigint"&&(e=Number(e)),e>=Number.MAX_SAFE_INTEGER&&(e=1/0),typeof e!="number"&&e!==void 0)throw new TypeError("Timeout must be a number or bigint");return new Promise(n=>{let s=i?i.setTimeout:setTimeout,a=()=>{let r=Math.min(e,b_.maxTimer);e-=r,s(()=>e>0?a():n(t),r)};e!==1/0&&a()})}});var z=w(xe=>{"use strict";xe.applyToDefaults=kc();xe.assert=Z();xe.AssertError=xr();xe.Bench=Fd();xe.block=Dd();xe.clone=gt();xe.contain=Hd();xe.deepEqual=hs();xe.escapeHeaderAttribute=Kd();xe.escapeHtml=Tc();xe.escapeJson=Jd();xe.escapeRegex=_r();xe.flatten=Zd();xe.ignore=Ac();xe.intersect=tm();xe.isPromise=nm();xe.merge=br();xe.once=rm();xe.reach=en();xe.reachTemplate=cm();xe.stringify=yc();xe.wait=pm()});var um=w((t6,y_)=>{y_.exports={name:"@hapi/validate",description:"Object schema validation",version:"2.0.1",repository:"git://github.com/hapijs/validate",main:"lib/index.js",files:["lib/**/*"],eslintConfig:{extends:["plugin:@hapi/module"]},dependencies:{"@hapi/hoek":"^11.0.2","@hapi/topo":"^6.0.1"},devDependencies:{"@hapi/bourne":"^3.0.0","@hapi/code":"^9.0.3","@hapi/eslint-plugin":"*","@hapi/lab":"^25.1.2"},scripts:{test:"lab -t 100 -a @hapi/code -L","test-cov-html":"lab -r html -o coverage.html -a @hapi/code"},license:"BSD-3-Clause"}});var mm=w(dm=>{"use strict";var Se=xt(),Cc={};Cc.wrap=Se.string().min(1).max(2).allow(!1);dm.preferences=Se.object({allowUnknown:Se.boolean(),abortEarly:Se.boolean(),context:Se.object(),convert:Se.boolean(),dateFormat:Se.valid("date","iso","string","time","utc"),errors:{escapeHtml:Se.boolean(),label:Se.valid("path","key",!1),language:[Se.string(),Se.object().ref()],render:Se.boolean(),stack:Se.boolean(),wrap:{label:Cc.wrap,array:Cc.wrap}},messages:Se.object(),noDefaults:Se.boolean(),nonEnumerables:Se.boolean(),presence:Se.valid("required","optional","forbidden"),skipFunctions:Se.boolean(),stripUnknown:Se.object({arrays:Se.boolean(),objects:Se.boolean()}).or("arrays","objects").allow(!0,!1)}).strict()});var nn=w(ei=>{"use strict";var Nt=Z(),w_=gt(),__=en(),la=ve(),fi={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};ei.create=function(e,t={}){Nt(typeof e=="string","Invalid reference key:",e),la.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","separator"]),Nt(!t.prefix||typeof t.prefix=="object","options.prefix must be of type object");let i=Object.assign({},fi.defaults,t);delete i.prefix;let n=i.separator,s=fi.context(e,n,t.prefix);if(i.type=s.type,e=s.key,i.type==="value")if(s.root&&(Nt(!n||e[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",e||(e=null)),n&&n===e)e=null,i.ancestor=0;else if(i.ancestor!==void 0)Nt(!n||!e||e[0]!==n,"Cannot combine prefix with ancestor option");else{let[a,r]=fi.ancestor(e,n);r&&(e=e.slice(r),e===""&&(e=null)),i.ancestor=a}return i.path=n?e===null?[]:e.split(n):[e],new fi.Ref(i)};ei.in=function(e,t={}){return ei.create(e,Object.assign({},t,{in:!0}))};ei.isRef=function(e){return e?!!e[la.symbols.ref]:!1};fi.Ref=class{constructor(e){Nt(typeof e=="object","Invalid reference construction"),la.assertOptions(e,["adjust","ancestor","in","iterables","map","path","separator","type","depth","key","root","display"]),Nt([!1,void 0].includes(e.separator)||typeof e.separator=="string"&&e.separator.length===1,"Invalid separator"),Nt(!e.adjust||typeof e.adjust=="function","options.adjust must be a function"),Nt(!e.map||Array.isArray(e.map),"options.map must be an array"),Nt(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,fi.defaults,e),Nt(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,i,n,s={}){return Nt(!this.in||s.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(i.context,t,s):this.type==="local"?this._resolve(n,t,s):this.ancestor?this.ancestor==="root"?this._resolve(t.ancestors[t.ancestors.length-1],t,s):(Nt(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,s)):this._resolve(e,t,s)}_resolve(e,t,i){let n;if(this.type==="value"&&t.mainstay.shadow&&i.shadow!==!1&&(n=t.mainstay.shadow.get(this.absolute(t))),n===void 0&&(n=__(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(n=this.adjust(n)),this.map){let s=this.map.get(n);s!==void 0&&(n=s)}return n}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new fi.Ref(this)}updateDisplay(){let e=this.key!==null?this.key:"";if(this.type!=="value"){this.display=`ref:${this.type}:${e}`;return}if(!this.separator){this.display=`ref:${e}`;return}if(!this.ancestor){this.display=`ref:${this.separator}${e}`;return}if(this.ancestor==="root"){this.display=`ref:root:${e}`;return}if(this.ancestor===1){this.display=`ref:${e||".."}`;return}let t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}};fi.Ref.prototype[la.symbols.ref]=!0;fi.context=function(e,t,i={}){if(e=e.trim(),i){let n=i.global===void 0?"$":i.global;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"global"};let s=i.local===void 0?"#":i.local;if(s!==t&&e.startsWith(s))return{key:e.slice(s.length),type:"local"};let a=i.root===void 0?"/":i.root;if(a!==t&&e.startsWith(a))return{key:e.slice(a.length),type:"value",root:!0}}return{key:e,type:"value"}};fi.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let i=2;for(;e[i]===t;)++i;return[i-1,i]};ei.toSibling=0;ei.toParent=1;ei.Manager=class{constructor(){this.refs=[]}register(e,t){if(e){if(t=t===void 0?ei.toParent:t,Array.isArray(e)){for(let i of e)this.register(i,t);return}if(la.isSchema(e)){for(let i of e._refs.refs)i.ancestor-t>=0&&this.refs.push({ancestor:i.ancestor-t,root:i.root});return}ei.isRef(e)&&e.type==="value"&&e.ancestor-t>=0&&this.refs.push({ancestor:e.ancestor-t,root:e.root})}}clone(){let e=new ei.Manager;return e.refs=w_(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter(e=>!e.ancestor).map(e=>e.root)}}});var Sr=w((gm,xm)=>{"use strict";var hm=Z(),E_=gt(),k_=Tc(),fm=ve(),S_=nn(),Pe={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};xm.exports=gm=Pe.Template=class{constructor(e,t){hm(typeof e=="string","Template source must be a string"),hm(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=E_(t),this._parse()}_parse(){if(!this.source.includes("{"))return;let e=Pe.encode(this.source),t=Pe.split(e),i=[],n=t.shift();n&&i.push(n);for(let s of t){let a=s[0]!=="{",r=a?"}":"}}",o=s.indexOf(r),c=s.slice(a?0:1,o),l=c[0]===":";l&&(c=c.slice(1));let p=this._ref(Pe.decode(c),{raw:a,wrapped:l});i.push(p);let u=s.slice(o+r.length);u&&i.push(Pe.decode(u))}this._template=i}static date(e,t){return Pe.dateFormat[t.dateFormat].call(e)}isDynamic(){return!!this._template}static isTemplate(e){return e?!!e[fm.symbols.template]:!1}render(e,t,i,n,s={}){if(!this.isDynamic())return this.rendered;let a=[];for(let r of this._template)if(typeof r=="string")a.push(r);else{let o=r.ref.resolve(e,t,i,n,s),c=Pe.stringify(o,i,s.errors),l=r.raw||s.errors?.escapeHtml===!1?c:k_(c);a.push(Pe.wrap(l,r.wrapped&&i.errors.wrap.label))}return a.join("")}_ref(e,{raw:t,wrapped:i}){let n=S_.create(e,this._settings);return{ref:n,raw:t,wrapped:i||n.type==="local"&&n.key==="label"}}toString(){return this.source}};Pe.Template.prototype[fm.symbols.template]=!0;Pe.Template.prototype.isImmutable=!0;Pe.encode=function(e){return e.replace(/\\(\{+)/g,(t,i)=>Pe.opens.slice(0,i.length)).replace(/\\(\}+)/g,(t,i)=>Pe.closes.slice(0,i.length))};Pe.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")};Pe.split=function(e){let t=[],i="";for(let n=0;n<e.length;++n){let s=e[n];if(s==="{"){let a="";for(;n+1<e.length&&e[n+1]==="{";)a+="{",++n;t.push(i),i=a}else i+=s}return t.push(i),t};Pe.wrap=function(e,t){return t?t.length===1?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e};Pe.stringify=function(e,t,i){let n=typeof e;if(e===null)return"null";if(e===void 0)return"";if(n==="string")return e;if(n==="number"||n==="function"||n==="symbol")return e.toString();if(n!=="object")return JSON.stringify(e);if(e instanceof Date)return Pe.Template.date(e,t);if(e instanceof Map){let a=[];for(let[r,o]of e.entries())a.push(`${r.toString()} -> ${o.toString()}`);e=a}if(!Array.isArray(e))return e.toString();let s="";for(let a of e)s=s+(s.length?", ":"")+Pe.stringify(a,t,i);return Pe.wrap(s,t.errors.wrap.array)}});var Tr=w(Ar=>{"use strict";var Mn=Z(),vm=gt(),Ft=Sr();Ar.compile=function(e,t){if(typeof e=="string")return Mn(!t,"Cannot set single message string"),new Ft(e);if(Ft.isTemplate(e))return Mn(!t,"Cannot set single message template"),e;Mn(typeof e=="object"&&!Array.isArray(e),"Invalid message options"),t=t?vm(t):{};for(let i in e){let n=e[i];if(i==="root"||Ft.isTemplate(n)){t[i]=n;continue}if(typeof n=="string"){t[i]=new Ft(n);continue}Mn(typeof n=="object"&&!Array.isArray(n),"Invalid message for",i);let s=i;t[s]=t[s]||{};for(i in n){let a=n[i];if(i==="root"||Ft.isTemplate(a)){t[s][i]=a;continue}Mn(typeof a=="string","Invalid message for",i,"in",s),t[s][i]=new Ft(a)}}return t};Ar.merge=function(e,t){if(!e)return Ar.compile(t);if(!t)return e;if(typeof t=="string")return new Ft(t);if(Ft.isTemplate(t))return t;let i=vm(e);for(let n in t){let s=t[n];if(n==="root"||Ft.isTemplate(s)){i[n]=s;continue}if(typeof s=="string"){i[n]=new Ft(s);continue}Mn(typeof s=="object"&&!Array.isArray(s),"Invalid message for",n);let a=n;i[a]=i[a]||{};for(n in s){let r=s[n];if(n==="root"||Ft.isTemplate(r)){i[a][n]=r;continue}Mn(typeof r=="string","Invalid message for",n,"in",a),i[a][n]=new Ft(r)}}return i}});var ve=w(ye=>{"use strict";var qc=Z(),A_=xr(),T_=um(),jc,Rc,C_={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};ye.version=T_.version;ye.defaults={abortEarly:!0,allowUnknown:!1,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1};ye.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")};ye.assertOptions=function(e,t,i="Options"){qc(e&&typeof e=="object"&&!Array.isArray(e),"Options must be of type object");let n=Object.keys(e).filter(s=>!t.includes(s));qc(n.length===0,`${i} contain unknown keys: ${n}`)};ye.checkPreferences=function(e){Rc=Rc||mm();let t=Rc.preferences.validate(e);if(t.error)throw new A_([t.error.details[0].message])};ye.compare=function(e,t,i){switch(i){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}};ye.default=function(e,t){return e===void 0?t:e};ye.isIsoDate=function(e){return C_.isoDate.test(e)};ye.isNumber=function(e){return typeof e=="number"&&!isNaN(e)};ye.isResolvable=function(e){return e?e[ye.symbols.ref]||e[ye.symbols.template]:!1};ye.isSchema=function(e,t={}){return!!(e&&e[ye.symbols.any])};ye.limit=function(e){return Number.isSafeInteger(e)&&e>=0};ye.preferences=function(e,t){jc=jc||Tr(),e=e||{},t=t||{};let i=Object.assign({},e,t);return t.errors&&e.errors&&(i.errors=Object.assign({},e.errors,t.errors),i.errors.wrap=Object.assign({},e.errors.wrap,t.errors.wrap)),t.messages&&(i.messages=jc.compile(t.messages,e.messages)),delete i[ye.symbols.prefs],i};ye.tryWithPath=function(e,t,i={}){try{return e()}catch(n){throw n.path!==void 0?n.path=t+"."+n.path:n.path=t,i.append&&(n.message=`${n.message} (${n.path})`),n}};ye.validateArg=function(e,t,{assert:i,message:n}){if(ye.isSchema(i)){let s=i.validate(e);return s.error?s.error.message:void 0}else if(!i(e))return t?`${t} ${n}`:n};ye.verifyFlat=function(e,t){for(let i of e)qc(!Array.isArray(i),"Method no longer accepts array arguments:",t)}});var Dn=w(an=>{"use strict";var Ae=Z(),ti=ve(),fs=nn(),sn={};an.schema=function(e,t,i={}){ti.assertOptions(i,["appendPath","override"]);try{return sn.schema(e,t,i)}catch(n){throw i.appendPath&&n.path!==void 0&&(n.message=`${n.message} (${n.path})`),n}};sn.schema=function(e,t,i){Ae(t!==void 0,"Invalid undefined schema"),Array.isArray(t)&&(Ae(t.length,"Invalid empty array schema"),t.length===1&&(t=t[0]));let n=(s,...a)=>i.override!==!1?s.valid(e.override,...a):s.valid(...a);if(sn.simple(t))return n(e,t);if(typeof t=="function")return e.custom(t);if(Ae(typeof t=="object","Invalid schema content:",typeof t),ti.isResolvable(t))return n(e,t);if(ti.isSchema(t))return t;if(Array.isArray(t)){for(let s of t)if(!sn.simple(s))return e.alternatives().try(...t);return n(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?n(e.date(),t):(Ae(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))};an.ref=function(e,t){return fs.isRef(e)?e:fs.create(e,t)};an.compile=function(e,t){let i=t&&t[ti.symbols.any];return i?(Ae(i.version===ti.version,"Cannot mix different versions of joi schemas:",i.version,ti.version),t):an.schema(e,t,{appendPath:!0})};sn.simple=function(e){return e===null||["boolean","string","number"].includes(typeof e)};an.when=function(e,t,i){if(i===void 0&&(Ae(t&&typeof t=="object","Missing options"),i=t,t=fs.create(".")),Array.isArray(i)&&(i={switch:i}),ti.assertOptions(i,["is","not","then","otherwise","switch","break"]),ti.isSchema(t))return Ae(i.is===void 0,'"is" can not be used with a schema condition'),Ae(i.not===void 0,'"not" can not be used with a schema condition'),Ae(i.switch===void 0,'"switch" can not be used with a schema condition'),sn.condition(e,{is:t,then:i.then,otherwise:i.otherwise,break:i.break});if(Ae(fs.isRef(t)||typeof t=="string","Invalid condition:",t),Ae(i.not===void 0||i.is===void 0,'Cannot combine "is" with "not"'),i.switch===void 0){let s=i;i.not!==void 0&&(s={is:i.not,then:i.otherwise,otherwise:i.then,break:i.break});let a=s.is!==void 0?e.$_compile(s.is):e.$_root.invalid(null,!1,0,"").required();return Ae(s.then!==void 0||s.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),Ae(s.break===void 0||s.then===void 0||s.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),i.is!==void 0&&!fs.isRef(i.is)&&!ti.isSchema(i.is)&&(a=a.required()),sn.condition(e,{ref:an.ref(t),is:a,then:s.then,otherwise:s.otherwise,break:s.break})}Ae(Array.isArray(i.switch),'"switch" must be an array'),Ae(i.is===void 0,'Cannot combine "switch" with "is"'),Ae(i.not===void 0,'Cannot combine "switch" with "not"'),Ae(i.then===void 0,'Cannot combine "switch" with "then"');let n={ref:an.ref(t),switch:[],break:i.break};for(let s=0;s<i.switch.length;++s){let a=i.switch[s],r=s===i.switch.length-1;ti.assertOptions(a,r?["is","then","otherwise"]:["is","then"]),Ae(a.is!==void 0,'Switch statement missing "is"'),Ae(a.then!==void 0,'Switch statement missing "then"');let o={is:e.$_compile(a.is),then:e.$_compile(a.then)};if(!fs.isRef(a.is)&&!ti.isSchema(a.is)&&(o.is=o.is.required()),r){Ae(i.otherwise===void 0||a.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');let c=i.otherwise!==void 0?i.otherwise:a.otherwise;c!==void 0&&(Ae(n.break===void 0,"Cannot specify both otherwise and break"),o.otherwise=e.$_compile(c))}n.switch.push(o)}return n};sn.condition=function(e,t){for(let i of["then","otherwise"])t[i]===void 0?delete t[i]:t[i]=e.$_compile(t[i]);return t}});var ym=w(bm=>{"use strict";var j_=gt(),R_=ve(),Bn={annotations:Symbol("annotations")};bm.error=function(e){if(!this._original||typeof this._original!="object")return this.details[0].message;let t=e?"":"\x1B[31m",i=e?"":"\x1B[41m",n=e?"":"\x1B[0m",s=j_(this._original);for(let o=this.details.length-1;o>=0;--o){let c=o+1,l=this.details[o],p=l.path,u=s;for(let d=0;;++d){let m=p[d];if(R_.isSchema(u)&&(u=u.clone()),d+1<p.length&&typeof u[m]!="string")u=u[m];else{let f=u[Bn.annotations]||{errors:{},missing:{}};u[Bn.annotations]=f;let x=m||l.context.key;u[m]!==void 0?(f.errors[x]=f.errors[x]||[],f.errors[x].push(c)):f.missing[x]=c;break}}}let a={key:/_\$key\$_([, \d]+)_\$end\$_"/g,missing:/"_\$miss\$_([^|]+)\|(\d+)_\$end\$_": "__missing__"/g,arrayIndex:/\s*"_\$idx\$_([, \d]+)_\$end\$_",?\n(.*)/g,specials:/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)]"/g},r=Bn.safeStringify(s,2).replace(a.key,(o,c)=>`" ${t}[${c}]${n}`).replace(a.missing,(o,c,l)=>`${i}"${c}"${n}${t} [${l}]: -- missing --${n}`).replace(a.arrayIndex,(o,c,l)=>`
${l} ${t}[${c}]${n}`).replace(a.specials,(o,c)=>c);r=`${r}
${t}`;for(let o=0;o<this.details.length;++o){let c=o+1;r=`${r}
[${c}] ${this.details[o].message}`}return r=r+n,r};Bn.safeStringify=function(e,t){return JSON.stringify(e,Bn.serializer(),t)};Bn.serializer=function(){let e=[],t=[],i=(n,s)=>t[0]===s?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(s)).join(".")+"]";return function(n,s){if(t.length>0){let a=t.indexOf(this);~a?(t.length=a+1,e.length=a+1,e[a]=n):(t.push(this),e.push(n)),~t.indexOf(s)&&(s=i.call(this,n,s))}else t.push(s);if(s){let a=s[Bn.annotations];if(a){if(Array.isArray(s)){let r=[];for(let o=0;o<s.length;++o)a.errors[o]&&r.push(`_$idx$_${a.errors[o].sort().join(", ")}_$end$_`),r.push(s[o]);s=r}else{for(let r in a.errors)s[`${r}_$key$_${a.errors[r].sort().join(", ")}_$end$_`]=s[r],s[r]=void 0;for(let r in a.missing)s[`_$miss$_${r}|${a.missing[r]}_$end$_`]="__missing__"}return s}}return s===1/0||s===-1/0||Number.isNaN(s)||typeof s=="function"||typeof s=="symbol"?"["+s.toString()+"]":s}}});var zn=w(Oe=>{"use strict";var q_=ym(),P_=ve(),O_=Sr();Oe.Report=class{constructor(e,t,i,n,s,a,r){if(this.code=e,this.flags=n,this.messages=s,this.path=a.path,this.prefs=r,this.state=a,this.value=t,this.message=null,this.local=i||{},this.local.label=Oe.label(this.flags,this.state,this.prefs,this.messages),this.value!==void 0&&!this.local.hasOwnProperty("value")&&(this.local.value=this.value),this.path.length){let o=this.path[this.path.length-1];typeof o!="object"&&(this.local.key=o)}}toString(){if(this.message)return this.message;let e=this.code;if(!this.prefs.errors.render)return this.code;let t=this._template(this.prefs.messages)||this._template(this.messages);return t===void 0?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e){return Oe.template(this.value,e,this.code,this.state,this.prefs)}};Oe.path=function(e){let t="";for(let i of e)typeof i!="object"&&(typeof i=="string"?(t&&(t+="."),t+=i):t+=`[${i}]`);return t};Oe.template=function(e,t,i,n,s){if(O_.isTemplate(t))return i!=="root"?t:null;let a=s.errors.language;return P_.isResolvable(a)&&(a=a.resolve(e,n,s)),a&&t[a]&&t[a][i]!==void 0?t[a][i]:t[i]};Oe.label=function(e,t,i,n){if(!i.errors.label)return"";let s=t.path;i.errors.label==="key"&&t.path.length>1&&(s=t.path.slice(-1));let a=Oe.path(s);return a||Oe.template(null,i.messages,"root",t,i)||Oe.template(null,n,"root",t,i)||"value"};Oe.process=function(e,t,i){if(!e)return null;let{override:n,message:s,details:a}=Oe.details(e);if(n)return n;if(i.errors.stack)return new Oe.ValidationError(s,a,t);let r=Error.stackTraceLimit;Error.stackTraceLimit=0;let o=new Oe.ValidationError(s,a,t);return Error.stackTraceLimit=r,o};Oe.details=function(e,t={}){let i=[],n=[];for(let s of e){if(s instanceof Error){if(t.override!==!1)return{override:s};let r=s.toString();i.push(r),n.push({message:r,type:"override",context:{error:s}});continue}let a=s.toString();i.push(a),n.push({message:a,path:s.path.filter(r=>typeof r!="object"),type:s.code,context:s.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:n}};Oe.ValidationError=class extends Error{constructor(e,t,i){super(e),this._original=i,this.details=t}static isError(e){return e instanceof Oe.ValidationError}};Oe.ValidationError.prototype.isJoi=!0;Oe.ValidationError.prototype.name="ValidationError";Oe.ValidationError.prototype.annotate=q_.error});var _m=w(wm=>{"use strict";var gs=Z(),I_=gt(),$_=ve(),N_=Tr();wm.type=function(e,t){let i=Object.getPrototypeOf(e),n=I_(i),s=e._assign(Object.create(n)),a=Object.assign({},t);delete a.base,n._definition=a;let r=i._definition||{};a.messages=N_.merge(r.messages,a.messages),a.properties=Object.assign({},r.properties,a.properties),s.type=a.type,a.flags=Object.assign({},r.flags,a.flags);let o=Object.assign({},r.terms);if(a.terms)for(let l in a.terms){let p=a.terms[l];gs(s.$_terms[l]===void 0,"Invalid term override for",a.type,l),s.$_terms[l]=p.init,o[l]=p}a.terms=o,a.args||(a.args=r.args),a.coerce&&(typeof a.coerce=="function"&&(a.coerce={method:a.coerce}),a.coerce.from&&!Array.isArray(a.coerce.from)&&(a.coerce={method:a.coerce.method,from:[].concat(a.coerce.from)})),a.coerce=a.coerce||r.coerce,a.validate=a.validate||r.validate;let c=Object.assign({},r.rules);if(a.rules)for(let l in a.rules){let p=a.rules[l];gs(typeof p=="object","Invalid rule definition for",a.type,l);let u=p.method;if(u&&(gs(!n[l],"Rule conflict in",a.type,l),n[l]=u),gs(!c[l],"Rule conflict in",a.type,l),c[l]=p,p.alias){let d=[].concat(p.alias);for(let m of d)n[m]=p.method}p.args&&(p.argsByName=new Map,p.args=p.args.map(d=>(typeof d=="string"&&(d={name:d}),gs(!p.argsByName.has(d.name),"Duplicated argument name",d.name),p.argsByName.set(d.name,d),d)))}if(a.rules=c,a.overrides){n._super=i,s.$_super={};for(let l in a.overrides)gs(i[l],"Cannot override missing",l),a.overrides[l][$_.symbols.parent]=i[l],s.$_super[l]=i[l].bind(s);Object.assign(n,a.overrides)}return a.cast=Object.assign({},r.cast,a.cast),a.rebuild=a.rebuild||r.rebuild,s}});var km=w(Pc=>{"use strict";var Un=Z(),Em=ve(),F_=nn(),rn={};Pc.Ids=rn.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){let e=new rn.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(let[t,i]of e._byId.entries())Un(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,i);for(let[t,i]of e._byKey.entries())Un(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,i)}reach(e,t=[]){let i=e[0],n=this._get(i);Un(n,"Schema does not contain path",[...t,...e].join("."));let s=e.slice(1);return s.length?n.schema._ids.reach(s,[...t,i]):n.schema}register(e,{key:t}={}){if(!e||!Em.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);let i=e._flags.id;if(i){let n=this._byId.get(i);Un(!n||n.schema===e,"Cannot add different schemas with the same id:",i),Un(!this._byKey.has(i),"Schema id conflicts with existing key:",i),this._byId.set(i,{schema:e,id:i})}t&&(Un(!this._byKey.has(t),"Schema already contains key:",t),Un(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_get(e){return this._byId.get(e)||this._byKey.get(e)}};Pc.schema=function(e,t){let i;for(let n in e._flags){if(n[0]==="_")continue;let s=rn.scan(e._flags[n],{source:"flags",name:n},t);s!==void 0&&(i=i||e.clone(),i._flags[n]=s)}for(let n=0;n<e._rules.length;++n){let s=e._rules[n],a=rn.scan(s.args,{source:"rules",name:s.name},t);if(a!==void 0){i=i||e.clone();let r=Object.assign({},s);r.args=a,i._rules[n]=r,i._singleRules.get(s.name)===s&&i._singleRules.set(s.name,r)}}for(let n in e.$_terms){if(n[0]==="_")continue;let s=rn.scan(e.$_terms[n],{source:"terms",name:n},t);s!==void 0&&(i=i||e.clone(),i.$_terms[n]=s)}return i};rn.scan=function(e,t,i,n,s){let a=n||[];if(e===null||typeof e!="object")return;let r;if(Array.isArray(e)){for(let o=0;o<e.length;++o){let c=t.name==="keys"&&e[o].key,l=rn.scan(e[o],t,i,[o,...a],c);l!==void 0&&(r=r||e.slice(),r[o]=l)}return r}if(i.schema!==!1&&Em.isSchema(e)||i.ref!==!1&&F_.isRef(e))return i.each(e,{...t,path:a,key:s});for(let o in e){if(o[0]==="_")continue;let c=rn.scan(e[o],t,i,[o,...a],s);c!==void 0&&(r=r||Object.assign({},e),r[o]=c)}return r}});var Tm=w((x6,Am)=>{"use strict";var L_=gt(),Sm=en(),M_=ve(),gi={value:Symbol("value")};Am.exports=gi.State=class{constructor(e,t,i){this.path=e,this.ancestors=t,this.mainstay=i.mainstay,this.schemas=i.schemas}localize(e,t=null,i=null){let n=new gi.State(e,t,this);return i&&n.schemas&&(n.schemas=[gi.schemas(i),...n.schemas]),n}nest(e){let t=new gi.State(this.path,this.ancestors,this);return t.schemas=t.schemas&&[gi.schemas(e),...t.schemas],t}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new gi.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=L_(this.mainstay.shadow.node(this.path)))}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0)}};gi.schemas=function(e){return M_.isSchema(e)?{schema:e}:e};gi.Shadow=class{constructor(){this._values=null}set(e,t,i){if(!e.length||i==="strip"&&typeof e[e.length-1]=="number")return;this._values=this._values||new Map;let n=this._values;for(let s=0;s<e.length;++s){let a=e[s],r=n.get(a);r||(r=new Map,n.set(a,r)),n=r}n[gi.value]=t}get(e){let t=this.node(e);if(t)return t[gi.value]}node(e){if(this._values)return Sm(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;let i=e.slice(0,-1),n=e[e.length-1],s=Sm(this._values,i,{iterables:!0});if(t){s.set(n,t);return}s&&s.delete(n)}}});var jm=w(Cr=>{"use strict";var D_=Z(),Cm=gt(),lt=ve(),Oc=zn(),B_=Tm(),te={result:Symbol("result")};Cr.entry=function(e,t,i){let n=lt.defaults;i&&(n=lt.preferences(lt.defaults,i));let s=te.entry(e,t,n),a={value:s.value};return s.error&&(a.error=s.error),a};te.entry=function(e,t,i){let s={links:t._ids._schemaChain?new Map:null},a=t._ids._schemaChain?[{schema:t}]:null,r=new B_([],[],{mainstay:s,schemas:a}),o=Cr.validate(e,t,r,i),c=Oc.process(o.errors,e,i);return{value:o.value,error:c,mainstay:s}};Cr.validate=function(e,t,i,n,s={}){t.$_terms.whens&&(t=t._generate(e,i,n).schema),t._preferences&&(n=te.prefs(t,n));let r={original:e,prefs:n,schema:t,state:i,error:(u,d,m)=>t.$_createError(u,e,d,m||i,n),errorsArray:te.errorsArray,message:(u,d)=>t.$_createError("custom",e,d,i,n,{messages:u})},o=t._definition;if(o.coerce&&e!==void 0&&n.convert&&(!o.coerce.from||o.coerce.from.includes(typeof e))){let u=o.coerce.method(e,r);if(u){if(u.errors)return te.finalize(u.value,[].concat(u.errors),r);e=u.value}}let c=t._flags.empty;c&&c.$_match(te.trim(e,t),i.nest(c),lt.defaults)&&(e=void 0);let l=s.presence||t._flags.presence||(t._flags._endedSwitch?null:n.presence);if(e===void 0){if(l==="forbidden")return te.finalize(e,null,r);if(l==="required")return te.finalize(e,[t.$_createError("any.required",e,null,i,n)],r);if(l==="optional"){if(t._flags.default!==lt.symbols.deepDefault)return te.finalize(e,null,r);e={}}}else if(l==="forbidden")return te.finalize(e,[t.$_createError("any.unknown",e,null,i,n)],r);let p=[];if(t._valids){let u=t._valids.get(e,i,n,t._flags.insensitive);if(u)return n.convert&&(e=u.value),te.finalize(e,null,r);if(t._flags.only){let d=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},i,n);if(n.abortEarly)return te.finalize(e,[d],r);p.push(d)}}if(t._invalids&&t._invalids.get(e,i,n,t._flags.insensitive)){let d=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},i,n);if(n.abortEarly)return te.finalize(e,[d],r);p.push(d)}if(o.validate){let u=o.validate(e,r);if(u&&(e=u.value,u.errors)){if(!Array.isArray(u.errors))return p.push(u.errors),te.finalize(e,p,r);if(u.errors.length)return p.push(...u.errors),te.finalize(e,p,r)}}return t._rules.length?te.rules(e,p,r):te.finalize(e,p,r)};te.rules=function(e,t,i){let{schema:n,state:s,prefs:a}=i;for(let r of n._rules){let o=n._definition.rules[r.method];if(o.convert&&a.convert)continue;let c,l=r.args;if(r._resolve.length){l=Object.assign({},l);for(let u of r._resolve){let d=o.argsByName.get(u),m=l[u].resolve(e,s,a),f=d.normalize?d.normalize(m):m,x=lt.validateArg(f,null,d);if(x){c=n.$_createError("any.ref",m,{arg:u,ref:l[u],reason:x},s,a);break}l[u]=f}}c=c||o.validate(e,i,l,r);let p=te.rule(c,r);if(p.errors){if(a.abortEarly)return te.finalize(e,p.errors,i);t.push(...p.errors)}else e=p.value}return te.finalize(e,t,i)};te.rule=function(e,t){return e instanceof Oc.Report?{errors:[e],value:null}:Array.isArray(e)&&e[lt.symbols.errors]?{errors:e,value:null}:{errors:null,value:e}};te.finalize=function(e,t,i){t=t||[];let{schema:n,state:s}=i;if(t.length){let r=te.default("failover",void 0,t,i);r!==void 0&&(e=r,t=[])}if(t.length&&n._flags.error)if(typeof n._flags.error=="function"){t=n._flags.error(t),Array.isArray(t)||(t=[t]);for(let r of t)D_(r instanceof Error||r instanceof Oc.Report,"error() must return an Error object")}else t=[n._flags.error];if(e===void 0&&(e=te.default("default",e,t,i)),n._flags.cast&&e!==void 0){let r=n._definition.cast[n._flags.cast];r.from(e)&&(e=r.to(e,i))}let a={value:e,errors:t.length?t:null};return n._flags.result&&(a.value=n._flags.result==="strip"?void 0:i.original,s.shadow(e,n._flags.result)),a};te.prefs=function(e,t){let i=t===lt.defaults;return i&&e._preferences[lt.symbols.prefs]?e._preferences[lt.symbols.prefs]:(t=lt.preferences(t,e._preferences),i&&(e._preferences[lt.symbols.prefs]=t),t)};te.default=function(e,t,i,n){let{schema:s,state:a,prefs:r}=n,o=s._flags[e];if(r.noDefaults||o===void 0)return t;if(!o)return o;if(typeof o=="function"){let c=o.length?[Cm(a.ancestors[0]),n]:[];try{return o(...c)}catch(l){i.push(s.$_createError(`any.${e}`,null,{error:l},a,r));return}}return typeof o!="object"?o:o[lt.symbols.literal]?o.literal:lt.isResolvable(o)?o.resolve(t,a,r):Cm(o)};te.trim=function(e,t){if(typeof e!="string")return e;let i=t.$_getRule("trim");return!i||!i.args.enabled?e:e.trim()};te.errorsArray=function(){let e=[];return e[lt.symbols.errors]=!0,e}});var $c=w((w6,qm)=>{"use strict";var z_=Z(),Rm=hs(),Ic=ve(),Fi={};qm.exports=Fi.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=Fi.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){if(Ic.isResolvable(e)){this._refs.has(e)||(this._refs.add(e),t&&t.register(e));return}this.has(e,null,null,!1)||(this._values.add(e),typeof e=="string"&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,i){if(e=e||new Fi.Values,t){if(t._override)return t.clone();for(let n of[...t._values,...t._refs])e.add(n)}if(i)for(let n of[...i._values,...i._refs])e.remove(n);return e.length?e:null}remove(e){if(Ic.isResolvable(e)){this._refs.delete(e);return}this._values.delete(e),typeof e=="string"&&this._lowercase.delete(e.toLowerCase())}has(e,t,i,n){return!!this.get(e,t,i,n)}get(e,t,i,n){if(!this.length)return!1;if(this._values.has(e))return{value:e};if(typeof e=="string"&&e&&n){let s=this._lowercase.get(e.toLowerCase());if(s)return{value:s}}if(!this._refs.size&&typeof e!="object")return!1;if(typeof e=="object"){for(let s of this._values)if(Rm(s,e))return{value:s}}if(t)for(let s of this._refs){let a=s.resolve(e,t,i,null,{in:!0});if(a===void 0)continue;let r=!s.in||typeof a!="object"?[a]:Array.isArray(a)?a:Object.keys(a);for(let o of r)if(typeof o==typeof e){if(n&&e&&typeof e=="string"){if(o.toLowerCase()===e.toLowerCase())return{value:o,ref:s}}else if(Rm(o,e))return{value:o,ref:s}}}return!1}override(){this._override=!0}values(e){if(e&&e.display){let t=[];for(let i of[...this._values,...this._refs])i!==void 0&&t.push(i);return t}return Array.from([...this._values,...this._refs])}clone(){let e=new Fi.Values(this._values,this._refs);return e._override=this._override,e}concat(e){z_(!e._override,"Cannot concat override set of values");let t=new Fi.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}};Fi.Values.prototype[Ic.symbols.values]=!0;Fi.Values.prototype.slice=Fi.Values.prototype.clone;Fi.lowercases=function(e){let t=new Map;if(e)for(let i of e)typeof i=="string"&&t.set(i.toLowerCase(),i);return t}});var Nm=w((E6,$m)=>{"use strict";var pe=Z(),U_=gt(),Pm=hs(),Nc=br(),ze=ve(),Lc=Dn(),H_=zn(),V_=_m(),K_=Tr(),Om=km(),Im=nn(),Fc=jm(),jr=$c(),Ue={};Ue.Base=class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._ids=new Om.Ids,this._preferences=null,this._refs=new Im.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={whens:{}}}allow(...e){return ze.verifyFlat(e,"allow"),this._values(e,"_valids")}cast(e){return pe(e===!1||typeof e=="string","Invalid to value"),pe(e===!1||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",e===!1?void 0:e)}default(e,t){return this._default("default",e,t)}empty(e){let t=this.clone();return e!==void 0&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return pe(e,"Missing error"),pe(e instanceof Error||typeof e=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",e)}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(pe(typeof e=="string","id must be a non-empty string"),pe(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}only(e=!0){return pe(typeof e=="boolean","Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){pe(e,"Missing preferences"),pe(e.context===void 0,"Cannot override context"),ze.checkPreferences(e);let t=this.clone();return t._preferences=ze.preferences(t._preferences,e),t}presence(e){return pe(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}required(){return this.presence("required")}strict(e){let t=this.clone(),i=e===void 0?!1:!e;return t._preferences=ze.preferences(t._preferences,{convert:i}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}valid(...e){ze.verifyFlat(e,"valid");let t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(e,t){let i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);let n=Lc.when(i,e,t);if(!["any","link"].includes(i.type)){let s=n.is?[n]:n.switch;for(let a of s)pe(!a.then||a.then.type==="any"||a.then.type===i.type,"Cannot combine",i.type,"with",a.then?.type),pe(!a.otherwise||a.otherwise.type==="any"||a.otherwise.type===i.type,"Cannot combine",i.type,"with",a.otherwise?.type)}return i.$_terms.whens.push(n),i.$_mutateRebuild()}clone(){let e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){pe(ze.isSchema(e),"Invalid schema object"),pe(this.type==="any"||e.type==="any"||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type);let t=this.clone();if(this.type==="any"&&e.type!=="any"){let i=e.clone();for(let n of Object.keys(t))n!=="type"&&(i[n]=t[n]);t=i}t._ids.concat(e._ids),t._refs.register(e,Im.toSibling),t._preferences=t._preferences?ze.preferences(t._preferences,e._preferences):e._preferences,t._valids=jr.merge(t._valids,e._valids,e._invalids),t._invalids=jr.merge(t._invalids,e._invalids,e._valids);for(let i of e._singleRules.keys())t._singleRules.has(i)&&(t._rules=t._rules.filter(n=>n.name!==i),t._singleRules.delete(i));for(let i of e._rules)e._definition.rules[i.method].multi||t._singleRules.set(i.name,i),t._rules.push(i);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);let i=Object.assign({},e._flags);delete i.empty,Nc(t._flags,i)}else if(e._flags.empty){t._flags.empty=e._flags.empty;let i=Object.assign({},e._flags);delete i.empty,Nc(t._flags,i)}else Nc(t._flags,e._flags);for(let i in e.$_terms){let n=e.$_terms[i];if(!n){t.$_terms[i]||(t.$_terms[i]=n);continue}if(!t.$_terms[i]){t.$_terms[i]=n.slice();continue}t.$_terms[i]=t.$_terms[i].concat(n)}return t.$_mutateRebuild()}validate(e,t){return Fc.entry(e,this,t)}validateAsync(e,t){let i=this.validate(e,t);if(i.error)throw i.error;return i.value}$_addRule(e){typeof e=="string"&&(e={name:e}),pe(e&&typeof e=="object","Invalid options"),pe(e.name&&typeof e.name=="string","Invalid rule name");for(let a in e)pe(a[0]!=="_","Cannot set private rule properties");let t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;let i=this._definition.rules[t.method],n=t.args;pe(i,"Unknown rule",t.method);let s=this.clone();if(n){pe(Object.keys(n).length===1||Object.keys(n).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(let a in n){let r=n[a];if(r===void 0){delete n[a];continue}if(i.argsByName){let o=i.argsByName.get(a);if(o.ref&&ze.isResolvable(r))t._resolve.push(a),s.$_mutateRegister(r);else if(o.normalize&&(r=o.normalize(r),n[a]=r),o.assert){let c=ze.validateArg(r,a,o);pe(!c,c,"or reference")}}n[a]=r}}return i.multi||(s._ruleRemove(t.name),s._singleRules.set(t.name,t)),i.priority?s._rules.unshift(t):s._rules.push(t),s}$_compile(e,t){return Lc.schema(this.$_root,e,t)}$_createError(e,t,i,n,s,a={}){let r=a.flags!==!1?this._flags:{},o=a.messages?K_.merge(this._definition.messages,a.messages):this._definition.messages;return new H_.Report(e,t,i,r,o,n,s)}$_getRule(e){return this._singleRules.get(e)}$_match(e,t,i,n){i=Object.assign({},i),i.abortEarly=!0,i._externals=!1,t.snapshot();let s=!Fc.validate(e,this,t,i,n).errors;return t.restore(),s}$_modify(e){return ze.assertOptions(e,["each","once","ref","schema"]),Om.schema(this,e)||this}$_mutateRebuild(){this._refs.reset(),this._ids.reset();let e=(t,{source:i,name:n,path:s,key:a})=>{let r=this._definition[i][n]?.register;r!==!1&&this.$_mutateRegister(t,{family:r,key:a})};return this.$_modify({each:e}),this._definition.rebuild&&this._definition.rebuild(this),this}$_mutateRegister(e,{family:t,key:i}={}){this._refs.register(e,t),this._ids.register(e,{key:i})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t,i={}){let n=this._definition.flags[e]||{};if(Pm(t,n.default)&&(t=void 0),Pm(t,this._flags[e]))return this;let s=i.clone!==!1?this.clone():this;return t!==void 0?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],s}$_parent(e,...t){return this[e][ze.symbols.parent].call(this,...t)}$_validate(e,t,i){return Fc.validate(e,this,t,i)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids?.clone(),e._invalids=this._invalids?.clone(),e._rules=this._rules.slice(),e._singleRules=U_(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(let t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(let t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_default(e,t,i={}){return ze.assertOptions(i,"literal"),pe(t!==void 0,"Missing",e,"value"),pe(typeof t=="function"||!i.literal,"Only function value supports literal option"),typeof t=="function"&&i.literal&&(t={[ze.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_extend(e){return pe(!e.base,"Cannot extend type with another base"),V_.type(this,e)}_generate(e,t,i){if(!this.$_terms.whens)return{schema:this};let n=[],s=[];for(let o=0;o<this.$_terms.whens.length;++o){let c=this.$_terms.whens[o];if(c.concat){n.push(c.concat),s.push(`${o}.concat`);continue}let l=c.ref?c.ref.resolve(e,t,i):e,p=c.is?[c]:c.switch,u=s.length;for(let d=0;d<p.length;++d){let{is:m,then:f,otherwise:x}=p[d],E=`${o}${c.switch?"."+d:""}`;if(m.$_match(l,t.nest(m,`${E}.is`),i)){if(f){let j=t.localize([...t.path,`${E}.then`],t.ancestors,t.schemas),{schema:q,id:S}=f._generate(e,j,i);n.push(q),s.push(`${E}.then${S?`(${S})`:""}`);break}}else if(x){let j=t.localize([...t.path,`${E}.otherwise`],t.ancestors,t.schemas),{schema:q,id:S}=x._generate(e,j,i);n.push(q),s.push(`${E}.otherwise${S?`(${S})`:""}`);break}}if(c.break&&s.length>u)break}let a=s.join(", ");if(!a)return{schema:this};if(this.$_temp.whens[a])return{schema:this.$_temp.whens[a],id:a};let r=this;this._definition.generate&&(r=this._definition.generate(this,e,t,i));for(let o of n)r=r.concat(o);return this.$_temp.whens[a]=r,{schema:r,id:a}}_ruleRemove(e){if(!this._singleRules.has(e))return this;this._singleRules.delete(e);let t=[];for(let i=0;i<this._rules.length;++i){let n=this._rules[i];n.name!==e&&t.push(n)}this._rules=t}_values(e,t){ze.verifyFlat(e,t.slice(1,-1));let i=this.clone(),n=e[0]===ze.symbols.override;if(n&&(e=e.slice(1)),!i[t]&&e.length?i[t]=new jr:n&&(i[t]=e.length?new jr:null,i.$_mutateRebuild()),!i[t])return i;n&&i[t].override();for(let s of e){pe(s!==void 0,"Cannot call allow/valid/invalid with undefined"),pe(s!==ze.symbols.override,"Override must be the first value");let a=t==="_invalids"?"_valids":"_invalids";i[a]&&(i[a].remove(s),i[a].length||(pe(t==="_valids"||!i._flags.only,"Setting invalid value",s,"leaves schema rejecting all values due to previous valid rule"),i[a]=null)),i[t].add(s,i._refs)}return i}};Ue.Base.prototype[ze.symbols.any]={version:ze.version,compile:Lc.compile,root:"$_root"};Ue.Base.prototype.isImmutable=!0;Ue.Base.prototype.deny=Ue.Base.prototype.invalid;Ue.Base.prototype.disallow=Ue.Base.prototype.invalid;Ue.Base.prototype.equal=Ue.Base.prototype.valid;Ue.Base.prototype.exist=Ue.Base.prototype.required;Ue.Base.prototype.not=Ue.Base.prototype.invalid;Ue.Base.prototype.options=Ue.Base.prototype.prefs;Ue.Base.prototype.preferences=Ue.Base.prototype.prefs;$m.exports=new Ue.Base});var Lt=w((S6,Fm)=>{"use strict";var Mc=Z(),W_=Nm(),G_=ve();Fm.exports=W_._extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return Mc(typeof e=="function","Method must be a function"),Mc(t===void 0||t&&typeof t=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,{method:i}){try{return i(e,t)}catch(n){return t.error("any.custom",{error:n})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){Mc(G_.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");let t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":"{{#label}} must be one of {{#valids}}","any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})});var Bm=w((A6,Dm)=>{"use strict";var Hn=Z(),J_=Lt(),Lm=ve(),Q_=Dn(),Mm=zn(),Y_=nn(),xs={};Dm.exports=J_._extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:Y_.toSibling}},args(e,...t){return t.length===1&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t)},validate(e,t){let{schema:i,error:n,state:s,prefs:a}=t;if(i._flags.match){let o=0,c;for(let l=0;l<i.$_terms.matches.length;++l){let p=i.$_terms.matches[l],u=s.nest(p.schema,`match.${l}`);u.snapshot();let d=p.schema.$_validate(e,u,a);d.errors?u.restore():(++o,c=d.value)}return o?i._flags.match==="one"?o===1?{value:c}:{errors:n("alternatives.one")}:o===i.$_terms.matches.length?{value:e}:{errors:n("alternatives.all")}:{errors:n("alternatives.any")}}let r=[];for(let o=0;o<i.$_terms.matches.length;++o){let c=i.$_terms.matches[o];if(c.schema){let u=s.nest(c.schema,`match.${o}`);u.snapshot();let d=c.schema.$_validate(e,u,a);if(!d.errors)return d;u.restore(),r.push({schema:c.schema,reports:d.errors});continue}let l=c.ref?c.ref.resolve(e,s,a):e,p=c.is?[c]:c.switch;for(let u=0;u<p.length;++u){let d=p[u],{is:m,then:f,otherwise:x}=d,E=`match.${o}${c.switch?"."+u:""}`;if(m.$_match(l,s.nest(m,`${E}.is`),a)){if(f)return f.$_validate(e,s.nest(f,`${E}.then`),a)}else if(x)return x.$_validate(e,s.nest(x,`${E}.otherwise`),a)}}return xs.errors(r,t)},rules:{conditional:{method(e,t){Hn(!this._flags._endedSwitch,"Unreachable condition"),Hn(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),Hn(t.break===void 0,"Cannot use break option with alternatives conditional");let i=this.clone(),n=Q_.when(i,e,t),s=n.is?[n]:n.switch;for(let a of s)if(a.then&&a.otherwise){i.$_setFlag("_endedSwitch",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(e){if(Hn(["any","one","all"].includes(e),"Invalid alternatives match mode",e),e!=="any")for(let t of this.$_terms.matches)Hn(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(...e){Hn(e.length,"Missing alternative schemas"),Lm.verifyFlat(e,"try"),Hn(!this._flags._endedSwitch,"Unreachable condition");let t=this.clone();for(let i of e)t.$_terms.matches.push({schema:t.$_compile(i)});return t.$_mutateRebuild()}}},rebuild(e){let t=i=>{Lm.isSchema(i)&&i.type==="array"&&e.$_setFlag("_arrayItems",!0,{clone:!1})};e.$_modify({each:t})},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}});xs.errors=function(e,{error:t,state:i}){if(!e.length)return{errors:t("alternatives.any")};if(e.length===1)return{errors:e[0].reports};let n=new Set,s=[];for(let{reports:a,schema:r}of e){if(a.length>1)return xs.unmatched(e,t);let o=a[0];if(!(o instanceof Mm.Report))return xs.unmatched(e,t);if(o.state.path.length!==i.path.length){s.push({type:r.type,report:o});continue}if(o.code==="any.only"){for(let p of o.local.valids)n.add(p);continue}let[c,l]=o.code.split(".");if(l!=="base"){s.push({type:r.type,report:o});continue}n.add(c)}return s.length?s.length===1?{errors:s[0].report}:xs.unmatched(e,t):{errors:t("alternatives.types",{types:[...n]})}};xs.unmatched=function(e,t){let i=[];for(let n of e)i.push(...n.reports);return{errors:t("alternatives.match",Mm.details(i,{override:!1}))}}});var Um=w((T6,zm)=>{"use strict";var pa=Z(),Z_=hs(),X_=en(),e1=Lt(),Mt=ve(),t1=Dn(),Te={};zm.exports=e1._extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[]},ordered:{init:[]},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:i,prefs:n}){if(!Array.isArray(e))return;let s=t.$_getRule("sort");if(s)return Te.sort(t,e,s.args.options,i,n)}},validate(e,{schema:t,error:i}){if(!Array.isArray(e)){if(t._flags.single){let n=[e];return n[Mt.symbols.arraySingle]=!0,{value:n}}return{errors:i("array.base")}}if(t.$_getRule("items"))return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});let t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:i,error:n},{schema:s}){let a=[e,...t.ancestors];for(let r=0;r<e.length;++r){let o=t.localize([...t.path,r],a,s);if(s.$_match(e[r],o,i))return e}return n("array.hasUnknown",null)},multi:!0},items:{method(...e){Mt.verifyFlat(e,"items");let t=this.$_addRule("items");for(let i=0;i<e.length;++i){let n=Mt.tryWithPath(()=>this.$_compile(e[i]),i,{append:!0});t.$_terms.items.push(n)}return t.$_mutateRebuild()},validate(e,{schema:t,error:i,state:n,prefs:s,errorsArray:a}){let r=t.$_terms._requireds.slice(),o=t.$_terms.ordered.slice(),c=[...t.$_terms._inclusions,...r],l=!e[Mt.symbols.arraySingle];delete e[Mt.symbols.arraySingle];let p=a(),u=e.length;for(let d=0;d<u;++d){let m=e[d],f=!1,x=!1,E=l?d:new Number(d),j=[...n.path,E];if(!t._flags.sparse&&m===void 0){if(p.push(i("array.sparse",{key:E,path:j,pos:d,value:void 0},n.localize(j))),s.abortEarly)return p;o.shift();continue}let q=[e,...n.ancestors];for(let P of t.$_terms._exclusions)if(P.$_match(m,n.localize(j,q,P),s,{presence:"ignore"})){if(p.push(i("array.excludes",{pos:d,value:m},n.localize(j))),s.abortEarly)return p;f=!0,o.shift();break}if(f)continue;if(t.$_terms.ordered.length){if(o.length){let P=o.shift(),T=P.$_validate(m,n.localize(j,q,P),s);if(T.errors){if(p.push(...T.errors),s.abortEarly)return p}else if(P._flags.result==="strip")Te.fastSplice(e,d),--d,--u;else if(!t._flags.sparse&&T.value===void 0){if(p.push(i("array.sparse",{key:E,path:j,pos:d,value:void 0},n.localize(j))),s.abortEarly)return p;continue}else e[d]=T.value;continue}else if(!t.$_terms.items.length){if(p.push(i("array.orderedLength",{pos:d,limit:t.$_terms.ordered.length})),s.abortEarly)return p;break}}let S=[],O=r.length;for(let P=0;P<O;++P){let T=n.localize(j,q,r[P]);T.snapshot();let I=r[P].$_validate(m,T,s);if(S[P]=I,!I.errors){if(e[d]=I.value,x=!0,Te.fastSplice(r,P),--P,--O,!t._flags.sparse&&I.value===void 0&&(p.push(i("array.sparse",{key:E,path:j,pos:d,value:void 0},n.localize(j))),s.abortEarly))return p;break}T.restore()}if(x)continue;let K=s.stripUnknown&&!!s.stripUnknown.arrays||!1;O=c.length;for(let P of c){let T,I=r.indexOf(P);if(I!==-1)T=S[I];else{let $=n.localize(j,q,P);if($.snapshot(),T=P.$_validate(m,$,s),!T.errors){P._flags.result==="strip"?(Te.fastSplice(e,d),--d,--u):!t._flags.sparse&&T.value===void 0?(p.push(i("array.sparse",{key:E,path:j,pos:d,value:void 0},n.localize(j))),f=!0):e[d]=T.value,x=!0;break}$.restore()}if(O===1){if(K){Te.fastSplice(e,d),--d,--u,x=!0;break}if(p.push(...T.errors),s.abortEarly)return p;f=!0;break}}if(!f&&t.$_terms._inclusions.length&&!x){if(K){Te.fastSplice(e,d),--d,--u;continue}if(p.push(i("array.includes",{pos:d,value:m},n.localize(j))),s.abortEarly)return p}}return r.length&&Te.fillMissedErrors(t,p,r,e,n,s),o.length&&Te.fillOrderedErrors(t,p,o,e,n,s),p.length?p:e},priority:!0},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,{limit:i},{name:n,operator:s,args:a}){return Mt.compare(e.length,i,s)?e:t.error("array."+n,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:Mt.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){Mt.verifyFlat(e,"ordered");let t=this.$_addRule("items");for(let i=0;i<e.length;++i){let n=Mt.tryWithPath(()=>this.$_compile(e[i]),i,{append:!0});Te.validateSingle(n,t),t.$_mutateRegister(n),t.$_terms.ordered.push(n)}return t.$_mutateRebuild()}},single:{method(e){let t=e===void 0?!0:!!e;return pa(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(e={}){Mt.assertOptions(e,["by","order"]);let t={order:e.order||"ascending"};return e.by&&(t.by=t1.ref(e.by,{ancestor:0}),pa(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,{error:t,state:i,prefs:n,schema:s},{options:a}){let{value:r,errors:o}=Te.sort(s,e,a,i,n);if(o)return o;for(let c=0;c<e.length;++c)if(e[c]!==r[c])return t("array.sort",{order:a.order,by:a.by?a.by.key:"value"});return e},convert:!0},sparse:{method(e){let t=e===void 0?!0:!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e,t={}){pa(!e||typeof e=="function"||typeof e=="string","comparator must be a function or a string"),Mt.assertOptions(t,["ignoreUndefined","separator"]);let i={name:"unique",args:{options:t,comparator:e}};if(e)if(typeof e=="string"){let n=Mt.default(t.separator,".");i.path=n?e.split(n):[e]}else i.comparator=e;return this.$_addRule(i)},validate(e,{state:t,error:i,schema:n},{comparator:s,options:a},{comparator:r,path:o}){let c={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},l=r||Z_,p=a.ignoreUndefined;for(let u=0;u<e.length;++u){let d=o?X_(e[u],o):e[u],m=r?c.custom:c[typeof d];if(pa(m,"Failed to find unique map container for type",typeof d),m instanceof Map){let f=m.entries(),x;for(;!(x=f.next()).done;)if(l(x.value[0],d)){let E=t.localize([...t.path,u],[e,...t.ancestors]),j={pos:u,value:e[u],dupePos:x.value[1],dupeValue:e[x.value[1]]};return o&&(j.path=s),i("array.unique",j,E)}m.set(d,u)}else{if((!p||d!==void 0)&&m[d]!==void 0){let f={pos:u,value:e[u],dupePos:m[d],dupeValue:e[m[d]]};o&&(f.path=s);let x=t.localize([...t.path,u],[e,...t.ancestors]);return i("array.unique",f,x)}m[d]=u}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to(e,t){return new Set(e)}}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(let t of e.$_terms.items)Te.validateSingle(t,e),t._flags.presence==="required"?e.$_terms._requireds.push(t):t._flags.presence==="forbidden"?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(let t of e.$_terms.ordered)Te.validateSingle(t,e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}});Te.fillMissedErrors=function(e,t,i,n,s,a){let r=0;for(let o=0;o<i.length;++o)++r;t.push(e.$_createError("array.includesRequiredUnknowns",n,{unknownMisses:r},s,a))};Te.fillOrderedErrors=function(e,t,i,n,s,a){let r=[];for(let o of i)o._flags.presence==="required"&&r.push(o);r.length&&Te.fillMissedErrors(e,t,r,n,s,a)};Te.fastSplice=function(e,t){let i=t;for(;i<e.length;)e[i++]=e[i];--e.length};Te.validateSingle=function(e,t){(e.type==="array"||e._flags._arrayItems)&&(pa(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))};Te.sort=function(e,t,i,n,s){let a=i.order==="ascending"?1:-1,r=-1*a,o=a,c=(l,p)=>{let u=Te.compare(l,p,r,o);if(u!==null||(i.by&&(l=i.by.resolve(l,n,s),p=i.by.resolve(p,n,s)),u=Te.compare(l,p,r,o),u!==null))return u;let d=typeof l;if(d!==typeof p)throw e.$_createError("array.sort.mismatching",t,null,n,s);if(d!=="number"&&d!=="string")throw e.$_createError("array.sort.unsupported",t,{type:d},n,s);return d==="number"?(l-p)*a:l<p?r:o};try{return{value:t.slice().sort(c)}}catch(l){return{errors:l}}};Te.compare=function(e,t,i,n){return e===t?0:e===void 0?1:t===void 0?-1:e===null?n:t===null?i:null}});var Gm=w((C6,Wm)=>{"use strict";var Hm=Z(),i1=Lt(),Vm=ve(),Km=$c(),Dc={};Dc.isBool=function(e){return typeof e=="boolean"};Wm.exports=i1._extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null},truthy:{init:null}},coerce(e,{schema:t}){if(typeof e!="boolean"){if(typeof e=="string"){let i=t._flags.sensitive?e:e.toLowerCase();e=i==="true"?!0:i==="false"?!1:e}return typeof e!="boolean"&&(e=t.$_terms.truthy?.has(e,null,null,!t._flags.sensitive)||(t.$_terms.falsy?.has(e,null,null,!t._flags.sensitive)?!1:e)),{value:e}}},validate(e,{error:t}){if(typeof e!="boolean")return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...e){Vm.verifyFlat(e,"truthy");let t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new Km;for(let i=0;i<e.length;++i){let n=e[i];Hm(n!==void 0,"Cannot call truthy with undefined"),t.$_terms.truthy.add(n)}return t}},falsy:{method(...e){Vm.verifyFlat(e,"falsy");let t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new Km;for(let i=0;i<e.length;++i){let n=e[i];Hm(n!==void 0,"Cannot call falsy with undefined"),t.$_terms.falsy.add(n)}return t}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:Dc.isBool,to(e,t){return e?1:0}},string:{from:Dc.isBool,to(e,t){return e?"true":"false"}}},messages:{"boolean.base":"{{#label}} must be a boolean"}})});var Zm=w((j6,Ym)=>{"use strict";var Jm=Z(),n1=Lt(),Qm=ve(),s1=Sr(),ii={};ii.isDate=function(e){return e instanceof Date};Ym.exports=n1._extend({type:"date",coerce:{from:["number","string"],method(e,{schema:t}){return{value:ii.parse(e,t._flags.format)||e}}},validate(e,{schema:t,error:i,prefs:n}){if(e instanceof Date&&!isNaN(e.getTime()))return;let s=t._flags.format;return!n.convert||!s||typeof e!="string"?{value:e,errors:i("date.base")}:{value:e,errors:i("date.format",{format:s})}},rules:{compare:{method:!1,validate(e,t,{date:i},{name:n,operator:s,args:a}){let r=i==="now"?Date.now():i.getTime();return Qm.compare(e.getTime(),r,s)?e:t.error("date."+n,{limit:a.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>e==="now"?e:ii.parse(e),assert:e=>e!==null,message:"must have a valid date format"}]},format:{method(e){return Jm(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(e="javascript"){return Jm(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:ii.isDate,to(e,t){return e.getTime()}},string:{from:ii.isDate,to(e,{prefs:t}){return s1.date(e,t)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":"{{#label}} must be in {{#format}} format","date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}"}});ii.parse=function(e,t){if(e instanceof Date)return e;if(typeof e!="string"&&(isNaN(e)||!isFinite(e))||/^\s*$/.test(e))return null;if(t==="iso")return Qm.isIsoDate(e)?ii.date(e.toString()):null;let i=e;if(typeof e=="string"&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if(t==="javascript")return ii.date(1*e);if(t==="unix")return ii.date(1e3*e);if(typeof i=="string")return null}return ii.date(e)};ii.date=function(e){let t=new Date(e);return isNaN(t.getTime())?null:t}});var Bc=w(eh=>{"use strict";var{assert:Vn}=z(),Xm={};eh.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){t=t??{};let i=[].concat(t.before??[]),n=[].concat(t.after??[]),s=t.group??"?",a=t.sort??0;Vn(!i.includes(s),`Item cannot come before itself: ${s}`),Vn(!i.includes("?"),"Item cannot come before unassociated items"),Vn(!n.includes(s),`Item cannot come after itself: ${s}`),Vn(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(let r of e){let o={seq:this._items.length,sort:a,before:i,after:n,group:s,node:r};this._items.push(o)}if(!t.manual){let r=this._sort();Vn(r,"item",s!=="?"?`added into group ${s}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(let i of e)if(i)for(let n of i._items)this._items.push(Object.assign({},n));this._items.sort(Xm.mergeSort);for(let i=0;i<this._items.length;++i)this._items[i].seq=i;let t=this._sort();return Vn(t,"merge created a dependencies error"),this.nodes}sort(){let e=this._sort();return Vn(e,"sort created a dependencies error"),this.nodes}_sort(){let e={},t=Object.create(null),i=Object.create(null);for(let o of this._items){let c=o.seq,l=o.group;i[l]=i[l]??[],i[l].push(c),e[c]=o.before;for(let p of o.after)t[p]=t[p]??[],t[p].push(c)}for(let o in e){let c=[];for(let l in e[o]){let p=e[o][l];i[p]=i[p]??[],c.push(...i[p])}e[o]=c}for(let o in t)if(i[o])for(let c of i[o])e[c].push(...t[o]);let n={};for(let o in e){let c=e[o];for(let l of c)n[l]=n[l]??[],n[l].push(o)}let s={},a=[];for(let o=0;o<this._items.length;++o){let c=o;if(n[o]){c=null;for(let l=0;l<this._items.length;++l){if(s[l]===!0)continue;n[l]||(n[l]=[]);let p=n[l].length,u=0;for(let d=0;d<p;++d)s[n[l][d]]&&++u;if(u===p){c=l;break}}}c!==null&&(s[c]=!0,a.push(c))}if(a.length!==this._items.length)return!1;let r={};for(let o of this._items)r[o.seq]=o;this._items=[],this.nodes=[];for(let o of a){let c=r[o];this.nodes.push(c.node),this._items.push(c)}return!0}};Xm.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1});var Uc=w((P6,ih)=>{"use strict";var a1=kc(),Dt=Z(),th=gt(),r1=Bc(),o1=Lt(),tt=ve(),zc=Dn(),c1=zn(),l1=nn(),be={renameDefaults:{alias:!1,multiple:!1,override:!1}};ih.exports=o1._extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null},patterns:{init:null},renames:{init:null}},args(e,t){return e.keys(t)},validate(e,{schema:t,error:i,state:n,prefs:s}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:i("object.base",{type:t.$_property("typeof")})};if(!t.$_terms.renames&&!t.$_terms.dependencies&&!t.$_terms.keys&&!t.$_terms.patterns)return;e=be.clone(e,s);let a=[];if(t.$_terms.renames&&!be.rename(t,e,n,s,a))return{value:e,errors:a};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:a};let r=new Set(Object.keys(e));if(t.$_terms.keys){let o=[e,...n.ancestors];for(let c of t.$_terms.keys){let l=c.key,p=e[l];r.delete(l);let u=n.localize([...n.path,l],o,c),d=c.schema.$_validate(p,u,s);if(d.errors){if(s.abortEarly)return{value:e,errors:d.errors};a.push(...d.errors)}else c.schema._flags.result==="strip"||d.value===void 0&&p!==void 0?delete e[l]:d.value!==void 0&&(e[l]=d.value)}}if(r.size||t._flags._hasPatternMatch){let o=be.unknown(t,e,r,a,n,s);if(o)return o}if(t.$_terms.dependencies)for(let o of t.$_terms.dependencies){if(o.key&&o.key.resolve(e,n,s,null,{shadow:!1})===void 0)continue;let c=be.dependencies[o.rel](t,o,e,n,s);if(c){let l=t.$_createError(c.code,e,c.context,n,s);if(s.abortEarly)return{value:e,errors:l};a.push(l)}}return{value:e,errors:a}},rules:{and:{method(...e){return tt.verifyFlat(e,"and"),be.dependency(this,"and",null,e)}},append:{method(e){return e==null||Object.keys(e).length===0?this:this.keys(e)}},assert:{method(e,t,i){e=zc.ref(e),Dt(i===void 0||typeof i=="string","Message must be a string"),t=this.$_compile(t,{appendPath:!0});let n=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:i}});return n.$_mutateRegister(e),n.$_mutateRegister(t),n},validate(e,{error:t,prefs:i,state:n},{subject:s,schema:a,message:r}){let o=s.resolve(e,n,i),c=s.absolute(n);return a.$_match(o,n.localize(c,[e,...n.ancestors],a),i)?e:t("object.assert",{subject:s,message:r})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return Dt(typeof e=="function","constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate(e,t,{constructor:i,name:n}){return e instanceof i?e:t.error("object.instance",{type:n,value:e})},args:["constructor","name"]},keys:{method(e){Dt(e===void 0||typeof e=="object","Object schema must be a valid object"),Dt(!tt.isSchema(e),"Object schema cannot be a joi schema");let t=this.clone();if(!e)t.$_terms.keys=null;else if(!Object.keys(e).length)t.$_terms.keys=new be.Keys;else{t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter(i=>!e.hasOwnProperty(i.key)):new be.Keys;for(let i in e)tt.tryWithPath(()=>t.$_terms.keys.push({key:i,schema:this.$_compile(e[i])}),i)}return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,{limit:i},{name:n,operator:s,args:a}){return tt.compare(Object.keys(e).length,i,s)?e:t.error("object."+n,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:tt.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return tt.verifyFlat(e,"nand"),be.dependency(this,"nand",null,e)}},or:{method(...e){return tt.verifyFlat(e,"or"),be.dependency(this,"or",null,e)}},oxor:{method(...e){return be.dependency(this,"oxor",null,e)}},pattern:{method(e,t,i={}){let n=e instanceof RegExp;n||(e=this.$_compile(e,{appendPath:!0})),Dt(t!==void 0,"Invalid rule"),tt.assertOptions(i,["fallthrough","matches"]),n&&Dt(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});let s=this.clone();s.$_terms.patterns=s.$_terms.patterns||[];let a={[n?"regex":"schema"]:e,rule:t};return i.matches&&(a.matches=this.$_compile(i.matches),a.matches.type!=="array"&&(a.matches=a.matches.$_root.array().items(a.matches)),s.$_mutateRegister(a.matches),s.$_setFlag("_hasPatternMatch",!0,{clone:!1})),i.fallthrough&&(a.fallthrough=!0),s.$_terms.patterns.push(a),s.$_mutateRegister(t),s}},ref:{method(){return this.$_addRule("ref")},validate(e,t){return l1.isRef(e)?e:t.error("object.refType",{value:e})}},regex:{method(){return this.$_addRule("regex")},validate(e,t){return e instanceof RegExp?e:t.error("object.regex",{value:e})}},rename:{method(e,t,i={}){Dt(typeof e=="string"||e instanceof RegExp,"Rename missing the from argument"),Dt(typeof t=="string","Invalid rename to argument"),Dt(t!==e,"Cannot rename key to same name:",e),tt.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);let n=this.clone();n.$_terms.renames=n.$_terms.renames||[];for(let s of n.$_terms.renames)Dt(s.from!==e,"Cannot rename the same key multiple times");return n.$_terms.renames.push({from:e,to:t,options:a1(be.renameDefaults,i)}),n}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate(e,t,{type:i}){return tt.isSchema(e)&&(i==="any"||e.type===i)?e:t.error("object.schema",{type:i})}},unknown:{method(e){return this.$_setFlag("unknown",e!==!1)}},with:{method(e,t,i={}){return be.dependency(this,"with",e,t,i)}},without:{method(e,t,i={}){return be.dependency(this,"without",e,t,i)}},xor:{method(...e){return tt.verifyFlat(e,"xor"),be.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return e===void 0&&(e=tt.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){let t=new r1.Sorter;for(let i of e.$_terms.keys)tt.tryWithPath(()=>t.add(i,{after:i.schema.$_rootReferences(),group:i.key}),i.key);e.$_terms.keys=new be.Keys(...t.nodes)}},messages:{"object.and":"{{#label}} contains {{#present}} without its required peers {{#missing}}","object.assert":"{{#label}} is invalid because it failed to pass the assertion test","object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":"{{#label}} must have {{#limit}} keys","object.max":"{{#label}} must have less than or equal to {{#limit}} keys","object.min":"{{#label}} must have at least {{#limit}} keys","object.missing":"{{#label}} must contain at least one of {{#peers}}","object.nand":"{{:#main}} must not exist simultaneously with {{#peers}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peers}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#main}} missing required peer {{:#peer}}","object.without":"{{:#main}} conflict with forbidden peer {{:#peer}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peers}}"}});be.clone=function(e,t){if(typeof e=="object"){if(t.nonEnumerables)return th(e,{shallow:!0});let n=Object.create(Object.getPrototypeOf(e));return Object.assign(n,e),n}let i=function(...n){return e.apply(this,n)};return i.prototype=th(e.prototype),Object.defineProperty(i,"name",{value:e.name,writable:!1}),Object.defineProperty(i,"length",{value:e.length,writable:!1}),Object.assign(i,e),i};be.dependency=function(e,t,i,n,s){Dt(i===null||typeof i=="string",t,"key must be a strings"),s||(s=n.length>1&&typeof n[n.length-1]=="object"?n.pop():{}),tt.assertOptions(s,["separator"]),n=[].concat(n);let a=tt.default(s.separator,"."),r=[];for(let c of n)Dt(typeof c=="string",t,"peers must be a string or a reference"),r.push(zc.ref(c,{separator:a,ancestor:0,prefix:!1}));i!==null&&(i=zc.ref(i,{separator:a,ancestor:0,prefix:!1}));let o=e.clone();return o.$_terms.dependencies=o.$_terms.dependencies||[],o.$_terms.dependencies.push(new be.Dependency(t,i,r,n)),o};be.dependencies={and(e,t,i,n,s){let a=[],r=[],o=t.peers.length;for(let c of t.peers)c.resolve(i,n,s,null,{shadow:!1})===void 0?a.push(c.key):r.push(c.key);if(a.length!==o&&r.length!==o)return{code:"object.and",context:{present:r,missing:a}}},nand(e,t,i,n,s){let a=[];for(let c of t.peers)c.resolve(i,n,s,null,{shadow:!1})!==void 0&&a.push(c.key);if(a.length!==t.peers.length)return;let r=t.paths[0],o=t.paths.slice(1);return{code:"object.nand",context:{main:r,peers:o}}},or(e,t,i,n,s){for(let a of t.peers)if(a.resolve(i,n,s,null,{shadow:!1})!==void 0)return;return{code:"object.missing",context:{peers:t.paths}}},oxor(e,t,i,n,s){let a=[];for(let o of t.peers)o.resolve(i,n,s,null,{shadow:!1})!==void 0&&a.push(o.key);if(!a.length||a.length===1)return;let r={peers:t.paths};return r.present=a,{code:"object.oxor",context:r}},with(e,t,i,n,s){for(let a of t.peers)if(a.resolve(i,n,s,null,{shadow:!1})===void 0)return{code:"object.with",context:{main:t.key.key,peer:a.key}}},without(e,t,i,n,s){for(let a of t.peers)if(a.resolve(i,n,s,null,{shadow:!1})!==void 0)return{code:"object.without",context:{main:t.key.key,peer:a.key}}},xor(e,t,i,n,s){let a=[];for(let o of t.peers)o.resolve(i,n,s,null,{shadow:!1})!==void 0&&a.push(o.key);if(a.length===1)return;let r={peers:t.paths};return a.length===0?{code:"object.missing",context:r}:(r.present=a,{code:"object.xor",context:r})}};be.rename=function(e,t,i,n,s){let a={};for(let r of e.$_terms.renames){let o=[],c=typeof r.from!="string";if(!c)Object.prototype.hasOwnProperty.call(t,r.from)&&(t[r.from]!==void 0||!r.options.ignoreUndefined)&&o.push(r);else for(let l in t){if(t[l]===void 0&&r.options.ignoreUndefined||l===r.to)continue;let p=r.from.exec(l);p&&o.push({from:l,to:r.to,match:p})}for(let l of o){let p=l.from,u=l.to;if(!r.options.multiple&&a[u]&&(s.push(e.$_createError("object.rename.multiple",t,{from:p,to:u,pattern:c},i,n)),n.abortEarly)||Object.prototype.hasOwnProperty.call(t,u)&&!r.options.override&&!a[u]&&(s.push(e.$_createError("object.rename.override",t,{from:p,to:u,pattern:c},i,n)),n.abortEarly))return!1;t[p]===void 0?delete t[u]:t[u]=t[p],a[u]=!0,r.options.alias||delete t[p]}}return!0};be.unknown=function(e,t,i,n,s,a){if(e.$_terms.patterns){let o=!1,c=e.$_terms.patterns.map(p=>{if(p.matches)return o=!0,[]}),l=[t,...s.ancestors];for(let p of i){let u=t[p],d=[...s.path,p];for(let m=0;m<e.$_terms.patterns.length;++m){let f=e.$_terms.patterns[m];if(f.regex){if(!f.regex.test(p))continue}else if(!f.schema.$_match(p,s.nest(f.schema,`pattern.${m}`),a))continue;i.delete(p);let x=s.localize(d,l,{schema:f.rule,key:p}),E=f.rule.$_validate(u,x,a);if(E.errors){if(a.abortEarly)return{value:t,errors:E.errors};n.push(...E.errors)}if(f.matches&&c[m].push(p),t[p]=E.value,!f.fallthrough)break}}if(o)for(let p=0;p<c.length;++p){let u=c[p];if(!u)continue;let d=e.$_terms.patterns[p].matches,m=s.localize(s.path,l,d),f=d.$_validate(u,m,a);if(f.errors){let x=c1.details(f.errors,{override:!1});x.matches=u;let E=e.$_createError("object.pattern.match",t,x,s,a);if(a.abortEarly)return{value:t,errors:E};n.push(E)}}}if(!i.size||!e.$_terms.keys&&!e.$_terms.patterns)return;if(a.stripUnknown&&!e._flags.unknown||a.skipFunctions){let o=a.stripUnknown?a.stripUnknown===!0?!0:!!a.stripUnknown.objects:!1;for(let c of i)o?(delete t[c],i.delete(c)):typeof t[c]=="function"&&i.delete(c)}if(!tt.default(e._flags.unknown,a.allowUnknown))for(let o of i){let c=s.localize([...s.path,o],[]),l=e.$_createError("object.unknown",t[o],{child:o},c,a,{flags:!1});if(a.abortEarly)return{value:t,errors:l};n.push(l)}};be.Dependency=class{constructor(e,t,i,n){this.rel=e,this.key=t,this.peers=i,this.paths=n}};be.Keys=class extends Array{concat(e){let t=this.slice(),i=new Map;for(let n=0;n<t.length;++n)i.set(t[n].key,n);for(let n of e){let s=n.key,a=i.get(s);a!==void 0?t[a]={key:s,schema:t[a].schema.concat(n.schema)}:t.push(n)}return t}}});var sh=w(($6,nh)=>{"use strict";var Hc=Z(),p1=Uc();nh.exports=p1._extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return Hc(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate(e,t,{n:i}){return e.length===i?e:t.error("function.arity",{n:i})}},class:{method(){return this.$_addRule("class")},validate(e,t){return/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})}},minArity:{method(e){return Hc(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate(e,t,{n:i}){return e.length>=i?e:t.error("function.minArity",{n:i})}},maxArity:{method(e){return Hc(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate(e,t,{n:i}){return e.length<=i?e:t.error("function.maxArity",{n:i})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})});var rh=w((N6,ah)=>{"use strict";var on=Z(),u1=Lt(),d1=ve(),m1=Dn(),h1=zn(),Li={};ah.exports=u1._extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,register:!1}},args(e,t){return e.ref(t)},validate(e,{schema:t,state:i,prefs:n}){on(t.$_terms.link,"Uninitialized link schema");let s=Li.generate(t,e,i,n),a=t.$_terms.link[0].ref;return s.$_validate(e,i.nest(s,`link:${a.display}:${s.type}`),n)},generate(e,t,i,n){return Li.generate(e,t,i,n)},rules:{ref:{method(e){on(!this.$_terms.link,"Cannot reinitialize schema"),e=m1.ref(e),on(e.type==="value"||e.type==="local","Invalid reference type:",e.type),on(e.type==="local"||e.ancestor==="root"||e.ancestor>0,"Link cannot reference itself");let t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(e){on(this.$_terms.link,"Uninitialized link schema"),on(d1.isSchema(e),"Invalid schema object"),on(e.type!=="link","Cannot merge type link with another link");let t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}}});Li.generate=function(e,t,i,n){let s=i.mainstay.links.get(e);if(s)return s._generate(t,i,n).schema;let a=e.$_terms.link[0].ref,{perspective:r,path:o}=Li.perspective(a,i);Li.assert(r,"which is outside of schema boundaries",a,e,i,n);try{s=o.length?r.$_reach(o):r}catch{Li.assert(!1,"to non-existing schema",a,e,i,n)}return Li.assert(s.type!=="link","which is another link",a,e,i,n),e._flags.relative||i.mainstay.links.set(e,s),s._generate(t,i,n).schema};Li.perspective=function(e,t){if(e.type==="local"){for(let{schema:i,key:n}of t.schemas){if((i._flags.id||n)===e.path[0])return{perspective:i,path:e.path.slice(1)};if(i.$_terms.shared){for(let a of i.$_terms.shared)if(a._flags.id===e.path[0])return{perspective:a,path:e.path.slice(1)}}}return{perspective:null,path:null}}return e.ancestor==="root"?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]?.schema,path:e.path}};Li.assert=function(e,t,i,n,s,a){e||on(!1,`"${h1.label(n._flags,s,a)}" contains link reference "${i.display}" ${t}`)}});var ch=w((F6,oh)=>{"use strict";var Vc=Z(),f1=Lt(),Kc=ve(),Kn={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};oh.exports=f1._extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:i}){let n=e.match(Kn.numberRx);if(!n)return;e=e.trim();let s={value:parseFloat(e)};if(s.value===0&&(s.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(Kn.normalizeExponent(`${s.value/Math.pow(10,n[1])}e${n[1]}`)!==Kn.normalizeExponent(e))return s.errors=i("number.unsafe"),s}else{let a=s.value.toString();if(a.match(/e/i))return s;if(a!==Kn.normalizeDecimal(e))return s.errors=i("number.unsafe"),s}return s}},validate(e,{schema:t,error:i,prefs:n}){if(e===1/0||e===-1/0)return{value:e,errors:i("number.infinity")};if(!Kc.isNumber(e))return{value:e,errors:i("number.base")};let s={value:e};if(n.convert){let a=t.$_getRule("precision");if(a){let r=Math.pow(10,a.args.limit);s.value=Math.round(s.value*r)/r}}return s.value===0&&(s.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(s.errors=i("number.unsafe")),s},rules:{compare:{method:!1,validate(e,t,{limit:i},{name:n,operator:s,args:a}){return Kc.compare(e,i,s)?e:t.error("number."+n,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:Kc.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate(e,t){return Math.trunc(e)-e===0?e:t.error("number.integer")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,t,{base:i},n){return e%i===0?e:t.error("number.multiple",{multiple:n.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>typeof e=="number"&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate(e,t){return Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")}},positive:{method(){return this.sign("positive")}},precision:{method(e){return Vc(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,{limit:i}){let n=e.toString().match(Kn.precisionRx);return Math.max((n[1]?n[1].length:0)-(n[2]?parseInt(n[2],10):0),0)<=i?e:t.error("number.precision",{limit:i,value:e})},convert:!0},sign:{method(e){return Vc(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,t,{sign:i}){return i==="negative"&&e<0||i==="positive"&&e>0?e:t.error(`number.${i}`)}},unsafe:{method(e=!0){return Vc(typeof e=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>typeof e=="number",to(e,t){return e.toString()}}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}});Kn.normalizeExponent=function(e){return e.replace(/E/,"e").replace(/\.(\d*[1-9])?0+e/,".$1e").replace(/\.e/,"e").replace(/e\+/,"e").replace(/^\+/,"").replace(/^(-?)0+([1-9])/,"$1$2")};Kn.normalizeDecimal=function(e){return e=e.replace(/^\+/,"").replace(/\.0+$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([1-9])/,"$1$2"),e.includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),e==="-0"?"0":e}});var ph=w((L6,lh)=>{"use strict";var g1=Uc();lh.exports=g1._extend({type:"object",cast:{map:{from:e=>e&&typeof e=="object",to(e,t){return new Map(Object.entries(e))}}}})});var dh=w((M6,uh)=>{"use strict";var x1=require("url"),He=Z(),v1=_r(),b1=Lt(),xi=ve(),ie={base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"],domainControlRx:/[\x00-\x20@\:\/]/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,finalSegmentAdditionalRx:/[^0-9]/};uh.exports=b1._extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:i,prefs:n}){let s=t.$_getRule("normalize");s&&(e=e.normalize(s.args.form));let a=t.$_getRule("case");a&&(e=a.args.direction==="upper"?e.toLocaleUpperCase():e.toLocaleLowerCase());let r=t.$_getRule("trim");if(r&&r.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(let c of t.$_terms.replacements)e=e.replace(c.pattern,c.replacement);let o=t.$_getRule("hex");if(o&&o.args.options.byteAligned&&e.length%2!==0&&(e=`0${e}`),t.$_getRule("isoDate")){let c=ie.isoDate(e);c&&(e=c)}if(t._flags.truncate){let c=t.$_getRule("max");if(c){let l=c.args.limit;if(xi.isResolvable(l)&&(l=l.resolve(e,i,n),!xi.limit(l)))return{value:e,errors:t.$_createError("any.ref",l,{ref:c.args.limit,arg:"limit",reason:"must be a positive integer"},i,n)};e=e.slice(0,l)}}return{value:e}}},validate(e,{error:t}){if(typeof e!="string")return{value:e,errors:t("string.base")};if(e==="")return{value:e,errors:t("string.empty")}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate(e,t){return/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")}},base64:{method(e={}){return xi.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},He(typeof e.paddingRequired=="boolean","paddingRequired must be boolean"),He(typeof e.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate(e,t,{options:i}){return ie.base64Regex[i.paddingRequired][i.urlSafe].test(e)?e:t.error("string.base64")}},case:{method(e){return He(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate(e,t,{direction:i}){return i==="lower"&&e===e.toLocaleLowerCase()||i==="upper"&&e===e.toLocaleUpperCase()?e:t.error(`string.${i}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let i=e.length,n=0,s=1;for(;i--;){let a=e.charAt(i)*s;n=n+(a-(a>9)*9),s=s^3}return n>0&&n%10===0?e:t.error("string.creditCard")}},dataUri:{method(e={}){return xi.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},He(typeof e.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,{options:i}){let n=e.match(ie.dataUriRegex);return n&&(!n[2]||n[2]!=="base64"||ie.base64Regex[i.paddingRequired].false.test(n[3]))?e:t.error("string.dataUri")}},guid:{alias:"uuid",method(e={}){xi.assertOptions(e,["version","separator"]);let t="";if(e.version){let s=[].concat(e.version);He(s.length>=1,"version must have at least 1 valid version specified");let a=new Set;for(let r=0;r<s.length;++r){let o=s[r];He(typeof o=="string","version at position "+r+" must be a string");let c=ie.guidVersions[o.toLowerCase()];He(c,"version at position "+r+" must be one of "+Object.keys(ie.guidVersions).join(", ")),He(!a.has(c),"version at position "+r+" must not be a duplicate"),t+=c,a.add(c)}}He(ie.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');let i=e.separator===void 0?"[:-]?":e.separator===!0?"[:-]":e.separator===!1?"[]?":`\\${e.separator}`,n=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${i})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:n})},validate(e,t,i,{regex:n}){let s=n.exec(e);return!s||ie.guidBrackets[s[1]]!==s[s.length-1]?t.error("string.guid"):e}},hex:{method(e={}){return xi.assertOptions(e,["byteAligned"]),e={byteAligned:!1,...e},He(typeof e.byteAligned=="boolean","byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate(e,t,{options:i}){return ie.hexRegex.test(e)?i.byteAligned&&e.length%2!==0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate(e,t){return ie.isDomainValid(e)||ie.ipRegex.test(e)?e:t.error("string.hostname")}},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},isoDate:{method(){return this.$_addRule("isoDate")},validate(e,{error:t}){return ie.isoDate(e)?e:t("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate(e,t){return ie.isoDurationRegex.test(e)?e:t.error("string.isoDuration")}},length:{method(e,t){return ie.length(this,"length",e,"=",t)},validate(e,t,{limit:i,encoding:n},{name:s,operator:a,args:r}){let o=n?Buffer.byteLength(e,n):e.length;return xi.compare(o,i,a)?e:t.error("string."+s,{limit:r.limit,value:e,encoding:n})},args:[{name:"limit",ref:!0,assert:xi.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return ie.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return ie.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(e="NFC"){return He(ie.normalizationForms.includes(e),"normalization form must be one of "+ie.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate(e,{error:t},{form:i}){return e===e.normalize(i)?e:t("string.normalize",{value:e,form:i})},convert:!0},pattern:{alias:"regex",method(e,t={}){He(e instanceof RegExp,"regex must be a RegExp"),He(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),typeof t=="string"&&(t={name:t}),xi.assertOptions(t,["invert","name"]);let i=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:i})},validate(e,t,{regex:i,options:n},{errorCode:s}){return i.test(e)^n.invert?e:t.error(s,{name:n.name,regex:i,value:e})},args:["regex","options"],multi:!0},replace:{method(e,t){typeof e=="string"&&(e=new RegExp(v1(e),"g")),He(e instanceof RegExp,"pattern must be a RegExp"),He(typeof t=="string","replacement must be a String");let i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:e,replacement:t}),i}},token:{method(){return this.$_addRule("token")},validate(e,t){return/^\w+$/.test(e)?e:t.error("string.token")}},trim:{method(e=!0){return He(typeof e=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate(e,t,{enabled:i}){return!i||e===e.trim()?e:t.error("string.trim")},convert:!0},truncate:{method(e=!0){return He(typeof e=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:.} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:.} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:.} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:.} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uppercase":"{{#label}} must only contain uppercase characters"}});ie.isoDate=function(e){if(!xi.isIsoDate(e))return null;let t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()};ie.length=function(e,t,i,n,s){return He(!s||Buffer.isEncoding(s),"Invalid encoding:",s),e.$_addRule({name:t,method:"length",args:{limit:i,encoding:s},operator:n})};ie.rfc3986=function(){let e={},i="["+"\\dA-Fa-f"+"]",n="\\w-\\.~",s="!\\$&'\\(\\)\\*\\+,;=",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4="(?:"+a+"\\.){3}"+a;let r=i+"{1,4}",o="(?:"+r+":"+r+"|"+e.ipv4+")",c="(?:"+r+":){6}"+o,l="::(?:"+r+":){5}"+o,p="(?:"+r+")?::(?:"+r+":){4}"+o,u="(?:(?:"+r+":){0,1}"+r+")?::(?:"+r+":){3}"+o,d="(?:(?:"+r+":){0,2}"+r+")?::(?:"+r+":){2}"+o,m="(?:(?:"+r+":){0,3}"+r+")?::"+r+":"+o,f="(?:(?:"+r+":){0,4}"+r+")?::"+o,x="(?:(?:"+r+":){0,5}"+r+")?::"+r,E="(?:(?:"+r+":){0,6}"+r+")?::";return e.v4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.v6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6="(?:"+c+"|"+l+"|"+p+"|"+u+"|"+d+"|"+m+"|"+f+"|"+x+"|"+E+")",e.ipvfuture="v"+i+"+\\.["+n+s+":]+",e};ie.ipRegex=function(){let e=["ipv4","ipv6","ipvfuture"],t=ie.rfc3986(),n=`(?:${e.map(s=>{let a=`\\/${s==="ipv4"?t.v4Cidr:t.v6Cidr}`;return`${t[s]}(?:${a})?`}).join("|")})`;return new RegExp(`^${n}$`)}();ie.isDomainValid=function(e){if(e.length>256||(e=e.normalize("NFC"),ie.domainControlRx.test(e)))return!1;e=ie.punycode(e);let t=e.split(".");for(let i=0;i<t.length;++i){let n=t[i];if(!n.length||n.length>63||!ie.domainSegmentRx.test(n)||i===t.length-1&&!ie.finalSegmentAdditionalRx.test(n))return!1}return!0};ie.punycode=function(e){try{return new x1.URL(`http://${e}`).host}catch{return e}}});var hh=w((D6,mh)=>{"use strict";var Rr=Z(),y1=Lt(),Wc={};Wc.Map=class extends Map{slice(){return new Wc.Map(this)}};mh.exports=y1._extend({type:"symbol",terms:{map:{init:new Wc.Map}},coerce:{method(e,{schema:t,error:i}){let n=t.$_terms.map.get(e);return n&&(e=n),!t._flags.only||typeof e=="symbol"?{value:e}:{value:e,errors:i("symbol.map",{map:t.$_terms.map})}}},validate(e,{error:t}){if(typeof e!="symbol")return{value:e,errors:t("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&typeof e=="object"&&(e=Object.entries(e)),Rr(e&&e[Symbol.iterator],"Iterable must be an iterable or object");let t=this.clone(),i=[];for(let n of e){Rr(n&&n[Symbol.iterator],"Entry must be an iterable");let[s,a]=n;Rr(typeof s!="object"&&typeof s!="function"&&typeof s!="symbol","Key must not be of type object, function, or Symbol"),Rr(typeof a=="symbol","Value must be a Symbol"),t.$_terms.map.set(s,a),i.push(a)}return t.valid(...i)}}},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})});var xh=w((z6,gh)=>{"use strict";var w1=Z(),_1=Lt(),fh=ve();gh.exports=_1._extend({type:"binary",coerce:{from:"string",method(e,{schema:t}){try{return{value:Buffer.from(e,t._flags.encoding)}}catch{}}},validate(e,{error:t}){if(!Buffer.isBuffer(e))return{value:e,errors:t("binary.base")}},rules:{encoding:{method(e){return w1(Buffer.isEncoding(e),"Invalid encoding:",e),this.$_setFlag("encoding",e)}},length:{method(e){return this.$_addRule({name:"length",method:"length",args:{limit:e},operator:"="})},validate(e,t,{limit:i},{name:n,operator:s,args:a}){return fh.compare(e.length,i,s)?e:t.error("binary."+n,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:fh.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}}},cast:{string:{from:e=>Buffer.isBuffer(e),to(e,t){return e.toString()}}},messages:{"binary.base":"{{#label}} must be a buffer or a string","binary.length":"{{#label}} must be {{#limit}} bytes","binary.max":"{{#label}} must be less than or equal to {{#limit}} bytes","binary.min":"{{#label}} must be at least {{#limit}} bytes"}})});var xt=w((U6,bh)=>{"use strict";var vh=Z(),E1=gt(),ua=ve(),k1=Dn(),Jc=zn(),Gc=nn(),vt={types:{alternatives:Bm(),any:Lt(),array:Um(),boolean:Gm(),date:Zm(),function:sh(),link:rh(),number:ch(),object:ph(),string:dh(),symbol:hh()},aliases:{alt:"alternatives",bool:"boolean",func:"function"}};Buffer&&(vt.types.binary=xh());vt.root=function(){let e={_types:new Set(Object.keys(vt.types))};for(let t of e._types)e[t]=function(...i){return vh(!i.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),vt.generate(this,vt.types[t],i)};for(let t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(...i){return this.any()[t](...i)};Object.assign(e,vt.methods);for(let t in vt.aliases){let i=vt.aliases[t];e[t]=e[i]}return e};vt.methods={ValidationError:Jc.ValidationError,version:ua.version,assert(e,t,...i){vt.assert(e,t,!0,i)},attempt(e,t,...i){return vt.assert(e,t,!1,i)},checkPreferences(e){ua.checkPreferences(e)},compile(e,t){return k1.compile(this,e,t)},isError:Jc.ValidationError.isError,isRef:Gc.isRef,isSchema:ua.isSchema,in(...e){return Gc.in(...e)},override:ua.symbols.override,ref(...e){return Gc.create(...e)}};vt.assert=function(e,t,i,n){let s=n[0]instanceof Error||typeof n[0]=="string"?n[0]:null,a=s?n[1]:n[0],r=t.validate(e,ua.preferences({errors:{stack:!0}},a||{})),o=r.error;if(!o)return r.value;if(s instanceof Error)throw s;let c=i&&typeof o.annotate=="function"?o.annotate():o.message;throw o instanceof Jc.ValidationError||(o=E1(o)),o.message=s?`${s} ${c}`:c,o};vt.generate=function(e,t,i){return vh(e,"Must be invoked on a Joi instance."),t.$_root=e,!t._definition.args||!i.length?t:t._definition.args(t,...i)};bh.exports=vt.root()});var qr=w(yh=>{"use strict";yh.injection=Symbol("injection")});var kh=w((_h,Eh)=>{"use strict";var S1=require("events"),Pr=require("stream"),wh=require("url"),A1=qr(),Or={};_h=Eh.exports=Or.Request=class extends Pr.Readable{constructor(e){super({emitClose:!!e.simulate?.close,autoDestroy:!0});let t=e.url;typeof t=="object"&&(t=wh.format(t));let i=wh.parse(t);this.url=i.path,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={};let n=e.headers??{};Object.keys(n).forEach(o=>{this.headers[o.toLowerCase()]=n[o]}),this.headers["user-agent"]=this.headers["user-agent"]??"shot";let a=function(){return i.port?i.host:i.protocol?i.hostname+(i.protocol==="https:"?":443":":80"):null};this.headers.host=this.headers.host??a()??e.authority??"localhost:80",this.socket=this.connection=new Or.MockSocket(e);let r=e.payload??null;return r&&typeof r!="string"&&!(r instanceof Pr)&&!Buffer.isBuffer(r)&&(r=JSON.stringify(r),this.headers["content-type"]=this.headers["content-type"]||"application/json"),r&&!(r instanceof Pr)&&!this.headers.hasOwnProperty("content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(r)?r.length:Buffer.byteLength(r)).toString()),this._shot={payload:r,isDone:!1,simulate:e.simulate??{}},this}prepare(e){if(!(this._shot.payload instanceof Pr))return e();let t=[];this._shot.payload.on("data",i=>t.push(Buffer.from(i))),this._shot.payload.on("end",()=>{let i=Buffer.concat(t);return this.headers["content-length"]=this.headers["content-length"]||i.length,this._shot.payload=i,e()})}_read(e){setImmediate(()=>{if(this._shot.isDone){this._shot.simulate.end!==!1&&this.push(null);return}this._shot.isDone=!0,this._shot.payload&&(this._shot.simulate.split?(this.push(this._shot.payload.slice(0,1)),this.push(this._shot.payload.slice(1))):this.push(this._shot.payload)),this._shot.simulate.error?this.destroy(new Error("Simulated")):this._shot.simulate.end!==!1?this.push(null):this._shot.simulate.close&&this.emit("close")})}};Or.Request.prototype[A1.injection]=!0;Or.MockSocket=class extends S1.EventEmitter{constructor({remoteAddress:t}){super(),this.remoteAddress=t??"127.0.0.1"}end(){}setTimeout(){}}});var Th=w((Sh,Ah)=>{"use strict";var T1=require("http"),C1=require("stream"),j1=qr(),vs={};Sh=Ah.exports=vs.Response=class extends T1.ServerResponse{constructor(e,t){super({method:e.method,httpVersionMajor:1,httpVersionMinor:1}),this._shot={headers:null,trailers:{},payloadChunks:[]},this.assignSocket(vs.nullSocket()),e._shot.simulate.close&&e.once("close",()=>{process.nextTick(()=>this.emit("close"))}),this.once("finish",()=>{let i=vs.payload(this);i.raw.req=e,process.nextTick(()=>t(i))})}writeHead(...e){let t=e[e.length-1];if(typeof t=="object"&&t!==null){let n=Object.keys(t);for(let s=0;s<n.length;++s){let a=n[s];try{this.setHeader(a,t[a]);break}catch{}}}let i=super.writeHead(...e);return this._shot.headers=this.getHeaders(),["Date","Connection","Transfer-Encoding"].forEach(n=>{let s=new RegExp("\\r\\n"+n+": ([^\\r]*)\\r\\n"),a=this._header.match(s);a&&(this._shot.headers[n.toLowerCase()]=a[1])}),i}write(e,t,i){return super.write(e,t,i),this._shot.payloadChunks.push(Buffer.from(e,t)),!0}end(e,t,i){e&&this.write(e,t),super.end(i),this.emit("finish")}addTrailers(e){for(let t in e)this._shot.trailers[t.toLowerCase().trim()]=e[t].toString().trim()}};vs.Response.prototype[j1.injection]=!0;vs.payload=function(e){let t={raw:{res:e},headers:e._shot.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{}},i=Buffer.concat(e._shot.payloadChunks);return t.rawPayload=i,t.payload=i.toString(),t.trailers=e._shot.trailers,t};vs.nullSocket=function(){return new C1.Writable({write(e,t,i){setImmediate(i)}})}});var jh=w(Qc=>{"use strict";var R1=z(),Ie=xt(),q1=kh(),P1=Th(),O1=qr(),Ch={};Ch.options=Ie.object().keys({url:Ie.alternatives([Ie.string(),Ie.object().keys({protocol:Ie.string(),hostname:Ie.string(),port:Ie.any(),pathname:Ie.string().required(),query:Ie.any()})]).required(),headers:Ie.object(),payload:Ie.any(),simulate:{end:Ie.boolean(),split:Ie.boolean(),error:Ie.boolean(),close:Ie.boolean()},authority:Ie.string(),remoteAddress:Ie.string(),method:Ie.string(),validate:Ie.boolean()});Qc.inject=function(e,t){if(t=typeof t=="string"?{url:t}:t,t.validate!==!1)try{R1.assert(typeof e=="function","Invalid dispatch function"),Ie.assert(t,Ch.options)}catch(i){return Promise.reject(i)}return new Promise(i=>{let n=new q1(t),s=new P1(n,i);n.prepare(()=>e(n,s))})};Qc.isInjection=function(e){return!!e[O1.injection]}});var da=w(Ir=>{"use strict";var Yc={};Ir.Team=class{#e=null;#t=null;#i=null;#n=!1;#s=!1;constructor(e){this._init(e)}static _notes(e){return e.#i}_init(e={}){this.work=new Promise((i,n)=>{this._resolve=i,this._reject=n});let t=e.meetings||1;this.#e=t,this.#t=t,this.#i=[],this.#n=!1,this.#s=e.strict}attend(e){if(this.#s&&this.#n)throw new Error("Unscheduled meeting");if(this.#n)return;if(e instanceof Error)return this.#n=!0,this.#i=null,this._reject(e);this.#i.push(e),!--this.#t&&(this.#n=!0,this._resolve(this.#e===1?this.#i[0]:[...this.#i]),this.#i=null)}async regroup(e){await this.work,this._init(e)}};Ir.Events=class{#e=null;#t=[];static isIterator(e){return e instanceof Yc.EventsIterator}iterator(){return new Yc.EventsIterator(this)}emit(e){this._queue({value:e,done:!1})}end(){this._queue({done:!0})}_next(){return this.#t.length?Promise.resolve(this.#t.shift()):(this.#e=new Ir.Team,this.#e.work)}_queue(e){this.#e?(this.#e.attend(e),this.#e=null):this.#t.push(e)}};Yc.EventsIterator=class{#e=null;constructor(e){this.#e=e}[Symbol.asyncIterator](){return this}next(){return this.#e._next()}}});var G=w(R=>{"use strict";var Wn=z(),bt={codes:new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Moved Temporarily"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Time-out"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Request Entity Too Large"],[414,"Request-URI Too Large"],[415,"Unsupported Media Type"],[416,"Requested Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Time-out"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]])};R.Boom=class extends Error{constructor(e,t={}){if(e instanceof Error)return R.boomify(Wn.clone(e),t);let{statusCode:i=500,data:n=null,ctor:s=R.Boom}=t,a=new Error(e||void 0);Error.captureStackTrace(a,s),a.data=n;let r=bt.initialize(a,i);return Object.defineProperty(r,"typeof",{value:s}),t.decorate&&Object.assign(r,t.decorate),r}static[Symbol.hasInstance](e){return this===R.Boom?R.isBoom(e):this.prototype.isPrototypeOf(e)}};R.isBoom=function(e,t){return e instanceof Error&&!!e.isBoom&&(!t||e.output.statusCode===t)};R.boomify=function(e,t){return Wn.assert(e instanceof Error,"Cannot wrap non-Error object"),t=t||{},t.data!==void 0&&(e.data=t.data),t.decorate&&Object.assign(e,t.decorate),e.isBoom?t.override===!1||!t.statusCode&&!t.message?e:bt.initialize(e,t.statusCode??e.output.statusCode,t.message):bt.initialize(e,t.statusCode??500,t.message)};R.badRequest=function(e,t){return new R.Boom(e,{statusCode:400,data:t,ctor:R.badRequest})};R.unauthorized=function(e,t,i){let n=new R.Boom(e,{statusCode:401,ctor:R.unauthorized});if(!t)return n;if(typeof t!="string")return n.output.headers["WWW-Authenticate"]=t.join(", "),n;let s=`${t}`;return(i||e)&&(n.output.payload.attributes={}),i&&(typeof i=="string"?(s+=" "+Wn.escapeHeaderAttribute(i),n.output.payload.attributes=i):s+=" "+Object.keys(i).map(a=>{let r=i[a]??"";return n.output.payload.attributes[a]=r,`${a}="${Wn.escapeHeaderAttribute(r.toString())}"`}).join(", ")),e?(i&&(s+=","),s+=` error="${Wn.escapeHeaderAttribute(e)}"`,n.output.payload.attributes.error=e):n.isMissing=!0,n.output.headers["WWW-Authenticate"]=s,n};R.paymentRequired=function(e,t){return new R.Boom(e,{statusCode:402,data:t,ctor:R.paymentRequired})};R.forbidden=function(e,t){return new R.Boom(e,{statusCode:403,data:t,ctor:R.forbidden})};R.notFound=function(e,t){return new R.Boom(e,{statusCode:404,data:t,ctor:R.notFound})};R.methodNotAllowed=function(e,t,i){let n=new R.Boom(e,{statusCode:405,data:t,ctor:R.methodNotAllowed});return typeof i=="string"&&(i=[i]),Array.isArray(i)&&(n.output.headers.Allow=i.join(", ")),n};R.notAcceptable=function(e,t){return new R.Boom(e,{statusCode:406,data:t,ctor:R.notAcceptable})};R.proxyAuthRequired=function(e,t){return new R.Boom(e,{statusCode:407,data:t,ctor:R.proxyAuthRequired})};R.clientTimeout=function(e,t){return new R.Boom(e,{statusCode:408,data:t,ctor:R.clientTimeout})};R.conflict=function(e,t){return new R.Boom(e,{statusCode:409,data:t,ctor:R.conflict})};R.resourceGone=function(e,t){return new R.Boom(e,{statusCode:410,data:t,ctor:R.resourceGone})};R.lengthRequired=function(e,t){return new R.Boom(e,{statusCode:411,data:t,ctor:R.lengthRequired})};R.preconditionFailed=function(e,t){return new R.Boom(e,{statusCode:412,data:t,ctor:R.preconditionFailed})};R.entityTooLarge=function(e,t){return new R.Boom(e,{statusCode:413,data:t,ctor:R.entityTooLarge})};R.uriTooLong=function(e,t){return new R.Boom(e,{statusCode:414,data:t,ctor:R.uriTooLong})};R.unsupportedMediaType=function(e,t){return new R.Boom(e,{statusCode:415,data:t,ctor:R.unsupportedMediaType})};R.rangeNotSatisfiable=function(e,t){return new R.Boom(e,{statusCode:416,data:t,ctor:R.rangeNotSatisfiable})};R.expectationFailed=function(e,t){return new R.Boom(e,{statusCode:417,data:t,ctor:R.expectationFailed})};R.teapot=function(e,t){return new R.Boom(e,{statusCode:418,data:t,ctor:R.teapot})};R.badData=function(e,t){return new R.Boom(e,{statusCode:422,data:t,ctor:R.badData})};R.locked=function(e,t){return new R.Boom(e,{statusCode:423,data:t,ctor:R.locked})};R.failedDependency=function(e,t){return new R.Boom(e,{statusCode:424,data:t,ctor:R.failedDependency})};R.tooEarly=function(e,t){return new R.Boom(e,{statusCode:425,data:t,ctor:R.tooEarly})};R.preconditionRequired=function(e,t){return new R.Boom(e,{statusCode:428,data:t,ctor:R.preconditionRequired})};R.tooManyRequests=function(e,t){return new R.Boom(e,{statusCode:429,data:t,ctor:R.tooManyRequests})};R.illegal=function(e,t){return new R.Boom(e,{statusCode:451,data:t,ctor:R.illegal})};R.internal=function(e,t,i=500){return bt.serverError(e,t,i,R.internal)};R.notImplemented=function(e,t){return bt.serverError(e,t,501,R.notImplemented)};R.badGateway=function(e,t){return bt.serverError(e,t,502,R.badGateway)};R.serverUnavailable=function(e,t){return bt.serverError(e,t,503,R.serverUnavailable)};R.gatewayTimeout=function(e,t){return bt.serverError(e,t,504,R.gatewayTimeout)};R.badImplementation=function(e,t){let i=bt.serverError(e,t,500,R.badImplementation);return i.isDeveloperError=!0,i};bt.initialize=function(e,t,i){let n=parseInt(t,10);if(Wn.assert(!isNaN(n)&&n>=400,"First argument must be a number (400+):",t),e.isBoom=!0,e.isServer=n>=500,e.hasOwnProperty("data")||(e.data=null),e.output={statusCode:n,payload:{},headers:{}},Object.defineProperty(e,"reformat",{value:bt.reformat,configurable:!0}),!i&&!e.message&&(e.reformat(),i=e.output.payload.error),i){let s=Object.getOwnPropertyDescriptor(e,"message")||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"message");Wn.assert(!s||s.configurable&&!s.get,"The error is not compatible with boom"),e.message=i+(e.message?": "+e.message:""),e.output.payload.message=e.message}return e.reformat(),e};bt.reformat=function(e=!1){this.output.payload.statusCode=this.output.statusCode,this.output.payload.error=bt.codes.get(this.output.statusCode)||"Unknown",this.output.statusCode===500&&e!==!0?this.output.payload.message="An internal server error occurred":this.message&&(this.output.payload.message=this.message)};bt.serverError=function(e,t,i,n){return t instanceof Error&&!t.isBoom?R.boomify(t,{statusCode:i,message:e}):new R.Boom(e,{statusCode:i,data:t,ctor:n})}});var it=w(vi=>{"use strict";var I1=require("assert"),$1=G(),Rh=z(),cn={system:[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,I1.AssertionError,Rh.AssertError]};vi.rethrow=function(e,t,i={}){return cn.catch(e,t,i,!0)};vi.ignore=function(e,t,i={}){return cn.catch(e,t,i,!1)};cn.catch=function(e,t,i,n){if(cn.match(e,t)===n){if(i.override&&(e=i.override),i.decorate&&Object.assign(e,i.decorate),i.return)return e;throw e}};vi.background=async function(e,t="rethrow",i="system",n={}){try{typeof e=="function"?await e():await e}catch(s){return vi[t](s,i,n)}};vi.isBoom=function(e){return $1.isBoom(e)};vi.isError=function(e){return e instanceof Error};vi.isSystem=function(e){if(!e||e.isBoom)return!1;for(let t of cn.system)if(e instanceof t)return!0;return!1};cn.rules={system:vi.isSystem,boom:vi.isBoom};cn.match=function(e,t){if(!t)return!0;t=Array.isArray(t)?t:[t];for(let i of t)if(typeof i=="string"){if(cn.rules[i](e))return!0}else if(typeof i=="object"){if(Rh.contain(e,i,{deep:!0,part:!0}))return!0}else if(e instanceof i)return!0;return!1}});var qh=w(yt=>{"use strict";var N1=it(),bs=z(),D={maxLength:256,wildcards:["x","X","*"],any:Symbol("any")};D.versionRx=/^\s*[vV]?(\d+|[xX*])(?:\.(\d+|[xX*])(?:\.(\d+|[xX*])(?:\-?([^+]+))?(?:\+(.+))?)?)?\s*$/;D.strict={tokenRx:/^[-\dA-Za-z]+(?:\.[-\dA-Za-z]+)*$/,numberRx:/^((?:0)|(?:[1-9]\d*))$/};yt.version=function(e,t){return new D.Version(e,t)};yt.range=function(e){return new D.Range(e)};yt.match=function(e,t,i){try{return yt.range(t).match(e,i)}catch(n){return N1.rethrow(n,"system"),!1}};yt.compare=function(e,t,i={}){let n=-1,s=1;e=yt.version(e,i),t=yt.version(t,i),i.range&&!i.includePrerelease&&e.prerelease.length&&(e.major!==t.major||e.minor!==t.minor||e.patch!==t.patch||!t.prerelease.length)&&(n=-2,s=2);for(let a=0;a<3;++a){let r=e.dots[a],o=t.dots[a];if(!(r===o||r===D.any||o===D.any))return r-o<0?n:s}if(!e.prerelease.length&&!t.prerelease.length)return 0;if(t.prerelease.length){if(!e.prerelease.length)return i.includePrerelease&&e.patch===D.any?0:s}else return i.includePrerelease&&t.patch===D.any?0:n;for(let a=0;;++a){let r=e.prerelease[a],o=t.prerelease[a];if(r===void 0&&o===void 0)return 0;if(r===o)continue;if(r===void 0)return n;if(o===void 0)return s;let c=Number.isFinite(r),l=Number.isFinite(o);return c!==l?c?n:s:r<o?n:s}};D.Version=class{constructor(e,t={}){if(bs.assert(e,"Missing version argument"),e instanceof D.Version)return e;typeof e=="object"?this._copy(e):this._parse(e,t),this.format()}_copy(e){this.major=e.major===void 0?D.any:e.major,this.minor=e.minor===void 0?D.any:e.minor,this.patch=e.patch===void 0?D.any:e.patch,this.prerelease=e.prerelease??[],this.build=e.build??[]}_parse(e,t){bs.assert(typeof e=="string","Version argument must be a string"),bs.assert(e.length<=D.maxLength,"Version string too long");let i=e.match(D.versionRx);if(!i)throw new Error(`Invalid version string format: ${e}`);this.major=D.Version._number(i[1],"major",t),this.minor=D.Version._number(i[2]||"x","minor",t),this.patch=D.Version._number(i[3]||"x","patch",t),this.prerelease=D.Version._sub(i[4],"prerelease",t),this.build=D.Version._sub(i[5],"build",t)}static _number(e,t,i){if(D.wildcards.includes(e))return D.any;i.strict&&bs.assert(e.match(D.strict.numberRx),"Value must be 0 or a number without a leading zero:",t);let n=parseInt(e,10);return bs.assert(n<=Number.MAX_SAFE_INTEGER,"Value must be positive and less than max safe integer:",t),n}static _sub(e,t,i){if(!e)return[];i.strict&&bs.assert(e.match(D.strict.tokenRx),"Value can only contain dot-separated hyphens, digits, a-z or A-Z:",t);let n=[],s=e.split(".");for(let a of s){if(!a)throw new Error(`Invalid empty ${t} segment`);n.push(a.match(/^\d+$/)?D.Version._number(a,t,{strict:i.strict}):a)}return n}format(){this.version=`${D.dot(this.major)}.${D.dot(this.minor)}.${D.dot(this.patch)}${D.token(this.prerelease,"-")}${D.token(this.build,"+")}`,this.dots=[this.major,this.minor,this.patch],this.wildcard=this.major===D.any&&this.minor===D.any&&this.patch===D.any&&!this.prerelease.length}toString(){return this.version}compare(e,t){return D.Version.compare(this,e,t)}static compare(e,t,i={}){return yt.compare(e,t,i)}};D.dot=e=>e===D.any?"x":e;D.token=(e,t)=>e.length?`${t}${e.join(".")}`:"";D.Range=class{constructor(e,t){this._settings=Object.assign({},t),this._anything=!1,this._or=[],this._active=null,e!==void 0&&this.pattern(e),this._another()}_another(){return(!this._active||this._active.rules.length)&&(this._active={rules:[]},this._or.push(this._active)),this}_rule(e,t){t=yt.version(t,this._settings);let i=D.operator(e);return this._active.rules.push({compare:i,version:t,operator:e}),this}get or(){return this._another()}equal(e){return this._rule("=",e)}above(e){return this._rule(">",e)}below(e){return this._rule("<",e)}between(e,t){return this._rule(">=",e),this._rule("<=",t),this}minor(e){return e=yt.version(e,this._settings),e.major===D.any?(this._rule("=",e),this):(this._rule(">=",e),e.minor===D.any?this._rule("<",{major:e.major+1,minor:0,patch:0,prerelease:[0]}):this._rule("<",{major:e.major,minor:e.minor+1,patch:0,prerelease:[0]}),this)}compatible(e){return e=yt.version(e,this._settings),e.major===D.any?(this._rule("=",e),this):(this._rule(">=",e),e.major===0&&e.minor!==D.any?e.minor===0?this._rule("<",{major:0,minor:0,patch:e.patch+1,prerelease:[0]}):this._rule("<",{major:0,minor:e.minor+1,patch:0,prerelease:[0]}):this._rule("<",{major:e.major+1,minor:0,patch:0,prerelease:[0]}),this)}pattern(e){try{return this._pattern(e),this}catch(t){throw new Error(`Invalid range: "${e}" because: ${t.message}`)}}_pattern(e){if(e===""){this._anything=!0;return}let i=D.normalize(e).split(/\s*\|\|\s*/);for(let n of i){if(!n){this._anything=!0;return}this._another();let s=n.split(/\s+/);for(let a of s){let r=a.indexOf("@");if(r!==-1){let p=a.slice(0,r),u=a.slice(r+1);this.between(p,u);continue}let o=a.match(/^(\^|~|<\=|>\=|<|>|\=)?(.+)$/),c=o[1],l=yt.version(o[2],this._settings);if(l.wildcard){this._anything=!0;return}if(c==="~"){this.minor(l);continue}if(c==="^"){this.compatible(l);continue}if(c){this._rule(c,l);continue}this.equal(l)}}}match(e,t={}){if(e=yt.version(e,this._settings),this._anything)return!!t.includePrerelease||!e.prerelease.length;for(let{rules:i}of this._or){if(!i.length)continue;let n=0,s=0;for(let a of i){let r=e.compare(a.version,Object.assign(this._settings,t,{range:!0})),o=Math.abs(r)===2;if(a.compare.includes(r/(o?2:1)))++n,o&&++s;else break}if(n===i.length&&s<n)return!0}return!1}toString(){if(this._anything)return"*";let e="";for(let{rules:t}of this._or){if(!t.length)continue;let i=[];for(let n of t)i.push(`${n.operator!=="="?n.operator:""}${n.version.version}`);e+=(e?"||":"")+i.join(" ")}return e}};D.operator=function(e){switch(e){case"=":return[0];case">":return[1];case">=":return[0,1];case"<":return[-1];case"<=":return[0,-1]}};D.normalize=function(e){return e.replace(/ \- /g,"@").replace(/~>/g,"~").replace(/(\^|~|<\=|>\=|<|>|\=)\s*([^\s]+)/g,(t,i,n)=>`${i}${n}`)}});var Gn=w(ma=>{"use strict";var F1=require("os"),L1=qh(),h=xt(),M={};ma.symbol=Symbol("hapi-response");ma.apply=function(e,t,...i){let n=M[e].validate(t);if(n.error)throw new Error(`Invalid ${e} options ${i.length?"("+i.join(" ")+")":""} ${n.error.annotate()}`);return n.value};ma.enable=function(e){let t=e?Object.assign({},e):{};return t.security===!0&&(t.security={}),t.cors===!0&&(t.cors={}),t};ma.versionMatch=(e,t)=>L1.match(e,t,{includePrerelease:!0});M.access=h.object({entity:h.valid("user","app","any"),scope:[!1,h.array().items(h.string()).single().min(1)]});M.auth=h.alternatives([h.string(),M.access.keys({mode:h.valid("required","optional","try"),strategy:h.string(),strategies:h.array().items(h.string()).min(1),access:h.array().items(M.access.min(1)).single().min(1),payload:[h.valid("required","optional"),h.boolean()]}).without("strategy","strategies").without("access",["scope","entity"])]);M.event=h.object({method:h.array().items(h.function()).single(),options:h.object({before:h.array().items(h.string()).single(),after:h.array().items(h.string()).single(),bind:h.any(),sandbox:h.valid("server","plugin"),timeout:h.number().integer().min(1)}).default({})});M.exts=h.array().items(M.event.keys({type:h.string().required()})).single();M.failAction=h.alternatives([h.valid("error","log","ignore"),h.function()]).default("error");M.routeBase=h.object({app:h.object().allow(null),auth:M.auth.allow(!1),bind:h.object().allow(null),cache:h.object({expiresIn:h.number(),expiresAt:h.string(),privacy:h.valid("default","public","private"),statuses:h.array().items(h.number().integer().min(200)).min(1).single().default([200,204]),otherwise:h.string().default("no-cache")}).allow(!1).default(),compression:h.object().pattern(/.+/,h.object()).default(),cors:h.object({origin:h.array().min(1).allow("ignore").default(["*"]),maxAge:h.number().default(86400),headers:h.array().items(h.string()).default(["Accept","Authorization","Content-Type","If-None-Match"]),additionalHeaders:h.array().items(h.string()).default([]),exposedHeaders:h.array().items(h.string()).default(["WWW-Authenticate","Server-Authorization"]),additionalExposedHeaders:h.array().items(h.string()).default([]),credentials:h.boolean().when("origin",{is:"ignore",then:!1}).default(!1),preflightStatusCode:h.valid(200,204).default(200)}).allow(!1,!0).default(!1),ext:h.object({onPreAuth:h.array().items(M.event).single(),onCredentials:h.array().items(M.event).single(),onPostAuth:h.array().items(M.event).single(),onPreHandler:h.array().items(M.event).single(),onPostHandler:h.array().items(M.event).single(),onPreResponse:h.array().items(M.event).single(),onPostResponse:h.array().items(M.event).single()}).default({}),files:h.object({relativeTo:h.string().pattern(/^([\/\.])|([A-Za-z]:\\)|(\\\\)/).default(".")}).default(),json:h.object({replacer:h.alternatives(h.function(),h.array()).allow(null).default(null),space:h.number().allow(null).default(null),suffix:h.string().allow(null).default(null),escape:h.boolean().default(!1)}).default(),log:h.object({collect:h.boolean().default(!1)}).default(),payload:h.object({output:h.valid("data","stream","file").default("data"),parse:h.boolean().allow("gunzip").default(!0),multipart:h.object({output:h.valid("data","stream","file","annotated").required()}).default(!1).allow(!0,!1),allow:h.array().items(h.string()).single(),override:h.string(),protoAction:h.valid("error","remove","ignore").default("error"),maxBytes:h.number().integer().positive().default(1024*1024),maxParts:h.number().integer().positive().default(1e3),uploads:h.string().default(F1.tmpdir()),failAction:M.failAction,timeout:h.number().integer().positive().allow(!1).default(10*1e3),defaultContentType:h.string().default("application/json"),compression:h.object().pattern(/.+/,h.object()).default()}).default(),plugins:h.object(),response:h.object({disconnectStatusCode:h.number().integer().min(400).default(499),emptyStatusCode:h.valid(200,204).default(204),failAction:M.failAction,modify:h.boolean(),options:h.object(),ranges:h.boolean().default(!0),sample:h.number().min(0).max(100).when("modify",{then:h.forbidden()}),schema:h.alternatives(h.object(),h.array(),h.function()).allow(!0,!1),status:h.object().pattern(/\d\d\d/,h.alternatives(h.object(),h.array(),h.function()).allow(!0,!1))}).default(),security:h.object({hsts:h.alternatives([h.object({maxAge:h.number(),includeSubdomains:h.boolean(),includeSubDomains:h.boolean(),preload:h.boolean()}),h.boolean(),h.number()]).default(15768e3),xframe:h.alternatives([h.boolean(),h.valid("sameorigin","deny"),h.object({rule:h.valid("sameorigin","deny","allow-from"),source:h.string()})]).default("deny"),xss:h.valid("enabled","disabled",!1).default("disabled"),noOpen:h.boolean().default(!0),noSniff:h.boolean().default(!0),referrer:h.alternatives([h.boolean().valid(!1),h.valid("","no-referrer","no-referrer-when-downgrade","unsafe-url","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin")]).default(!1)}).allow(null,!1,!0).default(!1),state:h.object({parse:h.boolean().default(!0),failAction:M.failAction}).default(),timeout:h.object({socket:h.number().integer().positive().allow(!1),server:h.number().integer().positive().allow(!1).default(!1)}).default(),validate:h.object({headers:h.alternatives(h.object(),h.array(),h.function()).allow(null,!0),params:h.alternatives(h.object(),h.array(),h.function()).allow(null,!0),query:h.alternatives(h.object(),h.array(),h.function()).allow(null,!1,!0),payload:h.alternatives(h.object(),h.array(),h.function()).allow(null,!1,!0),state:h.alternatives(h.object(),h.array(),h.function()).allow(null,!1,!0),failAction:M.failAction,errorFields:h.object(),options:h.object().default(),validator:h.object()}).default()});M.server=h.object({address:h.string().hostname(),app:h.object().allow(null),autoListen:h.boolean(),cache:h.allow(null),compression:h.object({minBytes:h.number().min(1).integer().default(1024)}).allow(!1).default(),debug:h.object({request:h.array().items(h.string()).single().allow(!1).default(["implementation"]),log:h.array().items(h.string()).single().allow(!1)}).allow(!1).default(),host:h.string().hostname().allow(null),info:h.object({remote:h.boolean().default(!1)}).default({}),listener:h.any(),load:h.object({sampleInterval:h.number().integer().min(0).default(0)}).unknown().default(),mime:h.object().empty(null).default(),operations:h.object({cleanStop:h.boolean().default(!0)}).default(),plugins:h.object(),port:h.alternatives([h.number().integer().min(0),h.string().pattern(/\//),h.string().pattern(/^\\\\\.\\pipe\\/)]).allow(null),query:h.object({parser:h.function()}).default(),router:h.object({isCaseSensitive:h.boolean().default(!0),stripTrailingSlash:h.boolean().default(!1)}).default(),routes:M.routeBase.default(),state:h.object(),tls:h.alternatives([h.object().allow(null),h.boolean()]),uri:h.string().pattern(/[^/]$/)});M.vhost=h.alternatives([h.string().hostname(),h.array().items(h.string().hostname()).min(1)]);M.handler=h.alternatives([h.function(),h.object().length(1)]);M.route=h.object({method:h.string().pattern(/^[a-zA-Z0-9!#\$%&'\*\+\-\.^_`\|~]+$/).required(),path:h.string().required(),rules:h.object(),vhost:M.vhost,handler:h.any(),options:h.any(),config:h.any()}).without("config","options");M.pre=[h.function(),h.object({method:h.alternatives(h.string(),h.function()).required(),assign:h.string(),mode:h.valid("serial","parallel"),failAction:M.failAction})];M.routeConfig=M.routeBase.keys({description:h.string(),id:h.string(),isInternal:h.boolean(),notes:[h.string(),h.array().items(h.string())],pre:h.array().items(...M.pre.concat(h.array().items(...M.pre).min(1))),tags:[h.string(),h.array().items(h.string())]});M.cacheConfig=h.alternatives([h.function(),h.object({name:h.string().invalid("_default"),shared:h.boolean(),provider:[h.function(),{constructor:h.function().required(),options:h.object({partition:h.string().default("hapi-cache")}).unknown().default({})}],engine:h.object()}).xor("provider","engine")]);M.cache=h.array().items(M.cacheConfig).min(1).single();M.cachePolicy=h.object({cache:h.string().allow(null).allow(""),segment:h.string(),shared:h.boolean()}).unknown();M.method=h.object({bind:h.object().allow(null),generateKey:h.function(),cache:M.cachePolicy});M.methodObject=h.object({name:h.string().required(),method:h.function().required(),options:h.object()});M.register=h.object({once:!0,routes:h.object({prefix:h.string().pattern(/^\/.+/),vhost:M.vhost}).default({})});M.semver=h.string();M.plugin=M.register.keys({options:h.any(),plugin:h.object({register:h.function().required(),name:h.string().when("pkg.name",{is:h.exist(),otherwise:h.required()}),version:h.string(),multiple:h.boolean().default(!1),dependencies:[h.array().items(h.string()).single(),h.object().pattern(/.+/,M.semver)],once:!0,requirements:h.object({hapi:h.string(),node:h.string()}).default(),pkg:h.object({name:h.string(),version:h.string().default("0.0.0")}).unknown().default({})}).unknown()}).without("once","options").unknown();M.rules=h.object({validate:h.object({schema:h.alternatives(h.object(),h.array()).required(),options:h.object().default({allowUnknown:!0})})})});var Oh=w(Ph=>{"use strict";var Bt={};Ph.decode=function(e){let t=e.indexOf("%");if(t===-1)return e;let i="",n=0,s=0,a=t,r=Bt.utf8.accept;for(;t>-1&&t<e.length;){let o=Bt.resolveHex(e[t+1],4),c=Bt.resolveHex(e[t+2],0),l=o|c,p=Bt.utf8.data[l];if(r=Bt.utf8.data[256+r+p],s=s<<6|l&Bt.utf8.data[364+p],r===Bt.utf8.accept){i+=e.slice(n,a),i+=s<=65535?String.fromCharCode(s):String.fromCharCode(55232+(s>>10),56320+(s&1023)),s=0,n=t+3,t=e.indexOf("%",n),a=t;continue}if(r===Bt.utf8.reject||(t+=3,t>=e.length||e[t]!=="%"))return null}return i+e.slice(n)};Bt.resolveHex=function(e,t){let i=Bt.hex[e];return i===void 0?255:i<<t};Bt.hex={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Bt.utf8={accept:12,reject:0,data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7]}});var $h=w(Ih=>{"use strict";Ih.generate=function(){let e="(?:^\\/$)",n="(?:"+"[\\w\\!\\$&'\\(\\)\\*\\+\\,;\\=\\:@\\-\\.~]"+"|"+"%[A-F0-9]{2}"+")",s=n+"+",a=n+"*",r="(?:\\{\\w+(?:\\*[1-9]\\d*)?\\})",o="(?:\\/(?:\\{\\w+(?:(?:\\*(?:[1-9]\\d*)?)|(?:\\?))?\\})?)?",c="(?:\\{\\w+\\??\\})",l="(?:(?:"+s+c+")+"+a+")|(?:"+c+"(?:"+s+c+")+"+a+")|(?:"+c+s+")",m="(?:^"+("(?:"+("\\/"+("(?:"+s+"|"+r+"|"+l+")"))+")*")+o+"$)",f="("+s+")|(?:\\{(\\w+)(?:(\\*)(\\d+)?)?(\\?)?\\})";return{parseParam:new RegExp(f,"g"),validatePath:new RegExp(e+"|"+m),validatePathEncoded:/%(?:2[146-9A-E]|3[\dABD]|4[\dA-F]|5[\dAF]|6[1-9A-F]|7[\dAE])/g}}});var Lh=w((Nh,Fh)=>{"use strict";var ys=z(),wt={};Nh=Fh.exports=wt.Segment=function(){this._edge=null,this._fulls=null,this._literals=null,this._param=null,this._mixed=null,this._wildcard=null};wt.Segment.prototype.add=function(e,t){let i=e[0],n=e.slice(1),s=!n.length,a=[],r=!0;for(let o=0;o<e.length&&r;++o)r=e[o].literal!==void 0,a.push(e[o].literal);if(r){this._fulls=this._fulls??new Map;let o="/"+a.join("/");t.settings.isCaseSensitive||(o=o.toLowerCase()),ys.assert(!this._fulls.has(o),"New route",t.path,"conflicts with existing",this._fulls.get(o)?.record.path),this._fulls.set(o,{segment:i,record:t})}else if(i.literal!==void 0){this._literals=this._literals??new Map;let o=t.settings.isCaseSensitive?i.literal:i.literal.toLowerCase();this._literals.has(o)||this._literals.set(o,new wt.Segment),this._literals.get(o).add(n,t)}else if(i.wildcard)ys.assert(!this._wildcard,"New route",t.path,"conflicts with existing",this._wildcard?.record.path),ys.assert(!this._param||!this._param._wildcard,"New route",t.path,"conflicts with existing",this._param?._wildcard?.record.path),this._wildcard={segment:i,record:t};else if(i.mixed){this._mixed=this._mixed??[];let o=this._mixedLookup(i);o||(o={segment:i,node:new wt.Segment},this._mixed.push(o),this._mixed.sort(wt.mixed)),s?(ys.assert(!o.node._edge,"New route",t.path,"conflicts with existing",o.node._edge?.record.path),o.node._edge={segment:i,record:t}):o.node.add(n,t)}else this._param=this._param??new wt.Segment,s?(ys.assert(!this._param._edge,"New route",t.path,"conflicts with existing",this._param._edge?.record.path),this._param._edge={segment:i,record:t}):(ys.assert(!this._wildcard||!n[0].wildcard,"New route",t.path,"conflicts with existing",this._wildcard?.record.path),this._param.add(n,t))};wt.Segment.prototype._mixedLookup=function(e){for(let t=0;t<this._mixed.length;++t)if(wt.mixed({segment:e},this._mixed[t])===0)return this._mixed[t];return null};wt.mixed=function(e,t){let s=e.segment,a=t.segment;if(s.length!==a.length)return s.length>a.length?-1:1;if(s.first!==a.first)return s.first?1:-1;for(let r=0;r<s.segments.length;++r){let o=s.segments[r],c=a.segments[r];if(o!==c)return o.length===c.length?o>c?1:-1:o.length<c.length?1:-1}return 0};wt.Segment.prototype.lookup=function(e,t,i){let n=null;if(this._fulls&&(n=this._fulls.get(i.isCaseSensitive?e:e.toLowerCase()),n))return{record:n.record,array:[]};let s=t[0],a=e.slice(s.length+1),r=t.length>1?t.slice(1):null;if(this._literals){let o=i.isCaseSensitive?s:s.toLowerCase();if(n=this._literals.get(o),n){let c=wt.deeper(n,a,r,[],i);if(c)return c}}if(this._mixed)for(let o=0;o<this._mixed.length;++o){n=this._mixed[o];let c=s.match(n.segment.mixed);if(c){let l=[];for(let u=1;u<c.length;++u)l.push(c[u]);let p=wt.deeper(n.node,a,r,l,i);if(p)return p}}if(this._param&&(s||this._param._edge?.segment.empty)){let o=wt.deeper(this._param,a,r,[s],i);if(o)return o}return this._wildcard?{record:this._wildcard.record,array:[e.slice(1)]}:null};wt.deeper=function(e,t,i,n,s){if(i){let a=e.lookup(t,i,s);if(a)return{record:a.record,array:n.concat(a.array)}}else{if(e._edge)return{record:e._edge.record,array:n};if(e._wildcard)return{record:e._wildcard.record,array:n}}return null}});var Bh=w(Dh=>{"use strict";var Mh=G(),ln=z(),M1=Oh(),D1=$h(),B1=Lh(),nt={pathRegex:D1.generate(),defaults:{isCaseSensitive:!0}};Dh.Router=nt.Router=function(e){this.settings=ln.applyToDefaults(nt.defaults,e||{}),this.routes=new Map,this.ids=new Map,this.vhosts=null,this.specials={badRequest:null,notFound:null,options:null}};nt.Router.prototype.add=function(e,t){let i=e.method.toLowerCase(),n=e.vhost||"*";n!=="*"&&(this.vhosts=this.vhosts??new Map,this.vhosts.has(n)||this.vhosts.set(n,new Map));let s=n==="*"?this.routes:this.vhosts.get(n);s.has(i)||s.set(i,{routes:[],router:new B1});let a=e.analysis??this.analyze(e.path),r={path:e.path,route:t||e.path,segments:a.segments,params:a.params,fingerprint:a.fingerprint,settings:this.settings},o=s.get(i);return o.router.add(a.segments,r),o.routes.push(r),o.routes.sort(nt.sort),r.segments[r.segments.length-1].empty&&o.router.add(a.segments.slice(0,-1),r),e.id&&(ln.assert(!this.ids.has(e.id),"Route id",e.id,"for path",e.path,"conflicts with existing path",this.ids.has(e.id)&&this.ids.get(e.id).path),this.ids.set(e.id,r)),r};nt.Router.prototype.special=function(e,t){ln.assert(Object.keys(this.specials).indexOf(e)!==-1,"Unknown special route type:",e),this.specials[e]={route:t}};nt.Router.prototype.route=function(e,t,i){let n=t.length===1?[""]:t.split("/").slice(1),s=this.vhosts&&i&&this.vhosts.get(i);return s&&this._lookup(t,n,s,e)||this._lookup(t,n,this.routes,e)||e==="head"&&s&&this._lookup(t,n,s,"get")||e==="head"&&this._lookup(t,n,this.routes,"get")||e==="options"&&this.specials.options||s&&this._lookup(t,n,s,"*")||this._lookup(t,n,this.routes,"*")||this.specials.notFound||Mh.notFound()};nt.Router.prototype._lookup=function(e,t,i,n){let s=i.get(n);if(!s)return null;let a=s.router.lookup(e,t,this.settings);if(!a)return null;let r={},o=[];for(let c=0;c<a.array.length;++c){let l=a.record.params[c],p=M1.decode(a.array[c]);if(p===null)return this.specials.badRequest??Mh.badRequest("Invalid request path");r[l]!==void 0?r[l]=r[l]+"/"+p:r[l]=p,(c+1===a.array.length||l!==a.record.params[c+1])&&o.push(r[l])}return{params:r,paramsArray:o,route:a.record.route}};nt.Router.prototype.normalize=function(e){if(e&&e.indexOf("%")!==-1&&(e=e.replace(/%[0-9a-fA-F][0-9a-fA-F]/g,n=>n.toUpperCase()).replace(/%(?:2[146-9A-E]|3[\dABD]|4[\dA-F]|5[\dAF]|6[1-9A-F]|7[\dAE])/g,n=>String.fromCharCode(parseInt(n.substring(1),16)))),e&&(e.indexOf("/.")!==-1||e[0]===".")){let t=e[0]==="/",i=e.split("/"),n=[],s;for(let a=0;a<i.length;++a)s=i[a],s===".."?n.pop():s!=="."&&n.push(s);(s==="."||s==="..")&&n.push(""),e=n.join("/"),e[0]!=="/"&&t&&(e="/"+e)}return e};nt.Router.prototype.analyze=function(e){ln.assert(nt.pathRegex.validatePath.test(e),"Invalid path:",e),ln.assert(!nt.pathRegex.validatePathEncoded.test(e),"Path cannot contain encoded non-reserved path characters:",e);let t=e.split("/"),i=[],n=[],s=[];for(let a=1;a<t.length;++a){let r=t[a];if(r.indexOf("{")===-1){r=this.settings.isCaseSensitive?r:r.toLowerCase(),s.push(r),i.push({literal:r});continue}let o=nt.parseParams(r);if(o.length===1){let c=o[0];if(ln.assert(n.indexOf(c.name)===-1,"Cannot repeat the same parameter name:",c.name,"in:",e),n.push(c.name),c.wildcard)if(c.count)for(let l=0;l<c.count;++l)s.push("?"),i.push({}),l&&n.push(c.name);else s.push("#"),i.push({wildcard:!0});else s.push("?"),i.push({empty:c.empty})}else{let c={length:o.length,first:typeof o[0]!="string",segments:[]},l="",p="^";for(let u=0;u<o.length;++u){let d=o[u];typeof d=="string"?(l=l+d,p=p+ln.escapeRegex(d),c.segments.push(d)):(ln.assert(n.indexOf(d.name)===-1,"Cannot repeat the same parameter name:",d.name,"in:",e),n.push(d.name),l=l+"?",p=p+"(."+(d.empty?"*":"+")+")")}c.mixed=new RegExp(p+"$",this.settings.isCaseSensitive?"":"i"),s.push(l),i.push(c)}}return{segments:i,fingerprint:"/"+s.join("/"),params:n}};nt.parseParams=function(e){let t=[];return e.replace(nt.pathRegex.parseParam,(i,n,s,a,r,o)=>(n?t.push(n):t.push({name:s,wildcard:!!a,count:r&&parseInt(r,10),empty:!!o}),"")),t};nt.Router.prototype.table=function(e){let t=[],i=n=>{if(n)for(let s of n.values())for(let a of s.routes)t.push(a.route)};if(this.vhosts){let n=e?[].concat(e):[...this.vhosts.keys()];for(let s of n)i(this.vhosts.get(s))}return i(this.routes),t};nt.sort=function(e,t){let s=e.segments,a=t.segments;if(s.length!==a.length)return s.length>a.length?1:-1;for(let r=0;;++r){if(s[r].literal){if(a[r].literal){if(s[r].literal===a[r].literal)continue;return s[r].literal>a[r].literal?1:-1}return-1}return a[r].literal||s[r].wildcard?1:-1}}});var Hh=w((lO,Uh)=>{"use strict";var $r=z(),zh=G(),ws={validate:Symbol("validate")};ws.defaults={partition:"catbox"};Uh.exports=class{constructor(e,t){$r.assert(e,"Missing catbox client engine"),$r.assert(typeof e=="object"&&typeof e.start=="function"||typeof e=="function","engine must be an engine object or engine prototype (function)"),$r.assert(typeof e=="function"||!t,"Can only specify options with function engine config");let i=Object.assign({},ws.defaults,t);$r.assert(i.partition.match(/^[\w\-]+$/),"Invalid partition name:"+i.partition),this.connection=typeof e=="object"?e:new e(i)}async start(){await this.connection.start()}async stop(){await this.connection.stop()}isReady(){return this.connection.isReady()}validateSegmentName(e){return this.connection.validateSegmentName(e)}async get(e){if(this[ws.validate](e,null),e===null)return null;let t=await this.connection.get(e);if(!t||t.item===void 0||t.item===null)return null;let i=Date.now(),s=t.stored+t.ttl-i;return s<=0?null:{item:t.item,stored:t.stored,ttl:s}}async set(e,t,i){this[ws.validate](e),!(i<=0)&&await this.connection.set(e,t,i)}async drop(e){this[ws.validate](e),await this.connection.drop(e)}[ws.validate](e,t={}){if(!this.isReady())throw zh.internal("Disconnected");if(!(e&&typeof e.id=="string"&&e.segment&&typeof e.segment=="string")&&e!==t)throw zh.internal("Invalid key")}}});var ha=w(Zc=>{"use strict";var Ge=z(),z1=da(),Je=xt(),Rt={schema:{base:Je.object({name:Je.string().required(),clone:Je.boolean(),tags:Je.boolean(),spread:Je.boolean(),channels:Je.array().items(Je.string()).single().unique().min(1).cast("set")})}};Rt.schema.event=Rt.schema.base.keys({shared:Je.boolean()});Rt.schema.listener=Rt.schema.base.keys({listener:Je.func().required(),context:Je.object(),count:Je.number().integer().min(1),filter:{tags:Je.array().items(Je.string()).single().unique().min(1).required(),all:Je.boolean()}});Zc.validate=function(e){let t=[];e=[].concat(e);for(let i of e)typeof i=="string"&&(i={name:i}),t.push(Je.attempt(i,Rt.schema.event,"Invalid event options"));return t};Zc.Podium=class{#e=new Map;constructor(e,t){e&&this.registerEvent(e,t)}registerEvent(e,t){e=[].concat(e);for(let i of e){typeof i=="string"&&(i={name:i}),t?.validate!==!1&&(i=Je.attempt(i,Rt.schema.event,"Invalid event options"));let n=i.name;if(this.#e.has(n)){Ge.assert(i.shared,`Event ${n} exists`);continue}this.#e.set(n,new Rt.EventListener(i))}}emit(e,t){let i;if(this.#t(e,t,([n])=>{i=i??n}),i)throw i}async gauge(e,t){let i=[];return this.#t(e,t,([n,s])=>{i.push(n?Promise.reject(n):s)}),await Promise.allSettled(i)}#t(e,t,i){e=Rt.criteria(e);let n=e.name;Ge.assert(n,"Criteria missing event name");let s=this.#e.get(n);if(Ge.assert(s,`Unknown event ${n}`),!s.handlers)return;if(Ge.assert(!e.channel||typeof e.channel=="string","Invalid channel name"),Ge.assert(!e.channel||!s.flags.channels||s.flags.channels.has(e.channel),`Unknown ${e.channel} channel`),Ge.assert(!s.flags.spread||Array.isArray(t)||typeof t=="function","Data must be an array for spread event"),typeof e.tags=="string"&&(e={...e},e.tags={[e.tags]:!0}),e.tags&&Array.isArray(e.tags)){let r={};for(let o of e.tags)r[o]=!0;e={...e},e.tags=r}let a=!1;for(let r of s.handlers){if(r.channels&&!(e.channel&&r.channels.has(e.channel)))continue;if(r.filter){if(!e.tags)continue;let l=Ge.intersect(e.tags,r.filter.tags,{first:!r.filter.all});if(!l||r.filter.all&&l.length!==r.filter.tags.length)continue}r.count&&(--r.count,r.count<1&&s.removeListener(r.listener)),!a&&typeof t=="function"&&(t=t(),a=!0);let o=s.flagged("clone",r)?Ge.clone(t):t,c=s.flagged("spread",r)&&Array.isArray(o)?o.slice(0):[o];s.flagged("tags",r)&&e.tags&&c.push(e.tags);try{r.context?i([null,r.listener.apply(r.context,c)]):i([null,r.listener(...c)])}catch(l){i([l,null])}}}addListener(e,t,i){e=Rt.criteria(e),e.listener=t,e.context=i,e.filter&&(typeof e.filter=="string"||Array.isArray(e.filter))&&(e={...e},e.filter={tags:e.filter}),e=Je.attempt(e,Rt.schema.listener,"Invalid event listener options");let n=e.name,s=this.#e.get(n);return Ge.assert(s,`Unknown event ${n}`),s.addHandler(e),this}on(e,t,i){return this.addListener(e,t,i)}once(e,t,i){return e={...Rt.criteria(e),count:1},t?this.addListener(e,t,i):new Promise(n=>{this.addListener(e,(...s)=>n(s))})}few(e){Ge.assert(typeof e=="object","Criteria must be an object"),Ge.assert(e.count,"Criteria must include a count limit");let t=new z1.Team({meetings:e.count});return this.addListener(e,(...i)=>t.attend(i)),t.work}removeListener(e,t){return Ge.assert(this.#e.has(e),`Unknown event ${e}`),Ge.assert(typeof t=="function","Listener must be a function"),this.#e.get(e).removeListener(t),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return Ge.assert(this.#e.has(e),`Unknown event ${e}`),this.#e.get(e).handlers=null,this}hasListeners(e){return Ge.assert(this.#e.has(e),`Unknown event ${e}`),!!this.#e.get(e).handlers}};Rt.EventListener=class{constructor(e){this.flags=e,this.handlers=null}addHandler(e){Ge.assert(!e.channels||!this.flags.channels||Ge.intersect(this.flags.channels,e.channels).length===e.channels.size,`Unknown event channels ${e.channels&&[...e.channels].join(", ")}`),this.handlers=this.handlers?[...this.handlers,e]:[e]}removeListener(e){let t=this.handlers?.filter(i=>i.listener!==e);this.handlers=t?.length?t:null}flagged(e,t){return t[e]??this.flags[e]??!1}};Rt.criteria=function(e){return typeof e=="string"?{name:e}:e}});var Wh=w((Vh,Kh)=>{"use strict";Vh=Kh.exports=class{id=null;timeout=null;count=1;rule=null;resolve=null;reject=null;constructor(e,t){this.id=e,this.rule=t,this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n})}join(){return++this.count,this.promise}send(e,t,i,n){if(clearTimeout(this.timeout),e&&!i){this.reject(e);return}if(!this.rule.getDecoratedValue){this.resolve(t);return}e&&(n.error=e),this.resolve({value:t,cached:i,report:n})}setTimeout(e,t){clearTimeout(this.timeout),this.timeout=setTimeout(e,t)}}});var Yh=w((Jh,Qh)=>{"use strict";var U1=G(),Jn=z(),Gh=ha(),$e=xt(),H1=Wh(),zt={day:24*60*60*1e3,events:Gh.validate([{name:"error",channels:["generate","persist"]}])};zt.schema=$e.object({expiresIn:$e.number().integer().min(1),expiresAt:$e.string().regex(/^\d\d?\:\d\d$/),staleIn:[$e.number().integer().min(1).when("expiresAt",{is:$e.required(),then:$e.number().max(86399999)}),$e.func()],staleTimeout:$e.number().integer().min(1),generateFunc:$e.func(),generateTimeout:$e.number().integer().min(1).allow(!1),generateOnReadError:$e.boolean(),generateIgnoreWriteError:$e.boolean(),dropOnError:$e.boolean(),pendingGenerateTimeout:$e.number().integer().min(1),getDecoratedValue:$e.boolean().default(!1),privacy:$e.any(),cache:$e.any(),segment:$e.any(),shared:$e.any()}).without("expiresIn","expiresAt").with("staleIn","generateFunc").with("generateOnReadError","generateFunc").with("generateIgnoreWriteError","generateFunc").with("dropOnError","generateFunc").and("generateFunc","generateTimeout").and("staleIn","staleTimeout");Jh=Qh.exports=zt.Policy=class{rule=null;stats={sets:0,gets:0,hits:0,stales:0,generates:0,errors:0};_events=null;_cache=null;_segment=null;_pendings=new Map;_pendingGenerateCall=new Map;constructor(e,t,i){if(this._cache=t,this.rules(e),t){let n=t.validateSegmentName(i);Jn.assert(n===null,"Invalid segment name: "+i+(n?" ("+n.message+")":"")),this._segment=i}}get client(){return this._cache}get events(){return this._events||(this._events=new Gh.Podium(zt.events,{validate:!1})),this._events}_error(e,t){this._events&&this._events.emit({name:"error",channel:e},{source:e,error:t})}rules(e){this.rule=zt.Policy.compile(e,!!this._cache)}async get(e){++this.stats.gets,(!e||typeof e=="string")&&(e={id:e,string:!0});let t=this._pendings.get(e.id);if(t!==void 0)return t.join();t=new H1(e.id,this.rule),this._pendings.set(e.id,t);try{await this._get(t,e)}catch(i){this._send(e,i)}return t.promise}async _get(e,t){let i={},n=new Jn.Bench;if(this._cache)try{var s=await this._cache.get({segment:this._segment,id:t.id})}catch(a){i.error=a,++this.stats.errors,this._error("persist",a)}if(i.msec=n.elapsed(),s){i.stored=s.stored,i.ttl=s.ttl;let a=typeof this.rule.staleIn=="function"?this.rule.staleIn(s.stored,s.ttl):this.rule.staleIn;s.isStale=a?Date.now()-s.stored>=a:!1,i.isStale=s.isStale,s.isStale&&++this.stats.stales}if(!this.rule.generateFunc||i.error&&!this.rule.generateOnReadError){this._send(t,i.error,s?s.item:null,s,i);return}if(s&&!s.isStale){this._send(t,null,s.item,s,i);return}return Promise.race([e.promise,this._generate(e,t,s,i)])}_generate(e,t,i,n){if(i&&(i.ttl=i.ttl-this.rule.staleTimeout),i&&i.ttl>0?e.setTimeout(()=>this._send(t,null,i.item,i,n),this.rule.staleTimeout):this.rule.generateTimeout&&e.setTimeout(()=>this._send(t,U1.serverUnavailable(),null,null,n),this.rule.generateTimeout),!this._pendingGenerateCall.has(t.id)){if(++this.stats.generates,this.rule.pendingGenerateTimeout){let s=setTimeout(()=>this._pendingGenerateCall.delete(t.id),this.rule.pendingGenerateTimeout);this._pendingGenerateCall.set(t.id,s)}return this._callGenerateFunc(t,i,n)}}async _callGenerateFunc(e,t,i){let n={};try{var s=await this.rule.generateFunc(e.string?e.id:e,n)}catch(l){var a=l;this._error("generate",l)}let r=this._pendingGenerateCall.get(e.id);r&&(clearTimeout(r),this._pendingGenerateCall.delete(e.id));try{n.ttl===0||a&&this.rule.dropOnError?await this.drop(e.id):a||await this.set(e.id,s,n.ttl)}catch(l){var o=l;this._error("persist",l)}let c=a||(this.rule.generateIgnoreWriteError?null:o);if(t&&c&&!this.rule.dropOnError){this._send(e,c,t.item,t,i);return}this._send(e,c,s,null,i)}_send(e,t,i,n,s){let a=this._pendings.get(e.id);a&&(this._pendings.delete(e.id),a.send(t,i,n,s),s?.isStale!==void 0&&(this.stats.hits=this.stats.hits+a.count))}async set(e,t,i){if(++this.stats.sets,!!this._cache)try{await this._cache.set({segment:this._segment,id:zt.id(e)},t,i||zt.Policy.ttl(this.rule))}catch(n){throw++this.stats.errors,n}}async drop(e){if(this._cache)try{await this._cache.drop({segment:this._segment,id:zt.id(e)});return}catch(t){throw++this.stats.errors,t}}ttl(e){return zt.Policy.ttl(this.rule,e)}isReady(){return this._cache?this._cache.connection.isReady():!1}static compile(e,t){let i={};if(!e||!Object.keys(e).length)return i;e=$e.attempt(e,zt.schema,"Invalid cache policy configuration");let n=e.expiresIn!==void 0&&e.expiresIn!==null,s=e.expiresAt!==void 0&&e.expiresAt!==null;if(Jn.assert(!n||!e.staleIn||typeof e.staleIn=="function"||e.staleIn<e.expiresIn,"staleIn must be less than expiresIn"),Jn.assert(!e.staleIn||t,"Cannot use stale options without server-side caching"),Jn.assert(!e.staleTimeout||!n||e.staleTimeout<e.expiresIn,"staleTimeout must be less than expiresIn"),Jn.assert(!e.staleTimeout||!n||typeof e.staleIn=="function"||e.staleTimeout<e.expiresIn-e.staleIn,"staleTimeout must be less than the delta between expiresIn and staleIn"),Jn.assert(!e.staleTimeout||!e.pendingGenerateTimeout||e.staleTimeout<e.pendingGenerateTimeout,"pendingGenerateTimeout must be greater than staleTimeout if specified"),s){let a=/^(\d\d?):(\d\d)$/.exec(e.expiresAt);i.expiresAt={hours:parseInt(a[1],10),minutes:parseInt(a[2],10)}}else i.expiresIn=e.expiresIn??0;return e.generateFunc&&(i.generateFunc=e.generateFunc,i.generateTimeout=e.generateTimeout,e.staleIn&&(i.staleIn=e.staleIn,i.staleTimeout=e.staleTimeout),i.dropOnError=e.dropOnError!==void 0?e.dropOnError:!0,i.pendingGenerateTimeout=e.pendingGenerateTimeout!==void 0?e.pendingGenerateTimeout:0),i.generateOnReadError=e.generateOnReadError!==void 0?e.generateOnReadError:!0,i.generateIgnoreWriteError=e.generateIgnoreWriteError!==void 0?e.generateIgnoreWriteError:!0,i.getDecoratedValue=e.getDecoratedValue,i}static ttl(e,t,i){i=i??Date.now(),t=t??i;let n=i-t;if(n<0)return 0;if(e.expiresIn)return Math.max(e.expiresIn-n,0);if(e.expiresAt){if(n>zt.day)return 0;let s=new Date(t);s.setHours(e.expiresAt.hours),s.setMinutes(e.expiresAt.minutes),s.setSeconds(0),s.setMilliseconds(0);let a=s.getTime();return a<=t&&(a=a+zt.day),i>=a?0:a-i}return 0}};zt.id=function(e){return e&&typeof e=="object"?e.id:e}});var Xc=w(Nr=>{"use strict";var V1=Hh(),K1=Yh();Nr.Client=V1;Nr.Policy=Nr.policy=K1});var Xh=w(Zh=>{"use strict";var Qn=G(),fa=z(),Yn={maxTimer:2147483647,entrySize:144};Yn.defaults={maxByteSize:100*1024*1024,minCleanupIntervalMsec:1e3,cloneBuffersOnGet:!1};Zh.Engine=class{constructor(t={}){fa.assert(t.maxByteSize===void 0||t.maxByteSize>=0,"Invalid cache maxByteSize value"),fa.assert(t.allowMixedContent===void 0,"allowMixedContent no longer supported"),fa.assert(t.minCleanupIntervalMsec===void 0||t.minCleanupIntervalMsec<Yn.maxTimer,"Invalid cache minCleanupIntervalMsec value"),fa.assert(t.cloneBuffersOnGet===void 0||typeof t.cloneBuffersOnGet=="boolean","Invalid cloneBuffersOnGet value"),this.settings=fa.applyToDefaults(Yn.defaults,t),this.cache=null,this._timer=null,this._timerDue=null}start(){this.cache||(this.cache=new Map,this.byteSize=0)}_scheduleCleanup(t){let i=()=>{this._timer=null,this._timerDue=null;let a=Date.now(),r=1/0;for(let[,o]of this.cache)for(let[c,l]of o){let p=l.stored+l.ttl-a;p<=0?(o.delete(c),this.byteSize-=l.byteSize):r=Math.min(r,p)}r!==1/0&&this._scheduleCleanup(r)},n=Date.now(),s=Math.min(Math.max(this.settings.minCleanupIntervalMsec,t),Yn.maxTimer);if(this._timer){if(this._timerDue-n<t)return;clearTimeout(this._timer)}this._timerDue=n+s,this._timer=setTimeout(i,s)}stop(){clearTimeout(this._timer),this._timer=null,this._timerDue=null,this.cache=null,this.byteSize=0}isReady(){return!!this.cache}validateSegmentName(t){if(!t)throw new Qn.Boom("Empty string");if(t.indexOf("\0")!==-1)throw new Qn.Boom("Includes null character");return null}get(t){if(!this.cache)throw new Qn.Boom("Connection not started");let i=this.cache.get(t.segment);if(!i)return null;let n=i.get(t.id);if(!n)return null;if(n.stored+n.ttl<Date.now())return this.drop(t),null;let s=null;if(Buffer.isBuffer(n.item)){if(s=n.item,this.settings.cloneBuffersOnGet){let r=Buffer.alloc(s.length);s.copy(r),s=r}}else try{s=JSON.parse(n.item)}catch{throw new Qn.Boom("Bad value content")}return{item:s,stored:n.stored,ttl:n.ttl}}set(t,i,n){if(!this.cache)throw new Qn.Boom("Connection not started");let s=new Yn.MemoryCacheEntry(t,i,n),a=this.cache.get(t.segment);a||(a=new Map,this.cache.set(t.segment,a));let r=a.get(t.id);if(r&&(this.byteSize-=r.byteSize),this.settings.maxByteSize&&this.byteSize+s.byteSize>this.settings.maxByteSize)throw new Qn.Boom("Cache size limit reached");this._scheduleCleanup(n),a.set(t.id,s),this.byteSize+=s.byteSize}drop(t){if(!this.cache)throw new Qn.Boom("Connection not started");let i=this.cache.get(t.segment);if(i){let n=i.get(t.id);n&&(this.byteSize-=n.byteSize,i.delete(t.id))}}};Yn.MemoryCacheEntry=class{constructor(e,t,i){let n=0;Buffer.isBuffer(t)?(this.item=Buffer.alloc(t.length),t.copy(this.item),n=this.item.length):(this.item=JSON.stringify(t),n=Buffer.byteLength(this.item)),this.stored=Date.now(),this.ttl=i,this.byteSize=Yn.entrySize+n+Buffer.byteLength(e.segment)+Buffer.byteLength(e.id),this.timeoutId=null}}});var tf=w(ef=>{"use strict";var el=require("perf_hooks"),Fr=G(),Lr=z(),Zn=xt(),Mr={};Mr.schema=Zn.object({sampleInterval:Zn.number().min(0),maxHeapUsedBytes:Zn.number().min(0),maxEventLoopDelay:Zn.number().min(0),maxEventLoopUtilization:Zn.number().min(0),maxRssBytes:Zn.number().min(0)}).unknown();Mr.defaults={sampleInterval:0,maxHeapUsedBytes:0,maxRssBytes:0,maxEventLoopDelay:0,maxEventLoopUtilization:0};ef.Heavy=class{constructor(t){t=t||{},Zn.assert(t,Mr.schema,"Invalid load monitoring options"),this.settings=Lr.applyToDefaults(Mr.defaults,t),Lr.assert(this.settings.sampleInterval||!this.settings.maxEventLoopDelay&&!this.settings.maxHeapUsedBytes&&!this.settings.maxRssBytes&&!this.settings.maxEventLoopUtilization,"Load sample interval must be set to enable load limits"),this._eventLoopTimer=null,this._eventLoopUtilization=el.performance.eventLoopUtilization(),this._loadBench=new Lr.Bench,this.load={eventLoopDelay:0,eventLoopUtilization:0,heapUsed:0,rss:0}}start(){if(!this.settings.sampleInterval)return;let t=()=>{this._loadBench.reset();let i=()=>{let n=process.memoryUsage();this._eventLoopUtilization=el.performance.eventLoopUtilization(this._eventLoopUtilization),this.load.eventLoopDelay=this._loadBench.elapsed()-this.settings.sampleInterval,this.load.eventLoopUtilization=this._eventLoopUtilization.utilization,this.load.heapUsed=n.heapUsed,this.load.rss=n.rss,t()};this._eventLoopTimer=setTimeout(i,this.settings.sampleInterval)};t()}stop(){clearTimeout(this._eventLoopTimer),this._eventLoopTimer=null}check(){if(!this.settings.sampleInterval)return;Lr.assert(this._eventLoopTimer,"Cannot check load when sampler is not started");let t=this._loadBench.elapsed(),i=this.load;if(t>this.settings.sampleInterval&&(this._eventLoopUtilization=el.performance.eventLoopUtilization(this._eventLoopUtilization),i.eventLoopDelay=Math.max(i.eventLoopDelay,t-this.settings.sampleInterval),i.eventLoopUtilization=this._eventLoopUtilization.utilization),this.settings.maxEventLoopDelay&&i.eventLoopDelay>this.settings.maxEventLoopDelay)throw Fr.serverUnavailable("Server under heavy load (event loop)",i);if(this.settings.maxEventLoopUtilization&&i.eventLoopUtilization>this.settings.maxEventLoopUtilization)throw Fr.serverUnavailable("Server under heavy load (event loop utilization)",i);if(this.settings.maxHeapUsedBytes&&i.heapUsed>this.settings.maxHeapUsedBytes)throw Fr.serverUnavailable("Server under heavy load (heap)",i);if(this.settings.maxRssBytes&&i.rss>this.settings.maxRssBytes)throw Fr.serverUnavailable("Server under heavy load (rss)",i)}}});var nf=w((_O,W1)=>{W1.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/ace+json":{source:"iana",compressible:!0},"application/ace-groupcomm+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/aif+cbor":{source:"iana"},"application/aif+json":{source:"iana",compressible:!0},"application/alto-cdni+json":{source:"iana",compressible:!0},"application/alto-cdnifilter+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-propmap+json":{source:"iana",compressible:!0},"application/alto-propmapparams+json":{source:"iana",compressible:!0},"application/alto-tips+json":{source:"iana",compressible:!0},"application/alto-tipsparams+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/appinstaller":{compressible:!1,extensions:["appinstaller"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/appx":{compressible:!1,extensions:["appx"]},"application/appxbundle":{compressible:!1,extensions:["appxbundle"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/automationml-aml+xml":{source:"iana",compressible:!0,extensions:["aml"]},"application/automationml-amlx+zip":{source:"iana",compressible:!1,extensions:["amlx"]},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/bufr":{source:"iana"},"application/c2pa":{source:"iana"},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/cid-edhoc+cbor-seq":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/concise-problem-details+cbor":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cose-x509":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwl":{source:"iana",extensions:["cwl"]},"application/cwl+json":{source:"iana",compressible:!0},"application/cwl+yaml":{source:"iana"},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dpop+jwt":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"apache",compressible:!0,extensions:["ecma"]},"application/edhoc+cbor-seq":{source:"iana"},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.legacyesn+json":{source:"iana",compressible:!0},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdf":{source:"iana",extensions:["fdf"]},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+json":{source:"iana",compressible:!0},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gnap-binding-jws":{source:"iana"},"application/gnap-binding-jwsd":{source:"iana"},"application/gnap-binding-rotation-jws":{source:"iana"},"application/gnap-binding-rotation-jwsd":{source:"iana"},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/grib":{source:"iana"},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"iana",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"apache",charset:"UTF-8",compressible:!0,extensions:["js"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/jscontact+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jsonpath":{source:"iana"},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/linkset":{source:"iana"},"application/linkset+json":{source:"iana",compressible:!0},"application/load-control+xml":{source:"iana",compressible:!0},"application/logout+jwt":{source:"iana"},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4","mpg4","mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msix":{compressible:!1,extensions:["msix"]},"application/msixbundle":{compressible:!1,extensions:["msixbundle"]},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/ohttp-keys":{source:"iana"},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["sig","asc"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/private-token-issuer-directory":{source:"iana"},"application/private-token-request":{source:"iana"},"application/private-token-response":{source:"iana"},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.implied-document+xml":{source:"iana",compressible:!0},"application/prs.implied-executable":{source:"iana"},"application/prs.implied-object+json":{source:"iana",compressible:!0},"application/prs.implied-object+json-seq":{source:"iana"},"application/prs.implied-object+yaml":{source:"iana"},"application/prs.implied-structure":{source:"iana"},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.vcfbzip2":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0,extensions:["xsf"]},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"apache"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-checklist":{source:"iana"},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-signed-tal":{source:"iana"},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"apache"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana",extensions:["sql"]},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/st2110-41":{source:"iana"},"application/stix+json":{source:"iana",compressible:!0},"application/stratum":{source:"iana"},"application/swid+cbor":{source:"iana"},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tm+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vc":{source:"iana"},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.1ob":{source:"iana"},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3a+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ach+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc8+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.5gsa2x":{source:"iana"},"application/vnd.3gpp.5gsa2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.crs+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.current-location-discovery+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-msgstore-ctrl-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.pinapp-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.seal-group-doc+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-network-qos-management-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-ue-config-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-unicast-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-user-profile-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.v2x":{source:"iana"},"application/vnd.3gpp.vae-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acm.addressxfer+json":{source:"iana",compressible:!0},"application/vnd.acm.chatbot+json":{source:"iana",compressible:!0},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"apache",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"apache"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.parquet":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.apexlang":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"apache"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.belightsoft.lhzd+zip":{source:"iana",compressible:!1},"application/vnd.belightsoft.lhzl+zip":{source:"iana",compressible:!1},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.bzip3":{source:"iana"},"application/vnd.c3voc.schedule+xml":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.cncf.helm.chart.content.v1.tar+gzip":{source:"iana"},"application/vnd.cncf.helm.chart.provenance.v1.prov":{source:"iana"},"application/vnd.cncf.helm.config.v1+json":{source:"iana",compressible:!0},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datalog":{source:"iana"},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.eln+zip":{source:"iana",compressible:!1},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.erofs":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"apache",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.freelog.comic":{source:"iana"},"application/vnd.frogans.fnc":{source:"apache",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"apache",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.ga4gh.passport+jwt":{source:"iana"},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.genozip":{source:"iana"},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.gentoo.catmetadata+xml":{source:"iana",compressible:!0},"application/vnd.gentoo.ebuild":{source:"iana"},"application/vnd.gentoo.eclass":{source:"iana"},"application/vnd.gentoo.gpkg":{source:"iana"},"application/vnd.gentoo.manifest":{source:"iana"},"application/vnd.gentoo.pkgmetadata+xml":{source:"iana",compressible:!0},"application/vnd.gentoo.xpak":{source:"iana"},"application/vnd.geo+json":{source:"apache",compressible:!0},"application/vnd.geocube+xml":{source:"apache",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana",extensions:["ggs"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.gnu.taler.exchange+json":{source:"iana",compressible:!0},"application/vnd.gnu.taler.merchant+json":{source:"iana",compressible:!0},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"apache",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0,extensions:["xdcf"]},"application/vnd.gpxsee.map+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.hsl":{source:"iana"},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"apache"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"apache",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"apache"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipfs.ipns-record":{source:"iana"},"application/vnd.ipld.car":{source:"iana"},"application/vnd.ipld.dag-cbor":{source:"iana"},"application/vnd.ipld.dag-json":{source:"iana"},"application/vnd.ipld.raw":{source:"iana"},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.ldev.productlicensing":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.mdl":{source:"iana"},"application/vnd.mdl-mbsdf":{source:"iana"},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.medicalholodeck.recordxr":{source:"iana"},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mermaid":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.modl":{source:"iana"},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msgpack":{source:"iana"},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.nato.bindingdataobject+cbor":{source:"iana"},"application/vnd.nato.bindingdataobject+json":{source:"iana",compressible:!0},"application/vnd.nato.bindingdataobject+xml":{source:"iana",compressible:!0,extensions:["bdo"]},"application/vnd.nato.openxmlformats-package.iepd+zip":{source:"iana",compressible:!1},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"apache",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oai.workflows":{source:"iana"},"application/vnd.oai.workflows+json":{source:"iana",compressible:!0},"application/vnd.oai.workflows+yaml":{source:"iana"},"application/vnd.oasis.opendocument.base":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"apache",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-master-template":{source:"iana"},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.onvif.metadata":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.pt.mundusmundi":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0,extensions:["xhtm"]},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.relpipe":{source:"iana"},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.smintio.portals.archive":{source:"iana"},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sybyl.mol2":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml","uo"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.wasmflow.wafl":{source:"iana"},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordlift":{source:"iana"},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xecrets-encrypted":{source:"iana"},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vp":{source:"iana"},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xfdf":{source:"iana",extensions:["xfdf"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yaml":{source:"iana"},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+cbor":{source:"iana"},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yang-sid+json":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana",extensions:["adts","aac"]},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flac":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/matroska":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/midi-clip":{source:"iana"},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"apache"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{source:"iana",compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp","dib"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/dpx":{source:"iana",extensions:["dpx"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/j2c":{source:"iana"},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm","jpgm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxl":{source:"iana",extensions:["jxl"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif","btf"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"iana",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/bhttp":{source:"iana"},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/mls":{source:"iana"},"message/news":{source:"apache"},"message/ohttp-req":{source:"iana"},"message/ohttp-res":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"apache"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"apache"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/jt":{source:"iana",extensions:["jt"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/prc":{source:"iana",extensions:["prc"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/u3d":{source:"iana",extensions:["u3d"]},"model/vnd.bary":{source:"iana",extensions:["bary"]},"model/vnd.cld":{source:"iana",extensions:["cld"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana",extensions:["pyo","pyox"]},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usda":{source:"iana",extensions:["usda"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"apache"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/hl7v2":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["md","markdown"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/prs.texi":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.exchangeable":{source:"iana"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"apache"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.vcf":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vnd.zoo.kcl":{source:"iana"},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/wgsl":{source:"iana",extensions:["wgsl"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/evc":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/h266":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/matroska":{source:"iana"},"video/matroska-3d":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts","m2t","m2ts","mts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"apache"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var sf=w(_s=>{"use strict";var G1=require("path"),Dr=z(),J1=nf(),_t={compressibleRx:/^text\/|\+json$|\+text$|\+xml$/};_s.MimosEntry=class{constructor(e,t){this.type=e,this.source="mime-db",this.extensions=[],this.compressible=void 0,Object.assign(this,t),this.compressible===void 0&&(this.compressible=_t.compressibleRx.test(e))}};_t.insertEntry=function(e,t,i){i.byType.set(e,t);for(let n of t.extensions)i.byExtension.set(n,t),n.length>i.maxExtLength&&(i.maxExtLength=n.length)};_t.compile=function(e){let t={byType:new Map,byExtension:new Map,maxExtLength:0};for(let i in e){let n=new _s.MimosEntry(i,e[i]);_t.insertEntry(i,n,t)}return t};_t.getTypePart=function(e){let t=e.indexOf(";");return t===-1?e:e.slice(0,t)};_t.applyPredicate=function(e){return e.predicate?e.predicate(Dr.clone(e)):e};_s.Mimos=class{#e=_t.base;constructor(t={}){if(t.override){Dr.assert(typeof t.override=="object","overrides option must be an object"),this.#e={...this.#e,byType:new Map(this.#e.byType),byExtension:new Map(this.#e.byExtension)};for(let i in t.override){let n=t.override[i];Dr.assert(!n.predicate||typeof n.predicate=="function","predicate option must be a function");let s=this.#e.byType.get(i),a=s?Dr.applyToDefaults(s,n):n,r=new _s.MimosEntry(i,a);_t.insertEntry(i,r,this.#e)}}}path(t){let i=G1.extname(t).slice(1).toLowerCase(),n=this.#e.byExtension.get(i)??{};return _t.applyPredicate(n)}type(t){t=_t.getTypePart(t);let i=this.#e.byType.get(t);return i||(t=t.trim().toLowerCase(),i=this.#e.byType.get(t)),i?_t.applyPredicate(i):(i=new _s.MimosEntry(t,{source:"mimos"}),_t.insertEntry(t,i,this.#e),i)}};_t.base=_t.compile(J1)});var ga=w(Es=>{"use strict";var Q1={suspectRx:/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/};Es.parse=function(e,...t){let i=typeof t[0]=="object"&&t[0],n=t.length>1||!i?t[0]:void 0,s=t.length>1&&t[1]||i||{},a=JSON.parse(e,n);return s.protoAction==="ignore"||!a||typeof a!="object"||!e.match(Q1.suspectRx)||Es.scan(a,s),a};Es.scan=function(e,t={}){let i=[e];for(;i.length;){let n=i;i=[];for(let s of n){if(Object.prototype.hasOwnProperty.call(s,"__proto__")){if(t.protoAction!=="remove")throw new SyntaxError("Object contains forbidden prototype property");delete s.__proto__}for(let a in s){let r=s[a];r&&typeof r=="object"&&i.push(s[a])}}}};Es.safeParse=function(e,t){try{return Es.parse(e,t)}catch{return null}}});var tl=w(pn=>{"use strict";var af=require("crypto"),rf=G(),Br={};pn.randomString=function(e){return pn.randomBits((e+1)*6).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"").slice(0,e)};pn.randomAlphanumString=function(e){let t="";for(;t.length<e;){let i=pn.randomBits((e+1)*6);t+=i.toString("base64").replace(/[^a-zA-Z0-9]/g,"")}return t.slice(0,e)};pn.randomDigits=function(e){let t=[],i=Br.random(e*2),n=0;for(;t.length<e;)n>=i.length&&(i=Br.random(e*2),n=0),i[n]<250&&t.push(i[n]%10),++n;return t.join("")};pn.randomBits=function(e){if(!e||e<0)throw rf.internal("Invalid random bits count");let t=Math.ceil(e/8);return Br.random(t)};pn.fixedTimeComparison=function(e,t){try{return af.timingSafeEqual(Buffer.from(e),Buffer.from(t))}catch{return!1}};Br.random=function(e){try{return af.randomBytes(e)}catch(t){throw rf.internal("Failed generating random bits: "+t.message)}}});var of=w(xa=>{"use strict";var Y1=require("stream"),Z1={decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};xa.decode=function(e){let t=Z1.decodeChars,i=e.length,n=Math.ceil(i/4)*3,s=Buffer.alloc(n),a,r,o,c,l=0;for(let p=0;p<i;){do a=t[e[p++]&255];while(p<i&&a===-1);if(a===-1)break;do r=t[e[p++]&255];while(p<i&&r===-1);if(r===-1)break;s[l++]=a<<2|(r&48)>>4;do{if(o=e[p++]&255,o===61)return s.slice(0,l);o=t[o]}while(p<i&&o===-1);if(o===-1)break;s[l++]=(r&15)<<4|(o&60)>>2;do{if(c=e[p++]&255,c===61)return s.slice(0,l);c=t[c]}while(p<i&&c===-1);c!==-1&&(s[l++]=(o&3)<<6|c)}return l===n?s:s.slice(0,l)};xa.Decoder=class extends Y1.Transform{constructor(){super(),this._reminder=null}_transform(t,i,n){let s=this._reminder?Buffer.concat([this._reminder,t]):t,a=s.length%4;return a?(this._reminder=s.slice(s.length-a),s=s.slice(0,s.length-a)):this._reminder=null,this.push(xa.decode(s)),n()}_flush(t){return this._reminder&&this.push(xa.decode(this._reminder)),t()}}});var cf=w(va=>{"use strict";var X1=require("stream");va.encode=function(e){return Buffer.from(e.toString("base64"))};va.Encoder=class extends X1.Transform{constructor(){super(),this._reminder=null}_transform(t,i,n){let s=this._reminder?Buffer.concat([this._reminder,t]):t,a=s.length%3;return a?(this._reminder=s.slice(s.length-a),s=s.slice(0,s.length-a)):this._reminder=null,this.push(va.encode(s)),n()}_flush(t){return this._reminder&&this.push(va.encode(this._reminder)),t()}}});var il=w(Xn=>{"use strict";var eE=z(),lf=of(),pf=cf();Xn.decode=lf.decode;Xn.encode=pf.encode;Xn.Decoder=lf.Decoder;Xn.Encoder=pf.Encoder;Xn.base64urlEncode=function(e,t){return eE.assert(typeof e=="string"||Buffer.isBuffer(e),"value must be string or buffer"),(Buffer.isBuffer(e)?e:Buffer.from(e,t||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")};Xn.base64urlDecode=function(e,t){if(typeof e!="string")throw new Error("Value not a string");if(!/^[\w\-]*$/.test(e))throw new Error("Invalid character");let i=Buffer.from(e,"base64");return t==="buffer"?i:i.toString(t||"binary")}});var df=w(we=>{"use strict";var Ur=require("crypto"),zr=il(),Le=G(),tE=ga(),nl=tl(),uf=z(),es={};we.defaults={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0};we.algorithms={"aes-128-ctr":{keyBits:128,ivBits:128},"aes-256-cbc":{keyBits:256,ivBits:128},sha256:{keyBits:256}};we.macFormatVersion="2";we.macPrefix="Fe26."+we.macFormatVersion;we.generateKey=async function(e,t){if(!e)throw new Le.Boom("Empty password");if(!t||typeof t!="object")throw new Le.Boom("Bad options");let i=we.algorithms[t.algorithm];if(!i)throw new Le.Boom("Unknown algorithm: "+t.algorithm);let n={};if(Buffer.isBuffer(e)){if(e.length<i.keyBits/8)throw new Le.Boom("Key buffer (password) too small");n.key=e,n.salt=""}else{if(e.length<t.minPasswordlength)throw new Le.Boom("Password string too short (min "+t.minPasswordlength+" characters required)");let s=t.salt;if(!s){if(!t.saltBits)throw new Le.Boom("Missing salt and saltBits options");s=nl.randomBits(t.saltBits).toString("hex")}let a=await es.pbkdf2(e,s,t.iterations,i.keyBits/8,"sha1");n.key=a,n.salt=s}return t.iv?n.iv=t.iv:i.ivBits&&(n.iv=nl.randomBits(i.ivBits)),n};we.encrypt=async function(e,t,i){let n=await we.generateKey(e,t),s=Ur.createCipheriv(t.algorithm,n.key,n.iv);return{encrypted:Buffer.concat([s.update(i,"utf8"),s.final()]),key:n}};we.decrypt=async function(e,t,i){let n=await we.generateKey(e,t),s=Ur.createDecipheriv(t.algorithm,n.key,n.iv),a=s.update(i,null,"utf8");return a=a+s.final("utf8"),a};we.hmacWithPassword=async function(e,t,i){let n=await we.generateKey(e,t);return{digest:Ur.createHmac(t.algorithm,n.key).update(i).digest("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),salt:n.salt}};es.normalizePassword=function(e){return e&&typeof e=="object"&&!Buffer.isBuffer(e)?{id:e.id,encryption:e.secret??e.encryption,integrity:e.secret??e.integrity}:{encryption:e,integrity:e}};we.seal=async function(e,t,i){i=Object.assign({},i);let n=Date.now()+(i.localtimeOffsetMsec??0),s=es.stringify(e),a="";if(t=es.normalizePassword(t),t.id){if(!/^\w+$/.test(t.id))throw new Le.Boom("Invalid password id");a=t.id}let{encrypted:r,key:o}=await we.encrypt(t.encryption,i.encryption,s),c=zr.base64urlEncode(r),l=zr.base64urlEncode(o.iv),p=i.ttl?n+i.ttl:"",u=we.macPrefix+"*"+a+"*"+o.salt+"*"+l+"*"+c+"*"+p,d=await we.hmacWithPassword(t.integrity,i.integrity,u);return u+"*"+d.salt+"*"+d.digest};we.unseal=async function(e,t,i){i=Object.assign({},i);let n=Date.now()+(i.localtimeOffsetMsec??0),s=e.split("*");if(s.length!==8)throw new Le.Boom("Incorrect number of sealed components");let a=s[0],r=s[1],o=s[2],c=s[3],l=s[4],p=s[5],u=s[6],d=s[7],m=a+"*"+r+"*"+o+"*"+c+"*"+l+"*"+p;if(a!==we.macPrefix)throw new Le.Boom("Wrong mac prefix");if(p){if(!p.match(/^\d+$/))throw new Le.Boom("Invalid expiration");if(parseInt(p,10)<=n-i.timestampSkewSec*1e3)throw new Le.Boom("Expired seal")}if(!t)throw new Le.Boom("Empty password");if(typeof t=="object"&&!Buffer.isBuffer(t)&&(t=t[r||"default"],!t))throw new Le.Boom("Cannot find password: "+r);t=es.normalizePassword(t);let f=uf.clone(i.integrity);f.salt=u;let x=await we.hmacWithPassword(t.integrity,f,m);if(!nl.fixedTimeComparison(x.digest,d))throw new Le.Boom("Bad hmac value");try{var E=zr.base64urlDecode(l,"buffer")}catch(S){throw Le.boomify(S)}let j=uf.clone(i.encryption);j.salt=o;try{j.iv=zr.base64urlDecode(c,"buffer")}catch(S){throw Le.boomify(S)}let q=await we.decrypt(t.encryption,j,E);try{return tE.parse(q)}catch(S){throw new Le.Boom("Failed parsing sealed object JSON: "+S.message)}};es.stringify=function(e){try{return JSON.stringify(e)}catch(t){throw new Le.Boom("Failed to stringify object: "+t.message)}};es.pbkdf2=function(...e){return new Promise((t,i)=>{let n=(s,a)=>{if(s)return i(Le.boomify(s));t(a)};e.push(n),Ur.pbkdf2(...e)})}});var ff=w(ks=>{"use strict";var hf=require("querystring"),pt=G(),mf=it(),iE=ga(),nE=tl(),Mi=z(),un=df(),me=xt(),J={macPrefix:"hapi.signed.cookie.1"};J.schema=me.object({strictHeader:me.boolean(),ignoreErrors:me.boolean(),isSecure:me.boolean(),isHttpOnly:me.boolean(),isSameSite:me.valid("Strict","Lax","None",!1),path:me.string().allow(null),domain:me.string().allow(null),ttl:me.number().allow(null),encoding:me.string().valid("base64json","base64","form","iron","none"),sign:me.object({password:[me.string(),me.binary(),me.object()],integrity:me.object()}),iron:me.object(),password:[me.string(),me.binary(),me.object()],contextualize:me.function(),clearInvalid:me.boolean(),autoValue:me.any(),passThrough:me.boolean()});J.defaults={strictHeader:!0,ignoreErrors:!1,isSecure:!0,isHttpOnly:!0,isSameSite:"Strict",path:null,domain:null,ttl:null,encoding:"none"};J.validateRx={nameRx:{strict:/^[^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+$/,loose:/^[^=\s]*$/},valueRx:{strict:/^[^\x00-\x20\"\,\;\\\x7F]*$/,loose:/^(?:"([^\"]*)")|(?:[^\;]*)$/},domainRx:/^\.?[a-z\d]+(?:(?:[a-z\d]*)|(?:[a-z\d\-]*[a-z\d]))(?:\.[a-z\d]+(?:(?:[a-z\d]*)|(?:[a-z\d\-]*[a-z\d])))*$/,domainLabelLenRx:/^\.?[a-z\d\-]{1,63}(?:\.[a-z\d\-]{1,63})*$/,pathRx:/^\/[^\x00-\x1F\;]*$/};J.pairsRx=/\s*([^=\s]*)\s*=\s*([^\;]*)(?:(?:;\s*)|$)/g;ks.Definitions=class{constructor(e){this.settings=Mi.applyToDefaults(J.defaults,e??{}),me.assert(this.settings,J.schema,"Invalid state definition defaults"),this.cookies={},this.names=[]}add(e,t){Mi.assert(e&&typeof e=="string","Invalid name"),Mi.assert(!this.cookies[e],"State already defined:",e);let i=Mi.applyToDefaults(this.settings,t??{},{nullOverride:!0});me.assert(i,J.schema,"Invalid state definition: "+e),this.cookies[e]=i,this.names.push(e)}async parse(e){let t={},i=[],n=J.parsePairs(e,(c,l)=>{if(c==="__proto__")throw pt.badRequest("Invalid cookie header");t[c]?(Array.isArray(t[c])||(t[c]=[t[c]]),t[c].push(l)):(t[c]=l,i.push(c))}),s=[];if(n!==null){if(!this.settings.ignoreErrors)throw pt.badRequest("Invalid cookie header");s.push({settings:this.settings,reason:`Header contains unexpected syntax: ${n}`})}let a=[],r=(c,l,p,u)=>{let d={name:l,value:p,settings:u,reason:typeof c=="string"?c:c.message};s.push(d),u.ignoreErrors||a.push(d)},o={};for(let c of i){let l=t[c],p=this.cookies[c]??this.settings;if(p.strictHeader){let d=J.validate(c,t);if(d){r(d,c,l,p);continue}}if(p.encoding==="none"){o[c]=l;continue}if(!Array.isArray(l)){try{let d=await J.unsign(c,l,p),m=await J.decode(d,p);o[c]=m}catch(d){mf.rethrow(d,"system"),r(d,c,l,p)}continue}let u=[];for(let d of l)try{let m=await J.unsign(c,d,p),f=await J.decode(m,p);u.push(f)}catch(m){mf.rethrow(m,"system"),r(m,c,l,p)}o[c]=u}if(a.length){let c=pt.badRequest("Invalid cookie value",a);throw c.states=o,c.failed=s,c}return{states:o,failed:s}}async format(e,t){if(!e||Array.isArray(e)&&!e.length)return[];Array.isArray(e)||(e=[e]);let i=[];for(let n=0;n<e.length;++n){let s=e[n],a=this.cookies[s.name]??this.settings,r=s.options?Mi.applyToDefaults(a,s.options,{nullOverride:!0}):a;if(r.contextualize&&(r===a&&(r=Mi.clone(r)),await r.contextualize(r,t)),!(r.strictHeader?J.validateRx.nameRx.strict:J.validateRx.nameRx.loose).test(s.name))throw pt.badImplementation("Invalid cookie name: "+s.name);let c=await ks.prepareValue(s.name,s.value,r),l=r.strictHeader?J.validateRx.valueRx.strict:J.validateRx.valueRx.loose;if(c&&(typeof c!="string"||!c.match(l)))throw pt.badImplementation("Invalid cookie value: "+s.value);let p=s.name+"="+(c||"");if(r.ttl!==null&&r.ttl!==void 0){let u=new Date(r.ttl?Date.now()+r.ttl:0);p=p+"; Max-Age="+Math.floor(r.ttl/1e3)+"; Expires="+u.toUTCString()}if(r.isSecure&&(p=p+"; Secure"),r.isHttpOnly&&(p=p+"; HttpOnly"),r.isSameSite&&(p=`${p}; SameSite=${r.isSameSite}`),r.domain){let u=r.domain.toLowerCase();if(!u.match(J.validateRx.domainLabelLenRx))throw pt.badImplementation("Cookie domain too long: "+r.domain);if(!u.match(J.validateRx.domainRx))throw pt.badImplementation("Invalid cookie domain: "+r.domain);p=p+"; Domain="+u}if(r.path){if(!r.path.match(J.validateRx.pathRx))throw pt.badImplementation("Invalid cookie path: "+r.path);p=p+"; Path="+r.path}i.push(p)}return i}passThrough(e,t){if(!this.names.length)return e;let i=[];for(let n=0;n<this.names.length;++n){let s=this.names[n],a=this.cookies[s];(a.passThrough!==void 0?a.passThrough:t)||i.push(s)}return ks.exclude(e,i)}};J.parsePairs=function(e,t){let i=0;for(;i<e.length;){let n=e.indexOf("=",i);if(n===-1)return e.slice(i);let s=e.indexOf(";",n),a=s!==-1?s:e.length,r=e.slice(i,n).trim(),o=e.slice(n+1,a).trim(),c=o.startsWith('"')&&o.endsWith('"')&&o!=='"'?o.slice(1,-1):o;t(r,c),i=a+1}return null};J.validate=function(e,t){if(!e.match(J.validateRx.nameRx.strict))return"Invalid cookie name";let i=[].concat(t[e]);for(let n=0;n<i.length;++n)if(!i[n].match(J.validateRx.valueRx.strict))return"Invalid cookie value";return null};J.unsign=async function(e,t,i){if(!i.sign)return t;let n=t.lastIndexOf(".");if(n===-1)throw pt.badRequest("Missing signature separator");let s=t.slice(0,n),a=t.slice(n+1);if(!a)throw pt.badRequest("Missing signature");let r=a.split("*");if(r.length!==2)throw pt.badRequest("Invalid signature format");let o=r[0],c=r[1],l=Mi.clone(i.sign.integrity??un.defaults.integrity);l.salt=o;let p=await un.hmacWithPassword(i.sign.password,l,[J.macPrefix,e,s].join(`
`));if(!nE.fixedTimeComparison(p.digest,c))throw pt.badRequest("Invalid hmac value");return s};J.decode=async function(e,t){if(!e&&t.encoding==="form")return{};if(Mi.assert(typeof e=="string","Invalid string"),t.encoding==="iron")return await un.unseal(e,t.password,t.iron??un.defaults);if(t.encoding==="base64json"){let i=Buffer.from(e,"base64").toString("binary");try{return iE.parse(i)}catch{throw pt.badRequest("Invalid JSON payload")}}return t.encoding==="base64"?Buffer.from(e,"base64").toString("binary"):hf.parse(e)};ks.prepareValue=async function(e,t,i){Mi.assert(i&&typeof i=="object","Missing or invalid options");try{let n=await J.encode(t,i);return await J.sign(e,n,i.sign)}catch(n){throw pt.badImplementation("Failed to encode cookie ("+e+") value: "+n.message)}};J.encode=function(e,t){if(e===void 0||t.encoding==="none")return e;if(t.encoding==="iron")return un.seal(e,t.password,t.iron??un.defaults);if(t.encoding==="base64")return Buffer.from(e,"binary").toString("base64");if(t.encoding==="base64json"){let i=JSON.stringify(e);return Buffer.from(i,"binary").toString("base64")}return hf.stringify(e)};J.sign=async function(e,t,i){if(t===void 0||!i)return t;let n=await un.hmacWithPassword(i.password,i.integrity??un.defaults.integrity,[J.macPrefix,e,t].join(`
`));return t+"."+n.salt+"*"+n.digest};ks.exclude=function(e,t){let i="";return e.replace(J.pairsRx,(s,a,r)=>(t.indexOf(a)===-1&&(i=i+(i?";":"")+a+"="+r),""))===""?i:pt.badRequest("Invalid cookie header")}});var al=w(sl=>{"use strict";var ni=G(),bi={};bi.contentTypeRegex=/^([^\/\s]+\/[^\s;]+)(.*)?$/;bi.charsetParamRegex=/;\s*charset=(?:"([^"]+)"|([^;"\s]+))/i;bi.boundaryParamRegex=/;\s*boundary=(?:"([^"]+)"|([^;"\s]+))/i;sl.type=function(e){if(!e)throw ni.badRequest("Invalid content-type header");let t=e.match(bi.contentTypeRegex);if(!t)throw ni.badRequest("Invalid content-type header");let i={mime:t[1].toLowerCase()},n=t[2];if(n){let s=n.match(bi.charsetParamRegex);s&&(i.charset=(s[1]||s[2]).toLowerCase())}if(i.mime.indexOf("multipart/")===0){if(n){let s=n.match(bi.boundaryParamRegex);s&&(i.boundary=s[1]||s[2])}if(!i.boundary)throw ni.badRequest("Invalid content-type header: multipart missing boundary")}return i};bi.contentDispositionRegex=/^\s*form-data\s*(?:;\s*(.+))?$/i;bi.contentDispositionParamRegex=/([^\=\*\s]+)(\*)?\s*\=\s*(?:([^;'"\s]+\'[\w-]*\'[^;\s]+)|(?:\"([^"]*)\")|([^;\s]*))(?:\s*(?:;\s*)|$)/g;sl.disposition=function(e){if(!e)throw ni.badRequest("Missing content-disposition header");let t=e.match(bi.contentDispositionRegex);if(!t)throw ni.badRequest("Invalid content-disposition header format");let i=t[1];if(!i)throw ni.badRequest("Invalid content-disposition header missing parameters");let n={};if(i.replace(bi.contentDispositionParamRegex,(s,a,r,o,c,l)=>{if(a==="__proto__")throw ni.badRequest("Invalid content-disposition header format includes invalid parameters");let p;if(r){if(!o)throw ni.badRequest("Invalid content-disposition header format includes invalid parameters");try{p=decodeURIComponent(o.split("'")[2])}catch{throw ni.badRequest("Invalid content-disposition header format includes invalid parameters")}}else p=c||l||"";if(a==="name"&&p==="__proto__")throw ni.badRequest("Invalid content-disposition header format includes invalid parameters");n[a]=p}),!n.name)throw ni.badRequest("Invalid content-disposition header missing name parameter");return n}});var vf=w(xf=>{"use strict";var sE=require("crypto"),gf=require("path");xf.uniqueFilename=function(e,t){t?t=t[0]!=="."?"."+t:t:t="",e=gf.resolve(e);let i=[Date.now(),process.pid,sE.randomBytes(8).toString("hex")].join("-")+t;return gf.join(e,i)}});var yf=w(bf=>{"use strict";var aE=z();bf.Vise=class{constructor(t){if(this.length=0,this._chunks=[],this._offset=0,t){t=[].concat(t);for(let i=0;i<t.length;++i)this.push(t[i])}}push(t){aE.assert(Buffer.isBuffer(t),"Chunk must be a buffer");let i={data:t,length:t.length,offset:this.length+this._offset,index:this._chunks.length};this._chunks.push(i),this.length+=t.length}shift(t){if(!t)return[];let i=this._offset,n=this.#e(t),s=this._chunks.length;this._offset=0,n&&(s=n.chunk.index,this._offset=n.offset);let a=[];for(let r=0;r<s;++r){let o=this._chunks.shift();r===0&&i?a.push(o.data.slice(i)):a.push(o.data)}this._offset&&a.push(n.chunk.data.slice(s?0:i,this._offset)),this.length=0;for(let r=0;r<this._chunks.length;++r){let o=this._chunks[r];o.offset=this.length,o.index=r,this.length+=o.length}return this.length-=this._offset,a}readUInt8(t){let i=this.#e(t);return i?i.chunk.data[i.offset]:void 0}at(t){return this.readUInt8(t)}#e(t){if(t<0)return null;t=t+this._offset;for(let i=0;i<this._chunks.length;++i){let n=this._chunks[i],s=t-n.offset;if(s<n.length)return{chunk:n,offset:s}}return null}chunks(){let t=[];for(let i=0;i<this._chunks.length;++i){let n=this._chunks[i];i===0&&this._offset?t.push(n.data.slice(this._offset)):t.push(n.data)}return t}startsWith(t,i,n){if(i=i??0,n=n?Math.min(t.length,n):t.length,i+n>this.length)return!1;let s=this.#e(i);if(!s)return!1;let a=s.chunk.index;for(let r=0;a<this._chunks.length&&r<n;++a){let o=this._chunks[a],c=a===s.chunk.index?s.offset:0;for(;c<o.length&&r<n;++c,++r)if(o.data[c]!==t[r])return!1}return!0}}});var wf=w(yi=>{"use strict";var rE=require("stream"),Hr=z(),{Vise:oE}=yf(),Vr={};yi.compile=function(e){Hr.assert(e?.length,"Missing needle"),Hr.assert(Buffer.isBuffer(e),"Needle must be a buffer");let t={value:e,lastPos:e.length-1,last:e[e.length-1],length:e.length,badCharShift:Buffer.alloc(256)};for(let n=0;n<256;++n)t.badCharShift[n]=t.length;let i=t.length-1;for(let n=0;n<i;++n)t.badCharShift[t.value[n]]=i-n;return t};yi.horspool=function(e,t,i){Hr.assert(e,"Missing haystack"),t=t.badCharShift?t:yi.compile(t),i=i??0;for(let n=i;n<=e.length-t.length;){let s=e.readUInt8(n+t.lastPos);if(s===t.last&&Vr.startsWith(e,t,n))return n;n+=t.badCharShift[s]}return-1};Vr.startsWith=function(e,t,i){if(e.startsWith)return e.startsWith(t.value,i,t.lastPos);for(let n=0;n<t.lastPos;++n)if(t.value[n]!==e.readUInt8(i+n))return!1;return!0};yi.all=function(e,t,i){t=yi.compile(t),i=i??0;let n=[];for(let s=i;s!==-1&&s<e.length;)s=yi.horspool(e,t,s),s!==-1&&(n.push(s),s+=t.length);return n};Vr._indexOf=function(e,t){Hr.assert(e,"Missing haystack");for(let i=0;i<=e.length-t.length;++i)if(e.startsWith(t.value,i))return i;return-1};yi.Stream=class extends rE.Writable{constructor(e){super(),this.needle(e),this._haystack=new oE,this._indexOf=this._needle.length>2?yi.horspool:Vr._indexOf,this.on("finish",()=>{let t=this._haystack.chunks();for(let i=0;i<t.length;++i)this.emit("haystack",t[i])})}needle(e){this._needle=yi.compile(e)}_write(e,t,i){this._haystack.push(e);let n=this._indexOf(this._haystack,this._needle);for(n===-1&&e.length>=this._needle.length&&this._flush(this._haystack.length-e.length);n!==-1;)this._flush(n),this._haystack.shift(this._needle.length),this.emit("needle"),n=this._indexOf(this._haystack,this._needle);if(this._haystack.length){let a=this._haystack.length-this._needle.length+1;for(;a<this._haystack.length&&!this._haystack.startsWith(this._needle.value,a,this._haystack.length-a);++a);this._flush(a)}return i()}_flush(e){let t=this._haystack.shift(e);for(let i=0;i<t.length;++i)this.emit("haystack",t[i])}flush(){let e=this._haystack.shift(this._haystack.length);for(let t=0;t<e.length;++t)this.emit("haystack",e[t])}}});var Sf=w(kf=>{"use strict";var _f=require("stream"),cE=il(),Ut=G(),lE=al(),rl=z(),Ef=wf(),ut={};ut.state={preamble:0,boundary:1,header:2,payload:3,epilogue:4};ut.defaults={maxBytes:1/0,maxParts:1/0};kf.Dispenser=class extends _f.Writable{constructor(e){super({autoDestroy:!1}),rl.assert(e!==null&&typeof e=="object","options must be an object");let t=rl.applyToDefaults(ut.defaults,e);this._boundary=t.boundary,this._state=ut.state.preamble,this._held="",this._stream=null,this._headers={},this._name="",this._pendingHeader="",this._error=null,this._bytesCount=0,this._partsCount=0,this._maxBytes=t.maxBytes,this._maxParts=t.maxParts,this._parts=new Ef.Stream(Buffer.from("--"+t.boundary)),this._lines=new Ef.Stream(Buffer.from(`\r
`)),this._parts.on("needle",()=>this.#i()),this._parts.on("haystack",r=>this.#n(r)),this._lines.on("needle",()=>this.#s()),this._lines.on("haystack",r=>this.#r(r)),this.once("finish",()=>this._parts.end()),this._parts.once("close",()=>this._lines.end());let i=null,n=r=>{if(i&&(i.removeListener("data",a),i.removeListener("error",n),i.removeListener("aborted",s)),r)return this.#t(r);this.#e("close")};n=rl.once(n),this._lines.once("close",()=>{this._state===ut.state.epilogue?this._held&&(this.#e("epilogue",this._held),this._held=""):this._state===ut.state.boundary?this._held?this._held!=="--"&&this.#t(Ut.badRequest("Only white space allowed after boundary at end")):this.#t(Ut.badRequest("Missing end boundary")):this.#t(Ut.badRequest("Incomplete multipart payload")),setImmediate(n)});let s=()=>{n(Ut.badRequest("Client request aborted"))},a=r=>{this._bytesCount+=Buffer.byteLength(r),this._bytesCount>this._maxBytes&&n(Ut.entityTooLarge("Maximum size exceeded"))};this.once("pipe",r=>{i=r,r.on("data",a),r.once("error",n),r.once("aborted",s)})}_write(e,t,i){return this._error||this._parts.write(e),i()}#e(...e){this._error||this.emit(...e)}#t(e){this.#e("error",e),this._error=e}#i(){if(this._lines.flush(),this._state===ut.state.preamble){if(this._held){let e=this._held.length-1;if(this._held[e]!==`
`||this._held[e-1]!=="\r")return this.#t(Ut.badRequest("Preamble missing CRLF terminator"));this.#e("preamble",this._held.slice(0,-2)),this._held=""}this._parts.needle(Buffer.from(`\r
--`+this._boundary))}else if(this._partsCount++,this._partsCount>this._maxParts)return this.#t(Ut.badRequest("Maximum parts exceeded"));this._state=ut.state.boundary,this._stream?(this._stream.end(),this._stream=null):this._name&&(this.#e("field",this._name,this._held),this._name="",this._held="")}#n(e){this._state===ut.state.preamble?this._held=this._held+e.toString():this._state===ut.state.payload?this._stream?this._stream.write(e):this._held=this._held+e.toString():this._lines.write(e)}#s(){if(this._state===ut.state.boundary){if(this._held&&(this._held=this._held.replace(/[\t ]/g,""),this._held)){if(this._held==="--"){this._state=ut.state.epilogue,this._held="";return}return this.#t(Ut.badRequest("Only white space allowed after boundary"))}this._state=ut.state.header;return}if(this._state===ut.state.header){if(this._held){if(this._held[0]===" "||this._held[0]==="	"){if(!this._pendingHeader)return this.#t(Ut.badRequest("Invalid header continuation without valid declaration on previous line"));this._pendingHeader=this._pendingHeader+" "+this._held.slice(1),this._held="";return}this.#a(),this._pendingHeader=this._held,this._held="";return}this.#a(),this._state=ut.state.payload;let e;try{e=lE.disposition(this._headers["content-disposition"])}catch(t){return this.#t(t)}if(e.filename!==void 0){let t=new _f.PassThrough,i=this._headers["content-transfer-encoding"];i&&i.toLowerCase()==="base64"?(this._stream=new cE.Decoder,this._stream.pipe(t)):this._stream=t,t.name=e.name,t.filename=e.filename,t.headers=this._headers,this._headers={},this.#e("part",t)}else this._name=e.name;this._lines.flush();return}this._held=this._held+`\r
`}#r(e){this._stream?this._stream.write(e):this._held=this._held+e.toString()}#a(){if(!this._pendingHeader)return;let e=this._pendingHeader.indexOf(":");if(e===-1)return this.#t(Ut.badRequest("Invalid header missing colon separator"));if(!e)return this.#t(Ut.badRequest("Invalid header missing field name"));let t=this._pendingHeader.slice(0,e).toLowerCase();if(t==="__proto__")return this.#t(Ut.badRequest("Invalid header"));this._headers[t]=this._pendingHeader.slice(e+1).trim(),this._pendingHeader=""}}});var ol=w((HO,Af)=>{"use strict";var pE=require("stream"),uE={};Af.exports=uE.Payload=class extends pE.Readable{constructor(e,t){super();let i=[].concat(e||""),n=0;for(let s=0;s<i.length;++s){let a=i[s];n=n+a.length,i[s]=Buffer.isBuffer(a)?a:Buffer.from(a)}this._data=Buffer.concat(i,n),this._position=0,this._encoding=t||"utf8"}_read(e){let t=this._data.slice(this._position,this._position+e);this.push(t,this._encoding),this._position=this._position+t.length,this._position>=this._data.length&&this.push(null)}}});var Cf=w((KO,Tf)=>{"use strict";var dE=require("stream"),mE=G(),hE={};Tf.exports=hE.Recorder=class extends dE.Writable{constructor(e){super(),this.settings=e,this.buffers=[],this.length=0}_write(e,t,i){if(this.settings.maxBytes&&this.length+e.length>this.settings.maxBytes)return this.emit("error",mE.entityTooLarge("Payload content length greater than maximum allowed: "+this.settings.maxBytes));this.length=this.length+e.length,this.buffers.push(e),i()}collect(){return this.buffers.length===0?Buffer.alloc(0):this.buffers.length===1?this.buffers[0]:Buffer.concat(this.buffers,this.length)}}});var Rf=w((GO,jf)=>{"use strict";var fE=require("stream"),gE=ol(),xE={};jf.exports=xE.Tap=class extends fE.Transform{constructor(){super(),this.buffers=[]}_transform(e,t,i){this.buffers.push(e),i(null,e)}collect(){return new gE(this.buffers)}}});var If=w((QO,Of)=>{"use strict";var vE=require("events"),qf=require("http"),cl=require("https"),Pf=require("stream"),ba=require("url"),bE=require("zlib"),si=G(),yE=ga(),st=z(),wE=ol(),_E=Cf(),EE=Rf(),oe={jsonRegex:/^application\/([a-z0-9.]*[+-]json|json)$/,shallowOptions:["agent","agents","beforeRedirect","payload","redirected"],httpOptions:["secureProtocol","ciphers","lookup","family","hints"]};oe.Client=class{constructor(e={}){st.assert(!e.agents||e.agents.https&&e.agents.http&&e.agents.httpsAllowUnauthorized,'Option agents must include "http", "https", and "httpsAllowUnauthorized"'),this._defaults=st.clone(e,{shallow:oe.shallowOptions}),this.agents=this._defaults.agents||{https:new cl.Agent({maxSockets:1/0}),http:new qf.Agent({maxSockets:1/0}),httpsAllowUnauthorized:new cl.Agent({maxSockets:1/0,rejectUnauthorized:!1})},this._defaults.events&&(this.events=new vE.EventEmitter)}defaults(e){return st.assert(e&&typeof e=="object","options must be provided to defaults"),e=st.applyToDefaults(this._defaults,e,{shallow:oe.shallowOptions}),new oe.Client(e)}request(e,t,i={}){try{i=st.applyToDefaults(this._defaults,i,{shallow:oe.shallowOptions}),st.assert(i.payload===void 0||typeof i.payload=="string"||typeof i.payload=="object","options.payload must be a string, a Buffer, a Stream, or an Object"),st.assert(oe.isNullOrUndefined(i.agent)||typeof i.rejectUnauthorized!="boolean","options.agent cannot be set to an Agent at the same time as options.rejectUnauthorized is set"),st.assert(oe.isNullOrUndefined(i.beforeRedirect)||typeof i.beforeRedirect=="function","options.beforeRedirect must be a function"),st.assert(oe.isNullOrUndefined(i.redirected)||typeof i.redirected=="function","options.redirected must be a function"),st.assert(i.gunzip===void 0||typeof i.gunzip=="boolean"||i.gunzip==="force",'options.gunzip must be a boolean or "force"')}catch(r){return Promise.reject(r)}i.baseUrl&&(t=oe.resolveUrl(i.baseUrl,t),delete i.baseUrl);let n={},s=this._request(e,t,i,n),a=new Promise((r,o)=>{n.callback=(c,l)=>{if(c){o(c);return}r(l)}});return a.req=s,a}_request(e,t,i,n,s){let a={};if(i.socketPath){a.socketPath=i.socketPath;let S=new ba.URL(t,`unix://${i.socketPath}`);oe.applyUrlToOptions(a,{host:"",protocol:"http:",hash:S.hash,search:S.search,searchParams:S.searchParams,pathname:S.pathname,href:S.href})}else{a.setHost=!1;let S=new ba.URL(t);oe.applyUrlToOptions(a,S)}a.method=e.toUpperCase(),a.headers=Object.create(null);let r=new Set;if(i.headers)for(let[S,O]of Object.entries(i.headers))O!==void 0&&(a.headers[S]=O,r.add(S.toLowerCase()));r.has("host")||(a.headers.host=a.host),i.payload&&typeof i.payload=="object"&&!(i.payload instanceof Pf)&&!Buffer.isBuffer(i.payload)&&(i.payload=JSON.stringify(i.payload),r.has("content-type")||(a.headers["content-type"]="application/json")),i.gunzip&&!r.has("accept-encoding")&&(a.headers["accept-encoding"]="gzip");let o=a.method!=="GET"&&a.method!=="HEAD"&&!oe.isNullOrUndefined(i.payload);o&&(typeof i.payload=="string"||Buffer.isBuffer(i.payload))&&!r.has("content-length")&&(a.headers["content-length"]=Buffer.isBuffer(i.payload)?i.payload.length:Buffer.byteLength(i.payload));let c=i.hasOwnProperty("redirects")?i.redirects:!1;s=s??[],s.push({method:a.method,url:t});let l=a.protocol==="https:"?cl:qf;for(let S of oe.httpOptions)i[S]!==void 0&&(a[S]=i[S]);i.rejectUnauthorized!==void 0&&a.protocol==="https:"?a.agent=i.rejectUnauthorized?this.agents.https:this.agents.httpsAllowUnauthorized:i.agent||i.agent===!1?a.agent=i.agent:a.agent=a.protocol==="https:"?this.agents.https:this.agents.http,this._emit("preRequest",a,i);let p=Date.now(),u=l.request(a);this._emit("request",u);let d=null,m,f=S=>(S.trace=s,q(si.badGateway("Client request error",S))),x=()=>{if(!u.socket){let S=new Error("socket hang up");S.code="ECONNRESET",q(S)}};u.once("error",f);let E=S=>{let O=S.statusCode,K=oe.redirectMethod(O,a.method,i);if(c===!1||!K)return q(null,S);if(S.destroy(),c===0)return q(si.badGateway("Maximum redirections reached",s));let P=S.headers.location;if(!P)return q(si.badGateway("Received redirection without location",s));/^https?:/i.test(P)||(P=ba.resolve(a.href,P));let T=st.clone(i,{shallow:oe.shallowOptions});if(T.payload=d??i.payload,T.redirects=--c,m){clearTimeout(m);let $=Date.now()-p;T.timeout=(T.timeout-$).toString()}if(T.headers){let $=new URL(P);if(a.hostname!==$.hostname)for(let _ of Object.keys(T.headers)){let y=_.toLowerCase();(y==="authorization"||y==="cookie")&&delete T.headers[_]}}let I=$=>{if($)return $.trace=s,q(si.badGateway("Invalid redirect",$));let _=this._request(K,P,T,{callback:q},s);i.redirected&&i.redirected(O,P,_)};return i.beforeRedirect?i.beforeRedirect(K,O,P,S.headers,T,I):I()},j=(S,O)=>(S&&u.abort(),u.removeListener("response",E),u.removeListener("error",f),u.removeListener("abort",x),u.on("error",st.ignore),clearTimeout(m),this._emit("response",S,{req:u,res:O,start:p,uri:a}),n.callback(S,O)),q=st.once(j);if(u.once("response",E),i.timeout&&(m=setTimeout(()=>q(si.gatewayTimeout("Client request timeout")),i.timeout)),u.on("abort",x),o){if(i.payload instanceof Pf){let S=i.payload;if(c){let O=new EE;O.once("finish",()=>{d=O.collect()}),S=i.payload.pipe(O)}return oe.deferPipeUntilSocketConnects(u,S),u}u.write(i.payload)}return u.end(),u}_emit(...e){this.events&&this.events.emit(...e)}read(e,t={}){return new Promise((i,n)=>{this._read(e,t,(s,a)=>{if(s){n(s);return}i(a)})})}_read(e,t,i){t=st.applyToDefaults(this._defaults,t,{shallow:oe.shallowOptions});let n=null,s=(d,m)=>{if(clearTimeout(n),l.removeListener("error",p),l.removeListener("finish",u),e.removeListener("error",o),e.removeListener("close",c),e.removeListener("aborted",c),e.on("error",st.ignore),d)return i(d);if(!t.json)return i(null,m);if(t.json==="force")return oe.tryParseBuffer(m,i);let x=(e.headers?.["content-type"]??"").split(";")[0].trim().toLowerCase();return oe.jsonRegex.test(x)?oe.tryParseBuffer(m,i):t.json==="strict"?i(si.notAcceptable("The content-type is not JSON compatible")):i(null,m)},a=st.once(s),r=t.timeout;r&&r>0&&(n=setTimeout(()=>a(si.clientTimeout()),r));let o=d=>a(d.isBoom?d:si.internal("Payload stream error",d)),c=()=>{e.complete||a(si.internal("Payload stream closed prematurely"))};e.once("error",o),e.once("close",c),e.once("aborted",c);let l=new _E({maxBytes:t.maxBytes}),p=d=>(e.destroy&&e.destroy(),a(d));l.once("error",p);let u=()=>a(null,l.collect());if(l.once("finish",u),t.gunzip){let d=t.gunzip==="force"?"gzip":e.headers?.["content-encoding"]??"";if(/^(x-)?gzip(\s*,\s*identity)?$/.test(d)){let m=bE.createGunzip();m.once("error",p),e.pipe(m).pipe(l);return}}e.pipe(l)}toReadableStream(e,t){return new wE(e,t)}parseCacheControl(e){let t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,i={},n=e.replace(t,(s,a,r,o)=>{let c=r||o;return i[a]=c?c.toLowerCase():!0,""});if(i["max-age"])try{let s=parseInt(i["max-age"],10);if(isNaN(s))return null;i["max-age"]=s}catch{}return n?null:i}get(e,t){return this._shortcut("GET",e,t)}post(e,t){return this._shortcut("POST",e,t)}patch(e,t){return this._shortcut("PATCH",e,t)}put(e,t){return this._shortcut("PUT",e,t)}delete(e,t){return this._shortcut("DELETE",e,t)}async _shortcut(e,t,i={}){let n=await this.request(e,t,i),s;try{s=await this.read(n,i)}catch(r){throw r.data=r.data??{},r.data.res=n,r}if(n.statusCode<400)return{res:n,payload:s};let a={isResponseError:!0,headers:n.headers,res:n,payload:s};throw new si.Boom(`Response Error: ${n.statusCode} ${n.statusMessage}`,{statusCode:n.statusCode,data:a})}};oe.resolveUrl=function(e,t){if(!t)return e;let i=new ba.URL(t,e);return ba.format(i)};oe.deferPipeUntilSocketConnects=function(e,t){let i=a=>{if(!a.connecting)return n();a.once("connect",n)},n=()=>{t.pipe(e),t.removeListener("error",s)},s=a=>{e.emit("error",a)};e.once("socket",i),t.on("error",s)};oe.redirectMethod=function(e,t,i){switch(e){case 301:case 302:return i.redirectMethod||t;case 303:if(i.redirect303)return"GET";break;case 307:case 308:return t}return null};oe.tryParseBuffer=function(e,t){if(e.length===0)return t(null,null);let i;try{i=yE.parse(e.toString())}catch(n){return t(si.badGateway(n.message,{payload:e}))}return t(null,i)};oe.applyUrlToOptions=(e,t)=>(e.host=t.host,e.origin=t.origin,e.searchParams=t.searchParams,e.protocol=t.protocol,e.hostname=typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,e.hash=t.hash,e.search=t.search,e.pathname=t.pathname,e.path=`${t.pathname}${t.search}`,e.href=t.href,t.port!==""&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`,e.username=t.username,e.password=t.password),e);oe.isNullOrUndefined=e=>[null,void 0].includes(e);Of.exports=new oe.Client});var Lf=w(Ff=>{"use strict";var $f=require("fs"),kE=require("fs/promises"),SE=require("os"),AE=require("querystring"),TE=require("stream"),Nf=require("zlib"),wi=G(),CE=ga(),jE=al(),RE=vf(),Ss=z(),qE=Sf(),Kr=If(),ne={kSubtext:Symbol("subtext"),decoders:{gzip:e=>Nf.createGunzip(e),deflate:e=>Nf.createInflate(e)}};Ff.parse=async function(e,t,i){Ss.assert(i,"Missing options"),Ss.assert(i.parse!==void 0,"Missing parse option setting"),Ss.assert(i.output!==void 0,"Missing output option setting");let n=e.headers["content-length"];if(i.maxBytes!==void 0&&n&&parseInt(n,10)>i.maxBytes)throw wi.entityTooLarge("Payload content length greater than maximum allowed: "+i.maxBytes);let s=jE.type(i.override||e.headers["content-type"]||i.defaultContentType||"application/octet-stream");try{if(i.allow&&i.allow.indexOf(s.mime)===-1)throw wi.unsupportedMediaType();let a={mime:s.mime};return i.parse===!0?(a.payload=await ne.parse(e,t,i,s),a):(a.payload=await ne.raw(e,t,i),a)}catch(a){throw a.mime=s.mime,a}};ne.parse=async function(e,t,i,n){let s=i.output,a=ne.decoder(e,i);if(t&&([a]=ne.pipe(a,t)),n.mime==="multipart/form-data"){if(i.multipart===!1)throw wi.unsupportedMediaType();return await ne.multipart(e,i,a,n)}if(s==="stream")return a;if(s==="file")return(await ne.writeFile(e,i,a)).item;let r=await Kr.read(a,{timeout:i.timeout,maxBytes:i.maxBytes});return ne.object(i,r,n.mime)};ne.decoder=function(e,t){let i=e.headers["content-encoding"],n=t.decoders??ne.decoders;if(!n.hasOwnProperty(i))return e;let s=t.compression?.[i]??null,a=n[i](s),r=a.emit;return a.emit=(o,...c)=>(o==="error"&&(c=[wi.badRequest("Invalid compressed payload",c[0])]),r.call(a,o,...c)),[e]=ne.pipe(e,a),e};ne.raw=async function(e,t,i){let n=i.output,s=e;return i.parse==="gunzip"&&(s=ne.decoder(s,i)),t&&([s]=ne.pipe(s,t)),n==="stream"?s:n==="file"?(await ne.writeFile(e,i,s)).item:await Kr.read(s,{timeout:i.timeout,maxBytes:i.maxBytes})};ne.object=function(e,t,i){if(i==="application/octet-stream")return t.length?t:null;if(i.match(/^text\/.+$/))return t.toString("utf8");if(/^application\/(?:.+\+)?json$/.test(i)){if(!t.length)return null;try{return CE.parse(t.toString("utf8"),{protoAction:e.protoAction})}catch(s){let a=wi.badRequest("Invalid request payload JSON format",s);throw a.raw=t,a}}if(i==="application/x-www-form-urlencoded"){let s=e.querystring??AE.parse;return t.length?s(t.toString("utf8")):{}}let n=wi.unsupportedMediaType();throw n.raw=t,n};ne.multipart=function(e,t,i,n){return new Promise((s,a)=>{let r=t.timeout,o=r?setTimeout(()=>a(wi.clientTimeout()),r):null,c=Ss.applyToDefaults(n,{maxBytes:t.maxBytes,maxParts:t.maxParts}),l=new qE.Dispenser(c),p={},u=[],d=S=>{ne.cleanupFiles(u).catch(Ss.ignore),a(wi.badRequest("Invalid multipart payload format",S))};l.once("error",d);let m=(S,O)=>{p.hasOwnProperty(S)?Array.isArray(p[S])?p[S].push(O):p[S]=[p[S],O]:p[S]=O},f=async()=>{clearTimeout(o),l.removeListener("error",d),l.removeListener("part",E),l.removeListener("field",j),l.removeListener("close",q);try{let S=await Promise.all(u);for(let{item:O,name:K}of S)m(K,O)}catch(S){a(S);return}s(p)},x=typeof t.multipart=="object"?t.multipart.output:t.output,E=S=>{x==="file"?u.push(ne.writeFile(e,t,S)):ne.part(S,x,m,t)};l.on("part",E);let j=(S,O)=>m(S,O);l.on("field",j);let q=()=>f();l.once("close",q),i.pipe(l)})};ne.writeFile=function(e,t,i){let n=new Promise((s,a)=>{let r=RE.uniqueFilename(t.uploads??SE.tmpdir()),o=$f.createWriteStream(r,{flags:"wx"}),c=new ne.Counter(t),l=m=>{if(e.removeListener("aborted",p),o.removeListener("close",l),o.removeListener("error",l),m){u(),d(),o.destroy(),$f.unlink(r,()=>a(m));return}let f={item:{path:r,bytes:c.bytes}};i.name&&(f.name=i.name,f.item.filename=i.filename,f.item.headers=i.headers),s(f)};o.once("close",l),o.once("error",l);let p=()=>l(wi.badRequest("Client connection aborted"));e.once("aborted",p);let[,u]=ne.pipe(i,c),[,d]=ne.pipe(c,o)});return n.catch(Ss.ignore),n};ne.cleanupFiles=async e=>{let t=await Promise.allSettled(e);await Promise.all(t.map(async i=>{i.value&&await kE.unlink(i.value.item.path)}))};ne.part=async function(e,t,i,n){let s=await Kr.read(e);if(t==="stream"){let c=Kr.toReadableStream(s);return c.hapi={filename:e.filename,headers:e.headers},i(e.name,c)}let r=(e.headers["content-type"]||"").split(";")[0].trim().toLowerCase(),o=c=>i(e.name,t==="annotated"?{filename:e.filename,headers:e.headers,payload:c}:c);if(!r)return o(s);if(!s.length)return o({});try{let c=ne.object(n,s,r);o(c)}catch{o(s)}};ne.pipe=function(e,t){let i=s=>{n(),t.emit("error",s)},n=()=>(e.removeListener("error",i),e.unpipe(t));return e.once("error",i),[e.pipe(t),n]};ne.Counter=class extends TE.Transform{constructor(e){super(),this.bytes=0,this._maxBytes=e.maxBytes}_transform(e,t,i){return this.bytes=this.bytes+e.length,this._maxBytes!==void 0&&this.bytes>this._maxBytes?i(wi.entityTooLarge("Payload content length greater than maximum allowed: "+this._maxBytes)):i(null,e)}}});var Wr=w((Df,Bf)=>{"use strict";var PE=z(),OE=Bc(),Mf={};Df=Bf.exports=Mf.Ext=class{type=null;nodes=null;#e=null;#t=[];#i=new OE.Sorter;constructor(e,t){this.#e=t,this.type=e}add(e){let t=[].concat(e.method);for(let i of t){let n={before:e.options.before,after:e.options.after,group:e.realm.plugin,sort:this.#e.extensionsSeq++},s={func:i,bind:e.options.bind,server:e.server,realm:e.realm,timeout:e.options.timeout};this.#i.add(s,n)}this.nodes=this.#i.nodes;for(let i of this.#t)i.rebuild(e)}merge(e){let t=[];for(let i of e)t.push(i.#i);this.#i.merge(t),this.nodes=this.#i.nodes.length?this.#i.nodes:null}subscribe(e){this.#t.push(e)}static combine(e,t){let i=new Mf.Ext(t,e._core),n=e.settings.ext[t];if(n)for(let r of n)r=Object.assign({},r),PE.assert(!r.options.sandbox,"Cannot specify sandbox option for route extension"),r.realm=e.realm,i.add(r);let s=e._core.extensions.route[t],a=e.realm._extensions[t];return i.merge([s,a]),s.subscribe(e),a.subscribe(e),i}}});var Uf=w(ya=>{"use strict";var zf=z(),ll={};ya.execute=async function(e){if(e._route._prerequisites)for(let i of e._route._prerequisites){let n=[];for(let a of i)n.push(ll.handler(e,a.method,a));let s=await Promise.all(n);for(let a of s)if(a!==void 0)return a}let t=await ll.handler(e,e.route.settings.handler);if(t._takeover||typeof t=="symbol")return t;e._setResponse(t)};ll.handler=async function(e,t,i){let n=e.route.settings.bind,s=e.route.realm,a=await e._core.toolkit.execute(t,e,{bind:n,realm:s,continue:"null"});if(!i){if(a.isBoom)throw e._log(["handler","error"],a),a;return a}if(a.isBoom&&(a.assign=i.assign,a=await e._core.toolkit.failAction(e,i.failAction,a,{tags:["pre","error"],retain:!0})),typeof a=="symbol"||(i.assign&&(e.pre[i.assign]=a.isBoom?a:a.source,e.preResponses[i.assign]=a),a._takeover))return a};ya.defaults=function(e,t,i){let n=null;if(typeof t=="object"){let s=Object.keys(t)[0],a=i.decorations.handler.get(s);zf.assert(a,"Unknown handler:",s),a.defaults&&(n=typeof a.defaults=="function"?a.defaults(e):a.defaults)}return n??{}};ya.configure=function(e,t){if(typeof e=="object"){let i=Object.keys(e)[0],n=t._core.decorations.handler.get(i);return zf.assert(n,"Unknown handler:",i),n(t.public,e[i])}return e};ya.prerequisitesConfig=function(e){if(!e)return null;let t=[];for(let i of e){i=[].concat(i);let n=[];for(let s of i){typeof s!="object"&&(s={method:s});let a={method:s.method,assign:s.assign,failAction:s.failAction??"error"};n.push(a)}t.push(n)}return t.length?t:null}});var Hf=w(dn=>{"use strict";var IE=require("stream"),$E=G(),pl={};dn.cache=function(e){let t=e.request;if(e.headers["cache-control"])return;let i=t.route.settings.cache;if(i&&t._route._cache&&(i._statuses.has(e.statusCode)||e.statusCode===304&&i._statuses.has(200))||e.settings.ttl){let s=e.settings.ttl!==null?e.settings.ttl:t._route._cache.ttl(),a=t.auth.isAuthenticated||e.headers["set-cookie"]?"private":i.privacy??"default";e._header("cache-control","max-age="+Math.floor(s/1e3)+", must-revalidate"+(a!=="default"?", "+a:""))}else i&&e._header("cache-control",i.otherwise)};dn.content=async function(e){let t=e.request;e._isPayloadSupported()||t.method==="head"?(await e._marshal(),typeof e._payload.size=="function"&&e._header("content-length",e._payload.size(),{override:!1}),e._isPayloadSupported()||(e._close(),e._payload=new pl.Empty),dn.type(e)):(e._close(),e._payload=new pl.Empty,delete e.headers["content-length"])};dn.state=async function(e){let t=e.request,i=[];for(let n in t._states)i.push(t._states[n]);try{for(let a in t._core.states.cookies){let r=t._core.states.cookies[a].autoValue;if(!r||a in t._states||a in t.state)continue;if(typeof r!="function"){i.push({name:a,value:r});continue}let o=await r(t);i.push({name:a,value:o})}if(!i.length)return;let n=await t._core.states.format(i,t),s=e.headers["set-cookie"];s&&(n=(Array.isArray(s)?s:[s]).concat(n)),e._header("set-cookie",n)}catch(n){let s=$E.boomify(n);throw t._log(["state","response","error"],s),t._states={},s}};dn.type=function(e){let t=e.contentType;t!==null&&t!==e.headers["content-type"]&&e.type(t)};dn.entity=function(e){let t=e.request;t._entity&&(t._entity.etag&&!e.headers.etag&&e.etag(t._entity.etag,{vary:t._entity.vary}),t._entity.modified&&!e.headers["last-modified"]&&e.header("last-modified",t._entity.modified))};dn.unmodified=function(e){let t=e.request;if(e.statusCode===304)return;let i={etag:e.headers.etag,vary:e.settings.varyEtag,modified:e.headers["last-modified"]},n=t._core.Response.unmodified(t,i);n&&(e.code(304),n!==!0&&(e.headers.etag=n))};pl.Empty=class extends IE.Readable{_read(){this.push(null)}writeToStream(e){e.end()}}});var Vf=w(ul=>{"use strict";ul.route=function(e){if(!e)return null;let t=e;return t.hsts&&(t.hsts===!0?t._hsts="max-age=15768000":typeof t.hsts=="number"?t._hsts="max-age="+t.hsts:(t._hsts="max-age="+(t.hsts.maxAge??15768e3),(t.hsts.includeSubdomains||t.hsts.includeSubDomains)&&(t._hsts=t._hsts+"; includeSubDomains"),t.hsts.preload&&(t._hsts=t._hsts+"; preload"))),t.xframe&&(t.xframe===!0?t._xframe="DENY":typeof t.xframe=="string"?t._xframe=t.xframe.toUpperCase():t.xframe.rule==="allow-from"?t.xframe.source?t._xframe="ALLOW-FROM "+t.xframe.source:t._xframe="SAMEORIGIN":t._xframe=t.xframe.rule.toUpperCase()),t};ul.headers=function(e){let t=e.request.route.settings.security;t._hsts&&e._header("strict-transport-security",t._hsts,{override:!1}),t._xframe&&e._header("x-frame-options",t._xframe,{override:!1}),t.xss==="enabled"?e._header("x-xss-protection","1; mode=block",{override:!1}):t.xss==="disabled"&&e._header("x-xss-protection","0",{override:!1}),t.noOpen&&e._header("x-download-options","noopen",{override:!1}),t.noSniff&&e._header("x-content-type-options","nosniff",{override:!1}),t.referrer!==!1&&e._header("referrer-policy",t.referrer,{override:!1})}});var ml=w(dl=>{"use strict";var NE=require("stream"),Kf=G(),FE=da(),Ht={team:Symbol("team")};dl.isStream=function(e){let t=e instanceof NE.Readable;if(!t&&typeof e?.pipe=="function")throw Kf.badImplementation("Cannot reply with a stream-like object that is not an instance of Stream.Readable");if(!t)return!1;if(e.readableObjectMode)throw Kf.badImplementation("Cannot reply with stream in object mode");return!0};dl.drain=function(e){let t=new FE.Team;return e[Ht.team]=t,e.on("readable",Ht.read),e.on("error",Ht.end),e.on("end",Ht.end),e.on("close",Ht.end),t.work};Ht.read=function(){for(;this.read(););};Ht.end=function(){this.removeListener("readable",Ht.read),this.removeListener("error",Ht.end),this.removeListener("end",Ht.end),this.removeListener("close",Ht.end),this[Ht.team].attend()}});var Gr=w(Di=>{"use strict";var hl=G(),As=z(),LE=xt(),ai={};Di.validator=function(e){return As.assert(e,"Missing validator"),As.assert(typeof e.compile=="function","Invalid validator compile method"),e};Di.compile=function(e,t,i,n){return t=t??ai.validator(i,n),e===!1?LE.object({}).allow(null):typeof e=="function"?e:!e||e===!0?null:typeof e.validate=="function"?e:(As.assert(t,"Cannot set uncompiled validation rules without configuring a validator"),t.compile(e))};ai.validator=function(e,t){for(;e;){if(e.validator)return e.validator;e=e.parent}return t.validator};Di.headers=function(e){return ai.input("headers",e)};Di.params=function(e){return ai.input("params",e)};Di.payload=function(e){if(!(e.method==="get"||e.method==="head"))return ai.input("payload",e)};Di.query=function(e){return ai.input("query",e)};Di.state=function(e){return ai.input("state",e)};ai.input=async function(e,t){let i={context:{headers:t.headers,params:t.params,query:t.query,payload:t.payload,state:t.state,auth:t.auth,app:{route:t.route.settings.app,request:t.app}}};delete i.context[e],As.merge(i,t.route.settings.validate.options);try{let o=t.route.settings.validate[e],c=t.route.settings.bind;var n=await(typeof o!="function"?ai.validate(t[e],o,i):o.call(c,t[e],i));return}catch(o){var s=o}finally{t.orig[e]=t[e],n!==void 0&&(t[e]=n)}if(t.route.settings.validate.failAction==="ignore")return;let a=s.isBoom?s:hl.badRequest(`Invalid request ${e} input`),r=hl.boomify(s,{statusCode:400,override:!1,data:{defaultError:a}});if(r.output.payload.validation={source:e,keys:[]},s.details)for(let o of s.details){let c=o.path;r.output.payload.validation.keys.push(As.escapeHtml(c.join(".")))}if(t.route.settings.validate.errorFields)for(let o in t.route.settings.validate.errorFields)r.output.payload[o]=t.route.settings.validate.errorFields[o];return t._core.toolkit.failAction(t,t.route.settings.validate.failAction,a,{details:r,tags:["validation","error",e]})};Di.response=async function(e){if(e.route.settings.response.sample&&Math.ceil(Math.random()*100)>e.route.settings.response.sample)return;let t=e.response,i=t.isBoom?t.output.statusCode:t.statusCode,n=e.route.settings.response.status[i];if(i>=400&&!n)return;let s=n!==void 0?n:e.route.settings.response.schema;if(s===null)return;if(!t.isBoom&&e.response.variety!=="plain")throw hl.badImplementation("Cannot validate non-object response");let a={context:{headers:e.headers,params:e.params,query:e.query,payload:e.payload,state:e.state,auth:e.auth,app:{route:e.route.settings.app,request:e.app}}},r=t.isBoom?t.output.payload:t.source;As.merge(a,e.route.settings.response.options);try{let o;typeof s!="function"?o=await ai.validate(r,s,a):o=await s(r,a),o!==void 0&&e.route.settings.response.modify&&(t.isBoom?t.output.payload=o:t.source=o)}catch(o){return e._core.toolkit.failAction(e,e.route.settings.response.failAction,o,{tags:["validation","response","error"]})}};ai.validate=function(e,t,i){return typeof t.validateAsync=="function"?t.validateAsync(e,i):t.validate(e,i)}});var Qr=w((Qf,Yf)=>{"use strict";var ME=require("assert"),Jf=it(),DE=Xc(),fl=z(),BE=Lf(),zE=xt(),wa=gl(),Jr=Gn(),Wf=Ea(),ts=Wr(),_a=Uf(),Ts=Hf(),Gf=Vf(),UE=ml(),Bi=Gr(),Et={};Qf=Yf.exports=Et.Route=class{constructor(e,t,i={}){let n=t._core,s=t.realm;Jr.apply("route",e,e.method,e.path);let a=e.method.toLowerCase();fl.assert(a!=="head","Cannot set HEAD route:",e.path);let r=s.modifiers.route.prefix?s.modifiers.route.prefix+(e.path!=="/"?e.path:""):e.path;fl.assert(r==="/"||r[r.length-1]!=="/"||!n.settings.router.stripTrailingSlash,"Path cannot end with a trailing slash when configured to strip:",e.method,e.path);let o=s.modifiers.route.vhost??e.vhost;this.method=a,this.path=r;let c=e.options??e.config??{};typeof c=="function"&&(c=c.call(s.settings.bind,t)),c=Jr.enable(c),this._assert(a!=="get"||!c.payload,"Cannot set payload settings on HEAD or GET request"),this._assert(a!=="get"||!c.validate?.payload,"Cannot validate HEAD or GET request payload"),this._assert(!e.rules||!c.rules,"Route rules can only appear once");let l=e.rules??c.rules,p=Et.rules(l,{method:a,path:r,vhost:o},t);delete c.rules,this._assert(e.handler||c.handler,"Missing or undefined handler"),this._assert(!!e.handler^!!c.handler,"Handler must only appear once");let u=Jr.apply("handler",e.handler??c.handler);delete c.handler;let d=_a.defaults(a,u,n),m=Et.config([n.settings.routes,d,s.settings,p,c]);if(this.settings=Jr.apply("routeConfig",m,a,r),this._core=n,this.realm=s,this.settings.vhost=o,this.settings.plugins=this.settings.plugins??{},this.settings.app=this.settings.app??{},this._special=!!i.special,this._analysis=this._core.router.analyze(this.path),this.params=this._analysis.params,this.fingerprint=this._analysis.fingerprint,this.public={method:this.method,path:this.path,vhost:o,realm:s,settings:this.settings,fingerprint:this.fingerprint,auth:{access:f=>wa.testAccess(f,this.public)}},this._setupValidation(),this.method==="get"?this.settings.payload=null:this.settings.payload.decoders=this._core.compression.decoders,this._assert(!this.settings.validate.payload||this.settings.payload.parse,"Route payload must be set to 'parse' when payload validation enabled"),this._assert(!this.settings.validate.state||this.settings.state.parse,"Route state must be set to 'parse' when state validation enabled"),this.settings.auth=this._special?!1:this._core.auth._setupRoute(this.settings.auth,r),this.method==="get"&&typeof this.settings.cache=="object"&&(this.settings.cache.expiresIn||this.settings.cache.expiresAt)&&(this.settings.cache._statuses=new Set(this.settings.cache.statuses),this._cache=new DE.Policy({expiresIn:this.settings.cache.expiresIn,expiresAt:this.settings.cache.expiresAt})),this.settings.cors=Wf.route(this.settings.cors),this.settings.security=Gf.route(this.settings.security),this.settings.handler=_a.configure(u,this),this._prerequisites=_a.prerequisitesConfig(this.settings.pre),this._extensions={onPreResponse:ts.combine(this,"onPreResponse"),onPostResponse:ts.combine(this,"onPostResponse")},this._special){this._cycle=[Et.drain,_a.execute],this.rebuild();return}this._extensions.onPreAuth=ts.combine(this,"onPreAuth"),this._extensions.onCredentials=ts.combine(this,"onCredentials"),this._extensions.onPostAuth=ts.combine(this,"onPostAuth"),this._extensions.onPreHandler=ts.combine(this,"onPreHandler"),this._extensions.onPostHandler=ts.combine(this,"onPostHandler"),this.rebuild()}_setupValidation(){let e=this.settings.validate;this.method==="get"&&(e.payload=null),this._assert(!e.params||this.params.length,"Cannot set path parameters validations without path parameters");for(let t of["headers","params","query","payload","state"])e[t]=Bi.compile(e[t],this.settings.validate.validator,this.realm,this._core);if(this.settings.response.schema!==void 0||this.settings.response.status){this.settings.response._validate=!0;let t=this.settings.response.schema;this.settings.response.status=this.settings.response.status??{};let i=Object.keys(this.settings.response.status);if(t===!0&&!i.length)this.settings.response._validate=!1;else{this.settings.response.schema=Bi.compile(t,this.settings.validate.validator,this.realm,this._core);for(let n of i)this.settings.response.status[n]=Bi.compile(this.settings.response.status[n],this.settings.validate.validator,this.realm,this._core)}}}rebuild(e){if(e&&this._extensions[e.type].add(e),this._special){this._postCycle=this._extensions.onPreResponse.nodes?[this._extensions.onPreResponse]:[],this._buildMarshalCycle();return}this._cycle=[],this.settings.state.parse&&this._cycle.push(Et.state),this._extensions.onPreAuth.nodes&&this._cycle.push(this._extensions.onPreAuth),this._core.auth._enabled(this,"authenticate")&&this._cycle.push(wa.authenticate),this.method!=="get"&&(this._cycle.push(Et.payload),this._core.auth._enabled(this,"payload")&&this._cycle.push(wa.payload)),this._core.auth._enabled(this,"authenticate")&&this._extensions.onCredentials.nodes&&this._cycle.push(this._extensions.onCredentials),this._core.auth._enabled(this,"access")&&this._cycle.push(wa.access),this._extensions.onPostAuth.nodes&&this._cycle.push(this._extensions.onPostAuth),this.settings.validate.headers&&this._cycle.push(Bi.headers),this.settings.validate.params&&this._cycle.push(Bi.params),this.settings.validate.query&&this._cycle.push(Bi.query),this.settings.validate.payload&&this._cycle.push(Bi.payload),this.settings.validate.state&&this._cycle.push(Bi.state),this._extensions.onPreHandler.nodes&&this._cycle.push(this._extensions.onPreHandler),this._cycle.push(_a.execute),this._extensions.onPostHandler.nodes&&this._cycle.push(this._extensions.onPostHandler),this._postCycle=[],this.settings.response._validate&&this.settings.response.sample!==0&&this._postCycle.push(Bi.response),this._extensions.onPreResponse.nodes&&this._postCycle.push(this._extensions.onPreResponse),this._buildMarshalCycle()}_buildMarshalCycle(){this._marshalCycle=[Ts.type],this.settings.cors&&this._marshalCycle.push(Wf.headers),this.settings.security&&this._marshalCycle.push(Gf.headers),this._marshalCycle.push(Ts.entity),(this.method==="get"||this.method==="*")&&this._marshalCycle.push(Ts.unmodified),this._marshalCycle.push(Ts.cache),this._marshalCycle.push(Ts.state),this._marshalCycle.push(Ts.content),this._core.auth._enabled(this,"response")&&this._marshalCycle.push(wa.response)}_assert(e,t){if(!e)throw this.method[0]!=="_"&&(t=`${t}: ${this.method.toUpperCase()} ${this.path}`),new ME.AssertionError({message:t,actual:!1,expected:!0,operator:"==",stackStartFunction:this._assert})}};Et.state=async function(e){e.state={};let i=e.raw.req.headers.cookie;if(!i)return;try{var n=await e._core.states.parse(i)}catch(o){Jf.rethrow(o,"system");var s=o}let{states:a,failed:r=[]}=n??s;e.state=a??{};for(let o of r)o.settings.clearInvalid&&e._clearState(o.name);if(s)return s.header=i,e._core.toolkit.failAction(e,e.route.settings.state.failAction,s,{tags:["state","error"]})};Et.payload=async function(e){if(!(e.method==="get"||e.method==="head")){if(e.payload!==void 0)return Et.drain(e);e._expectContinue&&(e._expectContinue=!1,e.raw.res.writeContinue());try{let{payload:t,mime:i}=await BE.parse(e.raw.req,e._tap(),e.route.settings.payload);e._isPayloadPending=!!t?._readableState,e.mime=i,e.payload=t}catch(t){return Jf.rethrow(t,"system"),await Et.drain(e),e.mime=t.mime,e.payload=null,e._core.toolkit.failAction(e,e.route.settings.payload.failAction,t,{tags:["payload","error"]})}}};Et.drain=async function(e){e._expectContinue&&(e._isPayloadPending=!1,e._expectContinue=!1),e._isPayloadPending&&(await UE.drain(e.raw.req),e._isPayloadPending=!1)};Et.config=function(e){if(!e.length)return{};let t=e[0];for(let i of e)t=fl.applyToDefaults(t,i,{shallow:["bind","validate.headers","validate.payload","validate.params","validate.query","validate.state"]});return t};Et.rules=function(e,t,i){let n=[],s=i.realm;for(;s;){if(s._rules){let a=s._rules.settings.validate?zE.attempt(e,s._rules.settings.validate.schema,s._rules.settings.validate.options):e,r=s._rules.processor(a,t);r&&n.unshift(r)}s=s.parent}return Et.config(n)}});var Ea=w(zi=>{"use strict";var xl=G(),Yr=z(),vl=null,Zf={};zi.route=function(e){if(!e)return!1;let t=Yr.clone(e);t._headers=t.headers.concat(t.additionalHeaders),t._headersString=t._headers.join(",");for(let i=0;i<t._headers.length;++i)t._headers[i]=t._headers[i].toLowerCase();if(t._headers.indexOf("origin")===-1&&t._headers.push("origin"),t._exposedHeaders=t.exposedHeaders.concat(t.additionalExposedHeaders).join(","),t.origin==="ignore")t._origin=!1;else if(t.origin.indexOf("*")!==-1)Yr.assert(t.origin.length===1,"Cannot specify cors.origin * together with other values"),t._origin=!0;else{t._origin={qualified:[],wildcards:[]};for(let i of t.origin)i.indexOf("*")!==-1?t._origin.wildcards.push(new RegExp("^"+Yr.escapeRegex(i).replace(/\\\*/g,".*").replace(/\\\?/g,".")+"$")):t._origin.qualified.push(i)}return t};zi.options=function(e,t){e.method==="options"||!e.settings.cors||zi.handler(t)};zi.handler=function(e){if(vl=vl||Qr(),e._core.router.specials.options)return;let t={method:"_special",path:"/{p*}",handler:Zf.handler,options:{cors:!1}},i=new vl(t,e,{special:!0});e._core.router.special("options",i)};Zf.handler=function(e,t){let i=e.headers["access-control-request-method"];if(!i)throw xl.notFound("CORS error: Missing Access-Control-Request-Method header");let n=e.server.match(i,e.path,e.info.hostname);if(!n)throw xl.notFound();let s=n.settings.cors;if(!s)return{message:"CORS is disabled for this route"};let a=e.headers.origin;if(!a&&s._origin!==!1)throw xl.notFound("CORS error: Missing Origin header");if(!zi.matchOrigin(a,s))return{message:"CORS error: Origin not allowed"};let r=e.headers["access-control-request-headers"];if(r&&(r=r.toLowerCase().split(/\s*,\s*/),Yr.intersect(r,s._headers).length!==r.length))return{message:"CORS error: Some headers are not allowed"};let o=t.response();return o.code(s.preflightStatusCode),o._header("access-control-allow-origin",s._origin?a:"*"),o._header("access-control-allow-methods",i),o._header("access-control-allow-headers",s._headersString),o._header("access-control-max-age",s.maxAge),s.credentials&&o._header("access-control-allow-credentials","true"),s._exposedHeaders&&o._header("access-control-expose-headers",s._exposedHeaders),o};zi.headers=function(e){let t=e.request,i=t.route.settings.cors;i._origin!==!1&&e.vary("origin"),!(t.info.cors&&!t.info.cors.isOriginMatch||!zi.matchOrigin(t.headers.origin,t.route.settings.cors))&&(e._header("access-control-allow-origin",i._origin?t.headers.origin:"*"),i.credentials&&e._header("access-control-allow-credentials","true"),i._exposedHeaders&&e._header("access-control-expose-headers",i._exposedHeaders,{append:!0}))};zi.matchOrigin=function(e,t){if(t._origin===!0||t._origin===!1)return!0;if(!e)return!1;if(t._origin.qualified.indexOf(e)!==-1)return!0;for(let i of t._origin.wildcards)if(e.match(i))return!0;return!1}});var Zr=w(_i=>{"use strict";var ka=G(),Xf=it(),Ui=z(),Cs={};_i.reserved=["abandon","authenticated","close","context","continue","entity","redirect","realm","request","response","state","unauthenticated","unstate"];_i.symbols={abandon:Symbol("abandon"),close:Symbol("close"),continue:Symbol("continue")};_i.Manager=class{constructor(){this._toolkit=Cs.toolkit()}async execute(e,t,i){let n=new this._toolkit(t,i),s=i.bind??null;try{let r;s?r=e.call(s,t,n):i.args?r=e(t,n,...i.args):r=e(t,n);var a=await _i.timed(r,i)}catch(r){Xf.isSystem(r)?a=ka.badImplementation(r):Xf.isError(r)?a=ka.boomify(r):a=ka.badImplementation("Cannot throw non-error object",r)}if(i.ignoreResponse)return a;if(a===void 0&&(a=ka.badImplementation(`${e.name} method did not return a value, a promise, or throw an error`)),i.continue&&a===_i.symbols.continue){if(i.continue==="undefined")return;a=null}return i.auth&&a instanceof Cs.Auth||typeof a!="symbol"&&(a=t._core.Response.wrap(a,t),!a.isBoom&&a._state==="init"&&await a._prepare()),a}decorate(e,t){this._toolkit.prototype[e]=t}async failAction(e,t,i,n){let s=n.retain?i:void 0;if(t==="ignore")return s;if(t==="log")return e._log(n.tags,i),s;if(t==="error")throw i;return await this.execute(t,e,{realm:e.route.realm,args:[n.details??i]})}};_i.timed=async function(e,t){if(!t.timeout)return e;let i=new Promise((n,s)=>{setTimeout(()=>{s(ka.internal(`${t.name} timed out`))},t.timeout)});return await Promise.race([i,e])};Cs.toolkit=function(){let e=class{constructor(t,i){this.context=i.bind,this.realm=i.realm,this.request=t,this._auth=i.auth}response(t){return Ui.assert(!t||typeof t!="object"||typeof t.then!="function","Cannot wrap a promise"),Ui.assert(!(t instanceof Error),"Cannot wrap an error"),Ui.assert(typeof t!="symbol","Cannot wrap a symbol"),this.request._core.Response.wrap(t,this.request)}redirect(t){return this.response("").redirect(t)}entity(t){Ui.assert(t,"Entity method missing required options"),Ui.assert(t.etag||t.modified,"Entity methods missing required options key"),this.request._entity=t;let i=this.request._core.Response.entity(t.etag,t);if(this.request._core.Response.unmodified(this.request,i))return this.response().code(304).takeover()}state(t,i,n){this.request._setState(t,i,n)}unstate(t,i){this.request._clearState(t,i)}authenticated(t){return Ui.assert(this._auth,"Method not supported outside of authentication"),Ui.assert(t?.credentials,"Authentication data missing credentials information"),new Cs.Auth(null,t)}unauthenticated(t,i){return Ui.assert(this._auth,"Method not supported outside of authentication"),Ui.assert(!i||i.credentials,"Authentication data missing credentials information"),new Cs.Auth(t,i)}};return e.prototype.abandon=_i.symbols.abandon,e.prototype.close=_i.symbols.close,e.prototype.continue=_i.symbols.continue,e};Cs.Auth=class{constructor(e,t){this.isAuth=!0,this.error=e,this.data=t}}});var yl=w(bl=>{"use strict";var HE=require("stream"),js=z(),mn={};mn.headerRx=/^bytes=[\s,]*((?:(?:\d+\-\d*)|(?:\-\d+))(?:\s*,\s*(?:(?:\d+\-\d*)|(?:\-\d+)))*)$/i;bl.header=function(e,t){let i=mn.headerRx.exec(e);if(!i)return null;let n=t-1,s=[],a=i[1].match(/\d*\-\d*/g);for(let o of a){let c,l;if(o=o.split("-"),o[0]&&(c=parseInt(o[0],10)),o[1]?(l=parseInt(o[1],10),c!==void 0?l>n&&(l=n):(c=t-l,l=n)):l=n,c>l)return null;s.push(new mn.Range(c,l))}if(s.length===1)return s;s.sort((o,c)=>o.from-c.from);let r=[];for(let o=s.length-1;o>0;--o){let c=s[o],l=s[o-1];c.from<=l.to+1?l.to=c.to:r.unshift(c)}return r.unshift(s[0]),r};mn.Range=class{constructor(e,t){this.from=e,this.to=t}};bl.Clip=class extends HE.Transform{constructor(e){if(!(e instanceof mn.Range)){js.assert(typeof e=="object",'Expected "range" object');let t=e.from??0;js.assert(typeof t=="number",'"range.from" must be a number'),js.assert(t===parseInt(t,10)&&t>=0,'"range.from" must be a positive integer');let i=e.to??0;js.assert(typeof i=="number",'"range.to" must be a number'),js.assert(i===parseInt(i,10)&&i>=0,'"range.to" must be a positive integer'),js.assert(i>=t,'"range.to" must be greater than or equal to "range.from"'),e=new mn.Range(t,i)}super(),this._range=e,this._next=0,this._pipes=new Set,this.on("pipe",t=>this._pipes.add(t)),this.on("unpipe",t=>this._pipes.delete(t))}_transform(e,t,i){try{mn.processChunk(this,e)}catch(n){return i(n)}return i()}_flush(e){this._pipes.clear(),e()}};mn.processChunk=function(e,t){let i=e._next;if(e._next=e._next+t.length,e._next<=e._range.from)return;if(i>e._range.to){for(let a of e._pipes)a.unpipe(e);e._pipes.clear(),e.end();return}let n=Math.max(0,e._range.from-i),s=Math.min(t.length,e._range.to-i+1);e.push(t.slice(n,s))}});var ng=w(ig=>{"use strict";var VE=require("http"),eg=yl(),Rs=G(),tg=it(),KE=z(),WE=da(),Xr=Gn(),X={};ig.send=async function(e){let t=e.response;try{if(t.isBoom){await X.fail(e,t);return}await X.marshal(t),await X.transmit(t)}catch(i){return tg.rethrow(i,"system"),e._setResponse(i),X.fail(e,i)}};X.marshal=async function(e){for(let t of e.request._route._marshalCycle)await t(e)};X.fail=async function(e,t){let i=X.error(e,t);e.response=i;try{await X.marshal(i)}catch(n){tg.rethrow(n,"system");let s={statusCode:i.statusCode,error:VE.STATUS_CODES[i.statusCode],message:t.message};i._payload=new e._core.Response.Payload(JSON.stringify(s),{})}return X.transmit(i)};X.error=function(e,t){let i=t.output,n=new e._core.Response(i.payload,e,{error:t});return n.code(i.statusCode),n.headers=KE.clone(i.headers),n};X.transmit=function(e){let t=e.request,i=X.length(e),n=t._core.compression.encoding(e,i),s=n?null:X.range(e,i),a=X.encoding(e,n),r=t.isInjected;(!(r||t._core.started)||t._isPayloadPending&&!t.raw.req._readableState.ended)&&e._header("connection","close"),X.writeHead(e),r&&(t.raw.res[Xr.symbol]={request:t},e.variety==="plain"&&(t.raw.res[Xr.symbol].result=e._isPayloadSupported()?e.source:null));let o=X.chain([e._payload,e._tap(),a,s]);return X.pipe(t,o)};X.length=function(e){let t=e.request,i=e.headers["content-length"];if(i===void 0)return null;let n=i;return typeof n=="string"&&(n=parseInt(i,10),!isFinite(n))?(delete e.headers["content-length"],null):(n===0&&!e._statusCode&&e.statusCode===200&&t.route.settings.response.emptyStatusCode!==200&&(e.code(204),delete e.headers["content-length"]),n)};X.range=function(e,t){let i=e.request;if(!t||!i.route.settings.response.ranges||i.method!=="get"||e.statusCode!==200||(e._header("accept-ranges","bytes"),!i.headers.range)||i.headers["if-range"]&&i.headers["if-range"]!==e.headers.etag)return null;let n=eg.header(i.headers.range,t);if(!n){let a=Rs.rangeNotSatisfiable();throw a.output.headers["content-range"]="bytes */"+t,a}if(n.length!==1)return null;let s=n[0];return e.code(206),e.bytes(s.to-s.from+1),e._header("content-range","bytes "+s.from+"-"+s.to+"/"+t),new eg.Clip(s)};X.encoding=function(e,t){let i=e.request,n=e.headers["content-encoding"]||t;if(n&&e.headers.etag&&e.settings.varyEtag&&(e.headers.etag=e.headers.etag.slice(0,-1)+"-"+n+'"'),!t||e.statusCode===206||!e._isPayloadSupported())return null;delete e.headers["content-length"],e._header("content-encoding",t);let s=i._core.compression.encoder(i,t);return e.variety==="stream"&&typeof e._payload.setCompressor=="function"&&e._payload.setCompressor(s),s};X.pipe=function(e,t){let i=new WE.Team,n={stream:t,request:e,team:i};if(e._closed)return X.end(n,"aborted"),i.work;let s=X.end.bind(null,n,"aborted"),a=X.end.bind(null,n,"close"),r=X.end.bind(null,n,null);return e.raw.req.on("aborted",s),e.raw.res.on("close",a),e.raw.res.on("error",r),e.raw.res.on("finish",r),t.writeToStream?t.writeToStream(e.raw.res):(t.on("error",r),t.pipe(e.raw.res)),i.work};X.end=function(e,t,i){let{request:n,stream:s,team:a}=e;if(!a)return;if(e.team=null,n.raw.res.writableEnded){n.info.responded=Date.now(),a.attend();return}i&&(n.raw.res.destroy(),n._core.Response.drain(s));let r=n.response,o=i?Rs.boomify(i):new Rs.Boom(`Request ${t}`,{statusCode:n.route.settings.response.disconnectStatusCode,data:r});n._setResponse(o),n.raw.res[Xr.symbol]&&(n.raw.res[Xr.symbol].error=t?o:new Rs.Boom("Response error",{statusCode:n.route.settings.response.disconnectStatusCode,data:r})),t?n._log(["response","error",t]):n._log(["response","error"],i),n.raw.res.end(),a.attend()};X.writeHead=function(e){let t=e.request.raw.res,i=Object.keys(e.headers),n=0;try{for(;n<i.length;++n){let s=i[n],a=e.headers[s];a!==void 0&&t.setHeader(s,a)}}catch(s){for(--n;n>=0;--n)t.removeHeader(i[n]);throw Rs.boomify(s)}e.settings.message&&(t.statusMessage=e.settings.message);try{t.writeHead(e.statusCode)}catch(s){throw Rs.boomify(s)}};X.chain=function(e){let t=e[0];for(let i=1;i<e.length;++i){let n=e[i];n&&(t.on("error",X.errorPipe.bind(t,n)),t=t.pipe(n))}return t};X.errorPipe=function(e,t){e.emit("error",t)}});var _l=w((ag,rg)=>{"use strict";var GE=require("querystring"),eo=require("url"),ns=G(),wl=it(),is=z(),sg=ha(),JE=Ea(),to=Zr(),QE=ng(),_e={events:sg.validate(["finish",{name:"peek",spread:!0},"disconnect"]),reserved:["server","url","query","path","method","mime","setUrl","setMethod","headers","id","app","plugins","route","auth","pre","preResponses","info","isInjected","orig","params","paramsArray","payload","state","response","raw","domain","log","logs","generateResponse"]};ag=rg.exports=_e.Request=class{constructor(e,t,i,n){this._allowInternals=!!n.allowInternals,this._closed=!1,this._core=e._core,this._entity=null,this._eventContext={request:this},this._events=null,this._expectContinue=!!n.expectContinue,this._isInjected=!!n.isInjected,this._isPayloadPending=!!(t.headers["content-length"]||t.headers["transfer-encoding"]),this._isReplied=!1,this._route=this._core.router.specials.notFound.route,this._serverTimeoutId=null,this._states={},this._url=null,this._urlError=null,this.app=n.app?Object.assign({},n.app):{},this.headers=t.headers,this.logs=[],this.method=t.method.toLowerCase(),this.mime=null,this.orig={},this.params=null,this.paramsArray=null,this.path=null,this.payload=void 0,this.plugins=n.plugins?Object.assign({},n.plugins):{},this.pre={},this.preResponses={},this.raw={req:t,res:i},this.response=null,this.route=this._route.public,this.query=null,this.server=e,this.state=null,this.info=new _e.Info(this),this.auth={isAuthenticated:!1,isAuthorized:!1,isInjected:!!n.auth,[_e.Request.symbols.authPayload]:n.auth?.payload??!0,credentials:n.auth?.credentials??null,artifacts:n.auth?.artifacts??null,strategy:n.auth?.strategy??null,mode:null,error:null},this._initializeUrl()}static generate(e,t,i,n){let s=new e._core.Request(e,t,i,n);if(e._core.decorations.requestApply)for(let[a,r]of e._core.decorations.requestApply.entries())s[a]=r(s);return s._listen(),s}get events(){return this._events||(this._events=new sg.Podium(_e.events)),this._events}get isInjected(){return this._isInjected}get url(){return this._urlError?null:this._url?this._url:this._parseUrl(this.raw.req.url,this._core.settings.router)}_initializeUrl(){try{this._setUrl(this.raw.req.url,this._core.settings.router.stripTrailingSlash,{fast:!0})}catch(e){this.path=this.raw.req.url,this.query={},this._urlError=ns.boomify(e,{statusCode:400,override:!1})}}setUrl(e,t){is.assert(this.params===null,"Cannot change request URL after routing"),e instanceof eo.URL&&(e=e.href),is.assert(typeof e=="string","Url must be a string or URL object"),this._setUrl(e,t,{fast:!1})}_setUrl(e,t,{fast:i}){let n=this._parseUrl(e,{stripTrailingSlash:t,_fast:i});this.query=this._parseQuery(n.searchParams),this.path=n.pathname}_parseUrl(e,t){if(e[0]==="/"){if(t._fast){let i={pathname:e,searchParams:""},n=e.indexOf("?"),s=e.indexOf("#");if(n!==-1&&(s===-1||n<s)){i.pathname=e.slice(0,n);let a=s===-1?e.slice(n+1):e.slice(n+1,s);i.searchParams=GE.parse(a)}else i.pathname=s===-1?e:e.slice(0,s);return this._normalizePath(i,t),i}this._url=new eo.URL(`${this._core.info.protocol}://${this.info.host||`${this._core.info.host}:${this._core.info.port}`}${e}`)}else this._url=new eo.URL(e),this.info.hostname=this._url.hostname,this.info.host=this._url.host;return this._normalizePath(this._url,t),this._urlError=null,this._url}_normalizePath(e,t){let i=this._core.router.normalize(e.pathname);t.stripTrailingSlash&&i.length>1&&i[i.length-1]==="/"&&(i=i.slice(0,-1)),e.pathname=i}_parseQuery(e){let t=Object.create(null);if(e instanceof eo.URLSearchParams)for(let[n,s]of e){let a=t[n];a!==void 0&&(s=[].concat(a,s)),t[n]=s}else t=Object.assign(t,e);let i=this._core.settings.query.parser;if(i&&(t=i(t),!t||typeof t!="object"))throw ns.badImplementation("Parsed query must be an object");return t}setMethod(e){is.assert(this.params===null,"Cannot change request method after routing"),is.assert(e&&typeof e=="string","Missing method"),this.method=e.toLowerCase()}active(){return!!this._eventContext.request}async _execute(){this.info.acceptEncoding=this._core.compression.accept(this);try{await this._onRequest()}catch(e){return wl.rethrow(e,"system"),this._reply(e)}this._lookup(),this._setTimeouts(),await this._lifecycle(),this._reply()}async _onRequest(){if(this._core.extensions.route.onRequest.nodes){let e=await this._invoke(this._core.extensions.route.onRequest);if(e)throw _e.skip(e)?e:ns.badImplementation("onRequest extension methods must return an error, a takeover response, or a continue signal")}if(this._urlError)throw this._urlError}_listen(){this._isPayloadPending&&this.raw.req.on("end",_e.event.bind(this.raw.req,this._eventContext,"end")),this.raw.res.on("close",_e.event.bind(this.raw.res,this._eventContext,"close")),this.raw.req.on("error",_e.event.bind(this.raw.req,this._eventContext,"error")),this.raw.req.on("aborted",_e.event.bind(this.raw.req,this._eventContext,"abort")),this.raw.res.once("close",_e.closed.bind(this.raw.res,this))}_lookup(){let e=this._core.router.route(this.method,this.path,this.info.hostname);(!e.route.settings.isInternal||this._allowInternals)&&(this._route=e.route,this.route=this._route.public),this.params=e.params??{},this.paramsArray=e.paramsArray??[],this.route.settings.cors&&(this.info.cors={isOriginMatch:JE.matchOrigin(this.headers.origin,this.route.settings.cors)})}_setTimeouts(){this.raw.req.socket&&this.route.settings.timeout.socket!==void 0&&this.raw.req.socket.setTimeout(this.route.settings.timeout.socket||0);let e=this.route.settings.timeout.server;if(!e)return;let t=Date.now()-this.info.received;if(e=Math.floor(e-t),e<=0){_e.timeoutReply(this,e);return}this._serverTimeoutId=setTimeout(_e.timeoutReply,e,this,e)}async _lifecycle(){for(let t of this._route._cycle){if(this._isReplied)return;try{var e=await(typeof t=="function"?t(this):this._invoke(t))}catch(i){wl.rethrow(i,"system"),e=this._core.Response.wrap(i,this)}if(!(!e||e===to.symbols.continue)){_e.skip(e)||(e=ns.badImplementation("Lifecycle methods called before the handler can only return an error, a takeover response, or a continue signal")),this._setResponse(e);return}}}async _invoke(e,t={}){for(let i of e.nodes){let n=i.realm,s=i.bind??n.settings.bind,a=await this._core.toolkit.execute(i.func,this,{bind:s,realm:n,timeout:i.timeout,name:e.type,ignoreResponse:t.ignoreResponse});if(t.ignoreResponse){ns.isBoom(a)&&this._log(["ext","error"],a);continue}if(a!==to.symbols.continue){if(_e.skip(a)||this.response===null)return a;this._setResponse(a)}}}async _reply(e){if(!this._isReplied){if(this._isReplied=!0,this._serverTimeoutId&&clearTimeout(this._serverTimeoutId),e&&this._setResponse(this._core.Response.wrap(e,this)),!this._eventContext.request){this._finalize();return}if(typeof this.response=="symbol"){this._abort();return}if(await this._postCycle(),!this._eventContext.request||typeof this.response=="symbol"){this._abort();return}await QE.send(this),this._finalize()}}async _postCycle(){for(let t of this._route._postCycle){if(!this._eventContext.request)return;try{var e=await(typeof t=="function"?t(this):this._invoke(t))}catch(i){wl.rethrow(i,"system"),e=this._core.Response.wrap(i,this)}e&&e!==to.symbols.continue&&this._setResponse(e)}}_abort(){this.response===to.symbols.close&&this.raw.res.end(),this._finalize()}_finalize(){if(this._eventContext.request=null,this.response._close){if(this.response.statusCode===500&&this.response._error){let e=this.response._error.isDeveloperError?["internal","implementation","error"]:["internal","error"];this._log(e,this.response._error,"error")}this.response._close()}this.info.completed=Date.now(),this._core.events.emit("response",this),this._route._extensions.onPostResponse.nodes&&this._invoke(this._route._extensions.onPostResponse,{ignoreResponse:!0})}_setResponse(e){if(this.response&&!this.response.isBoom&&this.response!==e&&this.response.source!==e.source&&this.response._close?.(),this.info.completed){e._close?.();return}this.response=e}_setState(e,t,i){let n={name:e,value:t};i&&(is.assert(!i.autoValue,"Cannot set autoValue directly in a response"),n.options=is.clone(i)),this._states[e]=n}_clearState(e,t={}){let i={name:e};i.options=is.clone(t),i.options.ttl=0,this._states[e]=i}_tap(){return this._events&&(this._events.hasListeners("peek")||this._events.hasListeners("finish"))?new this._core.Response.Peek(this._events):null}log(e,t){return this._log(e,t,"app")}_log(e,t,i="internal"){if(!this._core.events.hasListeners("request")&&!this.route.settings.log.collect)return;Array.isArray(e)||(e=[e]);let n=Date.now(),s=t instanceof Error?"error":"data",a=[this,{request:this.info.id,timestamp:n,tags:e,[s]:t,channel:i}];typeof t=="function"&&(a=()=>[this,{request:this.info.id,timestamp:n,tags:e,data:t(),channel:i}]),this.route.settings.log.collect&&(typeof t=="function"&&(a=a()),this.logs.push(a[1])),this._core.events.emit({name:"request",channel:i,tags:e},a)}generateResponse(e,t){return new this._core.Response(e,this,t)}};_e.Request.reserved=_e.reserved;_e.Request.symbols={authPayload:Symbol("auth.payload")};_e.Info=class{constructor(e){this._request=e;let t=e.raw.req,i=t.headers.host?t.headers.host.trim():"",n=Date.now();this.received=n,this.referrer=t.headers.referrer||t.headers.referer||"",this.host=i,this.hostname=i.split(":")[0],this.id=`${n}:${e._core.info.id}:${e._core._counter()}`,this._remoteAddress=null,this._remotePort=null,this.acceptEncoding=null,this.cors=null,this.responded=0,this.completed=0,e._core.settings.info.remote&&(this.remoteAddress,this.remotePort)}get remoteAddress(){if(!this._remoteAddress){let e="::ffff:",t=this._request.raw.req.socket.remoteAddress;t&&t.startsWith(e)&&t.includes(".",e.length)?this._remoteAddress=t.slice(e.length):this._remoteAddress=t}return this._remoteAddress}get remotePort(){return this._remotePort===null&&(this._remotePort=this._request.raw.req.socket.remotePort||""),this._remotePort}toJSON(){return{acceptEncoding:this.acceptEncoding,completed:this.completed,cors:this.cors,host:this.host,hostname:this.hostname,id:this.id,received:this.received,referrer:this.referrer,remoteAddress:this.remoteAddress,remotePort:this.remotePort,responded:this.responded}}};_e.closed=function(e){e._closed=!0};_e.event=function({request:e},t,i){e&&(e._isPayloadPending=!1,!(t==="close"&&e.raw.res.writableEnded)&&t!=="end"&&(e._log(i?["request","error"]:["request","error",t],i),t!=="error"&&(e._eventContext.request=null,t==="abort"&&(e._reply(new ns.Boom("Request aborted",{statusCode:e.route.settings.response.disconnectStatusCode,data:e.response})),e._events&&e._events.emit("disconnect")))))};_e.timeoutReply=function(e,t){let i=Date.now()-e.info.received;e._log(["request","server","timeout","error"],{timeout:t,elapsed:i}),e._reply(ns.serverUnavailable())};_e.skip=function(e){return e.isBoom||e._takeover||typeof e=="symbol"}});var gl=w((og,cg)=>{"use strict";var qs=G(),YE=it(),se=z(),ZE=Gn(),XE=_l(),Me={missing:Symbol("missing")};og=cg.exports=Me.Auth=class{#e=null;#t={};#i={};api={};settings={default:null};constructor(e){this.#e=e}public(e){return{api:this.api,settings:this.settings,scheme:this.scheme.bind(this),strategy:this._strategy.bind(this,e),default:this.default.bind(this),test:this.test.bind(this),verify:this.verify.bind(this),lookup:this.lookup.bind(this)}}scheme(e,t){se.assert(e,"Authentication scheme must have a name"),se.assert(!this.#t[e],"Authentication scheme name already exists:",e),se.assert(typeof t=="function","scheme must be a function:",e),this.#t[e]=t}_strategy(e,t,i,n={}){se.assert(t,"Authentication strategy must have a name"),se.assert(typeof n=="object","options must be an object"),se.assert(!this.#i[t],"Authentication strategy name already exists"),se.assert(i,"Authentication strategy",t,"missing scheme"),se.assert(this.#t[i],"Authentication strategy",t,"uses unknown scheme:",i),e=e._clone();let s=this.#t[i](e,n);se.assert(s.authenticate,"Invalid scheme:",t,"missing authenticate() method"),se.assert(typeof s.authenticate=="function","Invalid scheme:",t,"invalid authenticate() method"),se.assert(!s.payload||typeof s.payload=="function","Invalid scheme:",t,"invalid payload() method"),se.assert(!s.response||typeof s.response=="function","Invalid scheme:",t,"invalid response() method"),s.options=s.options??{},se.assert(s.payload||!s.options.payload,"Cannot require payload validation without a payload method"),this.#i[t]={methods:s,realm:e.realm},s.api&&(this.api[t]=s.api)}default(e){se.assert(!this.settings.default,"Cannot set default strategy more than once"),e=ZE.apply("auth",e,"default strategy"),this.settings.default=this._setupRoute(se.clone(e));let t=this.#e.router.table();for(let i of t)i.rebuild()}async test(e,t){se.assert(e,"Missing authentication strategy name");let i=this.#i[e];se.assert(i,"Unknown authentication strategy:",e);let n=i.methods,s=i.realm,a=await t._core.toolkit.execute(i.methods.authenticate,t,{bind:n,realm:s,auth:!0});if(!a.isAuth)throw a;if(a.error)throw a.error;return a.data}async verify(e){let t=e.auth;if(t.error)throw t.error;if(!t.isAuthenticated)return;let i=this.#i[t.strategy];if(se.assert(i,"Unknown authentication strategy:",t.strategy),!i.methods.verify)return;let n=i.methods;await i.methods.verify.call(n,t)}static testAccess(e,t){let i=e._core.auth;try{return i._access(e,t)}catch(n){return YE.rethrow(n,"system"),!1}}_setupRoute(e,t){if(!e)return e;if(typeof e=="string"?e={strategies:[e]}:e.strategy&&(e.strategies=[e.strategy],delete e.strategy),t&&!e.strategies&&(se.assert(this.settings.default,"Route missing authentication strategy and no default defined:",t),e=se.applyToDefaults(this.settings.default,e)),t=t??"default strategy",se.assert(e.strategies?.length,"Missing authentication strategy:",t),e.mode=e.mode??"required",(e.entity!==void 0||e.scope!==void 0)&&(e.access=[{entity:e.entity,scope:e.scope}],delete e.entity,delete e.scope),e.access)for(let n of e.access)n.scope=Me.setupScope(n);e.payload===!0&&(e.payload="required");let i=!1;for(let n of e.strategies){let s=this.#i[n];se.assert(s,"Unknown authentication strategy",n,"in",t),se.assert(s.methods.payload||e.payload!=="required","Payload validation can only be required when all strategies support it in",t),i=i||s.methods.payload,se.assert(!s.methods.options.payload||e.payload===void 0||e.payload==="required","Cannot set authentication payload to",e.payload,"when a strategy requires payload validation in",t)}return se.assert(!e.payload||i,"Payload authentication requires at least one strategy with payload support in",t),e}lookup(e){return e.settings.auth===!1?!1:e.settings.auth||this.settings.default}_enabled(e,t){let i=this.lookup(e);if(!i)return!1;if(t==="authenticate")return!0;if(t==="access")return!!i.access;for(let n of i.strategies)if(this.#i[n].methods[t])return!0;return!1}static authenticate(e){return e._core.auth._authenticate(e)}async _authenticate(e){let t=this.lookup(e.route),i=[];if(e.auth.mode=t.mode,e.auth.credentials){Me.validate(null,{credentials:e.auth.credentials,artifacts:e.auth.artifacts},e.auth.strategy,t,e,i);return}for(let s of t.strategies){let a=this.#i[s],r=a.methods,o=a.realm,c=await e._core.toolkit.execute(a.methods.authenticate,e,{bind:r,realm:o,auth:!0}),l=c.isAuth?Me.validate(c.error,c.data,s,t,e,i):Me.validate(c,null,s,t,e,i);if(!l)return;if(l!==Me.missing)return l}let n=qs.unauthorized("Missing authentication",i);if(t.mode==="required")throw n;e.auth.isAuthenticated=!1,e.auth.credentials=null,e.auth.error=n,e._log(["auth","unauthenticated"])}static access(e){let t=e._core.auth;e.auth.isAuthorized=t._access(e)}_access(e,t){let i=this.lookup(t||e.route);if(!i?.access)return!0;let n=e.auth.credentials;if(!n){if(i.mode!=="required")return!1;throw qs.forbidden("Request is unauthenticated")}let s=n.user?"user":"app",a=[];for(let r of i.access){let o=r.entity;if(o&&o!=="any"&&o!==s)continue;let c=r.scope;if(c){if(!n.scope){a.push(c);continue}if(c=Me.expandScope(e,c),!Me.validateScope(n,c,"required")||!Me.validateScope(n,c,"selection")||!Me.validateScope(n,c,"forbidden")){a.push(c);continue}}return!0}throw a.length?(e._log(["auth","scope","error"]),qs.forbidden("Insufficient scope",{got:n.scope,need:a})):s==="app"?(e._log(["auth","entity","user","error"]),qs.forbidden("Application credentials cannot be used on a user endpoint")):(e._log(["auth","entity","app","error"]),qs.forbidden("User credentials cannot be used on an application endpoint"))}static async payload(e){if(!e.auth.isAuthenticated||!e.auth[XE.symbols.authPayload])return;let t=e._core.auth,i=t.#i[e.auth.strategy];if(se.assert(i,"Unknown authentication strategy:",e.auth.strategy),!i.methods.payload)return;let s=t.lookup(e.route).payload??(i.methods.options.payload?"required":!1);if(!s)return;let a=i.methods,r=i.realm,o=await e._core.toolkit.execute(i.methods.payload,e,{bind:a,realm:r});return o.isBoom&&o.isMissing?s==="optional"?void 0:qs.unauthorized("Missing payload authentication"):o}static async response(e){let t=e.request,i=t._core.auth;if(!t.auth.isAuthenticated)return;let n=i.#i[t.auth.strategy];if(se.assert(n,"Unknown authentication strategy:",t.auth.strategy),!n.methods.response)return;let s=n.methods,a=n.realm,r=await t._core.toolkit.execute(n.methods.response,t,{bind:s,realm:a,continue:"undefined"});if(r)throw r}};Me.setupScope=function(e){if(!e.scope)return!1;if(!Array.isArray(e.scope))return e.scope;let t={};for(let i of e.scope){let n=i[0],s=n==="+"?"required":n==="!"?"forbidden":"selection",a=s==="selection"?i:i.slice(1);t[s]=t[s]??[],t[s].push(a),!t._hasParameters?.[s]&&/{([^}]+)}/.test(a)&&(t._hasParameters=t._hasParameters??{},t._hasParameters[s]=!0)}return t};Me.validate=function(e,t,i,n,s,a){if(t=t??{},s.auth.isAuthenticated=!e,e){if(!(e instanceof Error))return s._log(["auth","unauthenticated","response",i],{statusCode:e.statusCode}),e;if(e.isMissing)return s._log(["auth","unauthenticated","missing",i],e),a.push(e.output.headers["WWW-Authenticate"]),Me.missing}if(s.auth.strategy=i,s.auth.credentials=t.credentials,s.auth.artifacts=t.artifacts,!!e){if(s.auth.error=e,n.mode==="try"){s._log(["auth","unauthenticated","try",i],e);return}throw s._log(["auth","unauthenticated","error",i],e),e}};Me.expandScope=function(e,t){return t._hasParameters?{required:Me.expandScopeType(e,t,"required"),selection:Me.expandScopeType(e,t,"selection"),forbidden:Me.expandScopeType(e,t,"forbidden")}:t};Me.expandScopeType=function(e,t,i){if(!t._hasParameters[i])return t[i];let n=[],s={params:e.params,query:e.query,payload:e.payload,credentials:e.auth.credentials};for(let a of t[i])n.push(se.reachTemplate(s,a));return n};Me.validateScope=function(e,t,i){if(!t[i])return!0;let n=typeof e.scope=="string"?t[i].indexOf(e.scope)!==-1?1:0:se.intersect(t[i],e.scope).length;return i==="forbidden"?n===0:i==="required"?n===t.required.length:!!n}});var lg=w(no=>{"use strict";var ek=z(),El=G(),io={};no.selection=function(e,t,i){let n=no.selections(e,t,i);return n.length?n[0]:""};no.selections=function(e,t,i){return ek.assert(!t||Array.isArray(t),"Preferences must be an array"),io.parse(e||"",t,i)};io.parse=function(e,t,i){let n=e.replace(/[ \t]/g,""),s=new Map;if(t){let p=0;for(let u of t){let d=u.toLowerCase();if(s.set(d,{orig:u,pos:p++}),i.prefixMatch){let m=d.split("-");for(;m.pop(),m.length>0;){let f=m.join("-");s.has(f)||s.set(f,{orig:u,pos:p++})}}}}let a=n.split(","),r=[],o=new Set;for(let p=0;p<a.length;++p){let u=a[p];if(!u)continue;let d=u.split(";");if(d.length>2)throw El.badRequest(`Invalid ${i.type} header`);let m=d[0].toLowerCase();if(!m)throw El.badRequest(`Invalid ${i.type} header`);i.equivalents?.has(m)&&(m=i.equivalents.get(m));let f={token:m,pos:p,q:1};if(t&&s.has(m)&&(f.pref=s.get(m).pos),o.add(f.token),d.length===2){let x=d[1],[E,j]=x.split("=");if(!j||E!=="q"&&E!=="Q")throw El.badRequest(`Invalid ${i.type} header`);let q=parseFloat(j);if(q===0)continue;Number.isFinite(q)&&q<=1&&q>=.001&&(f.q=q)}r.push(f)}r.sort(io.sort);let c=r.map(p=>p.token);if(i.default&&!o.has(i.default)&&c.push(i.default),!t?.length)return c;let l=[];for(let p of c)if(p==="*")for(let[u,d]of s)o.has(u)||l.push(d.orig);else{let u=p.toLowerCase();s.has(u)&&l.push(s.get(u).orig)}return l};io.sort=function(e,t){return t.q!==e.q?t.q-e.q:t.pref!==e.pref?e.pref===void 0?1:t.pref===void 0?-1:e.pref-t.pref:e.pos-t.pos}});var ug=w(so=>{"use strict";var pg=z(),tk=G(),qt={};so.selection=function(e,t){let i=so.selections(e,t);return i.length?i[0]:""};so.selections=function(e,t){return pg.assert(!t||Array.isArray(t),"Preferences must be an array"),qt.parse(e,t)};qt.validMediaRx=/^(?:\*\/\*)|(?:[\w\!#\$%&'\*\+\-\.\^`\|~]+\/\*)|(?:[\w\!#\$%&'\*\+\-\.\^`\|~]+\/[\w\!#\$%&'\*\+\-\.\^`\|~]+)$/;qt.parse=function(e,t){let{header:i,quoted:n}=qt.normalize(e),s=i.split(","),a=[],r={};for(let o=0;o<s.length;++o){let c=s[o];if(!c)continue;let l=c.split(";"),p=l.shift().toLowerCase();if(!qt.validMediaRx.test(p))continue;let u={token:p,params:{},exts:{},pos:o},d="params";for(let x of l){let E=x.split("=");if(E.length!==2||!E[1])throw tk.badRequest("Invalid accept header");let j=E[0],q=E[1];j==="q"||j==="Q"?(d="exts",q=parseFloat(q),(!Number.isFinite(q)||q>1||q<.001&&q!==0)&&(q=1),u.q=q):(q[0]==='"'&&(q=`"${n[q]}"`),u[d][E[0]]=q)}let m=Object.keys(u.params);u.original=[""].concat(m.map(x=>`${x}=${u.params[x]}`)).join(";"),u.specificity=m.length,u.q===void 0&&(u.q=1);let f=u.token.split("/");u.type=f[0],u.subtype=f[1],r[u.token]=u,u.q&&a.push(u)}return a.sort(qt.sort),qt.preferences(r,a,t)};qt.normalize=function(e){e=e||"*/*";let t={header:e,quoted:{}};if(e.includes('"')){let i=0;t.header=e.replace(/="([^"]*)"/g,(n,s)=>{let a='"'+ ++i;return t.quoted[a]=s,"="+a})}return t.header=t.header.replace(/[ \t]/g,""),t};qt.sort=function(e,t){return t.q!==e.q?t.q-e.q:e.type!==t.type?qt.innerSort(e,t,"type"):e.subtype!==t.subtype?qt.innerSort(e,t,"subtype"):e.specificity!==t.specificity?t.specificity-e.specificity:e.pos-t.pos};qt.innerSort=function(e,t,i){return e[i]==="*"?1:t[i]==="*"||e[i]<t[i]?-1:1};qt.preferences=function(e,t,i){if(!i?.length)return t.map(o=>o.token+o.original);let n=Object.create(null),s=Object.create(null),a=!1;for(let o of i){let c=o.toLowerCase();s[c]=o;let l=c.split("/"),p=l[0],u=l[1];if(p==="*"){pg.assert(u==="*","Invalid media type preference contains wildcard type with a subtype"),a=!0;continue}n[p]=n[p]??Object.create(null),n[p][u]=o}let r=[];for(let o of t){let c=o.token,{type:l,subtype:p}=e[c],u=n[l];if(l==="*"){for(let d of Object.keys(s))e[d]||r.push(s[d]);a&&r.push("*/*");continue}if(a){r.push((s[c]||c)+o.original);continue}if(p!=="*"){let d=s[c];(d||u&&u["*"])&&r.push((d||c)+o.original);continue}if(u)for(let d of Object.keys(u))e[`${l}/${d}`]||r.push(u[d])}return r}});var hg=w(Ei=>{"use strict";var dg=lg(),mg=ug(),kl={options:{charset:{type:"accept-charset"},encoding:{type:"accept-encoding",default:"identity",equivalents:new Map([["x-compress","compress"],["x-gzip","gzip"]])},language:{type:"accept-language",prefixMatch:!0}}};for(let e in kl.options)Ei[e]=(t,i)=>dg.selection(t,i,kl.options[e]),Ei[`${e}s`]=(t,i)=>dg.selections(t,i,kl.options[e]);Ei.mediaType=(e,t)=>mg.selection(e,t);Ei.mediaTypes=(e,t)=>mg.selections(e,t);Ei.parseAll=function(e){return{charsets:Ei.charsets(e["accept-charset"]),encodings:Ei.encodings(e["accept-encoding"]),languages:Ei.languages(e["accept-language"]),mediaTypes:Ei.mediaTypes(e.accept)}}});var bg=w((xg,vg)=>{"use strict";var ao=require("zlib"),fg=hg(),ik=it(),Sa=z(),gg={common:["gzip, deflate","deflate, gzip","gzip","deflate","gzip, deflate, br"]};xg=vg.exports=gg.Compression=class{decoders={gzip:e=>ao.createGunzip(e),deflate:e=>ao.createInflate(e)};encodings=["identity","gzip","deflate"];encoders={identity:null,gzip:e=>ao.createGzip(e),deflate:e=>ao.createDeflate(e)};#e=null;constructor(){this._updateCommons()}_updateCommons(){this.#e=new Map;for(let e of gg.common)this.#e.set(e,fg.encoding(e,this.encodings))}addEncoder(e,t){Sa.assert(this.encoders[e]===void 0,`Cannot override existing encoder for ${e}`),Sa.assert(typeof t=="function",`Invalid encoder function for ${e}`),this.encoders[e]=t,this.encodings.unshift(e),this._updateCommons()}addDecoder(e,t){Sa.assert(this.decoders[e]===void 0,`Cannot override existing decoder for ${e}`),Sa.assert(typeof t=="function",`Invalid decoder function for ${e}`),this.decoders[e]=t}accept(e){let t=e.headers["accept-encoding"];if(!t)return"identity";let i=this.#e.get(t);if(i)return i;try{return fg.encoding(t,this.encodings)}catch(n){return ik.rethrow(n,"system"),n.header=t,e._log(["accept-encoding","error"],n),"identity"}}encoding(e,t){if(e.settings.compressed)return e.headers["content-encoding"]=e.settings.compressed,null;let i=e.request;return!i._core.settings.compression||t!==null&&t<i._core.settings.compression.minBytes||!i._core.mime.type(e.headers["content-type"]||"application/octet-stream").compressible||(e.vary("accept-encoding"),e.headers["content-encoding"])||i.info.acceptEncoding==="identity"?null:i.info.acceptEncoding}encoder(e,t){let i=this.encoders[t];return Sa.assert(i!==void 0,`Unknown encoding ${t}`),i(e.route.settings.compression[t])}}});var kg=w((_g,Eg)=>{"use strict";var yg=G(),hn=z(),wg=Gn(),Ps={methodNameRx:/^[_$a-zA-Z][$\w]*(?:\.[_$a-zA-Z][$\w]*)*$/};_g=Eg.exports=Ps.Methods=class{methods={};#e=null;constructor(e){this.#e=e}add(e,t,i,n){if(typeof e!="object")return this._add(e,t,i,n);let s=[].concat(e);for(let a of s)a=wg.apply("methodObject",a),this._add(a.name,a.method,a.options??{},n)}_add(e,t,i,n){hn.assert(typeof t=="function","method must be a function"),hn.assert(typeof e=="string","name must be a string"),hn.assert(e.match(Ps.methodNameRx),"Invalid name:",e),hn.assert(!hn.reach(this.methods,e,{functions:!1}),"Server method function name already exists:",e),i=wg.apply("method",i,e);let s=hn.clone(i,{shallow:["bind"]});s.generateKey=s.generateKey??Ps.generateKey;let a=s.bind??n.settings.bind??null,r=a?(...l)=>t.apply(a,l):t;if(!s.cache)return this._assign(e,r);hn.assert(!s.cache.generateFunc,"Cannot set generateFunc with method caching:",e),hn.assert(s.cache.generateTimeout!==void 0,"Method caching requires a timeout value in generateTimeout:",e),s.cache.generateFunc=(l,p)=>r(...l.args,p);let o=this.#e._cachePolicy(s.cache,"#"+e),c=function(...l){let p=s.generateKey.apply(a,l);return typeof p!="string"?Promise.reject(yg.badImplementation("Invalid method key when invoking: "+e,{name:e,args:l})):o.get({id:p,args:l})};c.cache={drop:function(...l){let p=s.generateKey.apply(a,l);return typeof p!="string"?Promise.reject(yg.badImplementation("Invalid method key when invoking: "+e,{name:e,args:l})):o.drop(p)},stats:o.stats},this._assign(e,c,c)}_assign(e,t){let i=e.split("."),n=this.methods;for(let s=0;s<i.length;++s)n[i[s]]||(n[i[s]]=s+1===i.length?t:{}),n=n[i[s]]}};Ps.supportedArgs=["string","number","boolean"];Ps.generateKey=function(...e){let t="";for(let i=0;i<e.length;++i){let n=e[i];if(!Ps.supportedArgs.includes(typeof n))return null;t=t+(i?":":"")+encodeURIComponent(n.toString())}return t}});var jg=w((Tg,Cg)=>{"use strict";var Sg=require("stream"),Aa=G(),nk=it(),ri=z(),Ag=ha(),Sl=ml(),Pt={events:Ag.validate(["finish",{name:"peek",spread:!0}]),hopByHop:{connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},reserved:["app","headers","plugins","request","source","statusCode","variety","settings","events","code","message","header","vary","etag","type","contentType","bytes","location","created","compressed","replacer","space","suffix","escape","passThrough","redirect","temporary","permanent","rewritable","encoding","charset","ttl","state","unstate","takeover"]};Tg=Cg.exports=Pt.Response=class{constructor(e,t,i={}){this.app={},this.headers={},this.plugins={},this.request=t,this.source=null,this.statusCode=null,this.variety=null,this.settings={charset:"utf-8",compressed:null,encoding:"utf8",message:null,passThrough:!0,stringify:null,ttl:null,varyEtag:!1},this._events=null,this._payload=null,this._error=i.error??null,this._contentType=null,this._takeover=!1,this._statusCode=!1,this._state=this._error?"prepare":"init",this._processors={marshal:i.marshal,prepare:i.prepare,close:i.close},this._setSource(e,i.variety)}static wrap(e,t){return e instanceof t._core.Response||typeof e=="symbol"?e:e instanceof Error?Aa.boomify(e):new t._core.Response(e,t)}_setSource(e,t){this.variety=t??"plain",e==null?e=null:Buffer.isBuffer(e)?(this.variety="buffer",this._contentType="application/octet-stream"):Sl.isStream(e)&&(this.variety="stream",this._contentType="application/octet-stream"),this.source=e,this.variety==="plain"&&this.source!==null&&(this._contentType=typeof this.source=="string"?"text/html":"application/json")}get events(){return this._events||(this._events=new Ag.Podium(Pt.events)),this._events}code(e){return ri.assert(Number.isSafeInteger(e),"Status code must be an integer"),this.statusCode=e,this._statusCode=!0,this}message(e){return this.settings.message=e,this}header(e,t,i){return e=e.toLowerCase(),e==="vary"?this.vary(t):this._header(e,t,i)}_header(e,t,i={}){let n=i.append??!1,s=i.separator||",",a=i.override!==!1,r=i.duplicate!==!1;if(!n&&a||!this.headers[e])this.headers[e]=t;else if(a)if(e==="set-cookie")this.headers[e]=[].concat(this.headers[e],t);else{let o=this.headers[e];if(!r){let c=o.split(s);for(let l of c)if(l===t)return this}this.headers[e]=o+s+t}return this}vary(e){return e==="*"?this.headers.vary="*":this.headers.vary?this.headers.vary!=="*"&&this._header("vary",e,{append:!0,duplicate:!1}):this.headers.vary=e,this}etag(e,t){let i=this.request._core.Response.entity(e,t);return this._header("etag",i.etag),this.settings.varyEtag=i.vary,this}static entity(e,t={}){return ri.assert(e!=="*","ETag cannot be *"),{etag:(t.weak?"W/":"")+'"'+e+'"',vary:t.vary!==!1&&!t.weak,modified:t.modified}}static unmodified(e,t){if(e.method!=="get"&&e.method!=="head")return!1;if(t.etag&&e.headers["if-none-match"]){let a=e.headers["if-none-match"].split(/\s*,\s*/);for(let r of a){if(r===t.etag)return!0;if(!t.vary)continue;if(r===`W/${t.etag}`)return r;let o=t.etag.slice(0,-1),c=e._core.compression.encodings;for(let l of c)if(r===o+`-${l}"`)return!0}return!1}if(!t.modified)return!1;let i=e.headers["if-modified-since"];if(!i)return!1;let n=Pt.parseDate(i);if(!n)return!1;let s=Pt.parseDate(t.modified);return s?n>=s:!1}type(e){return this._header("content-type",e),this}get contentType(){let e=this.headers["content-type"];if(e){if(e=e.trim(),this.settings.charset&&e.match(/^(?:text\/)|(?:application\/(?:json)|(?:javascript))/)&&!e.match(/; *charset=/)){let t=e[e.length-1]===";";return e+(t?" ":"; ")+"charset="+this.settings.charset}return e}if(this._contentType){let t=this.settings.charset&&this._contentType!=="application/octet-stream"?"; charset="+this.settings.charset:"";return this._contentType+t}return null}bytes(e){return this._header("content-length",e),this}location(e){return this._header("location",e),this}created(e){return ri.assert(this.request.method==="post"||this.request.method==="put"||this.request.method==="patch","Cannot return 201 status codes for "+this.request.method.toUpperCase()),this.statusCode=201,this.location(e),this}compressed(e){return ri.assert(e&&typeof e=="string","Invalid content-encoding"),this.settings.compressed=e,this}replacer(e){return this.settings.stringify=this.settings.stringify??{},this.settings.stringify.replacer=e,this}spaces(e){return this.settings.stringify=this.settings.stringify??{},this.settings.stringify.space=e,this}suffix(e){return this.settings.stringify=this.settings.stringify??{},this.settings.stringify.suffix=e,this}escape(e){return this.settings.stringify=this.settings.stringify??{},this.settings.stringify.escape=e,this}passThrough(e){return this.settings.passThrough=e!==!1,this}redirect(e){return this.statusCode=302,this.location(e),this}temporary(e){return ri.assert(this.headers.location,"Cannot set redirection mode without first setting a location"),this._setTemporary(e!==!1),this}permanent(e){return ri.assert(this.headers.location,"Cannot set redirection mode without first setting a location"),this._setTemporary(e===!1),this}rewritable(e){return ri.assert(this.headers.location,"Cannot set redirection mode without first setting a location"),this._setRewritable(e!==!1),this}_isTemporary(){return this.statusCode===302||this.statusCode===307}_isRewritable(){return this.statusCode===301||this.statusCode===302}_setTemporary(e){e?this._isRewritable()?this.statusCode=302:this.statusCode=307:this._isRewritable()?this.statusCode=301:this.statusCode=308}_setRewritable(e){e?this._isTemporary()?this.statusCode=302:this.statusCode=301:this._isTemporary()?this.statusCode=307:this.statusCode=308}encoding(e){return this.settings.encoding=e,this}charset(e){return this.settings.charset=e??null,this}ttl(e){return this.settings.ttl=e,this}state(e,t,i){return this.request._setState(e,t,i),this}unstate(e,t){return this.request._clearState(e,t),this}takeover(){return this._takeover=!0,this}_prepare(){if(ri.assert(this._state==="init"),this._state="prepare",this._passThrough(),!this._processors.prepare)return this;try{return this._processors.prepare(this)}catch(e){throw Aa.boomify(e)}}_passThrough(){if(this.variety==="stream"&&this.settings.passThrough&&(this.source.statusCode&&!this.statusCode&&(this.statusCode=this.source.statusCode),this.source.headers)){let e=Object.keys(this.source.headers);if(e.length){let t=this.headers;this.headers={};let i=this.source.headers.connection,n={};i&&i.split(/\s*,\s*/).forEach(s=>{n[s]=!0});for(let s of e){let a=s.toLowerCase();!Pt.hopByHop[a]&&!n[a]&&this.header(a,ri.clone(this.source.headers[s]))}e=Object.keys(t);for(let s of e)this.header(s,t[s],{append:s==="set-cookie"})}}this.statusCode=this.statusCode??200}async _marshal(){ri.assert(this._state==="prepare"),this._state="marshall";let e=this.source;if(this._processors.marshal)try{e=await this._processors.marshal(this)}catch(n){throw Aa.boomify(n)}if(Sl.isStream(e)){this._payload=e;return}let t=this.variety==="plain"&&e!==null&&typeof e!="string";if(!t&&this.settings.stringify)throw Aa.badImplementation("Cannot set formatting options on non object response");let i=e;if(t){let n=this.settings.stringify??{},s=n.space??this.request.route.settings.json.space,a=n.replacer??this.request.route.settings.json.replacer,r=n.suffix??this.request.route.settings.json.suffix??"",o=this.request.route.settings.json.escape;try{a||s?i=JSON.stringify(i,a,s):i=JSON.stringify(i)}catch(c){throw Aa.boomify(c)}r&&(i=i+r),o&&(i=ri.escapeJson(i))}this._payload=new Pt.Response.Payload(i,this.settings)}_tap(){return this._events&&(this._events.hasListeners("peek")||this._events.hasListeners("finish"))?new Pt.Response.Peek(this._events):null}_close(){if(this._state==="close")return;if(this._state="close",this._processors.close)try{this._processors.close(this)}catch(t){nk.rethrow(t,"system"),this.request._log(["response","cleanup","error"],t)}let e=this._payload||this.source;Sl.isStream(e)&&Pt.Response.drain(e)}_isPayloadSupported(){return this.request.method!=="head"&&this.statusCode!==304&&this.statusCode!==204}static drain(e){e.destroy()}};Pt.Response.reserved=Pt.reserved;Pt.parseDate=function(e){try{return Date.parse(e)}catch{}};Pt.Response.Payload=class extends Sg.Readable{constructor(e,t){super(),this._data=e,this._encoding=t.encoding}_read(e){this._data&&this.push(this._data,this._encoding),this.push(null)}size(){return this._data?Buffer.isBuffer(this._data)?this._data.length:Buffer.byteLength(this._data,this._encoding):0}writeToStream(e){this._data&&e.write(this._data,this._encoding),e.end()}};Pt.Response.Peek=class extends Sg.Transform{constructor(e){super(),this._podium=e,this.on("finish",()=>e.emit("finish"))}_transform(e,t,i){this._podium.emit("peek",[e,t]),this.push(e,t),i()}}});var Ng=w((Ig,$g)=>{"use strict";var sk=require("http"),ak=require("https"),Rg=require("os"),rk=require("path"),Tl=G(),ok=it(),ck=Bh(),Al=Xc(),{Engine:lk}=Xh(),{Heavy:pk}=tf(),oi=z(),{Mimos:uk}=sf(),dk=ha(),mk=ff(),hk=gl(),fk=bg(),Ta=Gn(),gk=Ea(),Vt=Wr(),xk=kg(),qg=_l(),vk=jg(),Pg=Qr(),Og=Zr(),bk=Gr(),dt={counter:{min:1e4,max:99999},events:[{name:"cachePolicy",spread:!0},{name:"log",channels:["app","internal"],tags:!0},{name:"request",channels:["app","internal","error"],tags:!0,spread:!0},"response","route","start","closing","stop"],badRequestResponse:Buffer.from(`HTTP/1.1 400 Bad Request\r
\r
`,"ascii")};Ig=$g.exports=dt.Core=class{actives=new WeakMap;app={};auth=new hk(this);caches=new Map;compression=new fk;controlled=null;dependencies=[];events=new dk.Podium(dt.events);heavy=null;info=null;instances=new Set;listener=null;methods=new xk(this);mime=null;onConnection=null;phase="stopped";plugins={};registrations={};registring=0;Request=class extends qg{};Response=class extends vk{};requestCounter={value:dt.counter.min,min:dt.counter.min,max:dt.counter.max};root=null;router=null;settings=null;sockets=null;started=!1;states=null;toolkit=new Og.Manager;type=null;validator=null;extensionsSeq=0;extensions={server:{onPreStart:new Vt("onPreStart",this),onPostStart:new Vt("onPostStart",this),onPreStop:new Vt("onPreStop",this),onPostStop:new Vt("onPostStop",this)},route:{onRequest:new Vt("onRequest",this),onPreAuth:new Vt("onPreAuth",this),onCredentials:new Vt("onCredentials",this),onPostAuth:new Vt("onPostAuth",this),onPreHandler:new Vt("onPreHandler",this),onPostHandler:new Vt("onPostHandler",this),onPreResponse:new Vt("onPreResponse",this),onPostResponse:new Vt("onPostResponse",this)}};decorations={handler:new Map,request:new Map,response:new Map,server:new Map,toolkit:new Map,requestApply:null,public:{handler:[],request:[],response:[],server:[],toolkit:[]}};constructor(e){let{settings:t,type:i}=dt.setup(e);this.settings=t,this.type=i,this.heavy=new pk(this.settings.load),this.mime=new uk(this.settings.mime),this.router=new ck.Router(this.settings.router),this.states=new mk.Definitions(this.settings.state),this._debug(),this._initializeCache(),this.settings.routes.validate.validator&&(this.validator=bk.validator(this.settings.routes.validate.validator)),this.listener=this._createListener(),this._initializeListener(),this.info=this._info()}_debug(){let e=this.settings.debug;if(!e)return;let t=i=>{let n=i.error??i.data;console.error("Debug:",i.tags.join(", "),n?`
    `+(n.stack??(typeof n=="object"?oi.stringify(n):n)):"")};if(e.log){let i=e.log.some(n=>n==="*")?void 0:e.log;this.events.on({name:"log",filter:i},t)}if(e.request){let i=e.request.some(n=>n==="*")?void 0:e.request;this.events.on({name:"request",filter:i},(n,s)=>t(s))}}_initializeCache(){this.settings.cache&&this._createCache(this.settings.cache),this.caches.has("_default")||this._createCache([{provider:lk}])}_info(){let e=Date.now(),t=this.type==="tcp"?this.settings.tls?"https":"http":this.type,i=this.settings.host||Rg.hostname()||"localhost",n=this.settings.port;return{created:e,started:0,host:i,port:n,protocol:t,id:Rg.hostname()+":"+process.pid+":"+e.toString(36),uri:this.settings.uri??t+":"+(this.type==="tcp"?"//"+i+(n?":"+n:""):n)}}_counter(){let e=++this.requestCounter.value;return this.requestCounter.value>this.requestCounter.max&&(this.requestCounter.value=this.requestCounter.min),e-1}_createCache(e){oi.assert(this.phase!=="initializing","Cannot provision server cache while server is initializing"),e=Ta.apply("cache",e);let t=[];for(let i of e){typeof i=="function"&&(i={provider:{constructor:i}});let n=i.name??"_default";oi.assert(!this.caches.has(n),"Cannot configure the same cache more than once: ",n==="_default"?"default cache":n);let s=null;if(i.provider){let a=i.provider;typeof a=="function"&&(a={constructor:a}),s=new Al.Client(a.constructor,a.options??{partition:"hapi-cache"})}else s=new Al.Client(i.engine);this.caches.set(n,{client:s,segments:{},shared:i.shared??!1}),t.push(s)}return t}registerServer(e){this.root||(this.root=e,this._defaultRoutes()),this.instances.add(e)}async _start(){if((this.phase==="initialized"||this.phase==="started")&&this._validateDeps(),this.phase!=="started"){if(this.phase!=="stopped"&&this.phase!=="initialized")throw new Error("Cannot start server while it is in "+this.phase+" phase");this.phase!=="initialized"&&await this._initialize(),this.phase="starting",this.started=!0,this.info.started=Date.now();try{await this._listen()}catch(e){throw this.started=!1,this.phase="invalid",e}this.phase="started",this.events.emit("start");try{this.controlled&&await Promise.all(this.controlled.map(e=>e.start())),await this._invoke("onPostStart")}catch(e){throw this.phase="invalid",e}}}_listen(){return new Promise((e,t)=>{if(!this.settings.autoListen){e();return}let i=s=>{t(s)};this.listener.once("error",i);let n=()=>{this.listener.removeListener("error",i),e()};if(this.type!=="tcp")this.listener.listen(this.settings.port,n);else{let s=this.settings.address||this.settings.host||null;this.listener.listen(this.settings.port,s,n)}})}async _initialize(){if(this.registring)throw new Error("Cannot start server before plugins finished registration");if(this.phase!=="initialized"){if(this.phase!=="stopped")throw new Error("Cannot initialize server while it is in "+this.phase+" phase");this._validateDeps(),this.phase="initializing";try{let e=[];this.caches.forEach(t=>e.push(t.client.start())),await Promise.all(e),await this._invoke("onPreStart"),this.heavy.start(),this.phase="initialized",this.controlled&&await Promise.all(this.controlled.map(t=>t.initialize()))}catch(e){throw this.phase="invalid",e}}}_validateDeps(){for(let{deps:e,plugin:t}of this.dependencies)for(let i in e){let n=e[i];oi.assert(this.registrations[i],"Plugin",t,"missing dependency",i),oi.assert(n==="*"||Ta.versionMatch(this.registrations[i].version,n),"Plugin",t,"requires",i,"version",n,"but found",this.registrations[i].version)}}async _stop(e={}){if(e.timeout=e.timeout??5e3,["stopped","initialized","started","invalid"].indexOf(this.phase)===-1)throw new Error("Cannot stop server while in "+this.phase+" phase");this.phase="stopping";try{await this._invoke("onPreStop"),this.started&&(this.started=!1,this.info.started=0,await this._unlisten(e.timeout));let t=[];this.caches.forEach(i=>t.push(i.client.stop())),await Promise.all(t),this.events.emit("stop"),this.heavy.stop(),this.controlled&&await Promise.all(this.controlled.map(i=>i.stop(e))),await this._invoke("onPostStop"),this.phase="stopped"}catch(t){throw this.phase="invalid",t}}_unlisten(e){let t=null;if(this.settings.operations.cleanStop){t=setTimeout(()=>{for(let n of this.sockets)n.destroy();this.sockets.clear()},e);for(let n of this.sockets)this.actives.has(n)||n.end()}return new Promise(i=>{this.listener.close(()=>{this.settings.operations.cleanStop&&(this.listener.removeListener(this.settings.tls?"secureConnection":"connection",this.onConnection),clearTimeout(t)),this._initializeListener(),i()}),this.events.emit("closing")})}async _invoke(e){let t=this.extensions.server[e];if(t.nodes)for(let i of t.nodes){let n=i.bind??i.realm.settings.bind,s=i.func.call(n,i.server,n);await Og.timed(s,{timeout:i.timeout,name:e})}}_defaultRoutes(){this.router.special("notFound",new Pg({method:"_special",path:"/{p*}",handler:dt.notFound},this.root,{special:!0})),this.router.special("badRequest",new Pg({method:"_special",path:"/{p*}",handler:dt.badRequest},this.root,{special:!0})),this.settings.routes.cors&&gk.handler(this.root)}_dispatch(e={}){return(t,i)=>{let n=qg.generate(this.root,t,i,e);if(this.settings.operations.cleanStop&&t.socket){this.actives.set(t.socket,n);let s={core:this,req:t};i.on("finish",dt.onFinish.bind(i,s))}if(this.settings.load.sampleInterval)try{this.heavy.check()}catch(s){ok.rethrow(s,"system"),this._log(["load"],this.heavy.load),n._reply(s);return}n._execute()}}_createListener(){let e=this.settings.listener??(this.settings.tls?ak.createServer(this.settings.tls):sk.createServer());return e.on("request",this._dispatch()),e.on("checkContinue",this._dispatch({expectContinue:!0})),e.on("clientError",(t,i)=>{if(this._log(["connection","client","error"],t),i.readable){let n=this.settings.operations.cleanStop&&this.actives.get(i);if(n){if(t.code==="HPE_INVALID_METHOD"){n.raw.res.once("close",()=>{i.readable?i.end(dt.badRequestResponse):i.destroy(t)});return}let s=Tl.badRequest();s.output.headers={connection:"close"},n._reply(s)}else i.end(dt.badRequestResponse)}else i.destroy(t)}),e}_initializeListener(){this.listener.once("listening",()=>{if(this.type==="tcp"){let e=this.listener.address();this.info.address=e.address,this.info.port=e.port,this.info.uri=this.settings.uri??this.info.protocol+"://"+this.info.host+":"+this.info.port}if(this.settings.operations.cleanStop){this.sockets=new Set;let e=this,t=function(){e.sockets.delete(this)};this.onConnection=i=>{this.sockets.add(i),i.on("close",t)},this.listener.on(this.settings.tls?"secureConnection":"connection",this.onConnection)}})}_cachePolicy(e,t,i){e=Ta.apply("cachePolicy",e);let n=i?.plugin,s=e.segment??t??(n?`!${n}`:"");oi.assert(s,"Missing cache segment name");let a=e.cache??"_default",r=this.caches.get(a);oi.assert(r,"Unknown cache",a),oi.assert(!r.segments[s]||r.shared||e.shared,"Cannot provision the same cache segment more than once"),r.segments[s]=!0;let o=new Al.Policy(e,r.client,s);return this.events.emit("cachePolicy",[o,e.cache,s]),o}log(e,t){return this._log(e,t,"app")}_log(e,t,i="internal"){if(!this.events.hasListeners("log"))return;Array.isArray(e)||(e=[e]);let n=Date.now(),s=t instanceof Error?"error":"data",a={timestamp:n,tags:e,[s]:t,channel:i};typeof t=="function"&&(a=()=>({timestamp:n,tags:e,data:t(),channel:i})),this.events.emit({name:"log",tags:e,channel:i},a)}};dt.setup=function(e={}){let t=oi.clone(e,{shallow:["cache","listener","routes.bind"]});t.app=t.app??{},t.routes=Ta.enable(t.routes),t=Ta.apply("server",t),t.port===void 0&&(t.port=0);let i=typeof t.port=="string"?"socket":"tcp";return i==="socket"&&(t.port=t.port.indexOf("/")!==-1?rk.resolve(t.port):t.port.toLowerCase()),t.autoListen===void 0&&(t.autoListen=!0),oi.assert(t.autoListen||!t.port,"Cannot specify port when autoListen is false"),oi.assert(t.autoListen||!t.address,"Cannot specify address when autoListen is false"),{settings:t,type:i}};dt.notFound=function(){throw Tl.notFound()};dt.badRequest=function(){throw Tl.badRequest()};dt.onFinish=function(e){let{core:t,req:i}=e;t.actives.delete(i.socket),t.started||i.socket.end()}});var Fg=w((qI,yk)=>{yk.exports={name:"@hapi/hapi",description:"HTTP Server framework",homepage:"https://hapi.dev",version:"21.3.12",repository:"git://github.com/hapijs/hapi",main:"lib/index.js",types:"lib/index.d.ts",engines:{node:">=14.15.0"},files:["lib"],keywords:["framework","http","api","web"],eslintConfig:{extends:["plugin:@hapi/module"]},dependencies:{"@hapi/accept":"^6.0.3","@hapi/ammo":"^6.0.1","@hapi/boom":"^10.0.1","@hapi/bounce":"^3.0.2","@hapi/call":"^9.0.1","@hapi/catbox":"^12.1.1","@hapi/catbox-memory":"^6.0.2","@hapi/heavy":"^8.0.1","@hapi/hoek":"^11.0.6","@hapi/mimos":"^7.0.1","@hapi/podium":"^5.0.1","@hapi/shot":"^6.0.1","@hapi/somever":"^4.1.1","@hapi/statehood":"^8.1.1","@hapi/subtext":"^8.1.0","@hapi/teamwork":"^6.0.0","@hapi/topo":"^6.0.2","@hapi/validate":"^2.0.1"},devDependencies:{"@hapi/code":"^9.0.3","@hapi/eslint-plugin":"^6.0.0","@hapi/inert":"^7.1.0","@hapi/joi-legacy-test":"npm:@hapi/joi@^15.0.0","@hapi/lab":"^25.3.2","@hapi/vision":"^7.0.3","@hapi/wreck":"^18.1.0","@types/node":"^18.19.59",handlebars:"^4.7.8",joi:"^17.13.3","legacy-readable-stream":"npm:readable-stream@^1.0.34",typescript:"^4.9.4"},scripts:{test:"lab -a @hapi/code -t 100 -L -m 5000 -Y","test-tap":"lab -a @hapi/code -r tap -o tests.tap -m 5000","test-cov-html":"lab -a @hapi/code -r html -o coverage.html -m 5000"},license:"BSD-3-Clause"}});var Bg=w((Mg,Dg)=>{"use strict";var U=z(),wk=jh(),_k=da(),fn=Gn(),Ek=Ng(),kk=Ea(),ss=Wr(),Sk=Fg(),Ak=Qr(),Tk=Zr(),Lg=Gr(),gn={};Mg=Dg.exports=function(e){let t=new Ek(e);return new gn.Server(t)};gn.Server=class{constructor(e,t,i){this._core=e,this.app=e.app,this.auth=e.auth.public(this),this.decorations=e.decorations.public,this.cache=gn.cache(this),this.events=e.events,this.info=e.info,this.listener=e.listener,this.load=e.heavy.load,this.methods=e.methods.methods,this.mime=e.mime,this.plugins=e.plugins,this.registrations=e.registrations,this.settings=e.settings,this.states=e.states,this.type=e.type,this.version=Sk.version,this.realm={_extensions:{onPreAuth:new ss("onPreAuth",e),onCredentials:new ss("onCredentials",e),onPostAuth:new ss("onPostAuth",e),onPreHandler:new ss("onPreHandler",e),onPostHandler:new ss("onPostHandler",e),onPreResponse:new ss("onPreResponse",e),onPostResponse:new ss("onPostResponse",e)},modifiers:{route:{}},parent:i?i.realm:null,plugin:t,pluginOptions:{},plugins:{},_rules:null,settings:{bind:void 0,files:{relativeTo:void 0}},validator:null};for(let[n,s]of e.decorations.server.entries())this[n]=s;e.registerServer(this)}_clone(e){return new gn.Server(this._core,e,this)}bind(e){U.assert(typeof e=="object","bind must be an object"),this.realm.settings.bind=e}control(e){U.assert(e instanceof gn.Server,"Can only control Server objects"),this._core.controlled=this._core.controlled??[],this._core.controlled.push(e)}decoder(e,t){return this._core.compression.addDecoder(e,t)}decorate(e,t,i,n={}){U.assert(this._core.decorations.public[e],"Unknown decoration type:",e),U.assert(t,"Missing decoration property name"),U.assert(typeof t=="string"||typeof t=="symbol","Decoration property must be a string or a symbol");let s=t.toString();U.assert(s[0]!=="_","Property name cannot begin with an underscore:",s);let a=this._core.decorations[e].get(t);n.extend?(U.assert(e!=="handler","Cannot extent handler decoration:",s),U.assert(a,`Cannot extend missing ${e} decoration: ${s}`),U.assert(typeof i=="function",`Extended ${e} decoration method must be a function: ${s}`),i=i(a)):U.assert(a===void 0,`${e[0].toUpperCase()+e.slice(1)} decoration already defined: ${s}`),e==="handler"?(U.assert(typeof i=="function","Handler must be a function:",s),U.assert(!i.defaults||typeof i.defaults=="object"||typeof i.defaults=="function","Handler defaults property must be an object or function"),U.assert(!n.extend,"Cannot extend handler decoration:",s)):e==="request"?(U.assert(!this._core.Request.reserved.includes(t),"Cannot override built-in request interface decoration:",s),n.apply?(this._core.decorations.requestApply=this._core.decorations.requestApply??new Map,this._core.decorations.requestApply.set(t,i)):this._core.Request.prototype[t]=i):e==="response"?(U.assert(!this._core.Response.reserved.includes(t),"Cannot override built-in response interface decoration:",s),this._core.Response.prototype[t]=i):e==="toolkit"?(U.assert(!Tk.reserved.includes(t),"Cannot override built-in toolkit decoration:",s),this._core.toolkit.decorate(t,i)):(typeof t=="string"?U.assert(!Object.getOwnPropertyNames(gn.Server.prototype).includes(t),"Cannot override the built-in server interface method:",s):U.assert(!Object.getOwnPropertySymbols(gn.Server.prototype).includes(t),"Cannot override the built-in server interface method:",s),this._core.instances.forEach(r=>{r[t]=i})),this._core.decorations[e].set(t,i),this._core.decorations.public[e].push(t)}dependency(e,t){if(U.assert(this.realm.plugin,"Cannot call dependency() outside of a plugin"),U.assert(!t||typeof t=="function","Invalid after method"),typeof e=="string")e={[e]:"*"};else if(Array.isArray(e)){let i={};for(let n of e)i[n]="*";e=i}this._core.dependencies.push({plugin:this.realm.plugin,deps:e}),t&&this.ext("onPreStart",t,{after:Object.keys(e)})}encoder(e,t){return this._core.compression.addEncoder(e,t)}event(e){this._core.events.registerEvent(e)}expose(e,t,i={}){U.assert(this.realm.plugin,"Cannot call expose() outside of a plugin");let n=this.realm.plugin;n[0]==="@"&&i.scope!==!0&&(n=n.replace(/^@([^/]+)\//,(s,a)=>i.scope?`${a}__`:"")),this._core.plugins[n]=this._core.plugins[n]??{},typeof e=="string"?this._core.plugins[n][e]=t:U.merge(this._core.plugins[n],e)}ext(e,t,i){let n;if(typeof e=="string"){if(!t){let s=new _k.Team;t=(a,r)=>(s.attend(a),r.continue),n=s.work}e={type:e,method:t,options:i}}e=fn.apply("exts",e);for(let s of e)this._ext(s);return n}_ext(e){e=Object.assign({},e),e.realm=this.realm;let t=e.type;if(!this._core.extensions.server[t])return e.options.sandbox==="plugin"?(U.assert(this.realm._extensions[t],"Unknown event type",t),this.realm._extensions[t].add(e)):(U.assert(this._core.extensions.route[t],"Unknown event type",t),this._core.extensions.route[t].add(e));U.assert(!e.options.sandbox,"Cannot specify sandbox option for server extension"),U.assert(t!=="onPreStart"||this._core.phase==="stopped","Cannot add onPreStart (after) extension after the server was initialized"),e.server=this,this._core.extensions.server[t].add(e)}async inject(e){let t=e;typeof t=="string"&&(t={url:t}),(!t.authority||t.auth||t.app||t.plugins||t.allowInternals!==void 0)&&(t=Object.assign({},t),delete t.auth,delete t.app,delete t.plugins,delete t.allowInternals,t.authority=t.authority??this._core.info.host+":"+this._core.info.port),U.assert(!e.credentials,"options.credentials no longer supported (use options.auth)"),e.auth&&(U.assert(typeof e.auth=="object","options.auth must be an object"),U.assert(e.auth.credentials,"options.auth.credentials is missing"),U.assert(e.auth.strategy,"options.auth.strategy is missing"));let i=this._core._dispatch({auth:e.auth,allowInternals:e.allowInternals,app:e.app,plugins:e.plugins,isInjected:!0}),n=await wk.inject(i,t),s=n.raw.res[fn.symbol];if(s){if(delete n.raw.res[fn.symbol],n.request=s.request,s.error)throw s.error;s.result!==void 0&&(n.result=s.result)}return n.result===void 0&&(n.result=n.payload),n}log(e,t){return this._core.log(e,t)}lookup(e){U.assert(e&&typeof e=="string","Invalid route id:",e);let t=this._core.router.ids.get(e);return t?t.route.public:null}match(e,t,i){U.assert(e&&typeof e=="string","Invalid method:",e),U.assert(t&&typeof t=="string"&&t[0]==="/","Invalid path:",t),U.assert(!i||typeof i=="string","Invalid host:",i);let n=this._core.router.route(e.toLowerCase(),t,i);return U.assert(n!==this._core.router.specials.badRequest,"Invalid path:",t),n===this._core.router.specials.notFound?null:n.route.public}method(e,t,i={}){return this._core.methods.add(e,t,i,this.realm)}path(e){U.assert(e&&typeof e=="string","relativeTo must be a non-empty string"),this.realm.settings.files.relativeTo=e}async register(e,t={}){(this.realm.modifiers.route.prefix||this.realm.modifiers.route.vhost)&&(t=U.clone(t),t.routes=t.routes??{},t.routes.prefix=(this.realm.modifiers.route.prefix??"")+(t.routes.prefix??"")||void 0,t.routes.vhost=this.realm.modifiers.route.vhost??t.routes.vhost),t=fn.apply("register",t),++this._core.registring;try{let i=[].concat(e);for(let n of i){n.plugin?n.plugin.register?typeof n=="function"&&(n=Object.assign({},n)):n={options:n.options,once:n.once,routes:n.routes,plugin:n.plugin.plugin}:n={plugin:n},n=fn.apply("plugin",n);let s=n.plugin.name??n.plugin.pkg.name,a=this._clone(s);a.realm.modifiers.route.prefix=n.routes.prefix??t.routes.prefix,a.realm.modifiers.route.vhost=n.routes.vhost??t.routes.vhost,a.realm.pluginOptions=n.options??{};let r=n.plugin.requirements;if(U.assert(!r.node||fn.versionMatch(process.version,r.node),"Plugin",s,"requires node version",r.node,"but found",process.version),U.assert(!r.hapi||fn.versionMatch(this.version,r.hapi),"Plugin",s,"requires hapi version",r.hapi,"but found",this.version),this._core.registrations[s]){if(n.plugin.once||n.once||t.once)continue;U.assert(n.plugin.multiple,"Plugin",s,"already registered")}else this._core.registrations[s]={version:n.plugin.version??n.plugin.pkg.version,name:s,options:n.options};n.plugin.dependencies&&a.dependency(n.plugin.dependencies),await n.plugin.register(a,n.options??{})}}finally{--this._core.registring}return this}route(e){U.assert(typeof e=="object","Invalid route options"),e=[].concat(e);for(let t of e)if(Array.isArray(t.method))for(let i of t.method){let n=Object.assign({},t);n.method=i,this._addRoute(n,this)}else this._addRoute(t,this)}_addRoute(e,t){let i=new Ak(e,t),n=[].concat(i.settings.vhost??"*");for(let s of n){let a=this._core.router.add({method:i.method,path:i.path,vhost:s,analysis:i._analysis,id:i.settings.id},i);i.fingerprint=a.fingerprint,i.params=a.params}this.events.emit("route",i.public),kk.options(i.public,t)}rules(e,t={}){U.assert(!this.realm._rules,"Server realm rules already defined");let i=fn.apply("rules",t);if(i.validate){let n=i.validate.schema;i.validate.schema=Lg.compile(n,null,this.realm,this._core)}this.realm._rules={processor:e,settings:i}}state(e,t){this.states.add(e,t)}table(e){return this._core.router.table(e)}validator(e){U.assert(!this.realm.validator,"Validator already set"),this.realm.validator=Lg.validator(e)}start(){return this._core._start()}initialize(){return this._core._initialize()}stop(e){return this._core._stop(e)}};gn.cache=e=>{let t=function(i,n){return this._core._cachePolicy(i,n,e.realm)};return t.provision=async i=>{let n=e._core._createCache(i);["initialized","starting","started"].includes(e._core.phase)&&await Promise.all(n.map(s=>s.start()))},t}});var Ug=w(Cl=>{"use strict";var zg=Bg();Cl.Server=zg;Cl.server=zg});var Vp=w((b$,ay)=>{"use strict";var zk=Object.create,Po=Object.defineProperty,Uk=Object.getOwnPropertyDescriptor,Hk=Object.getOwnPropertyNames,Vk=Object.getPrototypeOf,Kk=Object.prototype.hasOwnProperty,Gx=(e,t)=>()=>(e&&(t=e(e=0)),t),At=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ps=(e,t)=>{for(var i in t)Po(e,i,{get:t[i],enumerable:!0})},Jx=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Hk(t))!Kk.call(e,s)&&s!==i&&Po(e,s,{get:()=>t[s],enumerable:!(n=Uk(t,s))||n.enumerable});return e},ee=(e,t,i)=>(i=e!=null?zk(Vk(e)):{},Jx(t||!e||!e.__esModule?Po(i,"default",{value:e,enumerable:!0}):i,e)),Wk=e=>Jx(Po({},"__esModule",{value:!0}),e),Qx=At((e,t)=>{"use strict";t.exports=(i,n=process.argv)=>{let s=i.startsWith("-")?"":i.length===1?"-":"--",a=n.indexOf(s+i),r=n.indexOf("--");return a!==-1&&(r===-1||a<r)}}),Gk=At((e,t)=>{"use strict";var i=require("node:os"),n=require("node:tty"),s=Qx(),{env:a}=process,r;s("no-color")||s("no-colors")||s("color=false")||s("color=never")?r=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(r=1),"FORCE_COLOR"in a&&(a.FORCE_COLOR==="true"?r=1:a.FORCE_COLOR==="false"?r=0:r=a.FORCE_COLOR.length===0?1:Math.min(parseInt(a.FORCE_COLOR,10),3));function o(p){return p===0?!1:{level:p,hasBasic:!0,has256:p>=2,has16m:p>=3}}function c(p,u){if(r===0)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(p&&!u&&r===void 0)return 0;let d=r||0;if(a.TERM==="dumb")return d;if(process.platform==="win32"){let m=i.release().split(".");return Number(m[0])>=10&&Number(m[2])>=10586?Number(m[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(m=>m in a)||a.CI_NAME==="codeship"?1:d;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if(a.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in a){let m=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return m>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:d}function l(p){let u=c(p,p&&p.isTTY);return o(u)}t.exports={supportsColor:l,stdout:o(c(!0,n.isatty(1))),stderr:o(c(!0,n.isatty(2)))}}),Jk=At((e,t)=>{"use strict";var i=Gk(),n=Qx();function s(r){if(/^\d{3,4}$/.test(r)){let c=/(\d{1,2})(\d{2})/.exec(r)||[];return{major:0,minor:parseInt(c[1],10),patch:parseInt(c[2],10)}}let o=(r||"").split(".").map(c=>parseInt(c,10));return{major:o[0],minor:o[1],patch:o[2]}}function a(r){let{CI:o,FORCE_HYPERLINK:c,NETLIFY:l,TEAMCITY_VERSION:p,TERM_PROGRAM:u,TERM_PROGRAM_VERSION:d,VTE_VERSION:m,TERM:f}=process.env;if(c)return!(c.length>0&&parseInt(c,10)===0);if(n("no-hyperlink")||n("no-hyperlinks")||n("hyperlink=false")||n("hyperlink=never"))return!1;if(n("hyperlink=true")||n("hyperlink=always")||l)return!0;if(!i.supportsColor(r)||r&&!r.isTTY)return!1;if("WT_SESSION"in process.env)return!0;if(process.platform==="win32"||o||p)return!1;if(u){let x=s(d||"");switch(u){case"iTerm.app":return x.major===3?x.minor>=1:x.major>3;case"WezTerm":return x.major>=20200620;case"vscode":return x.major>1||x.major===1&&x.minor>=72;case"ghostty":return!0}}if(m){if(m==="0.50.0")return!1;let x=s(m);return x.major>0||x.minor>=50}switch(f){case"alacritty":return!0}return!1}t.exports={supportsHyperlink:a,stdout:a(process.stdout),stderr:a(process.stderr)}}),Qk=At((e,t)=>{t.exports={name:"@prisma/internals",version:"6.8.2",description:"This package is intended for Prisma's internal use",main:"dist/index.js",types:"dist/index.d.ts",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/internals"},homepage:"https://www.prisma.io",author:"Tim Suchanek <suchanek@prisma.io>",bugs:"https://github.com/prisma/prisma/issues",license:"Apache-2.0",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",test:"dotenv -e ../../.db.env -- jest --silent",prepublishOnly:"pnpm run build"},files:["README.md","dist","!**/libquery_engine*","!dist/get-generators/engines/*","scripts"],devDependencies:{"@babel/helper-validator-identifier":"7.25.9","@opentelemetry/api":"1.9.0","@swc/core":"1.11.5","@swc/jest":"0.2.37","@types/babel__helper-validator-identifier":"7.15.2","@types/jest":"29.5.14","@types/node":"18.19.76","@types/resolve":"1.20.6",archiver:"6.0.2","checkpoint-client":"1.1.33","cli-truncate":"4.0.0",dotenv:"16.5.0",esbuild:"0.25.1","escape-string-regexp":"5.0.0",execa:"5.1.1","fast-glob":"3.3.3","find-up":"7.0.0","fp-ts":"2.16.9","fs-extra":"11.3.0","fs-jetpack":"5.1.0","global-dirs":"4.0.0",globby:"11.1.0","identifier-regex":"1.0.0","indent-string":"4.0.0","is-windows":"1.0.2","is-wsl":"3.1.0",jest:"29.7.0","jest-junit":"16.0.0",kleur:"4.1.5","mock-stdin":"1.0.0","new-github-issue-url":"0.2.1","node-fetch":"3.3.2","npm-packlist":"5.1.3",open:"7.4.2","p-map":"4.0.0","read-package-up":"11.0.0",resolve:"1.22.10","string-width":"7.2.0","strip-ansi":"6.0.1","strip-indent":"4.0.0","temp-dir":"2.0.0",tempy:"1.0.1","terminal-link":"4.0.0",tmp:"0.2.3","ts-node":"10.9.2","ts-pattern":"5.6.2","ts-toolbelt":"9.6.0",typescript:"5.4.5",yarn:"1.22.22"},dependencies:{"@prisma/config":"workspace:*","@prisma/debug":"workspace:*","@prisma/dmmf":"workspace:*","@prisma/driver-adapter-utils":"workspace:*","@prisma/engines":"workspace:*","@prisma/fetch-engine":"workspace:*","@prisma/generator":"workspace:*","@prisma/generator-helper":"workspace:*","@prisma/get-platform":"workspace:*","@prisma/prisma-schema-wasm":"6.8.0-43.2060c79ba17c6bb9f5823312b6f6b7f4a845738e","@prisma/schema-engine-wasm":"6.8.0-43.2060c79ba17c6bb9f5823312b6f6b7f4a845738e","@prisma/schema-files-loader":"workspace:*",arg:"5.0.2",prompts:"2.4.2"},peerDependencies:{typescript:">=5.1.0"},peerDependenciesMeta:{typescript:{optional:!0}},sideEffects:!1}}),Yx=At((e,t)=>{t.exports={name:"@prisma/engines-version",version:"6.8.0-43.2060c79ba17c6bb9f5823312b6f6b7f4a845738e",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"2060c79ba17c6bb9f5823312b6f6b7f4a845738e"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),Zx=At(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enginesVersion=void 0,e.enginesVersion=Yx().prisma.enginesVersion}),Yk=At((e,t)=>{"use strict";t.exports=i=>{let n=i.match(/^[ \t]*(?=\S)/gm);return n?n.reduce((s,a)=>Math.min(s,a.length),1/0):0}}),Xx=At((e,t)=>{"use strict";t.exports=(i,n=1,s)=>{if(s={indent:" ",includeEmptyLines:!1,...s},typeof i!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof i}\``);if(typeof n!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if(typeof s.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof s.indent}\``);if(n===0)return i;let a=s.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return i.replace(a,s.indent.repeat(n))}}),Zk=At((e,t)=>{"use strict";t.exports=({onlyFirst:i=!1}={})=>{let n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(n,i?void 0:"g")}}),ev=At((e,t)=>{"use strict";var i=Zk();t.exports=n=>typeof n=="string"?n.replace(i(),""):n}),Xk=At((e,t)=>{t.exports={name:"dotenv",version:"16.5.0",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),eS=At((e,t)=>{"use strict";var i=require("node:fs"),n=require("node:path"),s=require("node:os"),a=require("node:crypto"),r=Xk(),o=r.version,c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function l(T){let I={},$=T.toString();$=$.replace(/\r\n?/mg,`
`);let _;for(;(_=c.exec($))!=null;){let y=_[1],b=_[2]||"";b=b.trim();let g=b[0];b=b.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),g==='"'&&(b=b.replace(/\\n/g,`
`),b=b.replace(/\\r/g,"\r")),I[y]=b}return I}function p(T){let I=x(T),$=P.configDotenv({path:I});if(!$.parsed){let g=new Error(`MISSING_DATA: Cannot parse ${I} for an unknown reason`);throw g.code="MISSING_DATA",g}let _=m(T).split(","),y=_.length,b;for(let g=0;g<y;g++)try{let v=_[g].trim(),k=f($,v);b=P.decrypt(k.ciphertext,k.key);break}catch(v){if(g+1>=y)throw v}return P.parse(b)}function u(T){console.log(`[dotenv@${o}][WARN] ${T}`)}function d(T){console.log(`[dotenv@${o}][DEBUG] ${T}`)}function m(T){return T&&T.DOTENV_KEY&&T.DOTENV_KEY.length>0?T.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function f(T,I){let $;try{$=new URL(I)}catch(v){if(v.code==="ERR_INVALID_URL"){let k=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw k.code="INVALID_DOTENV_KEY",k}throw v}let _=$.password;if(!_){let v=new Error("INVALID_DOTENV_KEY: Missing key part");throw v.code="INVALID_DOTENV_KEY",v}let y=$.searchParams.get("environment");if(!y){let v=new Error("INVALID_DOTENV_KEY: Missing environment part");throw v.code="INVALID_DOTENV_KEY",v}let b=`DOTENV_VAULT_${y.toUpperCase()}`,g=T.parsed[b];if(!g){let v=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${b} in your .env.vault file.`);throw v.code="NOT_FOUND_DOTENV_ENVIRONMENT",v}return{ciphertext:g,key:_}}function x(T){let I=null;if(T&&T.path&&T.path.length>0)if(Array.isArray(T.path))for(let $ of T.path)i.existsSync($)&&(I=$.endsWith(".vault")?$:`${$}.vault`);else I=T.path.endsWith(".vault")?T.path:`${T.path}.vault`;else I=n.resolve(process.cwd(),".env.vault");return i.existsSync(I)?I:null}function E(T){return T[0]==="~"?n.join(s.homedir(),T.slice(1)):T}function j(T){T&&T.debug&&d("Loading env from encrypted .env.vault");let I=P._parseVault(T),$=process.env;return T&&T.processEnv!=null&&($=T.processEnv),P.populate($,I,T),{parsed:I}}function q(T){let I=n.resolve(process.cwd(),".env"),$="utf8",_=!!(T&&T.debug);T&&T.encoding?$=T.encoding:_&&d("No encoding is specified. UTF-8 is used by default");let y=[I];if(T&&T.path)if(!Array.isArray(T.path))y=[E(T.path)];else{y=[];for(let k of T.path)y.push(E(k))}let b,g={};for(let k of y)try{let A=P.parse(i.readFileSync(k,{encoding:$}));P.populate(g,A,T)}catch(A){_&&d(`Failed to load ${k} ${A.message}`),b=A}let v=process.env;return T&&T.processEnv!=null&&(v=T.processEnv),P.populate(v,g,T),b?{parsed:g,error:b}:{parsed:g}}function S(T){if(m(T).length===0)return P.configDotenv(T);let I=x(T);return I?P._configVault(T):(u(`You set DOTENV_KEY but you are missing a .env.vault file at ${I}. Did you forget to build it?`),P.configDotenv(T))}function O(T,I){let $=Buffer.from(I.slice(-64),"hex"),_=Buffer.from(T,"base64"),y=_.subarray(0,12),b=_.subarray(-16);_=_.subarray(12,-16);try{let g=a.createDecipheriv("aes-256-gcm",$,y);return g.setAuthTag(b),`${g.update(_)}${g.final()}`}catch(g){let v=g instanceof RangeError,k=g.message==="Invalid key length",A=g.message==="Unsupported state or unable to authenticate data";if(v||k){let V=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw V.code="INVALID_DOTENV_KEY",V}else if(A){let V=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw V.code="DECRYPTION_FAILED",V}else throw g}}function K(T,I,$={}){let _=!!($&&$.debug),y=!!($&&$.override);if(typeof I!="object"){let b=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw b.code="OBJECT_REQUIRED",b}for(let b of Object.keys(I))Object.prototype.hasOwnProperty.call(T,b)?(y===!0&&(T[b]=I[b]),_&&d(y===!0?`"${b}" is already defined and WAS overwritten`:`"${b}" is already defined and was NOT overwritten`)):T[b]=I[b]}var P={configDotenv:q,_configVault:j,_parseVault:p,config:S,decrypt:O,parse:l,populate:K};t.exports.configDotenv=P.configDotenv,t.exports._configVault=P._configVault,t.exports._parseVault=P._parseVault,t.exports.config=P.config,t.exports.decrypt=P.decrypt,t.exports.parse=P.parse,t.exports.populate=P.populate,t.exports=P}),tS=At((e,t)=>{"use strict";t.exports=(i={})=>{let n;if(i.repoUrl)n=i.repoUrl;else if(i.user&&i.repo)n=`https://github.com/${i.user}/${i.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let s=new URL(`${n}/issues/new`),a=["body","title","labels","template","milestone","assignee","projects"];for(let r of a){let o=i[r];if(o!==void 0){if(r==="labels"||r==="projects"){if(!Array.isArray(o))throw new TypeError(`The \`${r}\` option should be an array`);o=o.join(",")}s.searchParams.set(r,o)}}return s.toString()},t.exports.default=t.exports}),tv=At((e,t)=>{"use strict";t.exports=function(){function i(n,s,a,r,o){return n<s||a<s?n>a?a+1:n+1:r===o?s:s+1}return function(n,s){if(n===s)return 0;if(n.length>s.length){var a=n;n=s,s=a}for(var r=n.length,o=s.length;r>0&&n.charCodeAt(r-1)===s.charCodeAt(o-1);)r--,o--;for(var c=0;c<r&&n.charCodeAt(c)===s.charCodeAt(c);)c++;if(r-=c,o-=c,r===0||o<3)return o;var l=0,p,u,d,m,f,x,E,j,q,S,O,K,P=[];for(p=0;p<r;p++)P.push(p+1),P.push(n.charCodeAt(c+p));for(var T=P.length-1;l<o-3;)for(q=s.charCodeAt(c+(u=l)),S=s.charCodeAt(c+(d=l+1)),O=s.charCodeAt(c+(m=l+2)),K=s.charCodeAt(c+(f=l+3)),x=l+=4,p=0;p<T;p+=2)E=P[p],j=P[p+1],u=i(E,u,d,q,j),d=i(u,d,m,S,j),m=i(d,m,f,O,j),x=i(m,f,x,K,j),P[p]=x,f=m,m=d,d=u,u=E;for(;l<o;)for(q=s.charCodeAt(c+(u=l)),x=++l,p=0;p<T;p+=2)E=P[p],P[p]=x=i(E,u,x,q,P[p+1]),u=E;return x}}()}),iS=Gx(()=>{"use strict"}),nS=Gx(()=>{"use strict"}),iv={};ps(iv,{DMMF:()=>Dv,Debug:()=>ht,Decimal:()=>Us,Extensions:()=>nv,MetricsClient:()=>fb,PrismaClientInitializationError:()=>Ce,PrismaClientKnownRequestError:()=>Tn,PrismaClientRustPanicError:()=>Sn,PrismaClientUnknownRequestError:()=>Ot,PrismaClientValidationError:()=>Ki,Public:()=>sv,Sql:()=>Rn,createParam:()=>aC,defineDmmfProperty:()=>gC,deserializeJsonResponse:()=>jo,deserializeRawResult:()=>iy,dmmfToRuntimeDataModel:()=>iT,empty:()=>kC,getPrismaClient:()=>u3,getRuntime:()=>Tb,join:()=>EC,makeStrictEnum:()=>h3,makeTypedQueryFactory:()=>vC,objectEnumValues:()=>tb,raw:()=>vb,serializeJsonQuery:()=>db,skip:()=>pb,sqltag:()=>SC,warnEnvConflicts:()=>f3,warnOnce:()=>Av});ay.exports=Wk(iv);var nv={};ps(nv,{defineExtension:()=>sS,getExtensionContext:()=>aS});function sS(e){return typeof e=="function"?e:t=>t.$extends(e)}function aS(e){return e}var sv={};ps(sv,{validator:()=>rS});function rS(...e){return t=>t}var Hl={};ps(Hl,{$:()=>lv,bgBlack:()=>gS,bgBlue:()=>yS,bgCyan:()=>_S,bgGreen:()=>vS,bgMagenta:()=>wS,bgRed:()=>xS,bgWhite:()=>ES,bgYellow:()=>bS,black:()=>dS,blue:()=>Ia,bold:()=>pi,cyan:()=>os,dim:()=>Wa,gray:()=>yp,green:()=>Da,grey:()=>fS,hidden:()=>pS,inverse:()=>lS,italic:()=>cS,magenta:()=>mS,red:()=>cs,reset:()=>oS,strikethrough:()=>uS,underline:()=>Wt,white:()=>hS,yellow:()=>Ga});var Vl,av,rv,ov,cv=!0;typeof process<"u"&&({FORCE_COLOR:Vl,NODE_DISABLE_COLORS:av,NO_COLOR:rv,TERM:ov}=process.env||{},cv=process.stdout&&process.stdout.isTTY);var lv={enabled:!av&&rv==null&&ov!=="dumb"&&(Vl!=null&&Vl!=="0"||cv)};function de(e,t){let i=new RegExp(`\\x1b\\[${t}m`,"g"),n=`\x1B[${e}m`,s=`\x1B[${t}m`;return function(a){return!lv.enabled||a==null?a:n+(~(""+a).indexOf(s)?a.replace(i,s+n):a)+s}}var oS=de(0,0),pi=de(1,22),Wa=de(2,22),cS=de(3,23),Wt=de(4,24),lS=de(7,27),pS=de(8,28),uS=de(9,29),dS=de(30,39),cs=de(31,39),Da=de(32,39),Ga=de(33,39),Ia=de(34,39),mS=de(35,39),os=de(36,39),hS=de(37,39),yp=de(90,39),fS=de(90,39),gS=de(40,49),xS=de(41,49),vS=de(42,49),bS=de(43,49),yS=de(44,49),wS=de(45,49),_S=de(46,49),ES=de(47,49),kS=100,nx=["green","yellow","blue","magenta","cyan","red"],$a=[],sx=Date.now(),SS=0,Kl=typeof process<"u"?process.env:{};globalThis.DEBUG??=Kl.DEBUG??"";globalThis.DEBUG_COLORS??=Kl.DEBUG_COLORS?Kl.DEBUG_COLORS==="true":!0;var Na={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(s=>s.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),i=t.some(s=>s===""||s[0]==="-"?!1:e.match(RegExp(s.split("*").join(".*")+"$"))),n=t.some(s=>s===""||s[0]!=="-"?!1:e.match(RegExp(s.slice(1).split("*").join(".*")+"$")));return i&&!n},log:(...e)=>{let[t,i,...n]=e;(console.warn??console.log)(`${t} ${i}`,...n)},formatters:{}};function AS(e){let t={color:nx[SS++%nx.length],enabled:Na.enabled(e),namespace:e,log:Na.log,extend:()=>{}},i=(...n)=>{let{enabled:s,namespace:a,color:r,log:o}=t;if(n.length!==0&&$a.push([a,...n]),$a.length>kS&&$a.shift(),Na.enabled(a)||s){let c=n.map(p=>typeof p=="string"?p:TS(p)),l=`+${Date.now()-sx}ms`;sx=Date.now(),globalThis.DEBUG_COLORS?o(Hl[r](pi(a)),...c,Hl[r](l)):o(a,...c,l)}};return new Proxy(i,{get:(n,s)=>t[s],set:(n,s,a)=>t[s]=a})}var ht=new Proxy(AS,{get:(e,t)=>Na[t],set:(e,t,i)=>Na[t]=i});function TS(e,t=2){let i=new Set;return JSON.stringify(e,(n,s)=>{if(typeof s=="object"&&s!==null){if(i.has(s))return"[Circular *]";i.add(s)}else if(typeof s=="bigint")return s.toString();return s},t)}function CS(e=7500){let t=$a.map(([i,...n])=>`${i} ${n.map(s=>typeof s=="string"?s:JSON.stringify(s)).join(" ")}`).join(`
`);return t.length<e?t:t.slice(-e)}function jS(){$a.length=0}var wp=ht,RS=ee(require("node:fs"));function qS(){let e=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(e&&RS.default.existsSync(e))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var PS=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],lo="libquery_engine";function OS(e,t){let i=t==="url";return e.includes("windows")?i?"query_engine.dll.node":`query_engine-${e}.dll.node`:e.includes("darwin")?i?`${lo}.dylib.node`:`${lo}-${e}.dylib.node`:i?`${lo}.so.node`:`${lo}-${e}.so.node`}var IS=ee(require("node:child_process")),pv=ee(require("node:fs/promises")),Wl=ee(require("node:os")),Gi=Symbol.for("@ts-pattern/matcher"),$S=Symbol.for("@ts-pattern/isVariadic"),ko="@ts-pattern/anonymous-select-key",Gl=e=>!!(e&&typeof e=="object"),go=e=>e&&!!e[Gi],Ci=(e,t,i)=>{if(go(e)){let n=e[Gi](),{matched:s,selections:a}=n.match(t);return s&&a&&Object.keys(a).forEach(r=>i(r,a[r])),s}if(Gl(e)){if(!Gl(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let n=[],s=[],a=[];for(let r of e.keys()){let o=e[r];go(o)&&o[$S]?a.push(o):a.length?s.push(o):n.push(o)}if(a.length){if(a.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<n.length+s.length)return!1;let r=t.slice(0,n.length),o=s.length===0?[]:t.slice(-s.length),c=t.slice(n.length,s.length===0?1/0:-s.length);return n.every((l,p)=>Ci(l,r[p],i))&&s.every((l,p)=>Ci(l,o[p],i))&&(a.length===0||Ci(a[0],c,i))}return e.length===t.length&&e.every((r,o)=>Ci(r,t[o],i))}return Reflect.ownKeys(e).every(n=>{let s=e[n];return(n in t||go(a=s)&&a[Gi]().matcherType==="optional")&&Ci(s,t[n],i);var a})}return Object.is(t,e)},An=e=>{var t,i,n;return Gl(e)?go(e)?(t=(i=(n=e[Gi]()).getSelectionKeys)==null?void 0:i.call(n))!=null?t:[]:Array.isArray(e)?Ba(e,An):Ba(Object.values(e),An):[]},Ba=(e,t)=>e.reduce((i,n)=>i.concat(t(n)),[]);function Gt(e){return Object.assign(e,{optional:()=>NS(e),and:t=>ge(e,t),or:t=>FS(e,t),select:t=>t===void 0?ax(e):ax(t,e)})}function NS(e){return Gt({[Gi]:()=>({match:t=>{let i={},n=(s,a)=>{i[s]=a};return t===void 0?(An(e).forEach(s=>n(s,void 0)),{matched:!0,selections:i}):{matched:Ci(e,t,n),selections:i}},getSelectionKeys:()=>An(e),matcherType:"optional"})})}function ge(...e){return Gt({[Gi]:()=>({match:t=>{let i={},n=(s,a)=>{i[s]=a};return{matched:e.every(s=>Ci(s,t,n)),selections:i}},getSelectionKeys:()=>Ba(e,An),matcherType:"and"})})}function FS(...e){return Gt({[Gi]:()=>({match:t=>{let i={},n=(s,a)=>{i[s]=a};return Ba(e,An).forEach(s=>n(s,void 0)),{matched:e.some(s=>Ci(s,t,n)),selections:i}},getSelectionKeys:()=>Ba(e,An),matcherType:"or"})})}function Q(e){return{[Gi]:()=>({match:t=>({matched:!!e(t)})})}}function ax(...e){let t=typeof e[0]=="string"?e[0]:void 0,i=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return Gt({[Gi]:()=>({match:n=>{let s={[t??ko]:n};return{matched:i===void 0||Ci(i,n,(a,r)=>{s[a]=r}),selections:s}},getSelectionKeys:()=>[t??ko].concat(i===void 0?[]:An(i))})})}function Si(e){return typeof e=="number"}function bn(e){return typeof e=="string"}function yn(e){return typeof e=="bigint"}var GI=Gt(Q(function(e){return!0})),wn=e=>Object.assign(Gt(e),{startsWith:t=>{return wn(ge(e,(i=t,Q(n=>bn(n)&&n.startsWith(i)))));var i},endsWith:t=>{return wn(ge(e,(i=t,Q(n=>bn(n)&&n.endsWith(i)))));var i},minLength:t=>wn(ge(e,(i=>Q(n=>bn(n)&&n.length>=i))(t))),length:t=>wn(ge(e,(i=>Q(n=>bn(n)&&n.length===i))(t))),maxLength:t=>wn(ge(e,(i=>Q(n=>bn(n)&&n.length<=i))(t))),includes:t=>{return wn(ge(e,(i=t,Q(n=>bn(n)&&n.includes(i)))));var i},regex:t=>{return wn(ge(e,(i=t,Q(n=>bn(n)&&!!n.match(i)))));var i}}),JI=wn(Q(bn)),Ai=e=>Object.assign(Gt(e),{between:(t,i)=>Ai(ge(e,((n,s)=>Q(a=>Si(a)&&n<=a&&s>=a))(t,i))),lt:t=>Ai(ge(e,(i=>Q(n=>Si(n)&&n<i))(t))),gt:t=>Ai(ge(e,(i=>Q(n=>Si(n)&&n>i))(t))),lte:t=>Ai(ge(e,(i=>Q(n=>Si(n)&&n<=i))(t))),gte:t=>Ai(ge(e,(i=>Q(n=>Si(n)&&n>=i))(t))),int:()=>Ai(ge(e,Q(t=>Si(t)&&Number.isInteger(t)))),finite:()=>Ai(ge(e,Q(t=>Si(t)&&Number.isFinite(t)))),positive:()=>Ai(ge(e,Q(t=>Si(t)&&t>0))),negative:()=>Ai(ge(e,Q(t=>Si(t)&&t<0)))}),QI=Ai(Q(Si)),_n=e=>Object.assign(Gt(e),{between:(t,i)=>_n(ge(e,((n,s)=>Q(a=>yn(a)&&n<=a&&s>=a))(t,i))),lt:t=>_n(ge(e,(i=>Q(n=>yn(n)&&n<i))(t))),gt:t=>_n(ge(e,(i=>Q(n=>yn(n)&&n>i))(t))),lte:t=>_n(ge(e,(i=>Q(n=>yn(n)&&n<=i))(t))),gte:t=>_n(ge(e,(i=>Q(n=>yn(n)&&n>=i))(t))),positive:()=>_n(ge(e,Q(t=>yn(t)&&t>0))),negative:()=>_n(ge(e,Q(t=>yn(t)&&t<0)))}),YI=_n(Q(yn)),ZI=Gt(Q(function(e){return typeof e=="boolean"})),XI=Gt(Q(function(e){return typeof e=="symbol"})),e$=Gt(Q(function(e){return e==null})),t$=Gt(Q(function(e){return e!=null})),LS=class extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch{t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}},Jl={matched:!1,value:void 0};function Oo(e){return new MS(e,Jl)}var MS=class Ql{constructor(t,i){this.input=void 0,this.state=void 0,this.input=t,this.state=i}with(...t){if(this.state.matched)return this;let i=t[t.length-1],n=[t[0]],s;t.length===3&&typeof t[1]=="function"?s=t[1]:t.length>2&&n.push(...t.slice(1,t.length-1));let a=!1,r={},o=(l,p)=>{a=!0,r[l]=p},c=!n.some(l=>Ci(l,this.input,o))||s&&!s(this.input)?Jl:{matched:!0,value:i(a?ko in r?r[ko]:r:this.input,this.input)};return new Ql(this.input,c)}when(t,i){if(this.state.matched)return this;let n=!!t(this.input);return new Ql(this.input,n?{matched:!0,value:i(this.input,this.input)}:Jl)}otherwise(t){return this.state.matched?this.state.value:t(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new LS(this.input)}run(){return this.exhaustive()}returnType(){return this}},DS=require("node:util"),BS={warn:Ga("prisma:warn")},zS={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Il(e,...t){zS.warn()&&console.warn(`${BS.warn} ${e}`,...t)}var US=(0,DS.promisify)(IS.default.exec),mt=wp("prisma:get-platform"),HS=["1.0.x","1.1.x","3.0.x"];async function VS(){let e=Wl.default.platform(),t=process.arch;if(e==="freebsd"){let r=await So("freebsd-version");if(r&&r.trim().length>0){let o=/^(\d+)\.?/.exec(r);if(o)return{platform:"freebsd",targetDistro:`freebsd${o[1]}`,arch:t}}}if(e!=="linux")return{platform:e,arch:t};let i=await WS(),n=await i2(),s=JS({arch:t,archFromUname:n,familyDistro:i.familyDistro}),{libssl:a}=await QS(s);return{platform:"linux",libssl:a,arch:t,archFromUname:n,...i}}function KS(e){let t=/^ID="?([^"\n]*)"?$/im,i=/^ID_LIKE="?([^"\n]*)"?$/im,n=t.exec(e),s=n&&n[1]&&n[1].toLowerCase()||"",a=i.exec(e),r=a&&a[1]&&a[1].toLowerCase()||"",o=Oo({id:s,idLike:r}).with({id:"alpine"},({id:c})=>({targetDistro:"musl",familyDistro:c,originalDistro:c})).with({id:"raspbian"},({id:c})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:c})).with({id:"nixos"},({id:c})=>({targetDistro:"nixos",originalDistro:c,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:c})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:c})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:c})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:c})).when(({idLike:c})=>c.includes("debian")||c.includes("ubuntu"),({id:c})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:c})).when(({idLike:c})=>s==="arch"||c.includes("arch"),({id:c})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:c})).when(({idLike:c})=>c.includes("centos")||c.includes("fedora")||c.includes("rhel")||c.includes("suse"),({id:c})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:c})).otherwise(({id:c})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:c}));return mt(`Found distro info:
${JSON.stringify(o,null,2)}`),o}async function WS(){let e="/etc/os-release";try{let t=await pv.default.readFile(e,{encoding:"utf-8"});return KS(t)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function GS(e){let t=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(e);if(t){let i=`${t[1]}.x`;return uv(i)}}function rx(e){let t=/libssl\.so\.(\d)(\.\d)?/.exec(e);if(t){let i=`${t[1]}${t[2]??".0"}.x`;return uv(i)}}function uv(e){let t=(()=>{if(mv(e))return e;let i=e.split(".");return i[1]="0",i.join(".")})();if(HS.includes(t))return t}function JS(e){return Oo(e).with({familyDistro:"musl"},()=>(mt('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:t})=>(mt('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${t}-linux-gnu`,`/lib/${t}-linux-gnu`])).with({familyDistro:"rhel"},()=>(mt('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:t,arch:i,archFromUname:n})=>(mt(`Don't know any platform-specific paths for "${t}" on ${i} (${n})`),[]))}async function QS(e){let t='grep -v "libssl.so.0"',i=await ox(e);if(i){mt(`Found libssl.so file using platform-specific paths: ${i}`);let a=rx(i);if(mt(`The parsed libssl version is: ${a}`),a)return{libssl:a,strategy:"libssl-specific-path"}}mt('Falling back to "ldconfig" and other generic paths');let n=await So(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${t}`);if(n||(n=await ox(["/lib64","/usr/lib64","/lib","/usr/lib"])),n){mt(`Found libssl.so file using "ldconfig" or other generic paths: ${n}`);let a=rx(n);if(mt(`The parsed libssl version is: ${a}`),a)return{libssl:a,strategy:"ldconfig"}}let s=await So("openssl version -v");if(s){mt(`Found openssl binary with version: ${s}`);let a=GS(s);if(mt(`The parsed openssl version is: ${a}`),a)return{libssl:a,strategy:"openssl-binary"}}return mt("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function ox(e){for(let t of e){let i=await YS(t);if(i)return i}}async function YS(e){try{return(await pv.default.readdir(e)).find(t=>t.startsWith("libssl.so.")&&!t.startsWith("libssl.so.0"))}catch(t){if(t.code==="ENOENT")return;throw t}}async function _p(){let{binaryTarget:e}=await dv();return e}function ZS(e){return e.binaryTarget!==void 0}async function XS(){let{memoized:e,...t}=await dv();return t}var po={};async function dv(){if(ZS(po))return Promise.resolve({...po,memoized:!0});let e=await VS(),t=e2(e);return po={...e,binaryTarget:t},{...po,memoized:!1}}function e2(e){let{platform:t,arch:i,archFromUname:n,libssl:s,targetDistro:a,familyDistro:r,originalDistro:o}=e;t==="linux"&&!["x64","arm64"].includes(i)&&Il(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${i}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${n}".`);let c="1.1.x";if(t==="linux"&&s===void 0){let p=Oo({familyDistro:r}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");Il(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${c}".
${p}`)}let l="debian";if(t==="linux"&&a===void 0&&mt(`Distro is "${o}". Falling back to Prisma engines built for "${l}".`),t==="darwin"&&i==="arm64")return"darwin-arm64";if(t==="darwin")return"darwin";if(t==="win32")return"windows";if(t==="freebsd")return a;if(t==="openbsd")return"openbsd";if(t==="netbsd")return"netbsd";if(t==="linux"&&a==="nixos")return"linux-nixos";if(t==="linux"&&i==="arm64")return`${a==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${s||c}`;if(t==="linux"&&i==="arm")return`linux-arm-openssl-${s||c}`;if(t==="linux"&&a==="musl"){let p="linux-musl";return!s||mv(s)?p:`${p}-openssl-${s}`}return t==="linux"&&a&&s?`${a}-openssl-${s}`:(t!=="linux"&&Il(`Prisma detected unknown OS "${t}" and may not work as expected. Defaulting to "linux".`),s?`${l}-openssl-${s}`:a?`${a}-openssl-${c}`:`${l}-openssl-${c}`)}async function t2(e){try{return await e()}catch{return}}function So(e){return t2(async()=>{let t=await US(e);return mt(`Command "${e}" successfully returned "${t.stdout}"`),t.stdout})}async function i2(){return typeof Wl.default.machine=="function"?Wl.default.machine():(await So("uname -m"))?.trim()}function mv(e){return e.startsWith("1.")}var hv={};ps(hv,{beep:()=>C2,clearScreen:()=>k2,clearTerminal:()=>S2,cursorBackward:()=>l2,cursorDown:()=>o2,cursorForward:()=>c2,cursorGetPosition:()=>d2,cursorHide:()=>f2,cursorLeft:()=>xv,cursorMove:()=>r2,cursorNextLine:()=>m2,cursorPrevLine:()=>h2,cursorRestorePosition:()=>u2,cursorSavePosition:()=>p2,cursorShow:()=>g2,cursorTo:()=>a2,cursorUp:()=>gv,enterAlternativeScreen:()=>A2,eraseDown:()=>y2,eraseEndLine:()=>v2,eraseLine:()=>vv,eraseLines:()=>x2,eraseScreen:()=>Yl,eraseStartLine:()=>b2,eraseUp:()=>w2,exitAlternativeScreen:()=>T2,iTerm:()=>q2,image:()=>R2,link:()=>j2,scrollDown:()=>E2,scrollUp:()=>_2});var Ep=ee(require("node:process"),1),kp=globalThis.window?.document!==void 0,i$=globalThis.process?.versions?.node!==void 0,n$=globalThis.process?.versions?.bun!==void 0,s$=globalThis.Deno?.version?.deno!==void 0,a$=globalThis.process?.versions?.electron!==void 0,r$=globalThis.navigator?.userAgent?.includes("jsdom")===!0,o$=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,c$=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,l$=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,p$=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,Ja=globalThis.navigator?.userAgentData?.platform,u$=Ja==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",d$=Ja==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",m$=Ja==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",h$=Ja==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),f$=Ja==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android",Y="\x1B[",za="\x1B]",Ls="\x07",Pa=";",fv=!kp&&Ep.default.env.TERM_PROGRAM==="Apple_Terminal",n2=!kp&&Ep.default.platform==="win32",s2=kp?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:Ep.default.cwd,a2=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?Y+(e+1)+"G":Y+(t+1)+Pa+(e+1)+"H"},r2=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let i="";return e<0?i+=Y+-e+"D":e>0&&(i+=Y+e+"C"),t<0?i+=Y+-t+"A":t>0&&(i+=Y+t+"B"),i},gv=(e=1)=>Y+e+"A",o2=(e=1)=>Y+e+"B",c2=(e=1)=>Y+e+"C",l2=(e=1)=>Y+e+"D",xv=Y+"G",p2=fv?"\x1B7":Y+"s",u2=fv?"\x1B8":Y+"u",d2=Y+"6n",m2=Y+"E",h2=Y+"F",f2=Y+"?25l",g2=Y+"?25h",x2=e=>{let t="";for(let i=0;i<e;i++)t+=vv+(i<e-1?gv():"");return e&&(t+=xv),t},v2=Y+"K",b2=Y+"1K",vv=Y+"2K",y2=Y+"J",w2=Y+"1J",Yl=Y+"2J",_2=Y+"S",E2=Y+"T",k2="\x1Bc",S2=n2?`${Yl}${Y}0f`:`${Yl}${Y}3J${Y}H`,A2=Y+"?1049h",T2=Y+"?1049l",C2=Ls,j2=(e,t)=>[za,"8",Pa,Pa,t,Ls,e,za,"8",Pa,Pa,Ls].join(""),R2=(e,t={})=>{let i=`${za}1337;File=inline=1`;return t.width&&(i+=`;width=${t.width}`),t.height&&(i+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(i+=";preserveAspectRatio=0"),i+":"+Buffer.from(e).toString("base64")+Ls},q2={setCwd:(e=s2())=>`${za}50;CurrentDir=${e}${Ls}`,annotation(e,t={}){let i=`${za}1337;`,n=t.x!==void 0,s=t.y!==void 0;if((n||s)&&!(n&&s&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),i+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?i+=(n?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):i+=e,i+Ls}},Sp=ee(Jk(),1);function Ua(e,t,{target:i="stdout",...n}={}){return Sp.default[i]?hv.link(e,t):n.fallback===!1?e:typeof n.fallback=="function"?n.fallback(e,t):`${e} (\u200B${t}\u200B)`}Ua.isSupported=Sp.default.stdout;Ua.stderr=(e,t,i={})=>Ua(e,t,{target:"stderr",...i});Ua.stderr.isSupported=Sp.default.stderr;function P2(e){return Ua(e,e,{fallback:Wt})}var O2=Qk(),I2=O2.version;function Zl(e){return $2()||(e?.config.engineType==="library"?"library":e?.config.engineType==="binary"?"binary":e?.config.engineType==="client"?"client":N2(e))}function $2(){let e=process.env.PRISMA_CLIENT_ENGINE_TYPE;return e==="library"?"library":e==="binary"?"binary":e==="client"?"client":void 0}function N2(e){return e?.previewFeatures.includes("queryCompiler")?"client":"library"}var g$=ee(Zx()),he=ee(require("node:path")),x$=ee(Zx()),v$=ht("prisma:engines");function F2(){return he.default.join(__dirname,"../")}he.default.join(__dirname,"../query-engine-darwin");he.default.join(__dirname,"../query-engine-darwin-arm64");he.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");he.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");he.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");he.default.join(__dirname,"../query-engine-linux-static-x64");he.default.join(__dirname,"../query-engine-linux-static-arm64");he.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");he.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");he.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");he.default.join(__dirname,"../libquery_engine-darwin.dylib.node");he.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");he.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");he.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");he.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");he.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");he.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");he.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");he.default.join(__dirname,"../libquery_engine-linux-musl.so.node");he.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");he.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");he.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");he.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");he.default.join(__dirname,"../query_engine-windows.dll.node");var cx=ee(require("node:fs")),lx=wp("chmodPlusX");function L2(e){if(process.platform==="win32")return;let t=cx.default.statSync(e),i=t.mode|64|8|1;if(t.mode===i){lx(`Execution permissions of ${e} are fine`);return}let n=i.toString(8).slice(-3);lx(`Have to call chmodPlusX on ${e}`),cx.default.chmodSync(e,n)}function M2(e){let t=e.e,i=o=>`Prisma cannot find the required \`${o}\` system library in your system`,n=t.message.includes("cannot open shared object file"),s=`Please refer to the documentation about Prisma's system requirements: ${P2("https://pris.ly/d/system-requirements")}`,a=`Unable to require(\`${Wa(e.id)}\`).`,r=Oo({message:t.message,code:t.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:o})=>n&&o.includes("libz"),()=>`${i("libz")}. Please install it and try again.`).when(({message:o})=>n&&o.includes("libgcc_s"),()=>`${i("libgcc_s")}. Please install it and try again.`).when(({message:o})=>n&&o.includes("libssl"),()=>{let o=e.platformInfo.libssl?`openssl-${e.platformInfo.libssl}`:"openssl";return`${i("libssl")}. Please install ${o} and try again.`}).when(({message:o})=>o.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${s}`).when(({message:o})=>e.platformInfo.platform==="linux"&&o.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${e.platformInfo.originalDistro} on (${e.platformInfo.archFromUname}) which uses the \`${e.platformInfo.binaryTarget}\` binaryTarget by default. ${s}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${s}`);return`${a}
${r}

Details: ${t.message}`}var D2=ee(Yk(),1);function B2(e){let t=(0,D2.default)(e);if(t===0)return e;let i=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(i,"")}var z2="prisma+postgres",bv=`${z2}:`;function yv(e){return e?.toString().startsWith(`${bv}//`)??!1}function U2(e){if(!yv(e))return!1;let{host:t}=new URL(e);return t.includes("localhost")||t.includes("127.0.0.1")}var H2=ee(Xx());function V2(e){return String(new K2(e))}var K2=class{constructor(e){this.config=e}toString(){let{config:e}=this,t=e.provider.fromEnvVar?`env("${e.provider.fromEnvVar}")`:e.provider.value,i=JSON.parse(JSON.stringify({provider:t,binaryTargets:W2(e.binaryTargets)}));return`generator ${e.name} {
${(0,H2.default)(G2(i),2)}
}`}};function W2(e){let t;if(e.length>0){let i=e.find(n=>n.fromEnvVar!==null);i?t=`env("${i.fromEnvVar}")`:t=e.map(n=>n.native?"native":n.value)}else t=void 0;return t}function G2(e){let t=Object.keys(e).reduce((i,n)=>Math.max(i,n.length),0);return Object.entries(e).map(([i,n])=>`${i.padEnd(t)} = ${J2(n)}`).join(`
`)}function J2(e){return JSON.parse(JSON.stringify(e,(t,i)=>Array.isArray(i)?`[${i.map(n=>JSON.stringify(n)).join(", ")}]`:JSON.stringify(i)))}var Xl={};ps(Xl,{error:()=>Z2,info:()=>Y2,log:()=>Q2,query:()=>X2,should:()=>wv,tags:()=>Qa,warn:()=>_v});var Qa={error:cs("prisma:error"),warn:Ga("prisma:warn"),info:os("prisma:info"),query:Ia("prisma:query")},wv={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Q2(...e){console.log(...e)}function _v(e,...t){wv.warn()&&console.warn(`${Qa.warn} ${e}`,...t)}function Y2(e,...t){console.info(`${Qa.info} ${e}`,...t)}function Z2(e,...t){console.error(`${Qa.error} ${e}`,...t)}function X2(e,...t){console.log(`${Qa.query} ${e}`,...t)}function px(e,t){if(!e)throw new Error(`${t}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function Io(e,t){throw new Error(t)}var uo=ee(require("node:path"));function eA(e){return uo.default.sep===uo.default.posix.sep?e:e.split(uo.default.sep).join(uo.default.posix.sep)}var Ev=ee(eS()),ep=ee(require("node:fs")),Ha=ee(require("node:path"));function tA(e){let t=e.ignoreProcessEnv?{}:process.env,i=n=>n.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(s,a){let r=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(a);if(!r)return s;let o=r[1],c,l;if(o==="\\")l=r[0],c=l.replace("\\$","$");else{let p=r[2];l=r[0].substring(o.length),c=Object.hasOwnProperty.call(t,p)?t[p]:e.parsed[p]||"",c=i(c)}return s.replace(l,c)},n)??n;for(let n in e.parsed){let s=Object.hasOwnProperty.call(t,n)?t[n]:e.parsed[n];e.parsed[n]=i(s)}for(let n in e.parsed)t[n]=e.parsed[n];return e}var tp=wp("prisma:tryLoadEnv");function kv({rootEnvPath:e,schemaEnvPath:t},i={conflictCheck:"none"}){let n=ux(e);i.conflictCheck!=="none"&&iA(n,t,i.conflictCheck);let s=null;return Sv(n?.path,t)||(s=ux(t)),!n&&!s&&tp("No Environment variables loaded"),s?.dotenvResult.error?console.error(cs(pi("Schema Env Error: "))+s.dotenvResult.error):{message:[n?.message,s?.message].filter(Boolean).join(`
`),parsed:{...n?.dotenvResult?.parsed,...s?.dotenvResult?.parsed}}}function iA(e,t,i){let n=e?.dotenvResult.parsed,s=!Sv(e?.path,t);if(n&&t&&s&&ep.default.existsSync(t)){let a=Ev.default.parse(ep.default.readFileSync(t)),r=[];for(let o in a)n[o]===a[o]&&r.push(o);if(r.length>0){let o=Ha.default.relative(process.cwd(),e.path),c=Ha.default.relative(process.cwd(),t);if(i==="error"){let l=`There is a conflict between env var${r.length>1?"s":""} in ${Wt(o)} and ${Wt(c)}
Conflicting env vars:
${r.map(p=>`  ${pi(p)}`).join(`
`)}

We suggest to move the contents of ${Wt(c)} to ${Wt(o)} to consolidate your env vars.
`;throw new Error(l)}else if(i==="warn"){let l=`Conflict for env var${r.length>1?"s":""} ${r.map(p=>pi(p)).join(", ")} in ${Wt(o)} and ${Wt(c)}
Env vars from ${Wt(c)} overwrite the ones from ${Wt(o)}
      `;console.warn(`${Ga("warn(prisma)")} ${l}`)}}}}function ux(e){if(nA(e)){tp(`Environment variables loaded from ${e}`);let t=Ev.default.config({path:e,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:tA(t),message:Wa(`Environment variables loaded from ${Ha.default.relative(process.cwd(),e)}`),path:e}}else tp(`Environment variables not found at ${e}`);return null}function Sv(e,t){return e&&t&&Ha.default.resolve(e)===Ha.default.resolve(t)}function nA(e){return!!(e&&ep.default.existsSync(e))}function sA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ap(e,t){let i={};for(let n of Object.keys(e))i[n]=t(e[n],n);return i}function aA(e,t){if(e.length===0)return;let i=e[0];for(let n=1;n<e.length;n++)t(i,e[n])<0&&(i=e[n]);return i}function ke(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var dx=new Set,Av=(e,t,...i)=>{dx.has(e)||(dx.add(e),_v(t,...i))},Ce=class Tv extends Error{clientVersion;errorCode;retryable;constructor(t,i,n){super(t),this.name="PrismaClientInitializationError",this.clientVersion=i,this.errorCode=n,Error.captureStackTrace(Tv)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};ke(Ce,"PrismaClientInitializationError");var Tn=class extends Error{code;meta;clientVersion;batchRequestIdx;constructor(e,{code:t,clientVersion:i,meta:n,batchRequestIdx:s}){super(e),this.name="PrismaClientKnownRequestError",this.code=t,this.clientVersion=i,this.meta=n,Object.defineProperty(this,"batchRequestIdx",{value:s,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};ke(Tn,"PrismaClientKnownRequestError");var Sn=class extends Error{clientVersion;constructor(e,t){super(e),this.name="PrismaClientRustPanicError",this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};ke(Sn,"PrismaClientRustPanicError");var Ot=class extends Error{clientVersion;batchRequestIdx;constructor(e,{clientVersion:t,batchRequestIdx:i}){super(e),this.name="PrismaClientUnknownRequestError",this.clientVersion=t,Object.defineProperty(this,"batchRequestIdx",{value:i,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};ke(Ot,"PrismaClientUnknownRequestError");var Ki=class extends Error{name="PrismaClientValidationError";clientVersion;constructor(e,{clientVersion:t}){super(e),this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};ke(Ki,"PrismaClientValidationError");var Fs=9e15,jn=1e9,ip="0123456789abcdef",Ao="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",To="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",np={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fs,maxE:Fs,crypto:!1},Cv,Wi,B=!0,$o="[DecimalError] ",Cn=$o+"Invalid argument: ",jv=$o+"Precision limit exceeded",Rv=$o+"crypto unavailable",qv="[object Decimal]",at=Math.floor,De=Math.pow,rA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,oA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,cA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Pv=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ui=1e7,L=7,lA=9007199254740991,pA=Ao.length-1,sp=To.length-1,C={toStringTag:qv};C.absoluteValue=C.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),N(e)};C.ceil=function(){return N(new this.constructor(this),this.e+1,2)};C.clampedTo=C.clamp=function(e,t){var i,n=this,s=n.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(Cn+t);return i=n.cmp(e),i<0?e:n.cmp(t)>0?t:new s(n)};C.comparedTo=C.cmp=function(e){var t,i,n,s,a=this,r=a.d,o=(e=new a.constructor(e)).d,c=a.s,l=e.s;if(!r||!o)return!c||!l?NaN:c!==l?c:r===o?0:!r^c<0?1:-1;if(!r[0]||!o[0])return r[0]?c:o[0]?-l:0;if(c!==l)return c;if(a.e!==e.e)return a.e>e.e^c<0?1:-1;for(n=r.length,s=o.length,t=0,i=n<s?n:s;t<i;++t)if(r[t]!==o[t])return r[t]>o[t]^c<0?1:-1;return n===s?0:n>s^c<0?1:-1};C.cosine=C.cos=function(){var e,t,i=this,n=i.constructor;return i.d?i.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+L,n.rounding=1,i=uA(n,Fv(n,i)),n.precision=e,n.rounding=t,N(Wi==2||Wi==3?i.neg():i,e,t,!0)):new n(1):new n(NaN)};C.cubeRoot=C.cbrt=function(){var e,t,i,n,s,a,r,o,c,l,p=this,u=p.constructor;if(!p.isFinite()||p.isZero())return new u(p);for(B=!1,a=p.s*De(p.s*p,1/3),!a||Math.abs(a)==1/0?(i=Qe(p.d),e=p.e,(a=(e-i.length+1)%3)&&(i+=a==1||a==-2?"0":"00"),a=De(i,1/3),e=at((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?i="5e"+e:(i=a.toExponential(),i=i.slice(0,i.indexOf("e")+1)+e),n=new u(i),n.s=p.s):n=new u(a.toString()),r=(e=u.precision)+3;;)if(o=n,c=o.times(o).times(o),l=c.plus(p),n=ce(l.plus(p).times(o),l.plus(c),r+2,1),Qe(o.d).slice(0,r)===(i=Qe(n.d)).slice(0,r))if(i=i.slice(r-3,r+1),i=="9999"||!s&&i=="4999"){if(!s&&(N(o,e+1,0),o.times(o).times(o).eq(p))){n=o;break}r+=4,s=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(N(n,e+1,1),t=!n.times(n).times(n).eq(p));break}return B=!0,N(n,e,u.rounding,t)};C.decimalPlaces=C.dp=function(){var e,t=this.d,i=NaN;if(t){if(e=t.length-1,i=(e-at(this.e/L))*L,e=t[e],e)for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i};C.dividedBy=C.div=function(e){return ce(this,new this.constructor(e))};C.dividedToIntegerBy=C.divToInt=function(e){var t=this,i=t.constructor;return N(ce(t,new i(e),0,1,1),i.precision,i.rounding)};C.equals=C.eq=function(e){return this.cmp(e)===0};C.floor=function(){return N(new this.constructor(this),this.e+1,3)};C.greaterThan=C.gt=function(e){return this.cmp(e)>0};C.greaterThanOrEqualTo=C.gte=function(e){var t=this.cmp(e);return t==1||t===0};C.hyperbolicCosine=C.cosh=function(){var e,t,i,n,s,a=this,r=a.constructor,o=new r(1);if(!a.isFinite())return new r(a.s?1/0:NaN);if(a.isZero())return o;i=r.precision,n=r.rounding,r.precision=i+Math.max(a.e,a.sd())+4,r.rounding=1,s=a.d.length,s<32?(e=Math.ceil(s/3),t=(1/Fo(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),a=Ms(r,1,a.times(t),new r(1),!0);for(var c,l=e,p=new r(8);l--;)c=a.times(a),a=o.minus(c.times(p.minus(c.times(p))));return N(a,r.precision=i,r.rounding=n,!0)};C.hyperbolicSine=C.sinh=function(){var e,t,i,n,s=this,a=s.constructor;if(!s.isFinite()||s.isZero())return new a(s);if(t=a.precision,i=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,n=s.d.length,n<3)s=Ms(a,2,s,s,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,s=s.times(1/Fo(5,e)),s=Ms(a,2,s,s,!0);for(var r,o=new a(5),c=new a(16),l=new a(20);e--;)r=s.times(s),s=s.times(o.plus(r.times(c.times(r).plus(l))))}return a.precision=t,a.rounding=i,N(s,t,i,!0)};C.hyperbolicTangent=C.tanh=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,ce(i.sinh(),i.cosh(),n.precision=e,n.rounding=t)):new n(i.s)};C.inverseCosine=C.acos=function(){var e=this,t=e.constructor,i=e.abs().cmp(1),n=t.precision,s=t.rounding;return i!==-1?i===0?e.isNeg()?ji(t,n,s):new t(0):new t(NaN):e.isZero()?ji(t,n+4,s).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=s,e.times(2))};C.inverseHyperbolicCosine=C.acosh=function(){var e,t,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,B=!1,i=i.times(i).minus(1).sqrt().plus(i),B=!0,n.precision=e,n.rounding=t,i.ln()):new n(i)};C.inverseHyperbolicSine=C.asinh=function(){var e,t,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,B=!1,i=i.times(i).plus(1).sqrt().plus(i),B=!0,n.precision=e,n.rounding=t,i.ln())};C.inverseHyperbolicTangent=C.atanh=function(){var e,t,i,n,s=this,a=s.constructor;return s.isFinite()?s.e>=0?new a(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=a.precision,t=a.rounding,n=s.sd(),Math.max(n,e)<2*-s.e-1?N(new a(s),e,t,!0):(a.precision=i=n-s.e,s=ce(s.plus(1),new a(1).minus(s),i+e,1),a.precision=e+4,a.rounding=1,s=s.ln(),a.precision=e,a.rounding=t,s.times(.5))):new a(NaN)};C.inverseSine=C.asin=function(){var e,t,i,n,s=this,a=s.constructor;return s.isZero()?new a(s):(t=s.abs().cmp(1),i=a.precision,n=a.rounding,t!==-1?t===0?(e=ji(a,i+4,n).times(.5),e.s=s.s,e):new a(NaN):(a.precision=i+6,a.rounding=1,s=s.div(new a(1).minus(s.times(s)).sqrt().plus(1)).atan(),a.precision=i,a.rounding=n,s.times(2)))};C.inverseTangent=C.atan=function(){var e,t,i,n,s,a,r,o,c,l=this,p=l.constructor,u=p.precision,d=p.rounding;if(l.isFinite()){if(l.isZero())return new p(l);if(l.abs().eq(1)&&u+4<=sp)return r=ji(p,u+4,d).times(.25),r.s=l.s,r}else{if(!l.s)return new p(NaN);if(u+4<=sp)return r=ji(p,u+4,d).times(.5),r.s=l.s,r}for(p.precision=o=u+10,p.rounding=1,i=Math.min(28,o/L+2|0),e=i;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(B=!1,t=Math.ceil(o/L),n=1,c=l.times(l),r=new p(l),s=l;e!==-1;)if(s=s.times(c),a=r.minus(s.div(n+=2)),s=s.times(c),r=a.plus(s.div(n+=2)),r.d[t]!==void 0)for(e=t;r.d[e]===a.d[e]&&e--;);return i&&(r=r.times(2<<i-1)),B=!0,N(r,p.precision=u,p.rounding=d,!0)};C.isFinite=function(){return!!this.d};C.isInteger=C.isInt=function(){return!!this.d&&at(this.e/L)>this.d.length-2};C.isNaN=function(){return!this.s};C.isNegative=C.isNeg=function(){return this.s<0};C.isPositive=C.isPos=function(){return this.s>0};C.isZero=function(){return!!this.d&&this.d[0]===0};C.lessThan=C.lt=function(e){return this.cmp(e)<0};C.lessThanOrEqualTo=C.lte=function(e){return this.cmp(e)<1};C.logarithm=C.log=function(e){var t,i,n,s,a,r,o,c,l=this,p=l.constructor,u=p.precision,d=p.rounding,m=5;if(e==null)e=new p(10),t=!0;else{if(e=new p(e),i=e.d,e.s<0||!i||!i[0]||e.eq(1))return new p(NaN);t=e.eq(10)}if(i=l.d,l.s<0||!i||!i[0]||l.eq(1))return new p(i&&!i[0]?-1/0:l.s!=1?NaN:i?0:1/0);if(t)if(i.length>1)a=!0;else{for(s=i[0];s%10===0;)s/=10;a=s!==1}if(B=!1,o=u+m,r=kn(l,o),n=t?Co(p,o+10):kn(e,o),c=ce(r,n,o,1),Va(c.d,s=u,d))do if(o+=10,r=kn(l,o),n=t?Co(p,o+10):kn(e,o),c=ce(r,n,o,1),!a){+Qe(c.d).slice(s+1,s+15)+1==1e14&&(c=N(c,u+1,0));break}while(Va(c.d,s+=10,d));return B=!0,N(c,u,d)};C.minus=C.sub=function(e){var t,i,n,s,a,r,o,c,l,p,u,d,m=this,f=m.constructor;if(e=new f(e),!m.d||!e.d)return!m.s||!e.s?e=new f(NaN):m.d?e.s=-e.s:e=new f(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(l=m.d,d=e.d,o=f.precision,c=f.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new f(m);else return new f(c===3?-0:0);return B?N(e,o,c):e}if(i=at(e.e/L),p=at(m.e/L),l=l.slice(),a=p-i,a){for(u=a<0,u?(t=l,a=-a,r=d.length):(t=d,i=p,r=l.length),n=Math.max(Math.ceil(o/L),r)+2,a>n&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for(n=l.length,r=d.length,u=n<r,u&&(r=n),n=0;n<r;n++)if(l[n]!=d[n]){u=l[n]<d[n];break}a=0}for(u&&(t=l,l=d,d=t,e.s=-e.s),r=l.length,n=d.length-r;n>0;--n)l[r++]=0;for(n=d.length;n>a;){if(l[--n]<d[n]){for(s=n;s&&l[--s]===0;)l[s]=ui-1;--l[s],l[n]+=ui}l[n]-=d[n]}for(;l[--r]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(e.d=l,e.e=No(l,i),B?N(e,o,c):e):new f(c===3?-0:0)};C.modulo=C.mod=function(e){var t,i=this,n=i.constructor;return e=new n(e),!i.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||i.d&&!i.d[0]?N(new n(i),n.precision,n.rounding):(B=!1,n.modulo==9?(t=ce(i,e.abs(),0,3,1),t.s*=e.s):t=ce(i,e,0,n.modulo,1),t=t.times(e),B=!0,i.minus(t))};C.naturalExponential=C.exp=function(){return ap(this)};C.naturalLogarithm=C.ln=function(){return kn(this)};C.negated=C.neg=function(){var e=new this.constructor(this);return e.s=-e.s,N(e)};C.plus=C.add=function(e){var t,i,n,s,a,r,o,c,l,p,u=this,d=u.constructor;if(e=new d(e),!u.d||!e.d)return!u.s||!e.s?e=new d(NaN):u.d||(e=new d(e.d||u.s===e.s?u:NaN)),e;if(u.s!=e.s)return e.s=-e.s,u.minus(e);if(l=u.d,p=e.d,o=d.precision,c=d.rounding,!l[0]||!p[0])return p[0]||(e=new d(u)),B?N(e,o,c):e;if(a=at(u.e/L),n=at(e.e/L),l=l.slice(),s=a-n,s){for(s<0?(i=l,s=-s,r=p.length):(i=p,n=a,r=l.length),a=Math.ceil(o/L),r=a>r?a+1:r+1,s>r&&(s=r,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(r=l.length,s=p.length,r-s<0&&(s=r,i=p,p=l,l=i),t=0;s;)t=(l[--s]=l[s]+p[s]+t)/ui|0,l[s]%=ui;for(t&&(l.unshift(t),++n),r=l.length;l[--r]==0;)l.pop();return e.d=l,e.e=No(l,n),B?N(e,o,c):e};C.precision=C.sd=function(e){var t,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Cn+e);return i.d?(t=Ov(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t};C.round=function(){var e=this,t=e.constructor;return N(new t(e),e.e+1,t.rounding)};C.sine=C.sin=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+L,n.rounding=1,i=mA(n,Fv(n,i)),n.precision=e,n.rounding=t,N(Wi>2?i.neg():i,e,t,!0)):new n(NaN)};C.squareRoot=C.sqrt=function(){var e,t,i,n,s,a,r=this,o=r.d,c=r.e,l=r.s,p=r.constructor;if(l!==1||!o||!o[0])return new p(!l||l<0&&(!o||o[0])?NaN:o?r:1/0);for(B=!1,l=Math.sqrt(+r),l==0||l==1/0?(t=Qe(o),(t.length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=at((c+1)/2)-(c<0||c%2),l==1/0?t="5e"+c:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),n=new p(t)):n=new p(l.toString()),i=(c=p.precision)+3;;)if(a=n,n=a.plus(ce(r,a,i+2,1)).times(.5),Qe(a.d).slice(0,i)===(t=Qe(n.d)).slice(0,i))if(t=t.slice(i-3,i+1),t=="9999"||!s&&t=="4999"){if(!s&&(N(a,c+1,0),a.times(a).eq(r))){n=a;break}i+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(N(n,c+1,1),e=!n.times(n).eq(r));break}return B=!0,N(n,c,p.rounding,e)};C.tangent=C.tan=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,i=i.sin(),i.s=1,i=ce(i,new n(1).minus(i.times(i)).sqrt(),e+10,0),n.precision=e,n.rounding=t,N(Wi==2||Wi==4?i.neg():i,e,t,!0)):new n(NaN)};C.times=C.mul=function(e){var t,i,n,s,a,r,o,c,l,p=this,u=p.constructor,d=p.d,m=(e=new u(e)).d;if(e.s*=p.s,!d||!d[0]||!m||!m[0])return new u(!e.s||d&&!d[0]&&!m||m&&!m[0]&&!d?NaN:!d||!m?e.s/0:e.s*0);for(i=at(p.e/L)+at(e.e/L),c=d.length,l=m.length,c<l&&(a=d,d=m,m=a,r=c,c=l,l=r),a=[],r=c+l,n=r;n--;)a.push(0);for(n=l;--n>=0;){for(t=0,s=c+n;s>n;)o=a[s]+m[n]*d[s-n-1]+t,a[s--]=o%ui|0,t=o/ui|0;a[s]=(a[s]+t)%ui|0}for(;!a[--r];)a.pop();return t?++i:a.shift(),e.d=a,e.e=No(a,i),B?N(e,u.precision,u.rounding):e};C.toBinary=function(e,t){return Tp(this,2,e,t)};C.toDecimalPlaces=C.toDP=function(e,t){var i=this,n=i.constructor;return i=new n(i),e===void 0?i:(St(e,0,jn),t===void 0?t=n.rounding:St(t,0,8),N(i,e+i.e+1,t))};C.toExponential=function(e,t){var i,n=this,s=n.constructor;return e===void 0?i=qi(n,!0):(St(e,0,jn),t===void 0?t=s.rounding:St(t,0,8),n=N(new s(n),e+1,t),i=qi(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+i:i};C.toFixed=function(e,t){var i,n,s=this,a=s.constructor;return e===void 0?i=qi(s):(St(e,0,jn),t===void 0?t=a.rounding:St(t,0,8),n=N(new a(s),e+s.e+1,t),i=qi(n,!1,e+n.e+1)),s.isNeg()&&!s.isZero()?"-"+i:i};C.toFraction=function(e){var t,i,n,s,a,r,o,c,l,p,u,d,m=this,f=m.d,x=m.constructor;if(!f)return new x(m);if(l=i=new x(1),n=c=new x(0),t=new x(n),a=t.e=Ov(f)-m.e-1,r=a%L,t.d[0]=De(10,r<0?L+r:r),e==null)e=a>0?t:l;else{if(o=new x(e),!o.isInt()||o.lt(l))throw Error(Cn+o);e=o.gt(t)?a>0?t:l:o}for(B=!1,o=new x(Qe(f)),p=x.precision,x.precision=a=f.length*L*2;u=ce(o,t,0,1,1),s=i.plus(u.times(n)),s.cmp(e)!=1;)i=n,n=s,s=l,l=c.plus(u.times(s)),c=s,s=t,t=o.minus(u.times(s)),o=s;return s=ce(e.minus(i),n,0,1,1),c=c.plus(s.times(l)),i=i.plus(s.times(n)),c.s=l.s=m.s,d=ce(l,n,a,1).minus(m).abs().cmp(ce(c,i,a,1).minus(m).abs())<1?[l,n]:[c,i],x.precision=p,B=!0,d};C.toHexadecimal=C.toHex=function(e,t){return Tp(this,16,e,t)};C.toNearest=function(e,t){var i=this,n=i.constructor;if(i=new n(i),e==null){if(!i.d)return i;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:St(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(B=!1,i=ce(i,e,0,t,1).times(e),B=!0,N(i)):(e.s=i.s,i=e),i};C.toNumber=function(){return+this};C.toOctal=function(e,t){return Tp(this,8,e,t)};C.toPower=C.pow=function(e){var t,i,n,s,a,r,o=this,c=o.constructor,l=+(e=new c(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new c(De(+o,l));if(o=new c(o),o.eq(1))return o;if(n=c.precision,a=c.rounding,e.eq(1))return N(o,n,a);if(t=at(e.e/L),t>=e.d.length-1&&(i=l<0?-l:l)<=lA)return s=Iv(c,o,i,n),e.s<0?new c(1).div(s):N(s,n,a);if(r=o.s,r<0){if(t<e.d.length-1)return new c(NaN);if(!(e.d[t]&1)&&(r=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=r,o}return i=De(+o,l),t=i==0||!isFinite(i)?at(l*(Math.log("0."+Qe(o.d))/Math.LN10+o.e+1)):new c(i+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?r/0:0):(B=!1,c.rounding=o.s=1,i=Math.min(12,(t+"").length),s=ap(e.times(kn(o,n+i)),n),s.d&&(s=N(s,n+5,1),Va(s.d,n,a)&&(t=n+10,s=N(ap(e.times(kn(o,t+i)),t),t+5,1),+Qe(s.d).slice(n+1,n+15)+1==1e14&&(s=N(s,n+1,0)))),s.s=r,B=!0,c.rounding=a,N(s,n,a))};C.toPrecision=function(e,t){var i,n=this,s=n.constructor;return e===void 0?i=qi(n,n.e<=s.toExpNeg||n.e>=s.toExpPos):(St(e,1,jn),t===void 0?t=s.rounding:St(t,0,8),n=N(new s(n),e,t),i=qi(n,e<=n.e||n.e<=s.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+i:i};C.toSignificantDigits=C.toSD=function(e,t){var i=this,n=i.constructor;return e===void 0?(e=n.precision,t=n.rounding):(St(e,1,jn),t===void 0?t=n.rounding:St(t,0,8)),N(new n(i),e,t)};C.toString=function(){var e=this,t=e.constructor,i=qi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i};C.truncated=C.trunc=function(){return N(new this.constructor(this),this.e+1,1)};C.valueOf=C.toJSON=function(){var e=this,t=e.constructor,i=qi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};function Qe(e){var t,i,n,s=e.length-1,a="",r=e[0];if(s>0){for(a+=r,t=1;t<s;t++)n=e[t]+"",i=L-n.length,i&&(a+=En(i)),a+=n;r=e[t],n=r+"",i=L-n.length,i&&(a+=En(i))}else if(r===0)return"0";for(;r%10===0;)r/=10;return a+r}function St(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Cn+e)}function Va(e,t,i,n){var s,a,r,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=L,s=0):(s=Math.ceil((t+1)/L),t%=L),a=De(10,L-t),o=e[s]%a|0,n==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),r=i<4&&o==99999||i>3&&o==49999||o==5e4||o==0):r=(i<4&&o+1==a||i>3&&o+1==a/2)&&(e[s+1]/a/100|0)==De(10,t-2)-1||(o==a/2||o==0)&&(e[s+1]/a/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),r=(n||i<4)&&o==9999||!n&&i>3&&o==4999):r=((n||i<4)&&o+1==a||!n&&i>3&&o+1==a/2)&&(e[s+1]/a/1e3|0)==De(10,t-3)-1,r}function xo(e,t,i){for(var n,s=[0],a,r=0,o=e.length;r<o;){for(a=s.length;a--;)s[a]*=t;for(s[0]+=ip.indexOf(e.charAt(r++)),n=0;n<s.length;n++)s[n]>i-1&&(s[n+1]===void 0&&(s[n+1]=0),s[n+1]+=s[n]/i|0,s[n]%=i)}return s.reverse()}function uA(e,t){var i,n,s;if(t.isZero())return t;n=t.d.length,n<32?(i=Math.ceil(n/3),s=(1/Fo(4,i)).toString()):(i=16,s="2.3283064365386962890625e-10"),e.precision+=i,t=Ms(e,1,t.times(s),new e(1));for(var a=i;a--;){var r=t.times(t);t=r.times(r).minus(r).times(8).plus(1)}return e.precision-=i,t}var ce=function(){function e(n,s,a){var r,o=0,c=n.length;for(n=n.slice();c--;)r=n[c]*s+o,n[c]=r%a|0,o=r/a|0;return o&&n.unshift(o),n}function t(n,s,a,r){var o,c;if(a!=r)c=a>r?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=s[o]){c=n[o]>s[o]?1:-1;break}return c}function i(n,s,a,r){for(var o=0;a--;)n[a]-=o,o=n[a]<s[a]?1:0,n[a]=o*r+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,r,o,c){var l,p,u,d,m,f,x,E,j,q,S,O,K,P,T,I,$,_,y,b,g=n.constructor,v=n.s==s.s?1:-1,k=n.d,A=s.d;if(!k||!k[0]||!A||!A[0])return new g(!n.s||!s.s||(k?A&&k[0]==A[0]:!A)?NaN:k&&k[0]==0||!A?v*0:v/0);for(c?(m=1,p=n.e-s.e):(c=ui,m=L,p=at(n.e/m)-at(s.e/m)),y=A.length,$=k.length,j=new g(v),q=j.d=[],u=0;A[u]==(k[u]||0);u++);if(A[u]>(k[u]||0)&&p--,a==null?(P=a=g.precision,r=g.rounding):o?P=a+(n.e-s.e)+1:P=a,P<0)q.push(1),f=!0;else{if(P=P/m+2|0,u=0,y==1){for(d=0,A=A[0],P++;(u<$||d)&&P--;u++)T=d*c+(k[u]||0),q[u]=T/A|0,d=T%A|0;f=d||u<$}else{for(d=c/(A[0]+1)|0,d>1&&(A=e(A,d,c),k=e(k,d,c),y=A.length,$=k.length),I=y,S=k.slice(0,y),O=S.length;O<y;)S[O++]=0;b=A.slice(),b.unshift(0),_=A[0],A[1]>=c/2&&++_;do d=0,l=t(A,S,y,O),l<0?(K=S[0],y!=O&&(K=K*c+(S[1]||0)),d=K/_|0,d>1?(d>=c&&(d=c-1),x=e(A,d,c),E=x.length,O=S.length,l=t(x,S,E,O),l==1&&(d--,i(x,y<E?b:A,E,c))):(d==0&&(l=d=1),x=A.slice()),E=x.length,E<O&&x.unshift(0),i(S,x,O,c),l==-1&&(O=S.length,l=t(A,S,y,O),l<1&&(d++,i(S,y<O?b:A,O,c))),O=S.length):l===0&&(d++,S=[0]),q[u++]=d,l&&S[0]?S[O++]=k[I]||0:(S=[k[I]],O=1);while((I++<$||S[0]!==void 0)&&P--);f=S[0]!==void 0}q[0]||q.shift()}if(m==1)j.e=p,Cv=f;else{for(u=1,d=q[0];d>=10;d/=10)u++;j.e=u+p*m-1,N(j,o?a+j.e+1:a,r,f)}return j}}();function N(e,t,i,n){var s,a,r,o,c,l,p,u,d,m=e.constructor;e:if(t!=null){if(u=e.d,!u)return e;for(s=1,o=u[0];o>=10;o/=10)s++;if(a=t-s,a<0)a+=L,r=t,p=u[d=0],c=p/De(10,s-r-1)%10|0;else if(d=Math.ceil((a+1)/L),o=u.length,d>=o)if(n){for(;o++<=d;)u.push(0);p=c=0,s=1,a%=L,r=a-L+1}else break e;else{for(p=o=u[d],s=1;o>=10;o/=10)s++;a%=L,r=a-L+s,c=r<0?0:p/De(10,s-r-1)%10|0}if(n=n||t<0||u[d+1]!==void 0||(r<0?p:p%De(10,s-r-1)),l=i<4?(c||n)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||n||i==6&&(a>0?r>0?p/De(10,s-r):0:u[d-1])%10&1||i==(e.s<0?8:7)),t<1||!u[0])return u.length=0,l?(t-=e.e+1,u[0]=De(10,(L-t%L)%L),e.e=-t||0):u[0]=e.e=0,e;if(a==0?(u.length=d,o=1,d--):(u.length=d+1,o=De(10,L-a),u[d]=r>0?(p/De(10,s-r)%De(10,r)|0)*o:0),l)for(;;)if(d==0){for(a=1,r=u[0];r>=10;r/=10)a++;for(r=u[0]+=o,o=1;r>=10;r/=10)o++;a!=o&&(e.e++,u[0]==ui&&(u[0]=1));break}else{if(u[d]+=o,u[d]!=ui)break;u[d--]=0,o=1}for(a=u.length;u[--a]===0;)u.pop()}return B&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function qi(e,t,i){if(!e.isFinite())return Nv(e);var n,s=e.e,a=Qe(e.d),r=a.length;return t?(i&&(n=i-r)>0?a=a.charAt(0)+"."+a.slice(1)+En(n):r>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):s<0?(a="0."+En(-s-1)+a,i&&(n=i-r)>0&&(a+=En(n))):s>=r?(a+=En(s+1-r),i&&(n=i-s-1)>0&&(a=a+"."+En(n))):((n=s+1)<r&&(a=a.slice(0,n)+"."+a.slice(n)),i&&(n=i-r)>0&&(s+1===r&&(a+="."),a+=En(n))),a}function No(e,t){var i=e[0];for(t*=L;i>=10;i/=10)t++;return t}function Co(e,t,i){if(t>pA)throw B=!0,i&&(e.precision=i),Error(jv);return N(new e(Ao),t,1,!0)}function ji(e,t,i){if(t>sp)throw Error(jv);return N(new e(To),t,i,!0)}function Ov(e){var t=e.length-1,i=t*L+1;if(t=e[t],t){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function En(e){for(var t="";e--;)t+="0";return t}function Iv(e,t,i,n){var s,a=new e(1),r=Math.ceil(n/L+4);for(B=!1;;){if(i%2&&(a=a.times(t),hx(a.d,r)&&(s=!0)),i=at(i/2),i===0){i=a.d.length-1,s&&a.d[i]===0&&++a.d[i];break}t=t.times(t),hx(t.d,r)}return B=!0,a}function mx(e){return e.d[e.d.length-1]&1}function $v(e,t,i){for(var n,s,a=new e(t[0]),r=0;++r<t.length;){if(s=new e(t[r]),!s.s){a=s;break}n=a.cmp(s),(n===i||n===0&&a.s===i)&&(a=s)}return a}function ap(e,t){var i,n,s,a,r,o,c,l=0,p=0,u=0,d=e.constructor,m=d.rounding,f=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(B=!1,c=f):c=t,o=new d(.03125);e.e>-2;)e=e.times(o),u+=5;for(n=Math.log(De(2,u))/Math.LN10*2+5|0,c+=n,i=a=r=new d(1),d.precision=c;;){if(a=N(a.times(e),c,1),i=i.times(++p),o=r.plus(ce(a,i,c,1)),Qe(o.d).slice(0,c)===Qe(r.d).slice(0,c)){for(s=u;s--;)r=N(r.times(r),c,1);if(t==null)if(l<3&&Va(r.d,c-n,m,l))d.precision=c+=10,i=a=o=new d(1),p=0,l++;else return N(r,d.precision=f,m,B=!0);else return d.precision=f,r}r=o}}function kn(e,t){var i,n,s,a,r,o,c,l,p,u,d,m=1,f=10,x=e,E=x.d,j=x.constructor,q=j.rounding,S=j.precision;if(x.s<0||!E||!E[0]||!x.e&&E[0]==1&&E.length==1)return new j(E&&!E[0]?-1/0:x.s!=1?NaN:E?0:x);if(t==null?(B=!1,p=S):p=t,j.precision=p+=f,i=Qe(E),n=i.charAt(0),Math.abs(a=x.e)<15e14){for(;n<7&&n!=1||n==1&&i.charAt(1)>3;)x=x.times(e),i=Qe(x.d),n=i.charAt(0),m++;a=x.e,n>1?(x=new j("0."+i),a++):x=new j(n+"."+i.slice(1))}else return l=Co(j,p+2,S).times(a+""),x=kn(new j(n+"."+i.slice(1)),p-f).plus(l),j.precision=S,t==null?N(x,S,q,B=!0):x;for(u=x,c=r=x=ce(x.minus(1),x.plus(1),p,1),d=N(x.times(x),p,1),s=3;;){if(r=N(r.times(d),p,1),l=c.plus(ce(r,new j(s),p,1)),Qe(l.d).slice(0,p)===Qe(c.d).slice(0,p))if(c=c.times(2),a!==0&&(c=c.plus(Co(j,p+2,S).times(a+""))),c=ce(c,new j(m),p,1),t==null)if(Va(c.d,p-f,q,o))j.precision=p+=f,l=r=x=ce(u.minus(1),u.plus(1),p,1),d=N(x.times(x),p,1),s=o=1;else return N(c,j.precision=S,q,B=!0);else return j.precision=S,c;c=l,s+=2}}function Nv(e){return String(e.s*e.s/0)}function vo(e,t){var i,n,s;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;t.charCodeAt(n)===48;n++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(n,s),t){if(s-=n,e.e=i=i-n-1,e.d=[],n=(i+1)%L,i<0&&(n+=L),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=L;n<s;)e.d.push(+t.slice(n,n+=L));t=t.slice(n),n=L-t.length}else n-=s;for(;n--;)t+="0";e.d.push(+t),B&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function dA(e,t){var i,n,s,a,r,o,c,l,p;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Pv.test(t))return vo(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(oA.test(t))i=16,t=t.toLowerCase();else if(rA.test(t))i=2;else if(cA.test(t))i=8;else throw Error(Cn+t);for(a=t.search(/p/i),a>0?(c=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),r=a>=0,n=e.constructor,r&&(t=t.replace(".",""),o=t.length,a=o-a,s=Iv(n,new n(i),a,a*2)),l=xo(t,i,ui),p=l.length-1,a=p;l[a]===0;--a)l.pop();return a<0?new n(e.s*0):(e.e=No(l,p),e.d=l,B=!1,r&&(e=ce(e,s,o*4)),c&&(e=e.times(Math.abs(c)<54?De(2,c):zs.pow(2,c))),B=!0,e)}function mA(e,t){var i,n=t.d.length;if(n<3)return t.isZero()?t:Ms(e,2,t,t);i=1.4*Math.sqrt(n),i=i>16?16:i|0,t=t.times(1/Fo(5,i)),t=Ms(e,2,t,t);for(var s,a=new e(5),r=new e(16),o=new e(20);i--;)s=t.times(t),t=t.times(a.plus(s.times(r.times(s).minus(o))));return t}function Ms(e,t,i,n,s){var a,r,o,c,l=1,p=e.precision,u=Math.ceil(p/L);for(B=!1,c=i.times(i),o=new e(n);;){if(r=ce(o.times(c),new e(t++*t++),p,1),o=s?n.plus(r):n.minus(r),n=ce(r.times(c),new e(t++*t++),p,1),r=o.plus(n),r.d[u]!==void 0){for(a=u;r.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=r,r=a,l++}return B=!0,r.d.length=u+1,r}function Fo(e,t){for(var i=e;--t;)i*=e;return i}function Fv(e,t){var i,n=t.s<0,s=ji(e,e.precision,1),a=s.times(.5);if(t=t.abs(),t.lte(a))return Wi=n?4:1,t;if(i=t.divToInt(s),i.isZero())Wi=n?3:2;else{if(t=t.minus(i.times(s)),t.lte(a))return Wi=mx(i)?n?2:3:n?4:1,t;Wi=mx(i)?n?1:4:n?3:2}return t.minus(s).abs()}function Tp(e,t,i,n){var s,a,r,o,c,l,p,u,d,m=e.constructor,f=i!==void 0;if(f?(St(i,1,jn),n===void 0?n=m.rounding:St(n,0,8)):(i=m.precision,n=m.rounding),!e.isFinite())p=Nv(e);else{for(p=qi(e),r=p.indexOf("."),f?(s=2,t==16?i=i*4-3:t==8&&(i=i*3-2)):s=t,r>=0&&(p=p.replace(".",""),d=new m(1),d.e=p.length-r,d.d=xo(qi(d),10,s),d.e=d.d.length),u=xo(p,10,s),a=c=u.length;u[--c]==0;)u.pop();if(!u[0])p=f?"0p+0":"0";else{if(r<0?a--:(e=new m(e),e.d=u,e.e=a,e=ce(e,d,i,n,0,s),u=e.d,a=e.e,l=Cv),r=u[i],o=s/2,l=l||u[i+1]!==void 0,l=n<4?(r!==void 0||l)&&(n===0||n===(e.s<0?3:2)):r>o||r===o&&(n===4||l||n===6&&u[i-1]&1||n===(e.s<0?8:7)),u.length=i,l)for(;++u[--i]>s-1;)u[i]=0,i||(++a,u.unshift(1));for(c=u.length;!u[c-1];--c);for(r=0,p="";r<c;r++)p+=ip.charAt(u[r]);if(f){if(c>1)if(t==16||t==8){for(r=t==16?4:3,--c;c%r;c++)p+="0";for(u=xo(p,s,t),c=u.length;!u[c-1];--c);for(r=1,p="1.";r<c;r++)p+=ip.charAt(u[r])}else p=p.charAt(0)+"."+p.slice(1);p=p+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)p="0"+p;p="0."+p}else if(++a>c)for(a-=c;a--;)p+="0";else a<c&&(p=p.slice(0,a)+"."+p.slice(a))}p=(t==16?"0x":t==2?"0b":t==8?"0o":"")+p}return e.s<0?"-"+p:p}function hx(e,t){if(e.length>t)return e.length=t,!0}function hA(e){return new this(e).abs()}function fA(e){return new this(e).acos()}function gA(e){return new this(e).acosh()}function xA(e,t){return new this(e).plus(t)}function vA(e){return new this(e).asin()}function bA(e){return new this(e).asinh()}function yA(e){return new this(e).atan()}function wA(e){return new this(e).atanh()}function _A(e,t){e=new this(e),t=new this(t);var i,n=this.precision,s=this.rounding,a=n+4;return!e.s||!t.s?i=new this(NaN):!e.d&&!t.d?(i=ji(this,a,1).times(t.s>0?.25:.75),i.s=e.s):!t.d||e.isZero()?(i=t.s<0?ji(this,n,s):new this(0),i.s=e.s):!e.d||t.isZero()?(i=ji(this,a,1).times(.5),i.s=e.s):t.s<0?(this.precision=a,this.rounding=1,i=this.atan(ce(e,t,a,1)),t=ji(this,a,1),this.precision=n,this.rounding=s,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(ce(e,t,a,1)),i}function EA(e){return new this(e).cbrt()}function kA(e){return N(e=new this(e),e.e+1,2)}function SA(e,t,i){return new this(e).clamp(t,i)}function AA(e){if(!e||typeof e!="object")throw Error($o+"Object expected");var t,i,n,s=e.defaults===!0,a=["precision",1,jn,"rounding",0,8,"toExpNeg",-Fs,0,"toExpPos",0,Fs,"maxE",0,Fs,"minE",-Fs,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(i=a[t],s&&(this[i]=np[i]),(n=e[i])!==void 0)if(at(n)===n&&n>=a[t+1]&&n<=a[t+2])this[i]=n;else throw Error(Cn+i+": "+n);if(i="crypto",s&&(this[i]=np[i]),(n=e[i])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(Rv);else this[i]=!1;else throw Error(Cn+i+": "+n);return this}function TA(e){return new this(e).cos()}function CA(e){return new this(e).cosh()}function Lv(e){var t,i,n;function s(a){var r,o,c,l=this;if(!(l instanceof s))return new s(a);if(l.constructor=s,fx(a)){l.s=a.s,B?!a.d||a.e>s.maxE?(l.e=NaN,l.d=null):a.e<s.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(r=0,o=a;o>=10;o/=10)r++;B?r>s.maxE?(l.e=NaN,l.d=null):r<s.minE?(l.e=0,l.d=[0]):(l.e=r,l.d=[a]):(l.e=r,l.d=[a]);return}if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return vo(l,a.toString())}if(c==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(o===43&&(a=a.slice(1)),l.s=1),Pv.test(a)?vo(l,a):dA(l,a);if(c==="bigint")return a<0?(a=-a,l.s=-1):l.s=1,vo(l,a.toString());throw Error(Cn+a)}if(s.prototype=C,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=AA,s.clone=Lv,s.isDecimal=fx,s.abs=hA,s.acos=fA,s.acosh=gA,s.add=xA,s.asin=vA,s.asinh=bA,s.atan=yA,s.atanh=wA,s.atan2=_A,s.cbrt=EA,s.ceil=kA,s.clamp=SA,s.cos=TA,s.cosh=CA,s.div=jA,s.exp=RA,s.floor=qA,s.hypot=PA,s.ln=OA,s.log=IA,s.log10=NA,s.log2=$A,s.max=FA,s.min=LA,s.mod=MA,s.mul=DA,s.pow=BA,s.random=zA,s.round=UA,s.sign=HA,s.sin=VA,s.sinh=KA,s.sqrt=WA,s.sub=GA,s.sum=JA,s.tan=QA,s.tanh=YA,s.trunc=ZA,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(i=n[t++])||(e[i]=this[i]);return s.config(e),s}function jA(e,t){return new this(e).div(t)}function RA(e){return new this(e).exp()}function qA(e){return N(e=new this(e),e.e+1,3)}function PA(){var e,t,i=new this(0);for(B=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return B=!0,new this(1/0);i=t}return B=!0,i.sqrt()}function fx(e){return e instanceof zs||e&&e.toStringTag===qv||!1}function OA(e){return new this(e).ln()}function IA(e,t){return new this(e).log(t)}function $A(e){return new this(e).log(2)}function NA(e){return new this(e).log(10)}function FA(){return $v(this,arguments,-1)}function LA(){return $v(this,arguments,1)}function MA(e,t){return new this(e).mod(t)}function DA(e,t){return new this(e).mul(t)}function BA(e,t){return new this(e).pow(t)}function zA(e){var t,i,n,s,a=0,r=new this(1),o=[];if(e===void 0?e=this.precision:St(e,1,jn),n=Math.ceil(e/L),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)s=t[a],s>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);a<n;)s=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((t[a+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(s%1e7),a+=4);a=n/4}else throw Error(Rv);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],e%=L,n&&e&&(s=De(10,L-e),o[a]=(n/s|0)*s);o[a]===0;a--)o.pop();if(a<0)i=0,o=[0];else{for(i=-1;o[0]===0;i-=L)o.shift();for(n=1,s=o[0];s>=10;s/=10)n++;n<L&&(i-=L-n)}return r.e=i,r.d=o,r}function UA(e){return N(e=new this(e),e.e+1,this.rounding)}function HA(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function VA(e){return new this(e).sin()}function KA(e){return new this(e).sinh()}function WA(e){return new this(e).sqrt()}function GA(e,t){return new this(e).sub(t)}function JA(){var e=0,t=arguments,i=new this(t[e]);for(B=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return B=!0,N(i,this.precision,this.rounding)}function QA(e){return new this(e).tan()}function YA(e){return new this(e).tanh()}function ZA(e){return N(e=new this(e),e.e+1,1)}C[Symbol.for("nodejs.util.inspect.custom")]=C.toString;C[Symbol.toStringTag]="Decimal";var zs=C.constructor=Lv(np);Ao=new zs(Ao);To=new zs(To);var Us=zs;function jo(e){return e===null?e:Array.isArray(e)?e.map(jo):typeof e=="object"?XA(e)?eT(e):typeof e=="bigint"||e instanceof Date||e instanceof Uint8Array||e instanceof Us?e:Ap(e,jo):e}function XA(e){return e!==null&&typeof e=="object"&&typeof e.$type=="string"}function eT({$type:e,value:t}){switch(e){case"BigInt":return BigInt(t);case"Bytes":{let{buffer:i,byteOffset:n,byteLength:s}=Buffer.from(t,"base64");return new Uint8Array(i,n,s)}case"DateTime":return new Date(t);case"Decimal":return new Us(t);case"Json":return JSON.parse(t);default:Io(t,"Unknown tagged value")}}var Fa=class{_map=new Map;get(e){return this._map.get(e)?.value}set(e,t){this._map.set(e,{value:t})}getOrCreate(e,t){let i=this._map.get(e);if(i)return i.value;let n=t();return this.set(e,n),n}};function Lo(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function tT(e,t){let i={};for(let n of e){let s=n[t];i[s]=n}return i}function rp(e){let t;return{get(){return t||(t={value:e()}),t.value}}}function iT(e){return{models:$l(e.models),enums:$l(e.enums),types:$l(e.types)}}function $l(e){let t={};for(let{name:i,...n}of e)t[i]=n;return t}function Cp(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Mv(e){return e.toString()!=="Invalid Date"}function jp(e){return zs.isDecimal(e)?!0:e!==null&&typeof e=="object"&&typeof e.s=="number"&&typeof e.e=="number"&&typeof e.toFixed=="function"&&Array.isArray(e.d)}var Dv={};ps(Dv,{ModelAction:()=>Mo,datamodelEnumToSchemaEnum:()=>nT});function nT(e){return{name:e.name,values:e.values.map(t=>t.name)}}var Mo=(e=>(e.findUnique="findUnique",e.findUniqueOrThrow="findUniqueOrThrow",e.findFirst="findFirst",e.findFirstOrThrow="findFirstOrThrow",e.findMany="findMany",e.create="create",e.createMany="createMany",e.createManyAndReturn="createManyAndReturn",e.update="update",e.updateMany="updateMany",e.updateManyAndReturn="updateManyAndReturn",e.upsert="upsert",e.delete="delete",e.deleteMany="deleteMany",e.groupBy="groupBy",e.count="count",e.aggregate="aggregate",e.findRaw="findRaw",e.aggregateRaw="aggregateRaw",e))(Mo||{}),sT=ee(Xx()),aT=ee(require("node:fs")),rT={keyword:os,entity:os,value:e=>pi(Ia(e)),punctuation:Ia,directive:os,function:os,variable:e=>pi(Ia(e)),string:e=>pi(Da(e)),boolean:Ga,number:os,comment:yp},oT=e=>e,mo={},cT=0,H={manual:mo.Prism&&mo.Prism.manual,disableWorkerMessageHandler:mo.Prism&&mo.Prism.disableWorkerMessageHandler,util:{encode:function(e){if(e instanceof Ti){let t=e;return new Ti(t.type,H.util.encode(t.content),t.alias)}else return Array.isArray(e)?e.map(H.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++cT}),e.__id},clone:function e(t,i){let n,s,a=H.util.type(t);switch(i=i||{},a){case"Object":if(s=H.util.objId(t),i[s])return i[s];n={},i[s]=n;for(let r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r],i));return n;case"Array":return s=H.util.objId(t),i[s]?i[s]:(n=[],i[s]=n,t.forEach(function(r,o){n[o]=e(r,i)}),n);default:return t}}},languages:{extend:function(e,t){let i=H.util.clone(H.languages[e]);for(let n in t)i[n]=t[n];return i},insertBefore:function(e,t,i,n){n=n||H.languages;let s=n[e],a={};for(let o in s)if(s.hasOwnProperty(o)){if(o==t)for(let c in i)i.hasOwnProperty(c)&&(a[c]=i[c]);i.hasOwnProperty(o)||(a[o]=s[o])}let r=n[e];return n[e]=a,H.languages.DFS(H.languages,function(o,c){c===r&&o!=e&&(this[o]=a)}),a},DFS:function e(t,i,n,s){s=s||{};let a=H.util.objId;for(let r in t)if(t.hasOwnProperty(r)){i.call(t,r,t[r],n||r);let o=t[r],c=H.util.type(o);c==="Object"&&!s[a(o)]?(s[a(o)]=!0,e(o,i,null,s)):c==="Array"&&!s[a(o)]&&(s[a(o)]=!0,e(o,i,r,s))}}},plugins:{},highlight:function(e,t,i){let n={code:e,grammar:t,language:i};return H.hooks.run("before-tokenize",n),n.tokens=H.tokenize(n.code,n.grammar),H.hooks.run("after-tokenize",n),Ti.stringify(H.util.encode(n.tokens),n.language)},matchGrammar:function(e,t,i,n,s,a,r){for(let x in i){if(!i.hasOwnProperty(x)||!i[x])continue;if(x==r)return;let E=i[x];E=H.util.type(E)==="Array"?E:[E];for(let j=0;j<E.length;++j){let q=E[j],S=q.inside,O=!!q.lookbehind,K=!!q.greedy,P=0,T=q.alias;if(K&&!q.pattern.global){let I=q.pattern.toString().match(/[imuy]*$/)[0];q.pattern=RegExp(q.pattern.source,I+"g")}q=q.pattern||q;for(let I=n,$=s;I<t.length;$+=t[I].length,++I){let _=t[I];if(t.length>e.length)return;if(_ instanceof Ti)continue;if(K&&I!=t.length-1){q.lastIndex=$;var u=q.exec(e);if(!u)break;var p=u.index+(O?u[1].length:0),d=u.index+u[0].length,o=I,c=$;for(let A=t.length;o<A&&(c<d||!t[o].type&&!t[o-1].greedy);++o)c+=t[o].length,p>=c&&(++I,$=c);if(t[I]instanceof Ti)continue;l=o-I,_=e.slice($,c),u.index-=$}else{q.lastIndex=0;var u=q.exec(_),l=1}if(!u){if(a)break;continue}O&&(P=u[1]?u[1].length:0);var p=u.index+P,u=u[0].slice(P),d=p+u.length,m=_.slice(0,p),f=_.slice(d);let y=[I,l];m&&(++I,$+=m.length,y.push(m));let b=new Ti(x,S?H.tokenize(u,S):u,T,u,K);if(y.push(b),f&&y.push(f),Array.prototype.splice.apply(t,y),l!=1&&H.matchGrammar(e,t,i,I,$,!0,x),a)break}}}},tokenize:function(e,t){let i=[e],n=t.rest;if(n){for(let s in n)t[s]=n[s];delete t.rest}return H.matchGrammar(e,i,t,0,0,!1),i},hooks:{all:{},add:function(e,t){let i=H.hooks.all;i[e]=i[e]||[],i[e].push(t)},run:function(e,t){let i=H.hooks.all[e];if(!(!i||!i.length))for(var n=0,s;s=i[n++];)s(t)}},Token:Ti};H.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};H.languages.javascript=H.languages.extend("clike",{"class-name":[H.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});H.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;H.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:H.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:H.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:H.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:H.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});H.languages.markup&&H.languages.markup.tag.addInlined("script","javascript");H.languages.js=H.languages.javascript;H.languages.typescript=H.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});H.languages.ts=H.languages.typescript;function Ti(e,t,i,n,s){this.type=e,this.content=t,this.alias=i,this.length=(n||"").length|0,this.greedy=!!s}Ti.stringify=function(e,t){return typeof e=="string"?e:Array.isArray(e)?e.map(function(i){return Ti.stringify(i,t)}).join(""):lT(e.type)(e.content)};function lT(e){return rT[e]||oT}function pT(e){return uT(e,H.languages.javascript)}function uT(e,t){return H.tokenize(e,t).map(i=>Ti.stringify(i)).join("")}function dT(e){return B2(e)}var mT=class as{firstLineNumber;lines;static read(t){let i;try{i=aT.default.readFileSync(t,"utf-8")}catch{return null}return as.fromContent(i)}static fromContent(t){let i=t.split(/\r?\n/);return new as(1,i)}constructor(t,i){this.firstLineNumber=t,this.lines=i}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(t,i){if(t<this.firstLineNumber||t>this.lines.length+this.firstLineNumber)return this;let n=t-this.firstLineNumber,s=[...this.lines];return s[n]=i(s[n]),new as(this.firstLineNumber,s)}mapLines(t){return new as(this.firstLineNumber,this.lines.map((i,n)=>t(i,this.firstLineNumber+n)))}lineAt(t){return this.lines[t-this.firstLineNumber]}prependSymbolAt(t,i){return this.mapLines((n,s)=>s===t?`${i} ${n}`:`  ${n}`)}slice(t,i){let n=this.lines.slice(t-1,i).join(`
`);return new as(t,dT(n).split(`
`))}highlight(){let t=pT(this.toString());return new as(this.firstLineNumber,t.split(`
`))}toString(){return this.lines.join(`
`)}},hT={red:cs,gray:yp,dim:Wa,bold:pi,underline:Wt,highlightSource:e=>e.highlight()},fT={red:e=>e,gray:e=>e,dim:e=>e,bold:e=>e,underline:e=>e,highlightSource:e=>e};function gT({message:e,originalMethod:t,isPanic:i,callArguments:n}){return{functionName:`prisma.${t}()`,message:e,isPanic:i??!1,callArguments:n}}function xT({callsite:e,message:t,originalMethod:i,isPanic:n,callArguments:s},a){let r=gT({message:t,originalMethod:i,isPanic:n,callArguments:s});if(!e||typeof window<"u"||process.env.NODE_ENV==="production")return r;let o=e.getLocation();if(!o||!o.lineNumber||!o.columnNumber)return r;let c=Math.max(1,o.lineNumber-3),l=mT.read(o.fileName)?.slice(c,o.lineNumber),p=l?.lineAt(o.lineNumber);if(l&&p){let u=bT(p),d=vT(p);if(!d)return r;r.functionName=`${d.code})`,r.location=o,n||(l=l.mapLineAt(o.lineNumber,f=>f.slice(0,d.openingBraceIndex))),l=a.highlightSource(l);let m=String(l.lastLineNumber).length;if(r.contextLines=l.mapLines((f,x)=>a.gray(String(x).padStart(m))+" "+f).mapLines(f=>a.dim(f)).prependSymbolAt(o.lineNumber,a.bold(a.red("\u2192"))),s){let f=u+m+1;f+=2,r.callArguments=(0,sT.default)(s,f).slice(f)}}return r}function vT(e){let t=Object.keys(Mo).join("|"),i=new RegExp(String.raw`\.(${t})\(`).exec(e);if(i){let n=i.index+i[0].length,s=e.lastIndexOf(" ",i.index)+1;return{code:e.slice(s,n),openingBraceIndex:n}}return null}function bT(e){let t=0;for(let i=0;i<e.length;i++){if(e.charAt(i)!==" ")return t;t++}return t}function yT({functionName:e,location:t,message:i,isPanic:n,contextLines:s,callArguments:a},r){let o=[""],c=t?" in":":";if(n?(o.push(r.red(`Oops, an unknown error occurred! This is ${r.bold("on us")}, you did nothing wrong.`)),o.push(r.red(`It occurred in the ${r.bold(`\`${e}\``)} invocation${c}`))):o.push(r.red(`Invalid ${r.bold(`\`${e}\``)} invocation${c}`)),t&&o.push(r.underline(wT(t))),s){o.push("");let l=[s.toString()];a&&(l.push(a),l.push(r.dim(")"))),o.push(l.join("")),a&&o.push("")}else o.push(""),a&&o.push(a),o.push("");return o.push(i),o.join(`
`)}function wT(e){let t=[e.fileName];return e.lineNumber&&t.push(String(e.lineNumber)),e.columnNumber&&t.push(String(e.columnNumber)),t.join(":")}function Bv(e){let t=e.showColors?hT:fT,i;return i=xT(e,t),yT(i,t)}var _T=ee(tv());function ET(e,t,i){let n=zv(e),s=kT(n),a=AT(s);a?Gv(a,t,i):t.addErrorMessage(()=>"Unknown error")}function zv(e){return e.errors.flatMap(t=>t.kind==="Union"?zv(t):[t])}function kT(e){let t=new Map,i=[];for(let n of e){if(n.kind!=="InvalidArgumentType"){i.push(n);continue}let s=`${n.selectionPath.join(".")}:${n.argumentPath.join(".")}`,a=t.get(s);a?t.set(s,{...n,argument:{...n.argument,typeNames:ST(a.argument.typeNames,n.argument.typeNames)}}):t.set(s,n)}return i.push(...t.values()),i}function ST(e,t){return[...new Set(e.concat(t))]}function AT(e){return aA(e,(t,i)=>{let n=gx(t),s=gx(i);return n!==s?n-s:xx(t)-xx(i)})}function gx(e){let t=0;return Array.isArray(e.selectionPath)&&(t+=e.selectionPath.length),Array.isArray(e.argumentPath)&&(t+=e.argumentPath.length),t}function xx(e){switch(e.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var Pi=class{constructor(e,t){this.name=e,this.value=t}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(e){let{colors:{green:t}}=e.context;e.addMarginSymbol(t(this.isRequired?"+":"?")),e.write(t(this.name)),this.isRequired||e.write(t("?")),e.write(t(": ")),typeof this.value=="string"?e.write(t(this.value)):e.write(this.value)}};nS();var Uv=class{constructor(e=0,t){this.context=t,this.currentIndent=e}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(e){return typeof e=="string"?this.currentLine+=e:e.write(this),this}writeJoined(e,t,i=(n,s)=>s.write(n)){let n=t.length-1;for(let s=0;s<t.length;s++)i(t[s],this),s!==n&&this.write(e);return this}writeLine(e){return this.write(e).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let e=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,e?.(),this}withIndent(e){return this.indent(),e(this),this.unindent(),this}afterNextNewline(e){return this.afterNextNewLineCallback=e,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(e){return this.marginSymbol=e,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let e=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+e.slice(1):e}};iS();var TT=class{constructor(e){this.value=e}write(e){e.write(this.value)}markAsError(){this.value.markAsError()}},ho=e=>e,Hv={bold:ho,red:ho,green:ho,dim:ho,enabled:!1},CT={bold:pi,red:cs,green:Da,dim:Wa,enabled:!0},Rp={write(e){e.writeLine(",")}},Do=class{constructor(e){this.contents=e}isUnderlined=!1;color=e=>e;underline(){return this.isUnderlined=!0,this}setColor(e){return this.color=e,this}write(e){let t=e.getCurrentLineLength();e.write(this.color(this.contents)),this.isUnderlined&&e.afterNextNewline(()=>{e.write(" ".repeat(t)).writeLine(this.color("~".repeat(this.contents.length)))})}},qp=class{hasError=!1;markAsError(){return this.hasError=!0,this}},Vv=class extends qp{items=[];addItem(e){return this.items.push(new TT(e)),this}getField(e){return this.items[e]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(e=>e.value.getPrintWidth()))+2}write(e){if(this.items.length===0){this.writeEmpty(e);return}this.writeWithItems(e)}writeEmpty(e){let t=new Do("[]");this.hasError&&t.setColor(e.context.colors.red).underline(),e.write(t)}writeWithItems(e){let{colors:t}=e.context;e.writeLine("[").withIndent(()=>e.writeJoined(Rp,this.items).newLine()).write("]"),this.hasError&&e.afterNextNewline(()=>{e.writeLine(t.red("~".repeat(this.getPrintWidth())))})}asObject(){}},Kv=class bo extends qp{fields={};suggestions=[];addField(t){this.fields[t.name]=t}addSuggestion(t){this.suggestions.push(t)}getField(t){return this.fields[t]}getDeepField(t){let[i,...n]=t,s=this.getField(i);if(!s)return;let a=s;for(let r of n){let o;if(a.value instanceof bo?o=a.value.getField(r):a.value instanceof Vv&&(o=a.value.getField(Number(r))),!o)return;a=o}return a}getDeepFieldValue(t){return t.length===0?this:this.getDeepField(t)?.value}hasField(t){return!!this.getField(t)}removeAllFields(){this.fields={}}removeField(t){delete this.fields[t]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(t){return this.getField(t)?.value}getDeepSubSelectionValue(t){let i=this;for(let n of t){if(!(i instanceof bo))return;let s=i.getSubSelectionValue(n);if(!s)return;i=s}return i}getDeepSelectionParent(t){let i=this.getSelectionParent();if(!i)return;let n=i;for(let s of t){let a=n.value.getFieldValue(s);if(!a||!(a instanceof bo))return;let r=a.getSelectionParent();if(!r)return;n=r}return n}getSelectionParent(){let t=this.getField("select")?.value.asObject();if(t)return{kind:"select",value:t};let i=this.getField("include")?.value.asObject();if(i)return{kind:"include",value:i}}getSubSelectionValue(t){return this.getSelectionParent()?.value.fields[t].value}getPrintWidth(){let t=Object.values(this.fields);return t.length==0?2:Math.max(...t.map(i=>i.getPrintWidth()))+2}write(t){let i=Object.values(this.fields);if(i.length===0&&this.suggestions.length===0){this.writeEmpty(t);return}this.writeWithContents(t,i)}asObject(){return this}writeEmpty(t){let i=new Do("{}");this.hasError&&i.setColor(t.context.colors.red).underline(),t.write(i)}writeWithContents(t,i){t.writeLine("{").withIndent(()=>{t.writeJoined(Rp,[...i,...this.suggestions]).newLine()}),t.write("}"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(t.context.colors.red("~".repeat(this.getPrintWidth())))})}},kt=class extends qp{constructor(e){super(),this.text=e}getPrintWidth(){return this.text.length}write(e){let t=new Do(this.text);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t)}asObject(){}},Wv=class{fields=[];addField(e,t){return this.fields.push({write(i){let{green:n,dim:s}=i.context.colors;i.write(n(s(`${e}: ${t}`))).addMarginSymbol(n(s("+")))}}),this}write(e){let{colors:{green:t}}=e.context;e.writeLine(t("{")).withIndent(()=>{e.writeJoined(Rp,this.fields).newLine()}).write(t("}")).addMarginSymbol(t("+"))}};function Gv(e,t,i){switch(e.kind){case"MutuallyExclusiveFields":jT(e,t);break;case"IncludeOnScalar":RT(e,t);break;case"EmptySelection":qT(e,t,i);break;case"UnknownSelectionField":$T(e,t);break;case"InvalidSelectionValue":NT(e,t);break;case"UnknownArgument":FT(e,t);break;case"UnknownInputField":LT(e,t);break;case"RequiredArgumentMissing":MT(e,t);break;case"InvalidArgumentType":DT(e,t);break;case"InvalidArgumentValue":BT(e,t);break;case"ValueTooLarge":zT(e,t);break;case"SomeFieldsMissing":UT(e,t);break;case"TooManyFieldsGiven":HT(e,t);break;case"Union":ET(e,t,i);break;default:throw new Error("not implemented: "+e.kind)}}function jT(e,t){let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&(i.getField(e.firstField)?.markAsError(),i.getField(e.secondField)?.markAsError()),t.addErrorMessage(n=>`Please ${n.bold("either")} use ${n.green(`\`${e.firstField}\``)} or ${n.green(`\`${e.secondField}\``)}, but ${n.red("not both")} at the same time.`)}function RT(e,t){let[i,n]=Ya(e.selectionPath),s=e.outputType,a=t.arguments.getDeepSelectionParent(i)?.value;if(a&&(a.getField(n)?.markAsError(),s))for(let r of s.fields)r.isRelation&&a.addSuggestion(new Pi(r.name,"true"));t.addErrorMessage(r=>{let o=`Invalid scalar field ${r.red(`\`${n}\``)} for ${r.bold("include")} statement`;return s?o+=` on model ${r.bold(s.name)}. ${Za(r)}`:o+=".",o+=`
Note that ${r.bold("include")} statements only accept relation fields.`,o})}function qT(e,t,i){let n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){let s=n.getField("omit")?.value.asObject();if(s){PT(e,t,s);return}if(n.hasField("select")){OT(e,t);return}}if(i?.[Lo(e.outputType.name)]){IT(e,t);return}t.addErrorMessage(()=>`Unknown field at "${e.selectionPath.join(".")} selection"`)}function PT(e,t,i){i.removeAllFields();for(let n of e.outputType.fields)i.addSuggestion(new Pi(n.name,"false"));t.addErrorMessage(n=>`The ${n.red("omit")} statement includes every field of the model ${n.bold(e.outputType.name)}. At least one field must be included in the result`)}function OT(e,t){let i=e.outputType,n=t.arguments.getDeepSelectionParent(e.selectionPath)?.value,s=n?.isEmpty()??!1;n&&(n.removeAllFields(),Yv(n,i)),t.addErrorMessage(a=>s?`The ${a.red("`select`")} statement for type ${a.bold(i.name)} must not be empty. ${Za(a)}`:`The ${a.red("`select`")} statement for type ${a.bold(i.name)} needs ${a.bold("at least one truthy value")}.`)}function IT(e,t){let i=new Wv;for(let s of e.outputType.fields)s.isRelation||i.addField(s.name,"false");let n=new Pi("omit",i).makeRequired();if(e.selectionPath.length===0)t.arguments.addSuggestion(n);else{let[s,a]=Ya(e.selectionPath),r=t.arguments.getDeepSelectionParent(s)?.value.asObject()?.getField(a);if(r){let o=r?.value.asObject()??new Kv;o.addSuggestion(n),r.value=o}}t.addErrorMessage(s=>`The global ${s.red("omit")} configuration excludes every field of the model ${s.bold(e.outputType.name)}. At least one field must be included in the result`)}function $T(e,t){let i=Zv(e.selectionPath,t);if(i.parentKind!=="unknown"){i.field.markAsError();let n=i.parent;switch(i.parentKind){case"select":Yv(n,e.outputType);break;case"include":VT(n,e.outputType);break;case"omit":KT(n,e.outputType);break}}t.addErrorMessage(n=>{let s=[`Unknown field ${n.red(`\`${i.fieldName}\``)}`];return i.parentKind!=="unknown"&&s.push(`for ${n.bold(i.parentKind)} statement`),s.push(`on model ${n.bold(`\`${e.outputType.name}\``)}.`),s.push(Za(n)),s.join(" ")})}function NT(e,t){let i=Zv(e.selectionPath,t);i.parentKind!=="unknown"&&i.field.value.markAsError(),t.addErrorMessage(n=>`Invalid value for selection field \`${n.red(i.fieldName)}\`: ${e.underlyingError}`)}function FT(e,t){let i=e.argumentPath[0],n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();n&&(n.getField(i)?.markAsError(),WT(n,e.arguments)),t.addErrorMessage(s=>Jv(s,i,e.arguments.map(a=>a.name)))}function LT(e,t){let[i,n]=Ya(e.argumentPath),s=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(s){s.getDeepField(e.argumentPath)?.markAsError();let a=s.getDeepFieldValue(i)?.asObject();a&&Xv(a,e.inputType)}t.addErrorMessage(a=>Jv(a,n,e.inputType.fields.map(r=>r.name)))}function Jv(e,t,i){let n=[`Unknown argument \`${e.red(t)}\`.`],s=JT(t,i);return s&&n.push(`Did you mean \`${e.green(s)}\`?`),i.length>0&&n.push(Za(e)),n.join(" ")}function MT(e,t){let i;t.addErrorMessage(c=>i?.value instanceof kt&&i.value.text==="null"?`Argument \`${c.green(a)}\` must not be ${c.red("null")}.`:`Argument \`${c.green(a)}\` is missing.`);let n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(!n)return;let[s,a]=Ya(e.argumentPath),r=new Wv,o=n.getDeepFieldValue(s)?.asObject();if(o)if(i=o.getField(a),i&&o.removeField(a),e.inputTypes.length===1&&e.inputTypes[0].kind==="object"){for(let c of e.inputTypes[0].fields)r.addField(c.name,c.typeNames.join(" | "));o.addSuggestion(new Pi(a,r).makeRequired())}else{let c=e.inputTypes.map(Qv).join(" | ");o.addSuggestion(new Pi(a,c).makeRequired())}}function Qv(e){return e.kind==="list"?`${Qv(e.elementType)}[]`:e.name}function DT(e,t){let i=e.argument.name,n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();n&&n.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(s=>{let a=Bo("or",e.argument.typeNames.map(r=>s.green(r)));return`Argument \`${s.bold(i)}\`: Invalid value provided. Expected ${a}, provided ${s.red(e.inferredType)}.`})}function BT(e,t){let i=e.argument.name,n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();n&&n.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(s=>{let a=[`Invalid value for argument \`${s.bold(i)}\``];if(e.underlyingError&&a.push(`: ${e.underlyingError}`),a.push("."),e.argument.typeNames.length>0){let r=Bo("or",e.argument.typeNames.map(o=>s.green(o)));a.push(` Expected ${r}.`)}return a.join("")})}function zT(e,t){let i=e.argument.name,n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),s;if(n){let a=n.getDeepField(e.argumentPath)?.value;a?.markAsError(),a instanceof kt&&(s=a.text)}t.addErrorMessage(a=>{let r=["Unable to fit value"];return s&&r.push(a.red(s)),r.push(`into a 64-bit signed integer for field \`${a.bold(i)}\``),r.join(" ")})}function UT(e,t){let i=e.argumentPath[e.argumentPath.length-1],n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){let s=n.getDeepFieldValue(e.argumentPath)?.asObject();s&&Xv(s,e.inputType)}t.addErrorMessage(s=>{let a=[`Argument \`${s.bold(i)}\` of type ${s.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1?e.constraints.requiredFields?a.push(`${s.green("at least one of")} ${Bo("or",e.constraints.requiredFields.map(r=>`\`${s.bold(r)}\``))} arguments.`):a.push(`${s.green("at least one")} argument.`):a.push(`${s.green(`at least ${e.constraints.minFieldCount}`)} arguments.`),a.push(Za(s)),a.join(" ")})}function HT(e,t){let i=e.argumentPath[e.argumentPath.length-1],n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),s=[];if(n){let a=n.getDeepFieldValue(e.argumentPath)?.asObject();a&&(a.markAsError(),s=Object.keys(a.getFields()))}t.addErrorMessage(a=>{let r=[`Argument \`${a.bold(i)}\` of type ${a.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1&&e.constraints.maxFieldCount==1?r.push(`${a.green("exactly one")} argument,`):e.constraints.maxFieldCount==1?r.push(`${a.green("at most one")} argument,`):r.push(`${a.green(`at most ${e.constraints.maxFieldCount}`)} arguments,`),r.push(`but you provided ${Bo("and",s.map(o=>a.red(o)))}. Please choose`),e.constraints.maxFieldCount===1?r.push("one."):r.push(`${e.constraints.maxFieldCount}.`),r.join(" ")})}function Yv(e,t){for(let i of t.fields)e.hasField(i.name)||e.addSuggestion(new Pi(i.name,"true"))}function VT(e,t){for(let i of t.fields)i.isRelation&&!e.hasField(i.name)&&e.addSuggestion(new Pi(i.name,"true"))}function KT(e,t){for(let i of t.fields)!e.hasField(i.name)&&!i.isRelation&&e.addSuggestion(new Pi(i.name,"true"))}function WT(e,t){for(let i of t)e.hasField(i.name)||e.addSuggestion(new Pi(i.name,i.typeNames.join(" | ")))}function Zv(e,t){let[i,n]=Ya(e),s=t.arguments.getDeepSubSelectionValue(i)?.asObject();if(!s)return{parentKind:"unknown",fieldName:n};let a=s.getFieldValue("select")?.asObject(),r=s.getFieldValue("include")?.asObject(),o=s.getFieldValue("omit")?.asObject(),c=a?.getField(n);return a&&c?{parentKind:"select",parent:a,field:c,fieldName:n}:(c=r?.getField(n),r&&c?{parentKind:"include",field:c,parent:r,fieldName:n}:(c=o?.getField(n),o&&c?{parentKind:"omit",field:c,parent:o,fieldName:n}:{parentKind:"unknown",fieldName:n}))}function Xv(e,t){if(t.kind==="object")for(let i of t.fields)e.hasField(i.name)||e.addSuggestion(new Pi(i.name,i.typeNames.join(" | ")))}function Ya(e){let t=[...e],i=t.pop();if(!i)throw new Error("unexpected empty path");return[t,i]}function Za({green:e,enabled:t}){return"Available options are "+(t?`listed in ${e("green")}`:"marked with ?")+"."}function Bo(e,t){if(t.length===1)return t[0];let i=[...t],n=i.pop();return`${i.join(", ")} ${e} ${n}`}var GT=3;function JT(e,t){let i=1/0,n;for(let s of t){let a=(0,_T.default)(e,s);a>GT||a<i&&(i=a,n=s)}return n}var eb=class{modelName;name;typeName;isList;isEnum;constructor(e,t,i,n,s){this.modelName=e,this.name=t,this.typeName=i,this.isList=n,this.isEnum=s}_toGraphQLInputType(){let e=this.isList?"List":"",t=this.isEnum?"Enum":"";return`${e}${t}${this.typeName}FieldRefInput<${this.modelName}>`}};function Pp(e){return e instanceof eb}var yo=Symbol(),Nl=new WeakMap,zo=class{constructor(e){e===yo?Nl.set(this,`Prisma.${this._getName()}`):Nl.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return Nl.get(this)}},Op=class extends zo{_getNamespace(){return"NullTypes"}},op=class extends Op{#e};Ip(op,"DbNull");var cp=class extends Op{#e};Ip(cp,"JsonNull");var lp=class extends Op{#e};Ip(lp,"AnyNull");var tb={classes:{DbNull:op,JsonNull:cp,AnyNull:lp},instances:{DbNull:new op(yo),JsonNull:new cp(yo),AnyNull:new lp(yo)}};function Ip(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var vx=": ",QT=class{constructor(e,t){this.name=e,this.value=t}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+vx.length}write(e){let t=new Do(this.name);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t).write(vx).write(this.value)}},YT=class{arguments;errorMessages=[];constructor(e){this.arguments=e}write(e){e.write(this.arguments)}addErrorMessage(e){this.errorMessages.push(e)}renderAllMessages(e){return this.errorMessages.map(t=>t(e)).join(`
`)}};function $p(e){return new YT(ib(e))}function ib(e){let t=new Kv;for(let[i,n]of Object.entries(e)){let s=new QT(i,nb(n));t.addField(s)}return t}function nb(e){if(typeof e=="string")return new kt(JSON.stringify(e));if(typeof e=="number"||typeof e=="boolean")return new kt(String(e));if(typeof e=="bigint")return new kt(`${e}n`);if(e===null)return new kt("null");if(e===void 0)return new kt("undefined");if(jp(e))return new kt(`new Prisma.Decimal("${e.toFixed()}")`);if(e instanceof Uint8Array)return Buffer.isBuffer(e)?new kt(`Buffer.alloc(${e.byteLength})`):new kt(`new Uint8Array(${e.byteLength})`);if(e instanceof Date){let t=Mv(e)?e.toISOString():"Invalid Date";return new kt(`new Date("${t}")`)}return e instanceof zo?new kt(`Prisma.${e._getName()}`):Pp(e)?new kt(`prisma.${Lo(e.modelName)}.$fields.${e.name}`):Array.isArray(e)?ZT(e):typeof e=="object"?ib(e):new kt(Object.prototype.toString.call(e))}function ZT(e){let t=new Vv;for(let i of e)t.addItem(nb(i));return t}function sb(e,t){let i=t==="pretty"?CT:Hv,n=e.renderAllMessages(i),s=new Uv(0,{colors:i}).write(e).toString();return{message:n,args:s}}function ab({args:e,errors:t,errorFormat:i,callsite:n,originalMethod:s,clientVersion:a,globalOmit:r}){let o=$p(e);for(let u of t)Gv(u,o,r);let{message:c,args:l}=sb(o,i),p=Bv({message:c,callsite:n,originalMethod:s,showColors:i==="pretty",callArguments:l});throw new Ki(p,{clientVersion:a})}function Xa(e){return e.replace(/^./,t=>t.toLowerCase())}function XT(e,t,i){let n=Xa(i);return!t.result||!(t.result.$allModels||t.result[n])?e:eC({...e,...bx(t.name,e,t.result.$allModels),...bx(t.name,e,t.result[n])})}function eC(e){let t=new Fa,i=(n,s)=>t.getOrCreate(n,()=>s.has(n)?[n]:(s.add(n),e[n]?e[n].needs.flatMap(a=>i(a,s)):[n]));return Ap(e,n=>({...n,needs:i(n.name,new Set)}))}function bx(e,t,i){return i?Ap(i,({needs:n,compute:s},a)=>({name:a,needs:n?Object.keys(n).filter(r=>n[r]):[],compute:tC(t,a,s)})):{}}function tC(e,t,i){let n=e?.[t]?.compute;return n?s=>i({...s,[t]:n(s)}):i}function iC(e,t){if(!t)return e;let i={...e};for(let n of Object.values(t))if(e[n.name])for(let s of n.needs)i[s]=!0;return i}function nC(e,t){if(!t)return e;let i={...e};for(let n of Object.values(t))if(!e[n.name])for(let s of n.needs)delete i[s];return i}var yx=class{constructor(e,t){this.extension=e,this.previous=t}computedFieldsCache=new Fa;modelExtensionsCache=new Fa;queryCallbacksCache=new Fa;clientExtensions=rp(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=rp(()=>{let e=this.previous?.getAllBatchQueryCallbacks()??[],t=this.extension.query?.$__internalBatch;return t?e.concat(t):e});getAllComputedFields(e){return this.computedFieldsCache.getOrCreate(e,()=>XT(this.previous?.getAllComputedFields(e),this.extension,e))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(e){return this.modelExtensionsCache.getOrCreate(e,()=>{let t=Xa(e);return!this.extension.model||!(this.extension.model[t]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(e):{...this.previous?.getAllModelExtensions(e),...this.extension.model.$allModels,...this.extension.model[t]}})}getAllQueryCallbacks(e,t){return this.queryCallbacksCache.getOrCreate(`${e}:${t}`,()=>{let i=this.previous?.getAllQueryCallbacks(e,t)??[],n=[],s=this.extension.query;return!s||!(s[e]||s.$allModels||s[t]||s.$allOperations)?i:(s[e]!==void 0&&(s[e][t]!==void 0&&n.push(s[e][t]),s[e].$allOperations!==void 0&&n.push(s[e].$allOperations)),e!=="$none"&&s.$allModels!==void 0&&(s.$allModels[t]!==void 0&&n.push(s.$allModels[t]),s.$allModels.$allOperations!==void 0&&n.push(s.$allModels.$allOperations)),s[t]!==void 0&&n.push(s[t]),s.$allOperations!==void 0&&n.push(s.$allOperations),i.concat(n))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},rb=class wo{constructor(t){this.head=t}static empty(){return new wo}static single(t){return new wo(new yx(t))}isEmpty(){return this.head===void 0}append(t){return new wo(new yx(t,this.head))}getAllComputedFields(t){return this.head?.getAllComputedFields(t)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(t){return this.head?.getAllModelExtensions(t)}getAllQueryCallbacks(t,i){return this.head?.getAllQueryCallbacks(t,i)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},ob=class{constructor(e){this.name=e}};function sC(e){return e instanceof ob}function aC(e){return new ob(e)}var cb=Symbol(),lb=class{constructor(e){if(e!==cb)throw new Error("Skip instance can not be constructed directly")}ifUndefined(e){return e===void 0?pb:e}},pb=new lb(cb);function ls(e){return e instanceof lb}var rC={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},ub="explicitly `undefined` values are not allowed";function db({modelName:e,action:t,args:i,runtimeDataModel:n,extensions:s=rb.empty(),callsite:a,clientMethod:r,errorFormat:o,clientVersion:c,previewFeatures:l,globalOmit:p}){let u=new fC({runtimeDataModel:n,modelName:e,action:t,rootArgs:i,callsite:a,extensions:s,selectionPath:[],argumentPath:[],originalMethod:r,errorFormat:o,clientVersion:c,previewFeatures:l,globalOmit:p});return{modelName:e,action:rC[t],query:Ka(i,u)}}function Ka({select:e,include:t,...i}={},n){let s=i.omit;return delete i.omit,{arguments:hb(i,n),selection:oC(e,t,s,n)}}function oC(e,t,i,n){return e?(t?n.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:n.getSelectionPath()}):i&&n.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:n.getSelectionPath()}),uC(e,n)):cC(n,t,i)}function cC(e,t,i){let n={};return e.modelOrType&&!e.isRawAction()&&(n.$composites=!0,n.$scalars=!0),t&&lC(n,t,e),pC(n,i,e),n}function lC(e,t,i){for(let[n,s]of Object.entries(t)){if(ls(s))continue;let a=i.nestSelection(n);if(Np(s,a),s===!1||s===void 0){e[n]=!1;continue}let r=i.findField(n);if(r&&r.kind!=="object"&&i.throwValidationError({kind:"IncludeOnScalar",selectionPath:i.getSelectionPath().concat(n),outputType:i.getOutputTypeDescription()}),r){e[n]=Ka(s===!0?{}:s,a);continue}if(s===!0){e[n]=!0;continue}e[n]=Ka(s,a)}}function pC(e,t,i){let n=i.getComputedFields(),s={...i.getGlobalOmit(),...t},a=nC(s,n);for(let[r,o]of Object.entries(a)){if(ls(o))continue;Np(o,i.nestSelection(r));let c=i.findField(r);n?.[r]&&!c||(e[r]=!o)}}function uC(e,t){let i={},n=t.getComputedFields(),s=iC(e,n);for(let[a,r]of Object.entries(s)){if(ls(r))continue;let o=t.nestSelection(a);Np(r,o);let c=t.findField(a);if(!(n?.[a]&&!c)){if(r===!1||r===void 0||ls(r)){i[a]=!1;continue}if(r===!0){c?.kind==="object"?i[a]=Ka({},o):i[a]=!0;continue}i[a]=Ka(r,o)}}return i}function mb(e,t){if(e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="bigint")return{$type:"BigInt",value:String(e)};if(Cp(e)){if(Mv(e))return{$type:"DateTime",value:e.toISOString()};t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(sC(e))return{$type:"Param",value:e.name};if(Pp(e))return{$type:"FieldRef",value:{_ref:e.name,_container:e.modelName}};if(Array.isArray(e))return dC(e,t);if(ArrayBuffer.isView(e)){let{buffer:i,byteOffset:n,byteLength:s}=e;return{$type:"Bytes",value:Buffer.from(i,n,s).toString("base64")}}if(mC(e))return e.values;if(jp(e))return{$type:"Decimal",value:e.toFixed()};if(e instanceof zo){if(e!==tb.instances[e._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:e._getName()}}if(hC(e))return e.toJSON();if(typeof e=="object")return hb(e,t);t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(e)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function hb(e,t){if(e.$type)return{$type:"Raw",value:e};let i={};for(let n in e){let s=e[n],a=t.nestArgument(n);ls(s)||(s!==void 0?i[n]=mb(s,a):t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidArgumentValue",argumentPath:a.getArgumentPath(),selectionPath:t.getSelectionPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:ub}))}return i}function dC(e,t){let i=[];for(let n=0;n<e.length;n++){let s=t.nestArgument(String(n)),a=e[n];if(a===void 0||ls(a)){let r=a===void 0?"undefined":"Prisma.skip";t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:s.getSelectionPath(),argumentPath:s.getArgumentPath(),argument:{name:`${t.getArgumentName()}[${n}]`,typeNames:[]},underlyingError:`Can not use \`${r}\` value within array. Use \`null\` or filter out \`${r}\` values`})}i.push(mb(a,s))}return i}function mC(e){return typeof e=="object"&&e!==null&&e.__prismaRawParameters__===!0}function hC(e){return typeof e=="object"&&e!==null&&typeof e.toJSON=="function"}function Np(e,t){e===void 0&&t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidSelectionValue",selectionPath:t.getSelectionPath(),underlyingError:ub})}var fC=class pp{constructor(t){this.params=t,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(t){ab({errors:[t],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(t=>({name:t.name,typeName:"boolean",isRelation:t.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(t){return this.params.previewFeatures.includes(t)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(t){return this.modelOrType?.fields.find(i=>i.name===t)}nestSelection(t){let i=this.findField(t),n=i?.kind==="object"?i.type:void 0;return new pp({...this.params,modelName:n,selectionPath:this.params.selectionPath.concat(t)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[Lo(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:Io(this.params.action,"Unknown action")}}nestArgument(t){return new pp({...this.params,argumentPath:this.params.argumentPath.concat(t)})}};function wx(e){if(!e._hasPreviewFlag("metrics"))throw new Ki("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:e._clientVersion})}var fb=class{_client;constructor(e){this._client=e}prometheus(e){return wx(this._client),this._client._engine.metrics({format:"prometheus",...e})}json(e){return wx(this._client),this._client._engine.metrics({format:"json",...e})}};function gC(e,t){let i=rp(()=>xC(t));Object.defineProperty(e,"dmmf",{get:()=>i.get()})}function xC(e){return{datamodel:{models:Fl(e.models),enums:Fl(e.enums),types:Fl(e.types)}}}function Fl(e){return Object.entries(e).map(([t,i])=>({name:t,...i}))}var Ll=new WeakMap,Ro="$$PrismaTypedSql",gb=class{constructor(e,t){Ll.set(this,{sql:e,values:t}),Object.defineProperty(this,Ro,{value:Ro})}get sql(){return Ll.get(this).sql}get values(){return Ll.get(this).values}};function vC(e){return(...t)=>new gb(e,t)}function xb(e){return e!=null&&e[Ro]===Ro}var bC=ee(Yx()),yC=require("node:async_hooks"),wC=require("node:events"),_C=ee(require("node:fs")),Ml=ee(require("node:path")),Rn=class up{constructor(t,i){if(t.length-1!==i.length)throw t.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${t.length} strings to have ${t.length-1} values`);let n=i.reduce((r,o)=>r+(o instanceof up?o.values.length:1),0);this.values=new Array(n),this.strings=new Array(n+1),this.strings[0]=t[0];let s=0,a=0;for(;s<i.length;){let r=i[s++],o=t[s];if(r instanceof up){this.strings[a]+=r.strings[0];let c=0;for(;c<r.values.length;)this.values[a++]=r.values[c++],this.strings[a]=r.strings[c];this.strings[a]+=o}else this.values[a++]=r,this.strings[a]=o}}get sql(){let t=this.strings.length,i=1,n=this.strings[0];for(;i<t;)n+=`?${this.strings[i++]}`;return n}get statement(){let t=this.strings.length,i=1,n=this.strings[0];for(;i<t;)n+=`:${i}${this.strings[i++]}`;return n}get text(){let t=this.strings.length,i=1,n=this.strings[0];for(;i<t;)n+=`$${i}${this.strings[i++]}`;return n}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function EC(e,t=",",i="",n=""){if(e.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new Rn([i,...Array(e.length-1).fill(t),n],e)}function vb(e){return new Rn([e],[])}var kC=vb("");function SC(e,...t){return new Rn(e,t)}function bb(e){return{getKeys(){return Object.keys(e)},getPropertyValue(t){return e[t]}}}function Ri(e,t){return{getKeys(){return[e]},getPropertyValue(){return t()}}}function Fp(e){let t=new Fa;return{getKeys(){return e.getKeys()},getPropertyValue(i){return t.getOrCreate(i,()=>e.getPropertyValue(i))},getPropertyDescriptor(i){return e.getPropertyDescriptor?.(i)}}}var dp={enumerable:!0,configurable:!0,writable:!0};function yb(e){let t=new Set(e);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>dp,has:(i,n)=>t.has(n),set:(i,n,s)=>t.add(n)&&Reflect.set(i,n,s),ownKeys:()=>[...t]}}var _x=Symbol.for("nodejs.util.inspect.custom");function Ds(e,t){let i=AC(t),n=new Set,s=new Proxy(e,{get(a,r){if(n.has(r))return a[r];let o=i.get(r);return o?o.getPropertyValue(r):a[r]},has(a,r){if(n.has(r))return!0;let o=i.get(r);return o?o.has?.(r)??!0:Reflect.has(a,r)},ownKeys(a){let r=Ex(Reflect.ownKeys(a),i),o=Ex(Array.from(i.keys()),i);return[...new Set([...r,...o,...n])]},set(a,r,o){return i.get(r)?.getPropertyDescriptor?.(r)?.writable===!1?!1:(n.add(r),Reflect.set(a,r,o))},getOwnPropertyDescriptor(a,r){let o=Reflect.getOwnPropertyDescriptor(a,r);if(o&&!o.configurable)return o;let c=i.get(r);return c?c.getPropertyDescriptor?{...dp,...c?.getPropertyDescriptor(r)}:dp:o},defineProperty(a,r,o){return n.add(r),Reflect.defineProperty(a,r,o)},getPrototypeOf:()=>Object.prototype});return s[_x]=function(){let a={...this};return delete a[_x],a},s}function AC(e){let t=new Map;for(let i of e){let n=i.getKeys();for(let s of n)t.set(s,i)}return t}function Ex(e,t){return e.filter(i=>t.get(i)?.has?.(i)??!0)}function mp(e){return{getKeys(){return e},has(){return!1},getPropertyValue(){}}}function Lp(e,t){return{batch:e,transaction:t?.kind==="batch"?{isolationLevel:t.options.isolationLevel}:void 0}}function TC(e){if(e===void 0)return"";let t=$p(e);return new Uv(0,{colors:Hv}).write(t).toString()}var CC="P2037";function Mp({error:e,user_facing_error:t},i,n){return t.error_code?new Tn(jC(t,n),{code:t.error_code,clientVersion:i,meta:t.meta,batchRequestIdx:t.batch_request_idx}):new Ot(e,{clientVersion:i,batchRequestIdx:t.batch_request_idx})}function jC(e,t){let i=e.message;return(t==="postgresql"||t==="postgres"||t==="mysql")&&e.error_code===CC&&(i+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),i}var er="<unknown>";function RC(e){var t=e.split(`
`);return t.reduce(function(i,n){var s=OC(n)||$C(n)||LC(n)||zC(n)||DC(n);return s&&i.push(s),i},[])}var qC=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,PC=/\((\S*)(?::(\d+))(?::(\d+))\)/;function OC(e){var t=qC.exec(e);if(!t)return null;var i=t[2]&&t[2].indexOf("native")===0,n=t[2]&&t[2].indexOf("eval")===0,s=PC.exec(t[2]);return n&&s!=null&&(t[2]=s[1],t[3]=s[2],t[4]=s[3]),{file:i?null:t[2],methodName:t[1]||er,arguments:i?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var IC=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function $C(e){var t=IC.exec(e);return t?{file:t[2],methodName:t[1]||er,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var NC=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,FC=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function LC(e){var t=NC.exec(e);if(!t)return null;var i=t[3]&&t[3].indexOf(" > eval")>-1,n=FC.exec(t[3]);return i&&n!=null&&(t[3]=n[1],t[4]=n[2],t[5]=null),{file:t[3],methodName:t[1]||er,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var MC=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function DC(e){var t=MC.exec(e);return t?{file:t[3],methodName:t[1]||er,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var BC=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function zC(e){var t=BC.exec(e);return t?{file:t[2],methodName:t[1]||er,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var UC=class{getLocation(){return null}},HC=class{_error;constructor(){this._error=new Error}getLocation(){let e=this._error.stack;if(!e)return null;let t=RC(e).find(i=>{if(!i.file)return!1;let n=eA(i.file);return n!=="<anonymous>"&&!n.includes("@prisma")&&!n.includes("/packages/client/src/runtime/")&&!n.endsWith("/runtime/binary.js")&&!n.endsWith("/runtime/library.js")&&!n.endsWith("/runtime/edge.js")&&!n.endsWith("/runtime/edge-esm.js")&&!n.startsWith("internal/")&&!i.methodName.includes("new ")&&!i.methodName.includes("getCallSite")&&!i.methodName.includes("Proxy.")&&i.methodName.split(".").length<4});return!t||!t.file?null:{fileName:t.file,lineNumber:t.lineNumber,columnNumber:t.column}}};function La(e){return e==="minimal"?typeof $EnabledCallSite=="function"&&e!=="minimal"?new $EnabledCallSite:new UC:new HC}var VC={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function qo(e={}){let t=KC(e);return Object.entries(t).reduce((i,[n,s])=>(VC[n]!==void 0?i.select[n]={select:s}:i[n]=s,i),{select:{}})}function KC(e={}){return typeof e._count=="boolean"?{...e,_count:{_all:e._count}}:e}function hp(e={}){return t=>(typeof e._count=="boolean"&&(t._count=t._count._all),t)}function WC(e,t){let i=hp(e);return t({action:"aggregate",unpacker:i,argsMapper:qo})(e)}function GC(e={}){let{select:t,...i}=e;return qo(typeof t=="object"?{...i,_count:t}:{...i,_count:{_all:!0}})}function JC(e={}){return typeof e.select=="object"?t=>hp(e)(t)._count:t=>hp(e)(t)._count._all}function QC(e,t){return t({action:"count",unpacker:JC(e),argsMapper:GC})(e)}function YC(e={}){let t=qo(e);if(Array.isArray(t.by))for(let i of t.by)typeof i=="string"&&(t.select[i]=!0);else typeof t.by=="string"&&(t.select[t.by]=!0);return t}function ZC(e={}){return t=>(typeof e?._count=="boolean"&&t.forEach(i=>{i._count=i._count._all}),t)}function XC(e,t){return t({action:"groupBy",unpacker:ZC(e),argsMapper:YC})(e)}function ej(e,t,i){if(t==="aggregate")return n=>WC(n,i);if(t==="count")return n=>QC(n,i);if(t==="groupBy")return n=>XC(n,i)}function tj(e,t){let i=t.fields.filter(s=>!s.relationName),n=tT(i,"name");return new Proxy({},{get(s,a){if(a in s||typeof a=="symbol")return s[a];let r=n[a];if(r)return new eb(e,a,r.type,r.isList,r.kind==="enum")},...yb(Object.keys(n))})}var wb=e=>Array.isArray(e)?e:e.split("."),_b=(e,t)=>wb(t).reduce((i,n)=>i&&i[n],e),ij=(e,t,i)=>wb(t).reduceRight((n,s,a,r)=>Object.assign({},_b(e,r.slice(0,a)),{[s]:n}),i);function nj(e,t){return e===void 0||t===void 0?[]:[...t,"select",e]}function sj(e,t,i){return t===void 0?e??{}:ij(t,i,e||!0)}function Eb(e,t,i,n,s,a){let r=e._runtimeDataModel.models[t].fields.reduce((o,c)=>({...o,[c.name]:c}),{});return o=>{let c=La(e._errorFormat),l=nj(n,s),p=sj(o,a,l),u=i({dataPath:l,callsite:c})(p),d=aj(e,t);return new Proxy(u,{get(m,f){if(!d.includes(f))return m[f];let x=[r[f].type,i,f],E=[l,p];return Eb(e,...x,...E)},...yb([...d,...Object.getOwnPropertyNames(u)])})}}function aj(e,t){return e._runtimeDataModel.models[t].fields.filter(i=>i.kind==="object").map(i=>i.name)}var rj=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],oj=["aggregate","count","groupBy"];function kx(e,t){let i=e._extensions.getAllModelExtensions(t)??{},n=[cj(e,t),pj(e,t),bb(i),Ri("name",()=>t),Ri("$name",()=>t),Ri("$parent",()=>e._appliedParent)];return Ds({},n)}function cj(e,t){let i=Xa(t),n=Object.keys(Mo).concat("count");return{getKeys(){return n},getPropertyValue(s){let a=s,r=o=>c=>{let l=La(e._errorFormat);return e._createPrismaPromise(p=>{let u={args:c,dataPath:[],action:a,model:t,clientMethod:`${i}.${s}`,jsModelName:i,transaction:p,callsite:l};return e._request({...u,...o})},{action:a,args:c,model:t})};return rj.includes(a)?Eb(e,t,r):lj(s)?ej(e,s,r):r({})}}}function lj(e){return oj.includes(e)}function pj(e,t){return Fp(Ri("fields",()=>{let i=e._runtimeDataModel.models[t];return tj(t,i)}))}function uj(e){return e.replace(/^./,t=>t.toUpperCase())}var fp=Symbol();function gp(e){let t=[dj(e),mj(e),Ri(fp,()=>e),Ri("$parent",()=>e._appliedParent)],i=e._extensions.getAllClientExtensions();return i&&t.push(bb(i)),Ds(e,t)}function dj(e){let t=Object.getPrototypeOf(e._originalClient),i=[...new Set(Object.getOwnPropertyNames(t))];return{getKeys(){return i},getPropertyValue(n){return e[n]}}}function mj(e){let t=Object.keys(e._runtimeDataModel.models),i=t.map(Xa),n=[...new Set(t.concat(i))];return Fp({getKeys(){return n},getPropertyValue(s){let a=uj(s);if(e._runtimeDataModel.models[a]!==void 0)return kx(e,a);if(e._runtimeDataModel.models[s]!==void 0)return kx(e,s)},getPropertyDescriptor(s){if(!i.includes(s))return{enumerable:!1}}})}function hj(e){return e[fp]?e[fp]:e}function fj(e){if(typeof e=="function")return e(this);if(e.client?.__AccelerateEngine){let i=e.client.__AccelerateEngine;this._originalClient._engine=new i(this._originalClient._accelerateEngineConfig)}let t=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(e)},_appliedParent:{value:this,configurable:!0},$use:{value:void 0},$on:{value:void 0}});return gp(t)}function gj({result:e,modelName:t,select:i,omit:n,extensions:s}){let a=s.getAllComputedFields(t);if(!a)return e;let r=[],o=[];for(let c of Object.values(a)){if(n){if(n[c.name])continue;let l=c.needs.filter(p=>n[p]);l.length>0&&o.push(mp(l))}else if(i){if(!i[c.name])continue;let l=c.needs.filter(p=>!i[p]);l.length>0&&o.push(mp(l))}xj(e,c.needs)&&r.push(vj(c,Ds(e,r)))}return r.length>0||o.length>0?Ds(e,[...r,...o]):e}function xj(e,t){return t.every(i=>sA(e,i))}function vj(e,t){return Fp(Ri(e.name,()=>e.compute(t)))}function Dp({visitor:e,result:t,args:i,runtimeDataModel:n,modelName:s}){if(Array.isArray(t)){for(let r=0;r<t.length;r++)t[r]=Dp({result:t[r],args:i,modelName:s,runtimeDataModel:n,visitor:e});return t}let a=e(t,s,i)??t;return i.include&&Sx({includeOrSelect:i.include,result:a,parentModelName:s,runtimeDataModel:n,visitor:e}),i.select&&Sx({includeOrSelect:i.select,result:a,parentModelName:s,runtimeDataModel:n,visitor:e}),a}function Sx({includeOrSelect:e,result:t,parentModelName:i,runtimeDataModel:n,visitor:s}){for(let[a,r]of Object.entries(e)){if(!r||t[a]==null||ls(r))continue;let o=n.models[i].fields.find(l=>l.name===a);if(!o||o.kind!=="object"||!o.relationName)continue;let c=typeof r=="object"?r:{};t[a]=Dp({visitor:s,result:t[a],args:c,modelName:o.type,runtimeDataModel:n})}}function bj({result:e,modelName:t,args:i,extensions:n,runtimeDataModel:s,globalOmit:a}){return n.isEmpty()||e==null||typeof e!="object"||!s.models[t]?e:Dp({result:e,args:i??{},modelName:t,runtimeDataModel:s,visitor:(r,o,c)=>{let l=Xa(o);return gj({result:r,modelName:l,select:c.select,omit:c.select?void 0:{...a?.[l],...c.omit},extensions:n})}})}var yj=["$connect","$disconnect","$on","$transaction","$use","$extends"],wj=yj;function _j(e){if(e instanceof Rn)return Ej(e);if(xb(e))return kj(e);if(Array.isArray(e)){let i=[e[0]];for(let n=1;n<e.length;n++)i[n]=Ma(e[n]);return i}let t={};for(let i in e)t[i]=Ma(e[i]);return t}function Ej(e){return new Rn(e.strings,e.values)}function kj(e){return new gb(e.sql,e.values)}function Ma(e){if(typeof e!="object"||e==null||e instanceof zo||Pp(e))return e;if(jp(e))return new Us(e.toFixed());if(Cp(e))return new Date(+e);if(ArrayBuffer.isView(e))return e.slice(0);if(Array.isArray(e)){let t=e.length,i;for(i=Array(t);t--;)i[t]=Ma(e[t]);return i}if(typeof e=="object"){let t={};for(let i in e)i==="__proto__"?Object.defineProperty(t,i,{value:Ma(e[i]),configurable:!0,enumerable:!0,writable:!0}):t[i]=Ma(e[i]);return t}Io(e,"Unknown value")}function kb(e,t,i,n=0){return e._createPrismaPromise(s=>{let a=t.customDataProxyFetch;return"transaction"in t&&s!==void 0&&(t.transaction?.kind==="batch"&&t.transaction.lock.then(),t.transaction=s),n===i.length?e._executeRequest(t):i[n]({model:t.model,operation:t.model?t.action:t.clientMethod,args:_j(t.args??{}),__internalParams:t,query:(r,o=t)=>{let c=o.customDataProxyFetch;return o.customDataProxyFetch=Ab(a,c),o.args=r,kb(e,o,i,n+1)}})})}function Sj(e,t){let{jsModelName:i,action:n,clientMethod:s}=t,a=i?n:s;if(e._extensions.isEmpty())return e._executeRequest(t);let r=e._extensions.getAllQueryCallbacks(i??"$none",a);return kb(e,t,r)}function Aj(e){return t=>{let i={requests:t},n=t[0].extensions.getAllBatchQueryCallbacks();return n.length?Sb(i,n,0,e):e(i)}}function Sb(e,t,i,n){if(i===t.length)return n(e);let s=e.customDataProxyFetch,a=e.requests[0].transaction;return t[i]({args:{queries:e.requests.map(r=>({model:r.modelName,operation:r.action,args:r.args})),transaction:a?{isolationLevel:a.kind==="batch"?a.isolationLevel:void 0}:void 0},__internalParams:e,query(r,o=e){let c=o.customDataProxyFetch;return o.customDataProxyFetch=Ab(s,c),Sb(o,t,i+1,n)}})}var Ax=e=>e;function Ab(e=Ax,t=Ax){return i=>e(t(i))}var Tx=ht("prisma:client"),Cx={Vercel:"vercel","Netlify CI":"netlify"};function Tj({postinstall:e,ciName:t,clientVersion:i}){if(Tx("checkPlatformCaching:postinstall",e),Tx("checkPlatformCaching:ciName",t),e===!0&&t&&t in Cx){let n=`Prisma has detected that this project was built on ${t}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${Cx[t]}-build`;throw console.error(n),new Ce(n,i)}}function Cj(e,t){return e?e.datasources?e.datasources:e.datasourceUrl?{[t[0]]:{url:e.datasourceUrl}}:{}:{}}var jj=()=>globalThis.process?.release?.name==="node",Rj=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,qj=()=>!!globalThis.Deno,Pj=()=>typeof globalThis.Netlify=="object",Oj=()=>typeof globalThis.EdgeRuntime=="object",Ij=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function $j(){return[[Pj,"netlify"],[Oj,"edge-light"],[Ij,"workerd"],[qj,"deno"],[Rj,"bun"],[jj,"node"]].flatMap(e=>e[0]()?[e[1]]:[]).at(0)??""}var Nj={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function Tb(){let e=$j();return{id:e,prettyName:Nj[e]||e,isEdge:["workerd","deno","netlify","edge-light"].includes(e)}}var Fj=ee(require("node:fs")),_o=ee(require("node:path"));function Cb(e){let{runtimeBinaryTarget:t}=e;return`Add "${t}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${Lj(e)}`}function Lj(e){let{generator:t,generatorBinaryTargets:i,runtimeBinaryTarget:n}=e,s={fromEnvVar:null,value:n},a=[...i,s];return V2({...t,binaryTargets:a})}function Uo(e){let{runtimeBinaryTarget:t}=e;return`Prisma Client could not locate the Query Engine for runtime "${t}".`}function Ho(e){let{searchedLocations:t}=e;return`The following locations have been searched:
${[...new Set(t)].map(i=>`  ${i}`).join(`
`)}`}function Mj(e){let{runtimeBinaryTarget:t}=e;return`${Uo(e)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${t}".
${Cb(e)}

${Ho(e)}`}function jb(e){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${e}`}function Rb(e){let{errorStack:t}=e;return t?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function Dj(e){let{queryEngineName:t}=e;return`${Uo(e)}${Rb(e)}

This is likely caused by a bundler that has not copied "${t}" next to the resulting bundle.
Ensure that "${t}" has been copied next to the bundle or in "${e.expectedLocation}".

${jb("engine-not-found-bundler-investigation")}

${Ho(e)}`}function Bj(e){let{runtimeBinaryTarget:t,generatorBinaryTargets:i}=e,n=i.find(s=>s.native);return`${Uo(e)}

This happened because Prisma Client was generated for "${n?.value??"unknown"}", but the actual deployment required "${t}".
${Cb(e)}

${Ho(e)}`}function zj(e){let{queryEngineName:t}=e;return`${Uo(e)}${Rb(e)}

This is likely caused by tooling that has not copied "${t}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${t}" has been copied to "${e.expectedLocation}".

${jb("engine-not-found-tooling-investigation")}

${Ho(e)}`}var Uj=ht("prisma:client:engines:resolveEnginePath"),Hj=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function Vj(e,t){let i={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[e]??t.prismaPath;if(i!==void 0)return i;let{enginePath:n,searchedLocations:s}=await Kj(e,t);if(Uj("enginePath",n),n!==void 0&&e==="binary"&&L2(n),n!==void 0)return t.prismaPath=n;let a=await _p(),r=t.generator?.binaryTargets??[],o=r.some(d=>d.native),c=!r.some(d=>d.value===a),l=__filename.match(Hj())===null,p={searchedLocations:s,generatorBinaryTargets:r,generator:t.generator,runtimeBinaryTarget:a,queryEngineName:qb(e,a),expectedLocation:_o.default.relative(process.cwd(),t.dirname),errorStack:new Error().stack},u;throw o&&c?u=Bj(p):c?u=Mj(p):l?u=Dj(p):u=zj(p),new Ce(u,t.clientVersion)}async function Kj(e,t){let i=await _p(),n=[],s=[t.dirname,_o.default.resolve(__dirname,".."),t.generator?.output?.value??__dirname,_o.default.resolve(__dirname,"../../../.prisma/client"),"/tmp/prisma-engines",t.cwd];__filename.includes("resolveEnginePath")&&s.push(F2());for(let a of s){let r=qb(e,i),o=_o.default.join(a,r);if(n.push(a),Fj.default.existsSync(o))return{enginePath:o,searchedLocations:n}}return{enginePath:void 0,searchedLocations:n}}function qb(e,t){return e==="library"?OS(t,"fs"):`query-engine-${t}${t==="windows"?".exe":""}`}var jx=ee(ev());function Wj(e){return e?e.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,t=>`${t[0]}5`):""}function Gj(e){return e.split(`
`).map(t=>t.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var Jj=ee(tS());function Qj({title:e,user:t="prisma",repo:i="prisma",template:n="bug_report.yml",body:s}){return(0,Jj.default)({user:t,repo:i,template:n,title:e,body:s})}function Yj({version:e,binaryTarget:t,title:i,description:n,engineVersion:s,database:a,query:r}){let o=CS(6e3-(r?.length??0)),c=Gj((0,jx.default)(o)),l=n?`# Description
\`\`\`
${n}
\`\`\``:"",p=(0,jx.default)(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${t?.padEnd(19)}|
| Prisma Client   | ${e?.padEnd(19)}|
| Query Engine    | ${s?.padEnd(19)}|
| Database        | ${a?.padEnd(19)}|

${l}

## Logs
\`\`\`
${c}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${r?Wj(r):""}
\`\`\`
`),u=Qj({title:i,body:p});return`${i}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Wt(u)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function Pb(e){return e.name==="DriverAdapterError"&&typeof e.cause=="object"}function Bp(e){return{ok:!0,value:e,map(t){return Bp(t(e))},flatMap(t){return t(e)}}}function Bs(e){return{ok:!1,error:e,map(){return Bs(e)},flatMap(){return Bs(e)}}}var Ob=ht("driver-adapter-utils"),Zj=class{registeredErrors=[];consumeError(e){return this.registeredErrors[e]}registerNewError(e){let t=0;for(;this.registeredErrors[t]!==void 0;)t++;return this.registeredErrors[t]={error:e},t}},Xj=(e,t=new Zj)=>{let i={adapterName:e.adapterName,errorRegistry:t,queryRaw:Vi(t,e.queryRaw.bind(e)),executeRaw:Vi(t,e.executeRaw.bind(e)),executeScript:Vi(t,e.executeScript.bind(e)),dispose:Vi(t,e.dispose.bind(e)),provider:e.provider,startTransaction:async(...n)=>(await Vi(t,e.startTransaction.bind(e))(...n)).map(s=>eR(t,s))};return e.getConnectionInfo&&(i.getConnectionInfo=tR(t,e.getConnectionInfo.bind(e))),i},eR=(e,t)=>({adapterName:t.adapterName,provider:t.provider,options:t.options,queryRaw:Vi(e,t.queryRaw.bind(t)),executeRaw:Vi(e,t.executeRaw.bind(t)),commit:Vi(e,t.commit.bind(t)),rollback:Vi(e,t.rollback.bind(t))});function Vi(e,t){return async(...i)=>{try{return Bp(await t(...i))}catch(n){if(Ob("[error@wrapAsync]",n),Pb(n))return Bs(n.cause);let s=e.registerNewError(n);return Bs({kind:"GenericJs",id:s})}}}function tR(e,t){return(...i)=>{try{return Bp(t(...i))}catch(n){if(Ob("[error@wrapSync]",n),Pb(n))return Bs(n.cause);let s=e.registerNewError(n);return Bs({kind:"GenericJs",id:s})}}}var iR="6.8.2";function zp({inlineDatasources:e,overrideDatasources:t,env:i,clientVersion:n}){let s,a=Object.keys(e)[0],r=e[a]?.url,o=t[a]?.url;if(a===void 0?s=void 0:o?s=o:r?.value?s=r.value:r?.fromEnvVar&&(s=i[r.fromEnvVar]),r?.fromEnvVar!==void 0&&s===void 0)throw new Ce(`error: Environment variable not found: ${r.fromEnvVar}.`,n);if(s===void 0)throw new Ce("error: Missing URL environment variable, value, or override.",n);return s}var nR=class extends Error{clientVersion;cause;constructor(e,t){super(e),this.clientVersion=t.clientVersion,this.cause=t.cause}get[Symbol.toStringTag](){return this.name}},Hs=class extends nR{isRetryable;constructor(e,t){super(e,t),this.isRetryable=t.isRetryable??!0}};function rt(e,t){return{...e,isRetryable:t}}var xp=class extends Hs{name="ForcedRetryError";code="P5001";constructor(e){super("This request must be retried",rt(e,!0))}};ke(xp,"ForcedRetryError");var Eo=class extends Hs{name="InvalidDatasourceError";code="P6001";constructor(e,t){super(e,rt(t,!1))}};ke(Eo,"InvalidDatasourceError");var Up=class extends Hs{name="NotImplementedYetError";code="P5004";constructor(e,t){super(e,rt(t,!1))}};ke(Up,"NotImplementedYetError");var Jt=class extends Hs{response;constructor(e,t){super(e,t),this.response=t.response;let i=this.response.headers.get("prisma-request-id");if(i){let n=`(The request id was: ${i})`;this.message=this.message+" "+n}}},Hp=class extends Jt{name="SchemaMissingError";code="P5005";constructor(e){super("Schema needs to be uploaded",rt(e,!0))}};ke(Hp,"SchemaMissingError");var Ib="This request could not be understood by the server",$b=class extends Jt{name="BadRequestError";code="P5000";constructor(e,t,i){super(t||Ib,rt(e,!1)),i&&(this.code=i)}};ke($b,"BadRequestError");var Nb=class extends Jt{name="HealthcheckTimeoutError";code="P5013";logs;constructor(e,t){super("Engine not started: healthcheck timeout",rt(e,!0)),this.logs=t}};ke(Nb,"HealthcheckTimeoutError");var Fb=class extends Jt{name="EngineStartupError";code="P5014";logs;constructor(e,t,i){super(t,rt(e,!0)),this.logs=i}};ke(Fb,"EngineStartupError");var Lb=class extends Jt{name="EngineVersionNotSupportedError";code="P5012";constructor(e){super("Engine version is not supported",rt(e,!1))}};ke(Lb,"EngineVersionNotSupportedError");var Mb="Request timed out",Db=class extends Jt{name="GatewayTimeoutError";code="P5009";constructor(e,t=Mb){super(t,rt(e,!1))}};ke(Db,"GatewayTimeoutError");var sR="Interactive transaction error",Bb=class extends Jt{name="InteractiveTransactionError";code="P5015";constructor(e,t=sR){super(t,rt(e,!1))}};ke(Bb,"InteractiveTransactionError");var aR="Request parameters are invalid",zb=class extends Jt{name="InvalidRequestError";code="P5011";constructor(e,t=aR){super(t,rt(e,!1))}};ke(zb,"InvalidRequestError");var Ub="Requested resource does not exist",Hb=class extends Jt{name="NotFoundError";code="P5003";constructor(e,t=Ub){super(t,rt(e,!1))}};ke(Hb,"NotFoundError");var Vb="Unknown server error",vp=class extends Jt{name="ServerError";code="P5006";logs;constructor(e,t,i){super(t||Vb,rt(e,!0)),this.logs=i}};ke(vp,"ServerError");var Kb="Unauthorized, check your connection string",Wb=class extends Jt{name="UnauthorizedError";code="P5007";constructor(e,t=Kb){super(t,rt(e,!1))}};ke(Wb,"UnauthorizedError");var Gb="Usage exceeded, retry again later",Jb=class extends Jt{name="UsageExceededError";code="P5008";constructor(e,t=Gb){super(t,rt(e,!0))}};ke(Jb,"UsageExceededError");async function rR(e){let t;try{t=await e.text()}catch{return{type:"EmptyError"}}try{let i=JSON.parse(t);if(typeof i=="string")switch(i){case"InternalDataProxyError":return{type:"DataProxyError",body:i};default:return{type:"UnknownTextError",body:i}}if(typeof i=="object"&&i!==null){if("is_panic"in i&&"message"in i&&"error_code"in i)return{type:"QueryEngineError",body:i};if("EngineNotStarted"in i||"InteractiveTransactionMisrouted"in i||"InvalidRequestError"in i){let n=Object.values(i)[0].reason;return typeof n=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(n)?{type:"UnknownJsonError",body:i}:{type:"DataProxyError",body:i}}}return{type:"UnknownJsonError",body:i}}catch{return t===""?{type:"EmptyError"}:{type:"UnknownTextError",body:t}}}async function fo(e,t){if(e.ok)return;let i={clientVersion:t,response:e},n=await rR(e);if(n.type==="QueryEngineError")throw new Tn(n.body.message,{code:n.body.error_code,clientVersion:t});if(n.type==="DataProxyError"){if(n.body==="InternalDataProxyError")throw new vp(i,"Internal Data Proxy error");if("EngineNotStarted"in n.body){if(n.body.EngineNotStarted.reason==="SchemaMissing")return new Hp(i);if(n.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new Lb(i);if("EngineStartupError"in n.body.EngineNotStarted.reason){let{msg:s,logs:a}=n.body.EngineNotStarted.reason.EngineStartupError;throw new Fb(i,s,a)}if("KnownEngineStartupError"in n.body.EngineNotStarted.reason){let{msg:s,error_code:a}=n.body.EngineNotStarted.reason.KnownEngineStartupError;throw new Ce(s,t,a)}if("HealthcheckTimeout"in n.body.EngineNotStarted.reason){let{logs:s}=n.body.EngineNotStarted.reason.HealthcheckTimeout;throw new Nb(i,s)}}if("InteractiveTransactionMisrouted"in n.body){let s={IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"};throw new Bb(i,s[n.body.InteractiveTransactionMisrouted.reason])}if("InvalidRequestError"in n.body)throw new zb(i,n.body.InvalidRequestError.reason)}if(e.status===401||e.status===403)throw new Wb(i,$s(Kb,n));if(e.status===404)return new Hb(i,$s(Ub,n));if(e.status===429)throw new Jb(i,$s(Gb,n));if(e.status===504)throw new Db(i,$s(Mb,n));if(e.status>=500)throw new vp(i,$s(Vb,n));if(e.status>=400)throw new $b(i,$s(Ib,n))}function $s(e,t){return t.type==="EmptyError"?e:`${e}: ${JSON.stringify(t)}`}function oR(e){let t=Math.pow(2,e)*50,i=Math.ceil(Math.random()*t)-Math.ceil(t/2),n=t+i;return new Promise(s=>setTimeout(()=>s(n),n))}var Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function cR(e){let t=new TextEncoder().encode(e),i="",n=t.byteLength,s=n%3,a=n-s,r,o,c,l,p;for(let u=0;u<a;u=u+3)p=t[u]<<16|t[u+1]<<8|t[u+2],r=(p&16515072)>>18,o=(p&258048)>>12,c=(p&4032)>>6,l=p&63,i+=Hi[r]+Hi[o]+Hi[c]+Hi[l];return s==1?(p=t[a],r=(p&252)>>2,o=(p&3)<<4,i+=Hi[r]+Hi[o]+"=="):s==2&&(p=t[a]<<8|t[a+1],r=(p&64512)>>10,o=(p&1008)>>4,c=(p&15)<<2,i+=Hi[r]+Hi[o]+Hi[c]+"="),i}function lR(e){if(e.generator?.previewFeatures.some(t=>t.toLowerCase().includes("metrics")))throw new Ce("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",e.clientVersion)}function pR(e){return e[0]*1e3+e[1]/1e6}function Rx(e){return new Date(pR(e))}var uR={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.8.0-43.2060c79ba17c6bb9f5823312b6f6b7f4a845738e","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},Qb=class extends Hs{name="RequestError";code="P5010";constructor(e,t){super(`Cannot fetch data from service:
${e}`,rt(t,!0))}};ke(Qb,"RequestError");async function Oa(e,t,i=n=>n){let{clientVersion:n,...s}=t,a=i(fetch);try{return await a(e,s)}catch(r){let o=r.message??"Unknown error";throw new Qb(o,{clientVersion:n,cause:r})}}var dR=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,Yb=ht("prisma:client:dataproxyEngine");async function mR(e,t){let i=uR["@prisma/engines-version"],n=t.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(e.includes("accelerate")&&n!=="0.0.0"&&n!=="in-memory")return n;let[s,a]=n?.split("-")??[];if(a===void 0&&dR.test(s))return s;if(a!==void 0||n==="0.0.0"||n==="in-memory"){let[r]=i.split("-")??[],[o,c,l]=r.split("."),p=fR(`<=${o}.${c}.${l}`),u=await Oa(p,{clientVersion:n});if(!u.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${u.status} ${u.statusText}, response body: ${await u.text()||"<empty body>"}`);let d=await u.text();Yb("length of body fetched from unpkg.com",d.length);let m;try{m=JSON.parse(d)}catch(f){throw console.error("JSON.parse error: body fetched from unpkg.com: ",d),f}return m.version}throw new Up("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:n})}async function hR(e,t){let i=await mR(e,t);return Yb("version",i),i}function fR(e){return encodeURI(`https://unpkg.com/prisma@${e}/package.json`)}var qx=3,Ra=ht("prisma:client:dataproxyEngine"),gR=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:e,tracingHelper:t,logLevel:i,logQueries:n,engineHash:s}){this.apiKey=e,this.tracingHelper=t,this.logLevel=i,this.logQueries=n,this.engineHash=s}build({traceparent:e,interactiveTransaction:t}={}){let i={Authorization:`Bearer ${this.apiKey}`,"Prisma-Engine-Hash":this.engineHash};this.tracingHelper.isEnabled()&&(i.traceparent=e??this.tracingHelper.getTraceParent()),t&&(i["X-transaction-id"]=t.id);let n=this.buildCaptureSettings();return n.length>0&&(i["X-capture-telemetry"]=n.join(", ")),i}buildCaptureSettings(){let e=[];return this.tracingHelper.isEnabled()&&e.push("tracing"),this.logLevel&&e.push(this.logLevel),this.logQueries&&e.push("query"),e}},xR=class{name="DataProxyEngine";inlineSchema;inlineSchemaHash;inlineDatasources;config;logEmitter;env;clientVersion;engineHash;tracingHelper;remoteClientVersion;host;headerBuilder;startPromise;protocol;constructor(e){lR(e),this.config=e,this.env={...e.env,...typeof process<"u"?process.env:{}},this.inlineSchema=cR(e.inlineSchema),this.inlineDatasources=e.inlineDatasources,this.inlineSchemaHash=e.inlineSchemaHash,this.clientVersion=e.clientVersion,this.engineHash=e.engineVersion,this.logEmitter=e.logEmitter,this.tracingHelper=e.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let{apiKey:e,url:t}=this.getURLAndAPIKey();this.host=t.host,this.headerBuilder=new gR({apiKey:e,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel,logQueries:this.config.logQueries,engineHash:this.engineHash}),this.protocol=U2(t)?"http":"https",this.remoteClientVersion=await hR(this.host,this.config),Ra("host",this.host),Ra("protocol",this.protocol)})(),await this.startPromise}async stop(){}propagateResponseExtensions(e){e?.logs?.length&&e.logs.forEach(t=>{switch(t.level){case"debug":case"trace":Ra(t);break;case"error":case"warn":case"info":{this.logEmitter.emit(t.level,{timestamp:Rx(t.timestamp),message:t.attributes.message??"",target:t.target});break}case"query":{this.logEmitter.emit("query",{query:t.attributes.query??"",timestamp:Rx(t.timestamp),duration:t.attributes.duration_ms??0,params:t.attributes.params??"",target:t.target});break}default:t.level}}),e?.traces?.length&&this.tracingHelper.dispatchEngineSpans(e.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(e){return await this.start(),`${this.protocol}://${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${e}`}async uploadSchema(){let e={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(e,async()=>{let t=await Oa(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});t.ok||Ra("schema response status",t.status);let i=await fo(t,this.clientVersion);if(i)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${i.message}`,timestamp:new Date,target:""}),i;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(e,{traceparent:t,interactiveTransaction:i,customDataProxyFetch:n}){return this.requestInternal({body:e,traceparent:t,interactiveTransaction:i,customDataProxyFetch:n})}async requestBatch(e,{traceparent:t,transaction:i,customDataProxyFetch:n}){let s=i?.kind==="itx"?i.options:void 0,a=Lp(e,i);return(await this.requestInternal({body:a,customDataProxyFetch:n,interactiveTransaction:s,traceparent:t})).map(r=>(r.extensions&&this.propagateResponseExtensions(r.extensions),"errors"in r?this.convertProtocolErrorsToClientError(r.errors):r))}requestInternal({body:e,traceparent:t,customDataProxyFetch:i,interactiveTransaction:n}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:s})=>{let a=n?`${n.payload.endpoint}/graphql`:await this.url("graphql");s(a);let r=await Oa(a,{method:"POST",headers:this.headerBuilder.build({traceparent:t,interactiveTransaction:n}),body:JSON.stringify(e),clientVersion:this.clientVersion},i);r.ok||Ra("graphql response status",r.status),await this.handleError(await fo(r,this.clientVersion));let o=await r.json();if(o.extensions&&this.propagateResponseExtensions(o.extensions),"errors"in o)throw this.convertProtocolErrorsToClientError(o.errors);return"batchResult"in o?o.batchResult:o}})}async transaction(e,t,i){let n={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${n[e]} transaction`,callback:async({logHttpCall:s})=>{if(e==="start"){let a=JSON.stringify({max_wait:i.maxWait,timeout:i.timeout,isolation_level:i.isolationLevel}),r=await this.url("transaction/start");s(r);let o=await Oa(r,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),body:a,clientVersion:this.clientVersion});await this.handleError(await fo(o,this.clientVersion));let c=await o.json(),{extensions:l}=c;l&&this.propagateResponseExtensions(l);let p=c.id,u=c["data-proxy"].endpoint;return{id:p,payload:{endpoint:u}}}else{let a=`${i.payload.endpoint}/${e}`;s(a);let r=await Oa(a,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),clientVersion:this.clientVersion});await this.handleError(await fo(r,this.clientVersion));let o=await r.json(),{extensions:c}=o;c&&this.propagateResponseExtensions(c);return}}})}getURLAndAPIKey(){let e={clientVersion:this.clientVersion},t=Object.keys(this.inlineDatasources)[0],i=zp({inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources,clientVersion:this.clientVersion,env:this.env}),n;try{n=new URL(i)}catch{throw new Eo(`Error validating datasource \`${t}\`: the URL must start with the protocol \`prisma://\``,e)}let{protocol:s,searchParams:a}=n;if(s!=="prisma:"&&s!==bv)throw new Eo(`Error validating datasource \`${t}\`: the URL must start with the protocol \`prisma://\` or \`prisma+postgres://\``,e);let r=a.get("api_key");if(r===null||r.length<1)throw new Eo(`Error validating datasource \`${t}\`: the URL must contain a valid API key`,e);return{apiKey:r,url:n}}metrics(){throw new Up("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(e){for(let t=0;;t++){let i=n=>{this.logEmitter.emit("info",{message:`Calling ${n} (n=${t})`,timestamp:new Date,target:""})};try{return await e.callback({logHttpCall:i})}catch(n){if(!(n instanceof Hs)||!n.isRetryable)throw n;if(t>=qx)throw n instanceof xp?n.cause:n;this.logEmitter.emit("warn",{message:`Attempt ${t+1}/${qx} failed for ${e.actionGerund}: ${n.message??"(unknown)"}`,timestamp:new Date,target:""});let s=await oR(t);this.logEmitter.emit("warn",{message:`Retrying after ${s}ms`,timestamp:new Date,target:""})}}}async handleError(e){if(e instanceof Hp)throw await this.uploadSchema(),new xp({clientVersion:this.clientVersion,cause:e});if(e)throw e}convertProtocolErrorsToClientError(e){return e.length===1?Mp(e[0],this.config.clientVersion,this.config.activeProvider):new Ot(JSON.stringify(e),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function vR(e){if(e?.kind==="itx")return e.options.id}var Px=ee(require("node:os")),bR=ee(require("node:path")),Dl=Symbol("PrismaLibraryEngineCache");function yR(){let e=globalThis;return e[Dl]===void 0&&(e[Dl]={}),e[Dl]}function wR(e){let t=yR();if(t[e]!==void 0)return t[e];let i=bR.default.toNamespacedPath(e),n={exports:{}},s=0;return process.platform!=="win32"&&(s=Px.default.constants.dlopen.RTLD_LAZY|Px.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(n,i,s),t[e]=n.exports,n.exports}var _R={async loadLibrary(e){let t=await XS(),i=await Vj("library",e);try{return e.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>wR(i))}catch(n){let s=M2({e:n,platformInfo:t,id:i});throw new Ce(s,e.clientVersion)}}},Bl,ER={async loadLibrary(e){let{clientVersion:t,adapter:i,engineWasm:n}=e;if(i===void 0)throw new Ce(`The \`adapter\` option for \`PrismaClient\` is required in this context (${Tb().prettyName})`,t);if(n===void 0)throw new Ce("WASM engine was unexpectedly `undefined`",t);Bl===void 0&&(Bl=(async()=>{let a=await n.getRuntime(),r=await n.getQueryEngineWasmModule();if(r==null)throw new Ce("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",t);let o={"./query_engine_bg.js":a},c=new WebAssembly.Instance(r,o),l=c.exports.__wbindgen_start;return a.__wbg_set_wasm(c.exports),l(),a.QueryEngine})());let s=await Bl;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:s}}},kR="P2036",ki=ht("prisma:client:libraryEngine");function SR(e){return e.item_type==="query"&&"query"in e}function AR(e){return"level"in e?e.level==="error"&&e.message==="PANIC":!1}var Ox=[...PS,"native"],TR=0xffffffffffffffffn,zl=1n;function CR(){let e=zl++;return zl>TR&&(zl=1n),e}var Ix=class{name="LibraryEngine";engine;libraryInstantiationPromise;libraryStartingPromise;libraryStoppingPromise;libraryStarted;executingQueryPromise;config;QueryEngineConstructor;libraryLoader;library;logEmitter;libQueryEnginePath;binaryTarget;datasourceOverrides;datamodel;logQueries;logLevel;lastQuery;loggerRustPanic;tracingHelper;adapterPromise;versionInfo;constructor(e,t){this.libraryLoader=t??_R,e.engineWasm!==void 0&&(this.libraryLoader=t??ER),this.config=e,this.libraryStarted=!1,this.logQueries=e.logQueries??!1,this.logLevel=e.logLevel??"error",this.logEmitter=e.logEmitter,this.datamodel=e.inlineSchema,this.tracingHelper=e.tracingHelper,e.enableDebugLogs&&(this.logLevel="debug");let i=Object.keys(e.overrideDatasources)[0],n=e.overrideDatasources[i]?.url;i!==void 0&&n!==void 0&&(this.datasourceOverrides={[i]:n}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(e){return{applyPendingMigrations:e.applyPendingMigrations?.bind(e),commitTransaction:this.withRequestId(e.commitTransaction.bind(e)),connect:this.withRequestId(e.connect.bind(e)),disconnect:this.withRequestId(e.disconnect.bind(e)),metrics:e.metrics?.bind(e),query:this.withRequestId(e.query.bind(e)),rollbackTransaction:this.withRequestId(e.rollbackTransaction.bind(e)),sdlSchema:e.sdlSchema?.bind(e),startTransaction:this.withRequestId(e.startTransaction.bind(e)),trace:e.trace.bind(e)}}withRequestId(e){return async(...t)=>{let i=CR().toString();try{return await e(...t,i)}finally{if(this.tracingHelper.isEnabled()){let n=await this.engine?.trace(i);if(n){let s=JSON.parse(n);this.tracingHelper.dispatchEngineSpans(s.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(e,t,i){await this.start();let n=await this.adapterPromise,s=JSON.stringify(t),a;if(e==="start"){let o=JSON.stringify({max_wait:i.maxWait,timeout:i.timeout,isolation_level:i.isolationLevel});a=await this.engine?.startTransaction(o,s)}else e==="commit"?a=await this.engine?.commitTransaction(i.id,s):e==="rollback"&&(a=await this.engine?.rollbackTransaction(i.id,s));let r=this.parseEngineResponse(a);if(jR(r)){let o=this.getExternalAdapterError(r,n?.errorRegistry);throw o?o.error:new Tn(r.message,{code:r.error_code,clientVersion:this.config.clientVersion,meta:r.meta})}else if(typeof r.message=="string")throw new Ot(r.message,{clientVersion:this.config.clientVersion});return r}async instantiateLibrary(){if(ki("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;qS(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let e=await this.tracingHelper.runInChildSpan("detect_platform",()=>_p());if(!Ox.includes(e))throw new Ce(`Unknown ${cs("PRISMA_QUERY_ENGINE_LIBRARY")} ${cs(pi(e))}. Possible binaryTargets: ${Da(Ox.join(", "))} or a path to the query engine library.
You may have to run ${Da("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return e}}parseEngineResponse(e){if(!e)throw new Ot("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(e)}catch{throw new Ot("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let e=new WeakRef(this);this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Xj));let t=await this.adapterPromise;t&&ki("Using driver adapter: %O",t),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},i=>{e.deref()?.logger(i)},t))}catch(e){let t=e,i=this.parseInitError(t.message);throw typeof i=="string"?t:new Ce(i.message,this.config.clientVersion,i.error_code)}}}logger(e){let t=this.parseEngineResponse(e);t&&(t.level=t?.level.toLowerCase()??"unknown",SR(t)?this.logEmitter.emit("query",{timestamp:new Date,query:t.query,params:t.params,duration:Number(t.duration_ms),target:t.module_path}):AR(t)?this.loggerRustPanic=new Sn(Ul(this,`${t.message}: ${t.reason} in ${t.file}:${t.line}:${t.column}`),this.config.clientVersion):this.logEmitter.emit(t.level,{timestamp:new Date,message:t.message,target:t.module_path}))}parseInitError(e){try{return JSON.parse(e)}catch{}return e}parseRequestError(e){try{return JSON.parse(e)}catch{}return e}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return ki(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let e=async()=>{ki("library starting");try{let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(t)),this.libraryStarted=!0,ki("library started")}catch(t){let i=this.parseInitError(t.message);throw typeof i=="string"?t:new Ce(i.message,this.config.clientVersion,i.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",e),this.libraryStartingPromise}async stop(){if(await this.libraryInstantiationPromise,await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return ki("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted)return;let e=async()=>{await new Promise(i=>setTimeout(i,5)),ki("library stopping");let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(t)),this.libraryStarted=!1,this.libraryStoppingPromise=void 0,await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0,ki("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",e),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(e){return this.library?.debugPanic(e)}async request(e,{traceparent:t,interactiveTransaction:i}){ki(`sending request, this.libraryStarted: ${this.libraryStarted}`);let n=JSON.stringify({traceparent:t}),s=JSON.stringify(e);try{await this.start();let a=await this.adapterPromise;this.executingQueryPromise=this.engine?.query(s,n,i?.id),this.lastQuery=s;let r=this.parseEngineResponse(await this.executingQueryPromise);if(r.errors)throw r.errors.length===1?this.buildQueryError(r.errors[0],a?.errorRegistry):new Ot(JSON.stringify(r.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:r}}catch(a){if(a instanceof Ce)throw a;if(a.code==="GenericFailure"&&a.message?.startsWith("PANIC:"))throw new Sn(Ul(this,a.message),this.config.clientVersion);let r=this.parseRequestError(a.message);throw typeof r=="string"?a:new Ot(`${r.message}
${r.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(e,{transaction:t,traceparent:i}){ki("requestBatch");let n=Lp(e,t);await this.start();let s=await this.adapterPromise;this.lastQuery=JSON.stringify(n),this.executingQueryPromise=this.engine.query(this.lastQuery,JSON.stringify({traceparent:i}),vR(t));let a=await this.executingQueryPromise,r=this.parseEngineResponse(a);if(r.errors)throw r.errors.length===1?this.buildQueryError(r.errors[0],s?.errorRegistry):new Ot(JSON.stringify(r.errors),{clientVersion:this.config.clientVersion});let{batchResult:o,errors:c}=r;if(Array.isArray(o))return o.map(l=>l.errors&&l.errors.length>0?this.loggerRustPanic??this.buildQueryError(l.errors[0],s?.errorRegistry):{data:l});throw c&&c.length===1?new Error(c[0].error):new Error(JSON.stringify(r))}buildQueryError(e,t){if(e.user_facing_error.is_panic)return new Sn(Ul(this,e.user_facing_error.message),this.config.clientVersion);let i=this.getExternalAdapterError(e.user_facing_error,t);return i?i.error:Mp(e,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(e,t){if(e.error_code===kR&&t){let i=e.meta?.id;px(typeof i=="number","Malformed external JS error received from the engine");let n=t.consumeError(i);return px(n,"External error with reported id was not registered"),n}}async metrics(e){await this.start();let t=await this.engine.metrics(JSON.stringify(e));return e.format==="prometheus"?t:this.parseEngineResponse(t)}};function jR(e){return typeof e=="object"&&e!==null&&e.error_code!==void 0}function Ul(e,t){return Yj({binaryTarget:e.binaryTarget,title:t,version:e.config.clientVersion,engineVersion:e.versionInfo?.commit,database:e.config.activeProvider,query:e.lastQuery})}function RR({copyEngine:e=!0},t){let i;try{i=zp({inlineDatasources:t.inlineDatasources,overrideDatasources:t.overrideDatasources,env:{...t.env,...process.env},clientVersion:t.clientVersion})}catch{}let n=!!(i?.startsWith("prisma://")||yv(i));e&&n&&Av("recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)");let s=Zl(t.generator),a=n||!e,r=!!t.adapter,o=s==="library",c=s==="binary",l=s==="client";if(a&&r||r&&!1){let p;throw e?i?.startsWith("prisma://")?p=["Prisma Client was configured to use the `adapter` option but the URL was a `prisma://` URL.","Please either use the `prisma://` URL or remove the `adapter` from the Prisma Client constructor."]:p=["Prisma Client was configured to use both the `adapter` and Accelerate, please chose one."]:p=["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."],new Ki(p.join(`
`),{clientVersion:t.clientVersion})}return a?new xR(t):o?new Ix(t):new Ix(t)}function Zb({generator:e}){return e?.previewFeatures??[]}var qR=e=>({command:e}),PR=e=>e.strings.reduce((t,i,n)=>`${t}@P${n}${i}`);function qa(e){try{return $x(e,"fast")}catch{return $x(e,"slow")}}function $x(e,t){return JSON.stringify(e.map(i=>Xb(i,t)))}function Xb(e,t){if(Array.isArray(e))return e.map(i=>Xb(i,t));if(typeof e=="bigint")return{prisma__type:"bigint",prisma__value:e.toString()};if(Cp(e))return{prisma__type:"date",prisma__value:e.toJSON()};if(Us.isDecimal(e))return{prisma__type:"decimal",prisma__value:e.toJSON()};if(Buffer.isBuffer(e))return{prisma__type:"bytes",prisma__value:e.toString("base64")};if(OR(e))return{prisma__type:"bytes",prisma__value:Buffer.from(e).toString("base64")};if(ArrayBuffer.isView(e)){let{buffer:i,byteOffset:n,byteLength:s}=e;return{prisma__type:"bytes",prisma__value:Buffer.from(i,n,s).toString("base64")}}return typeof e=="object"&&t==="slow"?ey(e):e}function OR(e){return e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?!0:typeof e=="object"&&e!==null?e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer":!1}function ey(e){if(typeof e!="object"||e===null)return e;if(typeof e.toJSON=="function")return e.toJSON();if(Array.isArray(e))return e.map(Nx);let t={};for(let i of Object.keys(e))t[i]=Nx(e[i]);return t}function Nx(e){return typeof e=="bigint"?e.toString():ey(e)}var IR=/^(\s*alter\s)/i,Fx=ht("prisma:client");function Lx(e,t,i,n){if(!(e!=="postgresql"&&e!=="cockroachdb")&&i.length>0&&IR.exec(t))throw new Error(`Running ALTER using ${n} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var Mx=({clientMethod:e,activeProvider:t})=>i=>{let n="",s;if(xb(i))n=i.sql,s={values:qa(i.values),__prismaRawParameters__:!0};else if(Array.isArray(i)){let[a,...r]=i;n=a,s={values:qa(r||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{n=i.sql,s={values:qa(i.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=i.text,s={values:qa(i.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=PR(i),s={values:qa(i.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return s?.values?Fx(`prisma.${e}(${n}, ${s.values})`):Fx(`prisma.${e}(${n})`),{query:n,parameters:s}},$R={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...i]=e;return new Rn(t,i)}},NR={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function Dx(e){return function(t,i){let n,s=(a=e)=>{try{return a===void 0||a?.kind==="itx"?n??=Bx(t(a)):Bx(t(a))}catch(r){return Promise.reject(r)}};return{get spec(){return i},then(a,r){return s().then(a,r)},catch(a){return s().catch(a)},finally(a){return s().finally(a)},requestTransaction(a){let r=s(a);return r.requestTransaction?r.requestTransaction(a):r},[Symbol.toStringTag]:"PrismaPromise"}}}function Bx(e){return typeof e.then=="function"?e:Promise.resolve(e)}var FR=I2.split(".")[0],LR={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},MR=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(e){return this.getGlobalTracingHelper().getTraceParent(e)}dispatchEngineSpans(e){return this.getGlobalTracingHelper().dispatchEngineSpans(e)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(e,t){return this.getGlobalTracingHelper().runInChildSpan(e,t)}getGlobalTracingHelper(){let e=globalThis[`V${FR}_PRISMA_INSTRUMENTATION`],t=globalThis.PRISMA_INSTRUMENTATION;return e?.helper??t?.helper??LR}};function DR(){return new MR}function BR(e,t=()=>{}){let i,n=new Promise(s=>i=s);return{then(s){return--e===0&&i(t()),s?.(n)}}}function zR(e){return typeof e=="string"?e:e.reduce((t,i)=>{let n=typeof i=="string"?i:i.level;return n==="query"?t:t&&(i==="info"||t==="info")?"info":n},void 0)}var UR=class{_middlewares=[];use(e){this._middlewares.push(e)}get(e){return this._middlewares[e]}has(e){return!!this._middlewares[e]}length(){return this._middlewares.length}},HR=ee(ev());function ty(e){return typeof e.batchRequestIdx=="number"}function VR(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(bp(e.query.arguments)),t.push(bp(e.query.selection)),t.join("")}function bp(e){return`(${Object.keys(e).sort().map(t=>{let i=e[t];return typeof i=="object"&&i!==null?`(${t} ${bp(i)})`:t}).join(" ")})`}var KR={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function zx(e){return KR[e]}var WR=class{constructor(e){this.options=e,this.batches={}}batches;tickActive=!1;request(e){let t=this.options.batchBy(e);return t?(this.batches[t]||(this.batches[t]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((i,n)=>{this.batches[t].push({request:e,resolve:i,reject:n})})):this.options.singleLoader(e)}dispatchBatches(){for(let e in this.batches){let t=this.batches[e];delete this.batches[e],t.length===1?this.options.singleLoader(t[0].request).then(i=>{i instanceof Error?t[0].reject(i):t[0].resolve(i)}).catch(i=>{t[0].reject(i)}):(t.sort((i,n)=>this.options.batchOrder(i.request,n.request)),this.options.batchLoader(t.map(i=>i.request)).then(i=>{if(i instanceof Error)for(let n=0;n<t.length;n++)t[n].reject(i);else for(let n=0;n<t.length;n++){let s=i[n];s instanceof Error?t[n].reject(s):t[n].resolve(s)}}).catch(i=>{for(let n=0;n<t.length;n++)t[n].reject(i)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function rs(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:i,byteOffset:n,byteLength:s}=Buffer.from(t,"base64");return new Uint8Array(i,n,s)}case"decimal":return new Us(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(i=>rs("bigint",i));case"bytes-array":return t.map(i=>rs("bytes",i));case"decimal-array":return t.map(i=>rs("decimal",i));case"datetime-array":return t.map(i=>rs("datetime",i));case"date-array":return t.map(i=>rs("date",i));case"time-array":return t.map(i=>rs("time",i));default:return t}}function iy(e){let t=[],i=GR(e);for(let n=0;n<e.rows.length;n++){let s=e.rows[n],a={...i};for(let r=0;r<s.length;r++)a[e.columns[r]]=rs(e.types[r],s[r]);t.push(a)}return t}function GR(e){let t={};for(let i=0;i<e.columns.length;i++)t[e.columns[i]]=null;return t}var JR=ht("prisma:client:request_handler"),QR=class{client;dataloader;logEmitter;constructor(e,t){this.logEmitter=t,this.client=e,this.dataloader=new WR({batchLoader:Aj(async({requests:i,customDataProxyFetch:n})=>{let{transaction:s,otelParentCtx:a}=i[0],r=i.map(l=>l.protocolQuery),o=this.client._tracingHelper.getTraceParent(a),c=i.some(l=>zx(l.protocolQuery.action));return(await this.client._engine.requestBatch(r,{traceparent:o,transaction:YR(s),containsWrite:c,customDataProxyFetch:n})).map((l,p)=>{if(l instanceof Error)return l;try{return this.mapQueryEngineResult(i[p],l)}catch(u){return u}})}),singleLoader:async i=>{let n=i.transaction?.kind==="itx"?ny(i.transaction):void 0,s=await this.client._engine.request(i.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:n,isWrite:zx(i.protocolQuery.action),customDataProxyFetch:i.customDataProxyFetch});return this.mapQueryEngineResult(i,s)},batchBy:i=>i.transaction?.id?`transaction-${i.transaction.id}`:VR(i.protocolQuery),batchOrder(i,n){return i.transaction?.kind==="batch"&&n.transaction?.kind==="batch"?i.transaction.index-n.transaction.index:0}})}async request(e){try{return await this.dataloader.request(e)}catch(t){let{clientMethod:i,callsite:n,transaction:s,args:a,modelName:r}=e;this.handleAndLogRequestError({error:t,clientMethod:i,callsite:n,transaction:s,args:a,modelName:r,globalOmit:e.globalOmit})}}mapQueryEngineResult({dataPath:e,unpacker:t},i){let n=i?.data,s=this.unpack(n,e,t);return process.env.PRISMA_CLIENT_GET_TIME?{data:s}:s}handleAndLogRequestError(e){try{this.handleRequestError(e)}catch(t){throw this.logEmitter&&this.logEmitter.emit("error",{message:t.message,target:e.clientMethod,timestamp:new Date}),t}}handleRequestError({error:e,clientMethod:t,callsite:i,transaction:n,args:s,modelName:a,globalOmit:r}){if(JR(e),ZR(e,n))throw e;if(e instanceof Tn&&XR(e)){let c=sy(e.meta);ab({args:s,errors:[c],callsite:i,errorFormat:this.client._errorFormat,originalMethod:t,clientVersion:this.client._clientVersion,globalOmit:r})}let o=e.message;if(i&&(o=Bv({callsite:i,originalMethod:t,isPanic:e.isPanic,showColors:this.client._errorFormat==="pretty",message:o})),o=this.sanitizeMessage(o),e.code){let c=a?{modelName:a,...e.meta}:e.meta;throw new Tn(o,{code:e.code,clientVersion:this.client._clientVersion,meta:c,batchRequestIdx:e.batchRequestIdx})}else{if(e.isPanic)throw new Sn(o,this.client._clientVersion);if(e instanceof Ot)throw new Ot(o,{clientVersion:this.client._clientVersion,batchRequestIdx:e.batchRequestIdx});if(e instanceof Ce)throw new Ce(o,this.client._clientVersion);if(e instanceof Sn)throw new Sn(o,this.client._clientVersion)}throw e.clientVersion=this.client._clientVersion,e}sanitizeMessage(e){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?(0,HR.default)(e):e}unpack(e,t,i){if(!e||(e.data&&(e=e.data),!e))return e;let n=Object.keys(e)[0],s=Object.values(e)[0],a=t.filter(c=>c!=="select"&&c!=="include"),r=_b(s,a),o=n==="queryRaw"?iy(r):jo(r);return i?i(o):o}get[Symbol.toStringTag](){return"RequestHandler"}};function YR(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:ny(e)};Io(e,"Unknown transaction kind")}}function ny(e){return{id:e.id,payload:e.payload}}function ZR(e,t){return ty(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function XR(e){return e.code==="P2009"||e.code==="P2012"}function sy(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(sy)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var e3=iR,t3=ee(tv()),ue=class extends Error{constructor(e){super(e+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};ke(ue,"PrismaClientConstructorValidationError");var Ux=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],Hx=["pretty","colorless","minimal"],Vx=["info","query","warn","error"],i3={datasources:(e,{datasourceNames:t})=>{if(e){if(typeof e!="object"||Array.isArray(e))throw new ue(`Invalid value ${JSON.stringify(e)} for "datasources" provided to PrismaClient constructor`);for(let[i,n]of Object.entries(e)){if(!t.includes(i)){let s=Ns(i,t)||` Available datasources: ${t.join(", ")}`;throw new ue(`Unknown datasource ${i} provided to PrismaClient constructor.${s}`)}if(typeof n!="object"||Array.isArray(n))throw new ue(`Invalid value ${JSON.stringify(e)} for datasource "${i}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(n&&typeof n=="object")for(let[s,a]of Object.entries(n)){if(s!=="url")throw new ue(`Invalid value ${JSON.stringify(e)} for datasource "${i}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof a!="string")throw new ue(`Invalid value ${JSON.stringify(a)} for datasource "${i}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(e,t)=>{if(!e&&Zl(t.generator)==="client")throw new ue('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(e!==null){if(e===void 0)throw new ue('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(!Zb(t).includes("driverAdapters"))throw new ue('"adapter" property can only be provided to PrismaClient constructor when "driverAdapters" preview feature is enabled.');if(Zl(t.generator)==="binary")throw new ue('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')}},datasourceUrl:e=>{if(typeof e<"u"&&typeof e!="string")throw new ue(`Invalid value ${JSON.stringify(e)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:e=>{if(e){if(typeof e!="string")throw new ue(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!Hx.includes(e)){let t=Ns(e,Hx);throw new ue(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new ue(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(i){if(typeof i=="string"&&!Vx.includes(i)){let n=Ns(i,Vx);throw new ue(`Invalid log level "${i}" provided to PrismaClient constructor.${n}`)}}for(let i of e){t(i);let n={level:t,emit:s=>{let a=["stdout","event"];if(!a.includes(s)){let r=Ns(s,a);throw new ue(`Invalid value ${JSON.stringify(s)} for "emit" in logLevel provided to PrismaClient constructor.${r}`)}}};if(i&&typeof i=="object")for(let[s,a]of Object.entries(i))if(n[s])n[s](a);else throw new ue(`Invalid property ${s} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new ue(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let i=e.timeout;if(i!=null&&i<=0)throw new ue(`Invalid value ${i} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new ue('"omit" option is expected to be an object.');if(e===null)throw new ue('"omit" option can not be `null`');let i=[];for(let[n,s]of Object.entries(e)){let a=a3(n,t.runtimeDataModel);if(!a){i.push({kind:"UnknownModel",modelKey:n});continue}for(let[r,o]of Object.entries(s)){let c=a.fields.find(l=>l.name===r);if(!c){i.push({kind:"UnknownField",modelKey:n,fieldName:r});continue}if(c.relationName){i.push({kind:"RelationInOmit",modelKey:n,fieldName:r});continue}typeof o!="boolean"&&i.push({kind:"InvalidFieldValue",modelKey:n,fieldName:r})}}if(i.length>0)throw new ue(r3(e,i))},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new ue(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[i]of Object.entries(e))if(!t.includes(i)){let n=Ns(i,t);throw new ue(`Invalid property ${JSON.stringify(i)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function n3(e,t){for(let[i,n]of Object.entries(e)){if(!Ux.includes(i)){let s=Ns(i,Ux);throw new ue(`Unknown property ${i} provided to PrismaClient constructor.${s}`)}i3[i](n,t)}if(e.datasourceUrl&&e.datasources)throw new ue('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function Ns(e,t){if(t.length===0||typeof e!="string")return"";let i=s3(e,t);return i?` Did you mean "${i}"?`:""}function s3(e,t){if(t.length===0)return null;let i=t.map(s=>({value:s,distance:(0,t3.default)(e,s)}));i.sort((s,a)=>s.distance<a.distance?-1:1);let n=i[0];return n.distance<3?n.value:null}function a3(e,t){return Kx(t.models,e)??Kx(t.types,e)}function Kx(e,t){let i=Object.keys(e).find(n=>Lo(n)===t);if(i)return e[i]}function r3(e,t){let i=$p(e);for(let a of t)switch(a.kind){case"UnknownModel":i.arguments.getField(a.modelKey)?.markAsError(),i.addErrorMessage(()=>`Unknown model name: ${a.modelKey}.`);break;case"UnknownField":i.arguments.getDeepField([a.modelKey,a.fieldName])?.markAsError(),i.addErrorMessage(()=>`Model "${a.modelKey}" does not have a field named "${a.fieldName}".`);break;case"RelationInOmit":i.arguments.getDeepField([a.modelKey,a.fieldName])?.markAsError(),i.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":i.arguments.getDeepFieldValue([a.modelKey,a.fieldName])?.markAsError(),i.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:s}=sb(i,"colorless");return`Error validating "omit" option:

${s}

${n}`}function o3(e){return e.length===0?Promise.resolve([]):new Promise((t,i)=>{let n=new Array(e.length),s=null,a=!1,r=0,o=()=>{a||(r++,r===e.length&&(a=!0,s?i(s):t(n)))},c=l=>{a||(a=!0,i(l))};for(let l=0;l<e.length;l++)e[l].then(p=>{n[l]=p,o()},p=>{if(!ty(p)){c(p);return}p.batchRequestIdx===l?c(p):(s||(s=p),o())})})}var vn=ht("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var c3={requestArgsToMiddlewareArgs:e=>e,middlewareArgsToRequestArgs:e=>e},l3=Symbol.for("prisma.client.transaction.id"),p3={id:0,nextId(){return++this.id}};function u3(e){class t{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_middlewares=new UR;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=Dx();constructor(n){e=n?.__internal?.configOverride?.(e)??e,Tj(e),n&&n3(n,e);let s=new wC.EventEmitter().on("error",()=>{});this._extensions=rb.empty(),this._previewFeatures=Zb(e),this._clientVersion=e.clientVersion??e3,this._activeProvider=e.activeProvider,this._globalOmit=n?.omit,this._tracingHelper=DR();let a=e.relativeEnvPaths&&{rootEnvPath:e.relativeEnvPaths.rootEnvPath&&Ml.default.resolve(e.dirname,e.relativeEnvPaths.rootEnvPath),schemaEnvPath:e.relativeEnvPaths.schemaEnvPath&&Ml.default.resolve(e.dirname,e.relativeEnvPaths.schemaEnvPath)},r;if(n?.adapter){r=n.adapter;let c=e.activeProvider==="postgresql"?"postgres":e.activeProvider;if(r.provider!==c)throw new Ce(`The Driver Adapter \`${r.adapterName}\`, based on \`${r.provider}\`, is not compatible with the provider \`${c}\` specified in the Prisma schema.`,this._clientVersion);if(n.datasources||n.datasourceUrl!==void 0)throw new Ce("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let o=!r&&a&&kv(a,{conflictCheck:"none"})||e.injectableEdgeEnv?.();try{let c=n??{},l=c.__internal??{},p=l.debug===!0;p&&ht.enable("prisma:client");let u=Ml.default.resolve(e.dirname,e.relativePath);_C.default.existsSync(u)||(u=e.dirname),vn("dirname",e.dirname),vn("relativePath",e.relativePath),vn("cwd",u);let d=l.engine||{};if(c.errorFormat?this._errorFormat=c.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=e.runtimeDataModel,this._engineConfig={cwd:u,dirname:e.dirname,enableDebugLogs:p,allowTriggerPanic:d.allowTriggerPanic,prismaPath:d.binaryPath??void 0,engineEndpoint:d.endpoint,generator:e.generator,showColors:this._errorFormat==="pretty",logLevel:c.log&&zR(c.log),logQueries:c.log&&!!(typeof c.log=="string"?c.log==="query":c.log.find(m=>typeof m=="string"?m==="query":m.level==="query")),env:o?.parsed??{},flags:[],engineWasm:e.engineWasm,compilerWasm:e.compilerWasm,clientVersion:e.clientVersion,engineVersion:e.engineVersion,previewFeatures:this._previewFeatures,activeProvider:e.activeProvider,inlineSchema:e.inlineSchema,overrideDatasources:Cj(c,e.datasourceNames),inlineDatasources:e.inlineDatasources,inlineSchemaHash:e.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:c.transactionOptions?.maxWait??2e3,timeout:c.transactionOptions?.timeout??5e3,isolationLevel:c.transactionOptions?.isolationLevel},logEmitter:s,isBundled:e.isBundled,adapter:r},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:zp,getBatchRequestPayload:Lp,prismaGraphQLToJSError:Mp,PrismaClientUnknownRequestError:Ot,PrismaClientInitializationError:Ce,PrismaClientKnownRequestError:Tn,debug:ht("prisma:client:accelerateEngine"),engineVersion:bC.version,clientVersion:e.clientVersion}},vn("clientVersion",e.clientVersion),this._engine=RR(e,this._engineConfig),this._requestHandler=new QR(this,s),c.log)for(let m of c.log){let f=typeof m=="string"?m:m.emit==="stdout"?m.level:null;f&&this.$on(f,x=>{Xl.log(`${Xl.tags[f]??""}`,x.message||x.query)})}}catch(c){throw c.clientVersion=this._clientVersion,c}return this._appliedParent=gp(this)}get[Symbol.toStringTag](){return"PrismaClient"}$use(n){this._middlewares.use(n)}$on(n,s){return n==="beforeExit"?this._engine.onBeforeExit(s):n&&this._engineConfig.logEmitter.on(n,s),this}$connect(){try{return this._engine.start()}catch(n){throw n.clientVersion=this._clientVersion,n}}async $disconnect(){try{await this._engine.stop()}catch(n){throw n.clientVersion=this._clientVersion,n}finally{jS()}}$executeRawInternal(n,s,a,r){let o=this._activeProvider;return this._request({action:"executeRaw",args:a,transaction:n,clientMethod:s,argsMapper:Mx({clientMethod:s,activeProvider:o}),callsite:La(this._errorFormat),dataPath:[],middlewareArgsMapper:r})}$executeRaw(n,...s){return this._createPrismaPromise(a=>{if(n.raw!==void 0||n.sql!==void 0){let[r,o]=Wx(n,s);return Lx(this._activeProvider,r.text,r.values,Array.isArray(n)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(a,"$executeRaw",r,o)}throw new Ki("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(n,...s){return this._createPrismaPromise(a=>(Lx(this._activeProvider,n,s,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(a,"$executeRawUnsafe",[n,...s])))}$runCommandRaw(n){if(e.activeProvider!=="mongodb")throw new Ki(`The ${e.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(s=>this._request({args:n,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:qR,callsite:La(this._errorFormat),transaction:s}))}async $queryRawInternal(n,s,a,r){let o=this._activeProvider;return this._request({action:"queryRaw",args:a,transaction:n,clientMethod:s,argsMapper:Mx({clientMethod:s,activeProvider:o}),callsite:La(this._errorFormat),dataPath:[],middlewareArgsMapper:r})}$queryRaw(n,...s){return this._createPrismaPromise(a=>{if(n.raw!==void 0||n.sql!==void 0)return this.$queryRawInternal(a,"$queryRaw",...Wx(n,s));throw new Ki("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(n){return this._createPrismaPromise(s=>{if(!this._hasPreviewFlag("typedSql"))throw new Ki("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(s,"$queryRawTyped",n)})}$queryRawUnsafe(n,...s){return this._createPrismaPromise(a=>this.$queryRawInternal(a,"$queryRawUnsafe",[n,...s]))}_transactionWithArray({promises:n,options:s}){let a=p3.nextId(),r=BR(n.length),o=n.map((c,l)=>{if(c?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let p=s?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,u={kind:"batch",id:a,index:l,isolationLevel:p,lock:r};return c.requestTransaction?.(u)??c});return o3(o)}async _transactionWithCallback({callback:n,options:s}){let a={traceparent:this._tracingHelper.getTraceParent()},r={maxWait:s?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:s?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:s?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},o=await this._engine.transaction("start",a,r),c;try{let l={kind:"itx",...o};c=await n(this._createItxClient(l)),await this._engine.transaction("commit",a,o)}catch(l){throw await this._engine.transaction("rollback",a,o).catch(()=>{}),l}return c}_createItxClient(n){return Ds(gp(Ds(hj(this),[Ri("_appliedParent",()=>this._appliedParent._createItxClient(n)),Ri("_createPrismaPromise",()=>Dx(n)),Ri(l3,()=>n.id)])),[mp(wj)])}$transaction(n,s){let a;typeof n=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?a=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:a=()=>this._transactionWithCallback({callback:n,options:s}):a=()=>this._transactionWithArray({promises:n,options:s});let r={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(r,a)}_request(n){n.otelParentCtx=this._tracingHelper.getActiveContext();let s=n.middlewareArgsMapper??c3,a={args:s.requestArgsToMiddlewareArgs(n.args),dataPath:n.dataPath,runInTransaction:!!n.transaction,action:n.action,model:n.model},r={middleware:{name:"middleware",middleware:!0,attributes:{method:"$use"},active:!1},operation:{name:"operation",attributes:{method:a.action,model:a.model,name:a.model?`${a.model}.${a.action}`:a.action}}},o=-1,c=async l=>{let p=this._middlewares.get(++o);if(p)return this._tracingHelper.runInChildSpan(r.middleware,E=>p(l,j=>(E?.end(),c(j))));let{runInTransaction:u,args:d,...m}=l,f={...n,...m};d&&(f.args=s.middlewareArgsToRequestArgs(d)),n.transaction!==void 0&&u===!1&&delete f.transaction;let x=await Sj(this,f);return f.model?bj({result:x,modelName:f.model,args:f.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):x};return this._tracingHelper.runInChildSpan(r.operation,()=>new yC.AsyncResource("prisma-client-request").runInAsyncScope(()=>c(a)))}async _executeRequest({args:n,clientMethod:s,dataPath:a,callsite:r,action:o,model:c,argsMapper:l,transaction:p,unpacker:u,otelParentCtx:d,customDataProxyFetch:m}){try{n=l?l(n):n;let f={name:"serialize"},x=this._tracingHelper.runInChildSpan(f,()=>db({modelName:c,runtimeDataModel:this._runtimeDataModel,action:o,args:n,clientMethod:s,callsite:r,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return ht.enabled("prisma:client")&&(vn("Prisma Client call:"),vn(`prisma.${s}(${TC(n)})`),vn("Generated request:"),vn(JSON.stringify(x,null,2)+`
`)),p?.kind==="batch"&&await p.lock,this._requestHandler.request({protocolQuery:x,modelName:c,action:o,clientMethod:s,dataPath:a,callsite:r,args:n,extensions:this._extensions,transaction:p,unpacker:u,otelParentCtx:d,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:m})}catch(f){throw f.clientVersion=this._clientVersion,f}}$metrics=new fb(this);_hasPreviewFlag(n){return!!this._engineConfig.previewFeatures?.includes(n)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}$extends=fj}return t}function Wx(e,t){return d3(e)?[new Rn(e,t),$R]:[e,NR]}function d3(e){return Array.isArray(e)&&Array.isArray(e.raw)}var m3=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function h3(e){return new Proxy(e,{get(t,i){if(i in t)return t[i];if(!m3.has(i))throw new TypeError(`Invalid enum value: ${String(i)}`)}})}function f3(e){kv(e,{conflictCheck:"warn"})}});var cy=w(Ve=>{Object.defineProperty(Ve,"__esModule",{value:!0});var{PrismaClientKnownRequestError:g3,PrismaClientUnknownRequestError:x3,PrismaClientRustPanicError:v3,PrismaClientInitializationError:b3,PrismaClientValidationError:y3,getPrismaClient:w3,sqltag:_3,empty:E3,join:k3,raw:S3,skip:k5,Decimal:A3,Debug:S5,objectEnumValues:Vs,makeStrictEnum:T3,Extensions:oy,warnOnce:A5,defineDmmfProperty:C3,Public:j3,getRuntime:T5,createParam:C5}=Vp(),Ne={};Ve.Prisma=Ne;Ve.$Enums={};Ne.prismaVersion={client:"6.8.2",engine:"2060c79ba17c6bb9f5823312b6f6b7f4a845738e"};Ne.PrismaClientKnownRequestError=g3;Ne.PrismaClientUnknownRequestError=x3;Ne.PrismaClientRustPanicError=v3;Ne.PrismaClientInitializationError=b3;Ne.PrismaClientValidationError=y3;Ne.Decimal=A3;Ne.sql=_3;Ne.empty=E3;Ne.join=k3;Ne.raw=S3;Ne.validator=j3.validator;Ne.getExtensionContext=oy.getExtensionContext;Ne.defineExtension=oy.defineExtension;Ne.DbNull=Vs.instances.DbNull;Ne.JsonNull=Vs.instances.JsonNull;Ne.AnyNull=Vs.instances.AnyNull;Ne.NullTypes={DbNull:Vs.classes.DbNull,JsonNull:Vs.classes.JsonNull,AnyNull:Vs.classes.AnyNull};var Ji=require("path");Ve.Prisma.TransactionIsolationLevel=T3({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});Ve.Prisma.UserScalarFieldEnum={id:"id",email:"email",password:"password"};Ve.Prisma.TournamentScalarFieldEnum={id:"id",name:"name",created_on:"created_on",created_by:"created_by",started:"started"};Ve.Prisma.PlayerScalarFieldEnum={id:"id",name:"name"};Ve.Prisma.Player_TournamentScalarFieldEnum={id:"id",player_id:"player_id",tournament_id:"tournament_id"};Ve.Prisma.SortOrder={asc:"asc",desc:"desc"};Ve.Prisma.UserOrderByRelevanceFieldEnum={email:"email",password:"password"};Ve.Prisma.TournamentOrderByRelevanceFieldEnum={id:"id",name:"name"};Ve.Prisma.PlayerOrderByRelevanceFieldEnum={name:"name"};Ve.Prisma.Player_TournamentOrderByRelevanceFieldEnum={tournament_id:"tournament_id"};Ve.Prisma.ModelName={User:"User",Tournament:"Tournament",Player:"Player",Player_Tournament:"Player_Tournament"};var Tt={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"/Users/sranftl/private_projects/mario-kart-tournament/server/node_modules/@prisma/client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"darwin-arm64",native:!0}],previewFeatures:[],sourceFilePath:"/Users/sranftl/private_projects/mario-kart-tournament/server/prisma/schema.prisma"},relativeEnvPaths:{rootEnvPath:null,schemaEnvPath:"../../../.env"},relativePath:"../../../prisma",clientVersion:"6.8.2",engineVersion:"2060c79ba17c6bb9f5823312b6f6b7f4a845738e",datasourceNames:["db"],activeProvider:"mysql",inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String

  tournaments Tournament[]
}

model Tournament {
  id         String   @id @default(uuid()) @db.Char(36)
  name       String
  created_on DateTime @default(now())
  created_by Int
  started    Boolean  @default(false)

  creator User                @relation(fields: [created_by], references: [id])
  players Player_Tournament[]
}

model Player {
  id   Int    @id @default(autoincrement())
  name String

  tournaments Player_Tournament[]
}

model Player_Tournament {
  id            Int    @id @default(autoincrement())
  player_id     Int
  tournament_id String

  player     Player     @relation(fields: [player_id], references: [id], onDelete: Cascade)
  tournament Tournament @relation(fields: [tournament_id], references: [id], onDelete: Cascade)

  @@unique([player_id, tournament_id])
  @@index([player_id])
  @@index([tournament_id])
}
`,inlineSchemaHash:"38453507f4f88bfa84bd44f73f9570e697360dc3013405d70004fec09201d3d5",copyEngine:!0},ry=require("fs");Tt.dirname=__dirname;if(!ry.existsSync(Ji.join(__dirname,"schema.prisma"))){let e=["node_modules/.prisma/client",".prisma/client"],t=e.find(i=>ry.existsSync(Ji.join(process.cwd(),i,"schema.prisma")))??e[0];Tt.dirname=Ji.join(process.cwd(),t),Tt.isBundled=!0}Tt.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"tournaments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Tournament","nativeType":null,"relationName":"TournamentToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Tournament":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":["Char",["36"]],"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"created_on","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"created_by","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"started","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"creator","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"TournamentToUser","relationFromFields":["created_by"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"players","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Player_Tournament","nativeType":null,"relationName":"Player_TournamentToTournament","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Player":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"tournaments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Player_Tournament","nativeType":null,"relationName":"PlayerToPlayer_Tournament","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Player_Tournament":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"player_id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"tournament_id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"player","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Player","nativeType":null,"relationName":"PlayerToPlayer_Tournament","relationFromFields":["player_id"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"tournament","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Tournament","nativeType":null,"relationName":"Player_TournamentToTournament","relationFromFields":["tournament_id"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["player_id","tournament_id"]],"uniqueIndexes":[{"name":null,"fields":["player_id","tournament_id"]}],"isGenerated":false}},"enums":{},"types":{}}');C3(Ve.Prisma,Tt.runtimeDataModel);Tt.engineWasm=void 0;Tt.compilerWasm=void 0;var{warnEnvConflicts:R3}=Vp();R3({rootEnvPath:Tt.relativeEnvPaths.rootEnvPath&&Ji.resolve(Tt.dirname,Tt.relativeEnvPaths.rootEnvPath),schemaEnvPath:Tt.relativeEnvPaths.schemaEnvPath&&Ji.resolve(Tt.dirname,Tt.relativeEnvPaths.schemaEnvPath)});var q3=w3(Tt);Ve.PrismaClient=q3;Object.assign(Ve,Ne);Ji.join(__dirname,"libquery_engine-darwin-arm64.dylib.node");Ji.join(process.cwd(),"node_modules/.prisma/client/libquery_engine-darwin-arm64.dylib.node");Ji.join(__dirname,"schema.prisma");Ji.join(process.cwd(),"node_modules/.prisma/client/schema.prisma")});var py=w((R5,ly)=>{ly.exports={...cy()}});var dy=w((q5,uy)=>{uy.exports={...py()}});var hy=w((O5,P3)=>{P3.exports={name:"@hapi/cookie",description:"Cookie authentication plugin",version:"12.0.1",repository:"git://github.com/hapijs/cookie",main:"lib/index.js",files:["lib"],keywords:["hapi","plugin","auth","cookie","session"],eslintConfig:{extends:["plugin:@hapi/module"]},dependencies:{"@hapi/boom":"^10.0.1","@hapi/bounce":"^3.0.1","@hapi/hoek":"^11.0.2","@hapi/validate":"^2.0.1"},devDependencies:{"@hapi/code":"^9.0.3","@hapi/eslint-plugin":"*","@hapi/hapi":"^21.2.1","@hapi/lab":"^25.1.2"},scripts:{test:"lab -a @hapi/code -t 100 -L","test-cov-html":"lab -a @hapi/code -r html -o coverage.html"},license:"BSD-3-Clause"}});var gy=w(fy=>{"use strict";var tr=G(),O3=it(),qn=z(),Re=xt(),Ks={};fy.plugin={pkg:hy(),requirements:{hapi:">=20.0.0"},register:e=>{e.auth.scheme("cookie",Ks.implementation)}};Ks.schema=Re.object({appendNext:Re.alternatives([Re.string(),Re.boolean(),Re.object({raw:Re.boolean(),name:Re.string()})]).default(!1),cookie:Re.object({name:Re.string().default("sid"),encoding:Re.valid("iron").default("iron"),password:Re.required(),ignoreErrors:Re.valid(!0).default(!0)}).unknown().default(),keepAlive:Re.boolean().when("cookie.ttl",{is:Re.number().min(1),otherwise:Re.forbidden()}).default(!1),redirectTo:Re.alternatives([Re.string(),Re.func()]).allow(!1),requestDecoratorName:Re.string().default("cookieAuth"),validate:Re.func()}).required();Ks.CookieAuth=class{constructor(e,t){this.request=e,this.settings=t}set(e,t){let{h:i,request:n,settings:s}=this;if(arguments.length>1){let a=e;return qn.assert(a&&typeof a=="string","Invalid session key"),e=n.auth.artifacts,qn.assert(e,"No active session to apply key to"),e[a]=t,i.state(s.name,e)}qn.assert(e&&typeof e=="object","Invalid session"),n.auth.artifacts=e,i.state(s.name,e)}clear(e){let{h:t,request:i,settings:n}=this;if(arguments.length){qn.assert(e&&typeof e=="string","Invalid session key");let s=i.auth.artifacts;return qn.assert(s,"No active session to clear key from"),delete s[e],t.state(n.name,s)}i.auth.artifacts=null,t.unstate(n.name)}ttl(e){let{h:t,request:i,settings:n}=this,s=i.auth.artifacts;qn.assert(s,"No active session to modify ttl on"),t.state(n.name,s,{ttl:e})}};Ks.implementation=(e,t)=>{let i=Re.attempt(t,Ks.schema);i.name=i.cookie.name,delete i.cookie.name,e.state(i.name,i.cookie),i.cookie=e.states.cookies[i.name],typeof i.appendNext=="boolean"&&(i.appendNext=i.appendNext?"next":""),typeof i.appendNext=="object"&&(i.appendNextRaw=i.appendNext.raw,i.appendNext=i.appendNext.name||"next");let n=a=>new Ks.CookieAuth(a,i);return e.decorate("request",i.requestDecoratorName,n,{apply:!0}),e.ext("onPreAuth",(a,r)=>(a[i.requestDecoratorName].h=r,r.continue)),{authenticate:async(a,r)=>{let o=async()=>{let l=a.state[i.name];if(!l)return c(tr.unauthorized(null,"cookie"));if(!i.validate)return i.keepAlive&&r.state(i.name,l),r.authenticated({credentials:l,artifacts:l});let p=l;try{let u=await i.validate(a,l);if(qn.assert(typeof u=="object","Invalid return from validate function"),qn.assert(Object.prototype.hasOwnProperty.call(u,"isValid"),"validate function must have isValid property in return"),!u.isValid)throw tr.unauthorized(null,"cookie");return p=u.credentials??p,i.keepAlive&&r.state(i.name,l),r.authenticated({credentials:p,artifacts:l})}catch(u){O3.rethrow(u,"system"),i.cookie.clearInvalid&&r.unstate(i.name);let d=tr.isBoom(u)&&u.typeof===tr.unauthorized?u:null;return d||(d=tr.unauthorized("Invalid cookie"),d.data=u),c(d,{credentials:p,artifacts:l})}},c=(l,p)=>{let u=i.redirectTo;a.route.settings.plugins.cookie?.redirectTo!==void 0&&(u=a.route.settings.plugins.cookie.redirectTo);let d=typeof u=="function"?u(a):u;return!d||a.auth.mode!=="required"?r.unauthenticated(l):(i.appendNext&&(d.indexOf("?")!==-1?d+="&":d+="?",i.appendNextRaw?d+=i.appendNext+"="+encodeURIComponent(a.raw.req.url):d+=i.appendNext+"="+encodeURIComponent(a.url.pathname+a.url.search)),r.response("You are being redirected...").takeover().redirect(d))};return await o()}}}});var _y=w((z5,wy)=>{var nr=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,I3=typeof AbortController=="function",Vo=I3?AbortController:class{constructor(){this.signal=new vy}abort(t=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||t,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},$3=typeof AbortSignal=="function",N3=typeof Vo.AbortSignal=="function",vy=$3?AbortSignal:N3?Vo.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(t){t.type==="abort"&&(this.aborted=!0,this.onabort(t),this._listeners.forEach(i=>i(t),this))}onabort(){}addEventListener(t,i){t==="abort"&&this._listeners.push(i)}removeEventListener(t,i){t==="abort"&&(this._listeners=this._listeners.filter(n=>n!==i))}},Qp=new Set,Wp=(e,t)=>{let i=`LRU_CACHE_OPTION_${e}`;Ko(i)&&Yp(i,`${e} option`,`options.${t}`,Gs)},Gp=(e,t)=>{let i=`LRU_CACHE_METHOD_${e}`;if(Ko(i)){let{prototype:n}=Gs,{get:s}=Object.getOwnPropertyDescriptor(n,e);Yp(i,`${e} method`,`cache.${t}()`,s)}},F3=(e,t)=>{let i=`LRU_CACHE_PROPERTY_${e}`;if(Ko(i)){let{prototype:n}=Gs,{get:s}=Object.getOwnPropertyDescriptor(n,e);Yp(i,`${e} property`,`cache.${t}`,s)}},by=(...e)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...e):console.error(...e)},Ko=e=>!Qp.has(e),Yp=(e,t,i,n)=>{Qp.add(e);let s=`The ${t} is deprecated. Please use ${i} instead.`;by(s,"DeprecationWarning",e,n)},Pn=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),yy=e=>Pn(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Ws:null:null,Ws=class extends Array{constructor(t){super(t),this.fill(0)}},Jp=class{constructor(t){if(t===0)return[];let i=yy(t);this.heap=new i(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Gs=class e{constructor(t={}){let{max:i=0,ttl:n,ttlResolution:s=1,ttlAutopurge:a,updateAgeOnGet:r,updateAgeOnHas:o,allowStale:c,dispose:l,disposeAfter:p,noDisposeOnSet:u,noUpdateTTL:d,maxSize:m=0,maxEntrySize:f=0,sizeCalculation:x,fetchMethod:E,fetchContext:j,noDeleteOnFetchRejection:q,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:K,ignoreFetchAbort:P}=t,{length:T,maxAge:I,stale:$}=t instanceof e?{}:t;if(i!==0&&!Pn(i))throw new TypeError("max option must be a nonnegative integer");let _=i?yy(i):Array;if(!_)throw new Error("invalid max value: "+i);if(this.max=i,this.maxSize=m,this.maxEntrySize=f||this.maxSize,this.sizeCalculation=x||T,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=E||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=j,!this.fetchMethod&&j!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(i).fill(null),this.valList=new Array(i).fill(null),this.next=new _(i),this.prev=new _(i),this.head=0,this.tail=0,this.free=new Jp(i),this.initialFill=1,this.size=0,typeof l=="function"&&(this.dispose=l),typeof p=="function"?(this.disposeAfter=p,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!u,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!q,this.allowStaleOnFetchRejection=!!O,this.allowStaleOnFetchAbort=!!K,this.ignoreFetchAbort=!!P,this.maxEntrySize!==0){if(this.maxSize!==0&&!Pn(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!Pn(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!$,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!o,this.ttlResolution=Pn(s)||s===0?s:1,this.ttlAutopurge=!!a,this.ttl=n||I||0,this.ttl){if(!Pn(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let y="LRU_CACHE_UNBOUNDED";Ko(y)&&(Qp.add(y),by("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",y,e))}$&&Wp("stale","allowStale"),I&&Wp("maxAge","ttl"),T&&Wp("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Ws(this.max),this.starts=new Ws(this.max),this.setItemTTL=(n,s,a=nr.now())=>{if(this.starts[n]=s!==0?a:0,this.ttls[n]=s,s!==0&&this.ttlAutopurge){let r=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},s+1);r.unref&&r.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?nr.now():0},this.statusTTL=(n,s)=>{n&&(n.ttl=this.ttls[s],n.start=this.starts[s],n.now=t||i(),n.remainingTTL=n.now+n.ttl-n.start)};let t=0,i=()=>{let n=nr.now();if(this.ttlResolution>0){t=n;let s=setTimeout(()=>t=0,this.ttlResolution);s.unref&&s.unref()}return n};this.getRemainingTTL=n=>{let s=this.keyMap.get(n);return s===void 0?0:this.ttls[s]===0||this.starts[s]===0?1/0:this.starts[s]+this.ttls[s]-(t||i())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(t||i())-this.starts[n]>this.ttls[n]}updateItemAge(t){}statusTTL(t,i){}setItemTTL(t,i,n){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Ws(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,i,n,s)=>{if(this.isBackgroundFetch(i))return 0;if(!Pn(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(i,t),!Pn(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.addItemSize=(t,i,n)=>{if(this.sizes[t]=i,this.maxSize){let s=this.maxSize-this.sizes[t];for(;this.calculatedSize>s;)this.evict(!0)}this.calculatedSize+=this.sizes[t],n&&(n.entrySize=i,n.totalCalculatedSize=this.calculatedSize)}}removeItemSize(t){}addItemSize(t,i){}requireSize(t,i,n,s){if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let i=this.tail;!(!this.isValidIndex(i)||((t||!this.isStale(i))&&(yield i),i===this.head));)i=this.prev[i]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let i=this.head;!(!this.isValidIndex(i)||((t||!this.isStale(i))&&(yield i),i===this.tail));)i=this.next[i]}isValidIndex(t){return t!==void 0&&this.keyMap.get(this.keyList[t])===t}*entries(){for(let t of this.indexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*rentries(){for(let t of this.rindexes())this.valList[t]!==void 0&&this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield[this.keyList[t],this.valList[t]])}*keys(){for(let t of this.indexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*rkeys(){for(let t of this.rindexes())this.keyList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.keyList[t])}*values(){for(let t of this.indexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}*rvalues(){for(let t of this.rindexes())this.valList[t]!==void 0&&!this.isBackgroundFetch(this.valList[t])&&(yield this.valList[t])}[Symbol.iterator](){return this.entries()}find(t,i){for(let n of this.indexes()){let s=this.valList[n],a=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(a!==void 0&&t(a,this.keyList[n],this))return this.get(this.keyList[n],i)}}forEach(t,i=this){for(let n of this.indexes()){let s=this.valList[n],a=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;a!==void 0&&t.call(i,a,this.keyList[n],this)}}rforEach(t,i=this){for(let n of this.rindexes()){let s=this.valList[n],a=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;a!==void 0&&t.call(i,a,this.keyList[n],this)}}get prune(){return Gp("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(let i of this.rindexes({allowStale:!0}))this.isStale(i)&&(this.delete(this.keyList[i]),t=!0);return t}dump(){let t=[];for(let i of this.indexes({allowStale:!0})){let n=this.keyList[i],s=this.valList[i],a=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(a===void 0)continue;let r={value:a};if(this.ttls){r.ttl=this.ttls[i];let o=nr.now()-this.starts[i];r.start=Math.floor(Date.now()-o)}this.sizes&&(r.size=this.sizes[i]),t.unshift([n,r])}return t}load(t){this.clear();for(let[i,n]of t){if(n.start){let s=Date.now()-n.start;n.start=nr.now()-s}this.set(i,n.value,n)}}dispose(t,i,n){}set(t,i,{ttl:n=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,status:l}={}){if(r=this.requireSize(t,i,r,o),this.maxEntrySize&&r>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(t),this;let p=this.size===0?void 0:this.keyMap.get(t);if(p===void 0)p=this.newIndex(),this.keyList[p]=t,this.valList[p]=i,this.keyMap.set(t,p),this.next[this.tail]=p,this.prev[p]=this.tail,this.tail=p,this.size++,this.addItemSize(p,r,l),l&&(l.set="add"),c=!1;else{this.moveToTail(p);let u=this.valList[p];if(i!==u){if(this.isBackgroundFetch(u)?u.__abortController.abort(new Error("replaced")):a||(this.dispose(u,t,"set"),this.disposeAfter&&this.disposed.push([u,t,"set"])),this.removeItemSize(p),this.valList[p]=i,this.addItemSize(p,r,l),l){l.set="replace";let d=u&&this.isBackgroundFetch(u)?u.__staleWhileFetching:u;d!==void 0&&(l.oldValue=d)}}else l&&(l.set="update")}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(p,n,s),this.statusTTL(l,p),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let t=this.valList[this.head];return this.evict(!0),t}}evict(t){let i=this.head,n=this.keyList[i],s=this.valList[i];return this.isBackgroundFetch(s)?s.__abortController.abort(new Error("evicted")):(this.dispose(s,n,"evict"),this.disposeAfter&&this.disposed.push([s,n,"evict"])),this.removeItemSize(i),t&&(this.keyList[i]=null,this.valList[i]=null,this.free.push(i)),this.head=this.next[i],this.keyMap.delete(n),this.size--,i}has(t,{updateAgeOnHas:i=this.updateAgeOnHas,status:n}={}){let s=this.keyMap.get(t);if(s!==void 0)if(this.isStale(s))n&&(n.has="stale",this.statusTTL(n,s));else return i&&this.updateItemAge(s),n&&(n.has="hit"),this.statusTTL(n,s),!0;else n&&(n.has="miss");return!1}peek(t,{allowStale:i=this.allowStale}={}){let n=this.keyMap.get(t);if(n!==void 0&&(i||!this.isStale(n))){let s=this.valList[n];return this.isBackgroundFetch(s)?s.__staleWhileFetching:s}}backgroundFetch(t,i,n,s){let a=i===void 0?void 0:this.valList[i];if(this.isBackgroundFetch(a))return a;let r=new Vo;n.signal&&n.signal.addEventListener("abort",()=>r.abort(n.signal.reason));let o={signal:r.signal,options:n,context:s},c=(m,f=!1)=>{let{aborted:x}=r.signal,E=n.ignoreFetchAbort&&m!==void 0;return n.status&&(x&&!f?(n.status.fetchAborted=!0,n.status.fetchError=r.signal.reason,E&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),x&&!E&&!f?p(r.signal.reason):(this.valList[i]===d&&(m===void 0?d.__staleWhileFetching?this.valList[i]=d.__staleWhileFetching:this.delete(t):(n.status&&(n.status.fetchUpdated=!0),this.set(t,m,o.options))),m)},l=m=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=m),p(m)),p=m=>{let{aborted:f}=r.signal,x=f&&n.allowStaleOnFetchAbort,E=x||n.allowStaleOnFetchRejection,j=E||n.noDeleteOnFetchRejection;if(this.valList[i]===d&&(!j||d.__staleWhileFetching===void 0?this.delete(t):x||(this.valList[i]=d.__staleWhileFetching)),E)return n.status&&d.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),d.__staleWhileFetching;if(d.__returned===d)throw m},u=(m,f)=>{this.fetchMethod(t,a,o).then(x=>m(x),f),r.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(m(),n.allowStaleOnFetchAbort&&(m=x=>c(x,!0)))})};n.status&&(n.status.fetchDispatched=!0);let d=new Promise(u).then(c,l);return d.__abortController=r,d.__staleWhileFetching=a,d.__returned=null,i===void 0?(this.set(t,d,{...o.options,status:void 0}),i=this.keyMap.get(t)):this.valList[i]=d,d}isBackgroundFetch(t){return t&&typeof t=="object"&&typeof t.then=="function"&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||t.__returned===null)}async fetch(t,{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:r=this.noDisposeOnSet,size:o=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,fetchContext:f=this.fetchContext,forceRefresh:x=!1,status:E,signal:j}={}){if(!this.fetchMethod)return E&&(E.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:E});let q={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:r,size:o,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:m,ignoreFetchAbort:d,status:E,signal:j},S=this.keyMap.get(t);if(S===void 0){E&&(E.fetch="miss");let O=this.backgroundFetch(t,S,q,f);return O.__returned=O}else{let O=this.valList[S];if(this.isBackgroundFetch(O)){let $=i&&O.__staleWhileFetching!==void 0;return E&&(E.fetch="inflight",$&&(E.returnedStale=!0)),$?O.__staleWhileFetching:O.__returned=O}let K=this.isStale(S);if(!x&&!K)return E&&(E.fetch="hit"),this.moveToTail(S),n&&this.updateItemAge(S),this.statusTTL(E,S),O;let P=this.backgroundFetch(t,S,q,f),T=P.__staleWhileFetching!==void 0,I=T&&i;return E&&(E.fetch=T&&K?"stale":"refresh",I&&K&&(E.returnedStale=!0)),I?P.__staleWhileFetching:P.__returned=P}}get(t,{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}={}){let r=this.keyMap.get(t);if(r!==void 0){let o=this.valList[r],c=this.isBackgroundFetch(o);return this.statusTTL(a,r),this.isStale(r)?(a&&(a.get="stale"),c?(a&&(a.returnedStale=i&&o.__staleWhileFetching!==void 0),i?o.__staleWhileFetching:void 0):(s||this.delete(t),a&&(a.returnedStale=i),i?o:void 0)):(a&&(a.get="hit"),c?o.__staleWhileFetching:(this.moveToTail(r),n&&this.updateItemAge(r),o))}else a&&(a.get="miss")}connect(t,i){this.prev[i]=t,this.next[t]=i}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return Gp("del","delete"),this.delete}delete(t){let i=!1;if(this.size!==0){let n=this.keyMap.get(t);if(n!==void 0)if(i=!0,this.size===1)this.clear();else{this.removeItemSize(n);let s=this.valList[n];this.isBackgroundFetch(s)?s.__abortController.abort(new Error("deleted")):(this.dispose(s,t,"delete"),this.disposeAfter&&this.disposed.push([s,t,"delete"])),this.keyMap.delete(t),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return i}clear(){for(let t of this.rindexes({allowStale:!0})){let i=this.valList[t];if(this.isBackgroundFetch(i))i.__abortController.abort(new Error("deleted"));else{let n=this.keyList[t];this.dispose(i,n,"delete"),this.disposeAfter&&this.disposed.push([i,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Gp("reset","clear"),this.clear}get length(){return F3("length","size"),this.size}static get AbortController(){return Vo}static get AbortSignal(){return vy}};wy.exports=Gs});var Xp=w(Zp=>{"use strict";var L3=require("crypto"),M3=require("stream"),D3=require("util"),B3=G(),z3=it(),U3=_y(),Oi={pendings:new Map,streamEnd:D3.promisify(M3.finished)};Oi.computeHashed=async function(e,t){let i=e.request.server.plugins.inert._etags;if(!i)return null;let s=[e.source.path,t.ino,t.size,t.mtime.getTime()].join("-"),a=i.get(s);if(a)return a;let r=Oi.pendings.get(s);if(r)return await r;let o=async()=>{try{let c=await Oi.hashFile(e);return i.set(s,c),c}finally{Oi.pendings.delete(s)}};return Oi.pendings.set(s,r=o()),await r};Oi.hashFile=async function(e){let t=L3.createHash("sha1");t.setEncoding("hex");let i=e.source.file.createReadStream({autoClose:!1});i.pipe(t);try{return await Oi.streamEnd(i),t.read()}catch(n){throw z3.rethrow(n,"system"),B3.boomify(n,{message:"Failed to hash file",data:{path:e.source.path}})}};Oi.computeSimple=function(e,t){let i=t.size.toString(16),n=t.mtime.getTime().toString(16);return i+"-"+n};Zp.apply=async function(e,t){let i=e.source.settings.etagMethod;if(i===!1)return;let n;i==="simple"?n=Oi.computeSimple(e,t):n=await Oi.computeHashed(e,t),n!==null&&e.etag(n,{vary:!0})};Zp.Cache=U3});var nu=w(On=>{"use strict";var tu=require("fs"),H3=require("util"),sr=G(),Ey=it(),eu=z(),iu={methods:{promised:["open","close","fstat","readdir"],raw:["createReadStream"]},notFound:new Set(["ENOENT","ENOTDIR"])};On.File=class{constructor(e){this.path=e,this.fd=null}async open(e){eu.assert(this.fd===null);try{this.fd=await On.open(this.path,e)}catch(t){let i={path:this.path};throw this.path.indexOf("\0")!==-1||iu.notFound.has(t.code)?sr.notFound(null,i):t.code==="EACCES"||t.code==="EPERM"?(i.code=t.code,sr.forbidden(null,i)):sr.boomify(t,{message:"Failed to open file",data:i})}}close(){this.fd!==null&&(Ey.background(On.close(this.fd)),this.fd=null)}async stat(){eu.assert(this.fd!==null);try{let e=await On.fstat(this.fd);if(e.isDirectory())throw sr.forbidden(null,{code:"EISDIR",path:this.path});return e}catch(e){throw this.close(this.fd),Ey.rethrow(e,["boom","system"]),sr.boomify(e,{message:"Failed to stat file",data:{path:this.path}})}}async openStat(e){return await this.open(e),this.stat()}createReadStream(e){eu.assert(this.fd!==null),e=Object.assign({fd:this.fd,start:0},e);let t=On.createReadStream(this.path,e);return e.autoClose!==!1&&(this.fd=null),t}};for(let e of iu.methods.raw)On[e]=tu[e].bind(tu);for(let e of iu.methods.promised)On[e]=H3.promisify(tu[e])});var au=w(Js=>{"use strict";var In=require("path"),V3=yl(),ky=G(),K3=it(),su=z(),Fe=xt(),W3=Xp(),Sy=nu(),ot={};ot.defaultMap={gzip:".gz"};ot.schema=Fe.alternatives([Fe.string(),Fe.func(),Fe.object({path:Fe.alternatives(Fe.string(),Fe.func()).required(),confine:Fe.alternatives(Fe.string(),Fe.boolean()).default(!0),filename:Fe.string(),mode:Fe.string().valid("attachment","inline").allow(!1),lookupCompressed:Fe.boolean(),lookupMap:Fe.object().min(1).pattern(/.+/,Fe.string()),etagMethod:Fe.string().valid("hash","simple").allow(!1),start:Fe.number().integer().min(0).default(0),end:Fe.number().integer().min(Fe.ref("start"))}).with("filename","mode")]);Js.handler=function(e,t){let i=Fe.attempt(t,ot.schema,"Invalid file handler options ("+e.path+")");return i=typeof t!="object"?{path:t,confine:"."}:i,i.confine=i.confine===!0?".":i.confine,su.assert(typeof i.path!="string"||i.path[i.path.length-1]!=="/","File path cannot end with a '/':",e.path),s=>{let a=typeof i.path=="function"?i.path(s):i.path;return Js.response(a,i,s)}};Js.load=function(e,t,i){let n=Js.response(e,i,t,!0);return ot.prepare(n)};Js.response=function(e,t,i,n){if(su.assert(!t.mode||["attachment","inline"].indexOf(t.mode)!==-1,"options.mode must be either false, attachment, or inline"),t.confine){let r=In.resolve(i.route.settings.files.relativeTo,t.confine);e=In.isAbsolute(e)?In.normalize(e):In.join(r,e),e.lastIndexOf(r,0)!==0&&(e=null)}else e=In.isAbsolute(e)?In.normalize(e):In.join(i.route.settings.files.relativeTo,e);let s={path:e,settings:t,stat:null,file:null},a=n?null:ot.prepare;return i.generateResponse(s,{variety:"file",marshal:ot.marshal,prepare:a,close:ot.close})};ot.prepare=async function(e){let{request:t,source:i}=e,{settings:n,path:s}=i;if(s===null)throw ky.forbidden(null,{code:"EACCES"});let a=i.file=new Sy.File(s);try{let r=await a.openStat("r"),o=n.start??0;if(n.end!==void 0?e.bytes(n.end-o+1):e.bytes(r.size-o),e.headers["content-type"]||e.type(t.server.mime.path(s).type??"application/octet-stream"),e.header("last-modified",r.mtime.toUTCString()),n.mode){let c=n.filename??In.basename(s);e.header("content-disposition",n.mode+"; filename="+encodeURIComponent(c))}return await W3.apply(e,r),e}catch(r){throw ot.close(e),r}};ot.marshal=async function(e){let{request:t,source:i}=e,{settings:n}=i;if(n.lookupCompressed&&!n.start&&n.end===void 0&&t.server.settings.compression!==!1){let a=n.lookupMap??ot.defaultMap,r=t.info.acceptEncoding,o=a.hasOwnProperty(r)?a[r]:null;if(o){let c=new Sy.File(`${i.path}${o}`);try{var s=await c.openStat("r")}catch(l){c.close(),K3.ignore(l,"boom")}s&&(i.file.close(),i.file=c,e.bytes(s.size),e.header("content-encoding",r),e.vary("accept-encoding"))}}return ot.createStream(e)};ot.addContentRange=function(e){let{request:t}=e,i=null;if(t.route.settings.response.ranges){let n=e.headers["content-length"];if(t.headers.range&&n&&(!t.headers["if-range"]||t.headers["if-range"]===e.headers.etag)){let s=t.server.mime.type(e.headers["content-type"]||"application/octet-stream"),a=t.server.settings.compression&&s.compressible&&!e.headers["content-encoding"]?t.info.acceptEncoding:null;if(a==="identity"||!a){let r=V3.header(t.headers.range,n);if(!r){let o=ky.rangeNotSatisfiable();throw o.output.headers["content-range"]="bytes */"+n,o}r.length===1&&(i=r[0],e.code(206),e.bytes(i.to-i.from+1),e.header("content-range","bytes "+i.from+"-"+i.to+"/"+n))}}e.header("accept-ranges","bytes")}return i};ot.createStream=function(e){let{settings:t,file:i}=e.source;su.assert(i!==null);let n=ot.addContentRange(e),s={start:t.start??0,end:t.end};return n&&(s.end=n.to+s.start,s.start=n.from+s.start),i.createReadStream(s)};ot.close=function(e){let{source:t}=e;t.file!==null&&(t.file.close(),t.file=null)}});var Ty=w(Ay=>{"use strict";var ru=require("path"),Qs=G(),Wo=it(),cu=z(),Ke=xt(),ou=au(),G3=nu(),We={};We.schema=Ke.object({path:Ke.alternatives(Ke.array().items(Ke.string()).single(),Ke.func()).required(),index:Ke.alternatives(Ke.boolean(),Ke.array().items(Ke.string()).single()).default(!0),listing:Ke.boolean(),showHidden:Ke.boolean(),redirectToSlash:Ke.boolean(),lookupCompressed:Ke.boolean(),lookupMap:Ke.object().min(1).pattern(/.+/,Ke.string()),etagMethod:Ke.string().valid("hash","simple").allow(!1),defaultExtension:Ke.string().alphanum()});We.resolvePathOption=function(e){if(e instanceof Error)throw e;if(typeof e=="string")return[e];if(Array.isArray(e))return e;throw Qs.internal("Invalid path function")};Ay.handler=function(e,t){let i=Ke.attempt(t,We.schema,"Invalid directory handler options ("+e.path+")");cu.assert(e.path[e.path.length-1]==="}","The route path for a directory handler must end with a parameter:",e.path);let n=/\w+/.exec(e.path.slice(e.path.lastIndexOf("{")))[0],s=e.settings.files.relativeTo,a=Array.isArray(i.path)?i.path:null,r=i.index===!0?["index.html"]:i.index||[];return async(c,l)=>{let p=a??We.resolvePathOption(i.path.call(null,c)),u=c.params[n]??"";if(ru.isAbsolute(u))throw Qs.notFound(null,{});if(u&&!i.showHidden&&We.isFileHidden(u))throw Qs.notFound(null,{});!u&&(c.server.settings.router.stripTrailingSlash||!c.path.endsWith("/"))&&(c.path+="/");let d=c.path,m=d.endsWith("/"),f={confine:null,lookupCompressed:i.lookupCompressed,lookupMap:i.lookupMap,etagMethod:i.etagMethod},x=async E=>{f.confine=E;let j=u,q;try{return await ou.load(j,c,f)}catch(S){Wo.ignore(S,"boom"),q=S}if(We.isNotFound(q)){if(!i.defaultExtension)throw q;return m&&(j=j.slice(0,-1)),await ou.load(j+"."+i.defaultExtension,c,f)}if(We.isDirectory(q)){if(i.redirectToSlash!==!1&&!c.server.settings.router.stripTrailingSlash&&!m)return l.redirect(d+"/");for(let S of r){let O=ru.join(j,S);try{return await ou.load(O,c,f)}catch(K){if(Wo.ignore(K,"boom"),!We.isNotFound(K))throw Qs.internal(S+" is a directory",K)}}if(i.listing)return We.generateListing(ru.join(s,E,j),d,u,m,i,c)}throw q};for(let E=0;E<p.length;++E)try{return await x(p[E])}catch(j){if(Wo.ignore(j,"boom"),!We.isNotFound(j)||E===p.length-1)throw j}throw Qs.notFound(null,{})}};We.generateListing=async function(e,t,i,n,s,a){let r;try{r=await G3.readdir(e)}catch(l){throw Wo.rethrow(l,"system"),Qs.internal("Error accessing directory",l)}t=decodeURIComponent(t);let o=cu.escapeHtml(t),c="<html><head><title>"+o+"</title></head><body><h1>Directory: "+o+"</h1><ul>";if(i){let l=t.substring(0,t.lastIndexOf("/",t.length-(n?2:1)))+"/";c=c+'<li><a href="'+We.pathEncode(l)+'">Parent Directory</a></li>'}for(let l of r)(s.showHidden||!We.isFileHidden(l))&&(c=c+'<li><a href="'+We.pathEncode(t+(n?"":"/")+l)+'">'+cu.escapeHtml(l)+"</a></li>");return c=c+"</ul></body></html>",a.generateResponse(c)};We.isFileHidden=function(e){return/(^|[\\\/])\.([^.\\\/]|\.[^\\\/])/.test(e)};We.pathEncode=function(e){return encodeURIComponent(e).replace(/%2F/g,"/").replace(/%5C/g,"\\")};We.isNotFound=function(e){return e.output.statusCode===404};We.isDirectory=function(e){return e.output.statusCode===403&&e.data.code==="EISDIR"}});var Cy=w((G5,J3)=>{J3.exports={name:"@hapi/inert",description:"Static file and directory handlers plugin for hapi.js",version:"7.1.0",repository:"https://github.com/hapijs/inert.git",main:"lib/index.js",types:"lib/index.d.ts",files:["lib"],keywords:["file","directory","handler","hapi","plugin"],eslintConfig:{extends:["plugin:@hapi/module"]},dependencies:{"@hapi/ammo":"^6.0.1","@hapi/boom":"^10.0.1","@hapi/bounce":"^3.0.1","@hapi/hoek":"^11.0.2","@hapi/validate":"^2.0.1","lru-cache":"^7.14.1"},devDependencies:{"@hapi/code":"^9.0.3","@hapi/eslint-plugin":"*","@hapi/file":"^3.0.0","@hapi/hapi":"^21.3.0","@hapi/lab":"^25.1.2","@types/node":"^14.18.37",joi:"^17.8.3",typescript:"^4.9.5"},scripts:{test:"lab -f -a @hapi/code -t 100 -L -Y","test-cov-html":"lab -f -a @hapi/code -r html -o coverage.html"},license:"BSD-3-Clause"}});var Py=w(qy=>{"use strict";var jy=z(),lu=xt(),Q3=Ty(),Y3=Xp(),Ry=au(),pu={schema:lu.object({etagsCacheMaxSize:lu.number().integer().min(0).default(1e3)}).required()};pu.fileMethod=function(e,t={}){return(typeof t.confine>"u"||t.confine===!0)&&(t.confine="."),jy.assert(t.end===void 0||+t.start<=+t.end,"options.start must be less than or equal to options.end"),this.response(Ry.response(e,t,this.request))};qy.plugin={pkg:Cy(),once:!0,requirements:{hapi:">=20.0.0"},register(e,t){jy.assert(Object.keys(t).length===0,"Inert does not support registration options");let i=lu.attempt(e.settings.plugins?.inert??{},pu.schema,'Invalid "inert" server options');e.expose("_etags",i.etagsCacheMaxSize>0?new Y3.Cache({max:i.etagsCacheMaxSize}):null),e.decorate("handler","file",Ry.handler),e.decorate("handler","directory",Q3.handler),e.decorate("toolkit","file",pu.fileMethod)}}});var Uy=w((zy,$n)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof require=="function"&&typeof $n=="object"&&$n&&$n.exports?$n.exports=t():(e.dcodeIO=e.dcodeIO||{}).bcrypt=t()})(zy,function(){"use strict";var e={},t=null;function i(_){if(typeof $n<"u"&&$n&&$n.exports)try{return require("crypto").randomBytes(_)}catch{}try{var y;return(self.crypto||self.msCrypto).getRandomValues(y=new Uint32Array(_)),Array.prototype.slice.call(y)}catch{}if(!t)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return t(_)}var n=!1;try{i(1),n=!0}catch{}t=null,e.setRandomFallback=function(_){t=_},e.genSaltSync=function(_,y){if(_=_||f,typeof _!="number")throw Error("Illegal arguments: "+typeof _+", "+typeof y);_<4?_=4:_>31&&(_=31);var b=[];return b.push("$2a$"),_<10&&b.push("0"),b.push(_.toString()),b.push("$"),b.push(p(i(m),m)),b.join("")},e.genSalt=function(_,y,b){if(typeof y=="function"&&(b=y,y=void 0),typeof _=="function"&&(b=_,_=void 0),typeof _>"u")_=f;else if(typeof _!="number")throw Error("illegal arguments: "+typeof _);function g(v){a(function(){try{v(null,e.genSaltSync(_))}catch(k){v(k)}})}if(b){if(typeof b!="function")throw Error("Illegal callback: "+typeof b);g(b)}else return new Promise(function(v,k){g(function(A,V){if(A){k(A);return}v(V)})})},e.hashSync=function(_,y){if(typeof y>"u"&&(y=f),typeof y=="number"&&(y=e.genSaltSync(y)),typeof _!="string"||typeof y!="string")throw Error("Illegal arguments: "+typeof _+", "+typeof y);return $(_,y)},e.hash=function(_,y,b,g){function v(k){typeof _=="string"&&typeof y=="number"?e.genSalt(y,function(A,V){$(_,V,k,g)}):typeof _=="string"&&typeof y=="string"?$(_,y,k,g):a(k.bind(this,Error("Illegal arguments: "+typeof _+", "+typeof y)))}if(b){if(typeof b!="function")throw Error("Illegal callback: "+typeof b);v(b)}else return new Promise(function(k,A){v(function(V,F){if(V){A(V);return}k(F)})})};function s(_,y){for(var b=0,g=0,v=0,k=_.length;v<k;++v)_.charCodeAt(v)===y.charCodeAt(v)?++b:++g;return b<0?!1:g===0}e.compareSync=function(_,y){if(typeof _!="string"||typeof y!="string")throw Error("Illegal arguments: "+typeof _+", "+typeof y);return y.length!==60?!1:s(e.hashSync(_,y.substr(0,y.length-31)),y)},e.compare=function(_,y,b,g){function v(k){if(typeof _!="string"||typeof y!="string"){a(k.bind(this,Error("Illegal arguments: "+typeof _+", "+typeof y)));return}if(y.length!==60){a(k.bind(this,null,!1));return}e.hash(_,y.substr(0,29),function(A,V){A?k(A):k(null,s(V,y))},g)}if(b){if(typeof b!="function")throw Error("Illegal callback: "+typeof b);v(b)}else return new Promise(function(k,A){v(function(V,F){if(V){A(V);return}k(F)})})},e.getRounds=function(_){if(typeof _!="string")throw Error("Illegal arguments: "+typeof _);return parseInt(_.split("$")[2],10)},e.getSalt=function(_){if(typeof _!="string")throw Error("Illegal arguments: "+typeof _);if(_.length!==60)throw Error("Illegal hash length: "+_.length+" != 60");return _.substring(0,29)};var a=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function r(_){var y=[],b=0;return d.encodeUTF16toUTF8(function(){return b>=_.length?null:_.charCodeAt(b++)},function(g){y.push(g)}),y}var o="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],l=String.fromCharCode;function p(_,y){var b=0,g=[],v,k;if(y<=0||y>_.length)throw Error("Illegal len: "+y);for(;b<y;){if(v=_[b++]&255,g.push(o[v>>2&63]),v=(v&3)<<4,b>=y){g.push(o[v&63]);break}if(k=_[b++]&255,v|=k>>4&15,g.push(o[v&63]),v=(k&15)<<2,b>=y){g.push(o[v&63]);break}k=_[b++]&255,v|=k>>6&3,g.push(o[v&63]),g.push(o[k&63])}return g.join("")}function u(_,y){var b=0,g=_.length,v=0,k=[],A,V,F,W,re,qe;if(y<=0)throw Error("Illegal len: "+y);for(;b<g-1&&v<y&&(qe=_.charCodeAt(b++),A=qe<c.length?c[qe]:-1,qe=_.charCodeAt(b++),V=qe<c.length?c[qe]:-1,!(A==-1||V==-1||(re=A<<2>>>0,re|=(V&48)>>4,k.push(l(re)),++v>=y||b>=g)||(qe=_.charCodeAt(b++),F=qe<c.length?c[qe]:-1,F==-1)||(re=(V&15)<<4>>>0,re|=(F&60)>>2,k.push(l(re)),++v>=y||b>=g)));)qe=_.charCodeAt(b++),W=qe<c.length?c[qe]:-1,re=(F&3)<<6>>>0,re|=W,k.push(l(re)),++v;var Yt=[];for(b=0;b<v;b++)Yt.push(k[b].charCodeAt(0));return Yt}var d=function(){"use strict";var _={};return _.MAX_CODEPOINT=1114111,_.encodeUTF8=function(y,b){var g=null;for(typeof y=="number"&&(g=y,y=function(){return null});g!==null||(g=y())!==null;)g<128?b(g&127):g<2048?(b(g>>6&31|192),b(g&63|128)):g<65536?(b(g>>12&15|224),b(g>>6&63|128),b(g&63|128)):(b(g>>18&7|240),b(g>>12&63|128),b(g>>6&63|128),b(g&63|128)),g=null},_.decodeUTF8=function(y,b){for(var g,v,k,A,V=function(F){F=F.slice(0,F.indexOf(null));var W=Error(F.toString());throw W.name="TruncatedError",W.bytes=F,W};(g=y())!==null;)if(!(g&128))b(g);else if((g&224)===192)(v=y())===null&&V([g,v]),b((g&31)<<6|v&63);else if((g&240)===224)((v=y())===null||(k=y())===null)&&V([g,v,k]),b((g&15)<<12|(v&63)<<6|k&63);else if((g&248)===240)((v=y())===null||(k=y())===null||(A=y())===null)&&V([g,v,k,A]),b((g&7)<<18|(v&63)<<12|(k&63)<<6|A&63);else throw RangeError("Illegal starting byte: "+g)},_.UTF16toUTF8=function(y,b){for(var g,v=null;(g=v!==null?v:y())!==null;){if(g>=55296&&g<=57343&&(v=y())!==null&&v>=56320&&v<=57343){b((g-55296)*1024+v-56320+65536),v=null;continue}b(g)}v!==null&&b(v)},_.UTF8toUTF16=function(y,b){var g=null;for(typeof y=="number"&&(g=y,y=function(){return null});g!==null||(g=y())!==null;)g<=65535?b(g):(g-=65536,b((g>>10)+55296),b(g%1024+56320)),g=null},_.encodeUTF16toUTF8=function(y,b){_.UTF16toUTF8(y,function(g){_.encodeUTF8(g,b)})},_.decodeUTF8toUTF16=function(y,b){_.decodeUTF8(y,function(g){_.UTF8toUTF16(g,b)})},_.calculateCodePoint=function(y){return y<128?1:y<2048?2:y<65536?3:4},_.calculateUTF8=function(y){for(var b,g=0;(b=y())!==null;)g+=_.calculateCodePoint(b);return g},_.calculateUTF16asUTF8=function(y){var b=0,g=0;return _.UTF16toUTF8(y,function(v){++b,g+=_.calculateCodePoint(v)}),[b,g]},_}();Date.now=Date.now||function(){return+new Date};var m=16,f=10,x=16,E=100,j=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],q=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],S=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function O(_,y,b,g){var v,k=_[y],A=_[y+1];return k^=b[0],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[1],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[2],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[3],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[4],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[5],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[6],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[7],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[8],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[9],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[10],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[11],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[12],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[13],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[14],v=g[k>>>24],v+=g[256|k>>16&255],v^=g[512|k>>8&255],v+=g[768|k&255],A^=v^b[15],v=g[A>>>24],v+=g[256|A>>16&255],v^=g[512|A>>8&255],v+=g[768|A&255],k^=v^b[16],_[y]=A^b[x+1],_[y+1]=k,_}function K(_,y){for(var b=0,g=0;b<4;++b)g=g<<8|_[y]&255,y=(y+1)%_.length;return{key:g,offp:y}}function P(_,y,b){for(var g=0,v=[0,0],k=y.length,A=b.length,V,F=0;F<k;F++)V=K(_,g),g=V.offp,y[F]=y[F]^V.key;for(F=0;F<k;F+=2)v=O(v,0,y,b),y[F]=v[0],y[F+1]=v[1];for(F=0;F<A;F+=2)v=O(v,0,y,b),b[F]=v[0],b[F+1]=v[1]}function T(_,y,b,g){for(var v=0,k=[0,0],A=b.length,V=g.length,F,W=0;W<A;W++)F=K(y,v),v=F.offp,b[W]=b[W]^F.key;for(v=0,W=0;W<A;W+=2)F=K(_,v),v=F.offp,k[0]^=F.key,F=K(_,v),v=F.offp,k[1]^=F.key,k=O(k,0,b,g),b[W]=k[0],b[W+1]=k[1];for(W=0;W<V;W+=2)F=K(_,v),v=F.offp,k[0]^=F.key,F=K(_,v),v=F.offp,k[1]^=F.key,k=O(k,0,b,g),g[W]=k[0],g[W+1]=k[1]}function I(_,y,b,g,v){var k=S.slice(),A=k.length,V;if(b<4||b>31)if(V=Error("Illegal number of rounds (4-31): "+b),g){a(g.bind(this,V));return}else throw V;if(y.length!==m)if(V=Error("Illegal salt length: "+y.length+" != "+m),g){a(g.bind(this,V));return}else throw V;b=1<<b>>>0;var F,W,re=0,qe;Int32Array?(F=new Int32Array(j),W=new Int32Array(q)):(F=j.slice(),W=q.slice()),T(y,_,F,W);function Yt(){if(v&&v(re/b),re<b)for(var ds=Date.now();re<b&&(re=re+1,P(_,F,W),P(y,F,W),!(Date.now()-ds>E)););else{for(re=0;re<64;re++)for(qe=0;qe<A>>1;qe++)O(k,qe<<1,F,W);var Be=[];for(re=0;re<A;re++)Be.push((k[re]>>24&255)>>>0),Be.push((k[re]>>16&255)>>>0),Be.push((k[re]>>8&255)>>>0),Be.push((k[re]&255)>>>0);if(g){g(null,Be);return}else return Be}g&&a(Yt)}if(typeof g<"u")Yt();else for(var ca;;)if(typeof(ca=Yt())<"u")return ca||[]}function $(_,y,b,g){var v;if(typeof _!="string"||typeof y!="string")if(v=Error("Invalid string / salt: Not a string"),b){a(b.bind(this,v));return}else throw v;var k,A;if(y.charAt(0)!=="$"||y.charAt(1)!=="2")if(v=Error("Invalid salt version: "+y.substring(0,2)),b){a(b.bind(this,v));return}else throw v;if(y.charAt(2)==="$")k="\0",A=3;else{if(k=y.charAt(2),k!=="a"&&k!=="b"&&k!=="y"||y.charAt(3)!=="$")if(v=Error("Invalid salt revision: "+y.substring(2,4)),b){a(b.bind(this,v));return}else throw v;A=4}if(y.charAt(A+2)>"$")if(v=Error("Missing salt rounds"),b){a(b.bind(this,v));return}else throw v;var V=parseInt(y.substring(A,A+1),10)*10,F=parseInt(y.substring(A+1,A+2),10),W=V+F,re=y.substring(A+3,A+25);_+=k>="a"?"\0":"";var qe=r(_),Yt=u(re,m);function ca(ds){var Be=[];return Be.push("$2"),k>="a"&&Be.push(k),Be.push("$"),W<10&&Be.push("0"),Be.push(W.toString()),Be.push("$"),Be.push(p(Yt,Yt.length)),Be.push(p(ds,S.length*4-1)),Be.join("")}if(typeof b>"u")return ca(I(qe,Yt,W));I(qe,Yt,W,function(ds,Be){ds?b(ds,null):b(null,ca(Be))},g)}return e.encodeBase64=p,e.decodeBase64=u,e})});var Vy=w((b8,Hy)=>{Hy.exports=Uy()});var m0=w((a9,d0)=>{"use strict";var p0=require("url"),u0=1800,ku=class{constructor(t){this.options=t||{},this.cookies=[]}set(t,i){let n=p0.parse(i||""),s=this.parse(t),a;return s.domain?(a=s.domain.replace(/^\./,""),(n.hostname.length<a.length||("."+n.hostname).substr(-a.length+1)!=="."+a)&&(s.domain=n.hostname)):s.domain=n.hostname,s.path||(s.path=this.getPath(n.pathname)),s.expires||(s.expires=new Date(Date.now()+(Number(this.options.sessionTimeout||u0)||u0)*1e3)),this.add(s)}get(t){return this.list(t).map(i=>i.name+"="+i.value).join("; ")}list(t){let i=[],n,s;for(n=this.cookies.length-1;n>=0;n--){if(s=this.cookies[n],this.isExpired(s)){this.cookies.splice(n,n);continue}this.match(s,t)&&i.unshift(s)}return i}parse(t){let i={};return(t||"").toString().split(";").forEach(n=>{let s=n.split("="),a=s.shift().trim().toLowerCase(),r=s.join("=").trim(),o;if(a)switch(a){case"expires":r=new Date(r),r.toString()!=="Invalid Date"&&(i.expires=r);break;case"path":i.path=r;break;case"domain":o=r.toLowerCase(),o.length&&o.charAt(0)!=="."&&(o="."+o),i.domain=o;break;case"max-age":i.expires=new Date(Date.now()+(Number(r)||0)*1e3);break;case"secure":i.secure=!0;break;case"httponly":i.httponly=!0;break;default:i.name||(i.name=a,i.value=r)}}),i}match(t,i){let n=p0.parse(i||"");return!(n.hostname!==t.domain&&(t.domain.charAt(0)!=="."||("."+n.hostname).substr(-t.domain.length)!==t.domain)||this.getPath(n.pathname).substr(0,t.path.length)!==t.path||t.secure&&n.protocol!=="https:")}add(t){let i,n;if(!t||!t.name)return!1;for(i=0,n=this.cookies.length;i<n;i++)if(this.compare(this.cookies[i],t))return this.isExpired(t)?(this.cookies.splice(i,1),!1):(this.cookies[i]=t,!0);return this.isExpired(t)||this.cookies.push(t),!0}compare(t,i){return t.name===i.name&&t.path===i.path&&t.domain===i.domain&&t.secure===i.secure&&t.httponly===t.httponly}isExpired(t){return t.expires&&t.expires<new Date||!t.value}getPath(t){let i=(t||"/").split("/");return i.pop(),i=i.join("/").trim(),i.charAt(0)!=="/"&&(i="/"+i),i.substr(-1)!=="/"&&(i+="/"),i}};d0.exports=ku});var mi=w((r9,hq)=>{hq.exports={name:"nodemailer",version:"7.0.3",description:"Easy as cake e-mail sending from your Node.js applications",main:"lib/nodemailer.js",scripts:{test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",lint:"eslint .",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},repository:{type:"git",url:"https://github.com/nodemailer/nodemailer.git"},keywords:["Nodemailer"],author:"Andris Reinman",license:"MIT-0",bugs:{url:"https://github.com/nodemailer/nodemailer/issues"},homepage:"https://nodemailer.com/",devDependencies:{"@aws-sdk/client-sesv2":"3.804.0",bunyan:"1.8.15",c8:"10.1.3",eslint:"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0",libbase64:"1.3.0",libmime:"5.3.6",libqp:"2.1.1","nodemailer-ntlm-auth":"1.0.4",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},engines:{node:">=6.0.0"}}});var lr=w((o9,Su)=>{"use strict";var fq=require("http"),gq=require("https"),h0=require("url"),xq=require("zlib"),vq=require("stream").PassThrough,f0=m0(),bq=mi(),yq=require("net"),wq=5;Su.exports=function(e,t){return g0(e,t)};Su.exports.Cookies=f0;function g0(e,t){t=t||{},t.fetchRes=t.fetchRes||new vq,t.cookies=t.cookies||new f0,t.redirects=t.redirects||0,t.maxRedirects=isNaN(t.maxRedirects)?wq:t.maxRedirects,t.cookie&&([].concat(t.cookie||[]).forEach(d=>{t.cookies.set(d,e)}),t.cookie=!1);let i=t.fetchRes,n=h0.parse(e),s=(t.method||"").toString().trim().toUpperCase()||"GET",a=!1,r,o,c=n.protocol==="https:"?gq:fq,l={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+bq.version};if(Object.keys(t.headers||{}).forEach(d=>{l[d.toLowerCase().trim()]=t.headers[d]}),t.userAgent&&(l["user-agent"]=t.userAgent),n.auth&&(l.Authorization="Basic "+Buffer.from(n.auth).toString("base64")),(r=t.cookies.get(e))&&(l.cookie=r),t.body){if(t.contentType!==!1&&(l["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),typeof t.body.pipe=="function")l["Transfer-Encoding"]="chunked",o=t.body,o.on("error",d=>{a||(a=!0,d.type="FETCH",d.sourceUrl=e,i.emit("error",d))});else{if(t.body instanceof Buffer)o=t.body;else if(typeof t.body=="object")try{o=Buffer.from(Object.keys(t.body).map(d=>{let m=t.body[d].toString().trim();return encodeURIComponent(d)+"="+encodeURIComponent(m)}).join("&"))}catch(d){if(a)return;a=!0,d.type="FETCH",d.sourceUrl=e,i.emit("error",d);return}else o=Buffer.from(t.body.toString().trim());l["Content-Type"]=t.contentType||"application/x-www-form-urlencoded",l["Content-Length"]=o.length}s=(t.method||"").toString().trim().toUpperCase()||"POST"}let p,u={method:s,host:n.hostname,path:n.path,port:n.port?n.port:n.protocol==="https:"?443:80,headers:l,rejectUnauthorized:!1,agent:!1};t.tls&&Object.keys(t.tls).forEach(d=>{u[d]=t.tls[d]}),n.protocol==="https:"&&n.hostname&&n.hostname!==u.host&&!yq.isIP(n.hostname)&&!u.servername&&(u.servername=n.hostname);try{p=c.request(u)}catch(d){return a=!0,setImmediate(()=>{d.type="FETCH",d.sourceUrl=e,i.emit("error",d)}),i}return t.timeout&&p.setTimeout(t.timeout,()=>{if(a)return;a=!0,p.abort();let d=new Error("Request Timeout");d.type="FETCH",d.sourceUrl=e,i.emit("error",d)}),p.on("error",d=>{a||(a=!0,d.type="FETCH",d.sourceUrl=e,i.emit("error",d))}),p.on("response",d=>{let m;if(!a){switch(d.headers["content-encoding"]){case"gzip":case"deflate":m=xq.createUnzip();break}if(d.headers["set-cookie"]&&[].concat(d.headers["set-cookie"]||[]).forEach(f=>{t.cookies.set(f,e)}),[301,302,303,307,308].includes(d.statusCode)&&d.headers.location){if(t.redirects++,t.redirects>t.maxRedirects){a=!0;let f=new Error("Maximum redirect count exceeded");f.type="FETCH",f.sourceUrl=e,i.emit("error",f),p.abort();return}return t.method="GET",t.body=!1,g0(h0.resolve(e,d.headers.location),t)}if(i.statusCode=d.statusCode,i.headers=d.headers,d.statusCode>=300&&!t.allowErrorResponse){a=!0;let f=new Error("Invalid status code "+d.statusCode);f.type="FETCH",f.sourceUrl=e,i.emit("error",f),p.abort();return}d.on("error",f=>{a||(a=!0,f.type="FETCH",f.sourceUrl=e,i.emit("error",f),p.abort())}),m?(d.pipe(m).pipe(i),m.on("error",f=>{a||(a=!0,f.type="FETCH",f.sourceUrl=e,i.emit("error",f),p.abort())})):d.pipe(i)}}),setImmediate(()=>{if(o)try{if(typeof o.pipe=="function")return o.pipe(p);p.write(o)}catch(d){a=!0,d.type="FETCH",d.sourceUrl=e,i.emit("error",d);return}p.end()}),i}});var ft=w((c9,ct)=>{"use strict";var _q=require("url"),Eq=require("util"),kq=require("fs"),Sq=lr(),$i=require("dns"),Aq=require("net"),Tq=require("os"),Au=5*60*1e3,v0;try{v0=Tq.networkInterfaces()}catch{}ct.exports.networkInterfaces=v0;var b0=(e,t)=>{let i=ct.exports.networkInterfaces;return i?Object.keys(i).map(s=>i[s]).reduce((s,a)=>s.concat(a),[]).filter(s=>!s.internal||t).filter(s=>s.family==="IPv"+e||s.family===e).length>0:!0},x0=(e,t,i,n)=>{if(i=i||{},!b0(e,i.allowInternalNetworkInterfaces))return n(null,[]);($i.Resolver?new $i.Resolver(i):$i)["resolve"+e](t,(r,o)=>{if(r){switch(r.code){case $i.NODATA:case $i.NOTFOUND:case $i.NOTIMP:case $i.SERVFAIL:case $i.CONNREFUSED:case $i.REFUSED:case"EAI_AGAIN":return n(null,[])}return n(r)}return n(null,Array.isArray(o)?o:[].concat(o||[]))})},pr=ct.exports.dnsCache=new Map,Ii=(e,t)=>e?Object.assign({servername:e.servername,host:!e.addresses||!e.addresses.length?null:e.addresses.length===1?e.addresses[0]:e.addresses[Math.floor(Math.random()*e.addresses.length)]},t||{}):Object.assign({},t||{});ct.exports.resolveHostname=(e,t)=>{if(e=e||{},!e.host&&e.servername&&(e.host=e.servername),!e.host||Aq.isIP(e.host)){let n={addresses:[e.host],servername:e.servername||!1};return t(null,Ii(n,{cached:!1}))}let i;if(pr.has(e.host)&&(i=pr.get(e.host),!i.expires||i.expires>=Date.now()))return t(null,Ii(i.value,{cached:!0}));x0(4,e.host,e,(n,s)=>{if(n)return i?t(null,Ii(i.value,{cached:!0,error:n})):t(n);if(s&&s.length){let a={addresses:s,servername:e.servername||e.host};return pr.set(e.host,{value:a,expires:Date.now()+(e.dnsTtl||Au)}),t(null,Ii(a,{cached:!1}))}x0(6,e.host,e,(a,r)=>{if(a)return i?t(null,Ii(i.value,{cached:!0,error:a})):t(a);if(r&&r.length){let o={addresses:r,servername:e.servername||e.host};return pr.set(e.host,{value:o,expires:Date.now()+(e.dnsTtl||Au)}),t(null,Ii(o,{cached:!1}))}try{$i.lookup(e.host,{all:!0},(o,c)=>{if(o)return i?t(null,Ii(i.value,{cached:!0,error:o})):t(o);let l=c?c.filter(u=>b0(u.family)).map(u=>u.address).shift():!1;if(c&&c.length&&!l&&console.warn(`Failed to resolve IPv${c[0].family} addresses with current network`),!l&&i)return t(null,Ii(i.value,{cached:!0}));let p={addresses:l?[l]:[e.host],servername:e.servername||e.host};return pr.set(e.host,{value:p,expires:Date.now()+(e.dnsTtl||Au)}),t(null,Ii(p,{cached:!1}))})}catch(o){return i?t(null,Ii(i.value,{cached:!0,error:o})):t(o)}})})};ct.exports.parseConnectionUrl=e=>{e=e||"";let t={};return[_q.parse(e,!0)].forEach(i=>{let n;switch(i.protocol){case"smtp:":t.secure=!1;break;case"smtps:":t.secure=!0;break;case"direct:":t.direct=!0;break}!isNaN(i.port)&&Number(i.port)&&(t.port=Number(i.port)),i.hostname&&(t.host=i.hostname),i.auth&&(n=i.auth.split(":"),t.auth||(t.auth={}),t.auth.user=n.shift(),t.auth.pass=n.join(":")),Object.keys(i.query||{}).forEach(s=>{let a=t,r=s,o=i.query[s];switch(isNaN(o)||(o=Number(o)),o){case"true":o=!0;break;case"false":o=!1;break}if(s.indexOf("tls.")===0)r=s.substr(4),t.tls||(t.tls={}),a=t.tls;else if(s.indexOf(".")>=0)return;r in a||(a[r]=o)})}),t};ct.exports._logFunc=(e,t,i,n,s,...a)=>{let r={};Object.keys(i||{}).forEach(o=>{o!=="level"&&(r[o]=i[o])}),Object.keys(n||{}).forEach(o=>{o!=="level"&&(r[o]=n[o])}),e[t](r,s,...a)};ct.exports.getLogger=(e,t)=>{e=e||{};let i={},n=["trace","debug","info","warn","error","fatal"];if(!e.logger)return n.forEach(a=>{i[a]=()=>!1}),i;let s=e.logger;return e.logger===!0&&(s=Cq(n)),n.forEach(a=>{i[a]=(r,o,...c)=>{ct.exports._logFunc(s,a,t,r,o,...c)}}),i};ct.exports.callbackPromise=(e,t)=>function(){let i=Array.from(arguments),n=i.shift();n?t(n):e(...i)};ct.exports.parseDataURI=e=>{let t=e,i=t.indexOf(",");if(!i)return e;let n=t.substring(i+1),s=t.substring(5,i),a,r=s.split(";"),o=r.length>1?r[r.length-1]:!1;o&&o.indexOf("=")<0&&(a=o.toLowerCase(),r.pop());let c=r.shift()||"application/octet-stream",l={};for(let p of r){let u=p.indexOf("=");if(u>=0){let d=p.substring(0,u),m=p.substring(u+1);l[d]=m}}switch(a){case"base64":n=Buffer.from(n,"base64");break;case"utf8":n=Buffer.from(n);break;default:try{n=Buffer.from(decodeURIComponent(n))}catch{n=Buffer.from(n)}n=Buffer.from(n)}return{data:n,encoding:a,contentType:c,params:l}};ct.exports.resolveContent=(e,t,i)=>{let n;i||(n=new Promise((o,c)=>{i=ct.exports.callbackPromise(o,c)}));let s=e&&e[t]&&e[t].content||e[t],a,r=(typeof e[t]=="object"&&e[t].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!s)return i(null,s);if(typeof s=="object"){if(typeof s.pipe=="function")return Tu(s,(o,c)=>{if(o)return i(o);e[t].content?e[t].content=c:e[t]=c,i(null,c)});if(/^https?:\/\//i.test(s.path||s.href))return a=Sq(s.path||s.href),Tu(a,i);if(/^data:/i.test(s.path||s.href)){let o=ct.exports.parseDataURI(s.path||s.href);return!o||!o.data?i(null,Buffer.from(0)):i(null,o.data)}else if(s.path)return Tu(kq.createReadStream(s.path),i)}return typeof e[t].content=="string"&&!["utf8","usascii","ascii"].includes(r)&&(s=Buffer.from(e[t].content,r)),setImmediate(()=>i(null,s)),n};ct.exports.assign=function(){let e=Array.from(arguments),t=e.shift()||{};return e.forEach(i=>{Object.keys(i||{}).forEach(n=>{["tls","auth"].includes(n)&&i[n]&&typeof i[n]=="object"?(t[n]||(t[n]={}),Object.keys(i[n]).forEach(s=>{t[n][s]=i[n][s]})):t[n]=i[n]})}),t};ct.exports.encodeXText=e=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(e))return e;let t=Buffer.from(e),i="";for(let n=0,s=t.length;n<s;n++){let a=t[n];a<33||a>126||a===43||a===61?i+="+"+(a<16?"0":"")+a.toString(16).toUpperCase():i+=String.fromCharCode(a)}return i};function Tu(e,t){let i=!1,n=[],s=0;e.on("error",a=>{i||(i=!0,t(a))}),e.on("readable",()=>{let a;for(;(a=e.read())!==null;)n.push(a),s+=a.length}),e.on("end",()=>{if(i)return;i=!0;let a;try{a=Buffer.concat(n,s)}catch(r){return t(r)}t(null,a)})}function Cq(e){let t=0,i=new Map;e.forEach(a=>{a.length>t&&(t=a.length)}),e.forEach(a=>{let r=a.toUpperCase();r.length<t&&(r+=" ".repeat(t-r.length)),i.set(a,r)});let n=(a,r,o,...c)=>{let l="";r&&(r.tnx==="server"?l="S: ":r.tnx==="client"&&(l="C: "),r.sid&&(l="["+r.sid+"] "+l),r.cid&&(l="[#"+r.cid+"] "+l)),o=Eq.format(o,...c),o.split(/\r?\n/).forEach(p=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),i.get(a),l+p)})},s={};return e.forEach(a=>{s[a]=n.bind(null,a)}),s}});var Cu=w((l9,E0)=>{"use strict";var jq=require("path"),y0="application/octet-stream",Rq="bin",w0=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),_0=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);E0.exports={detectMimeType(e){if(!e)return y0;let t=jq.parse(e),i=(t.ext.substr(1)||t.name||"").split("?").shift().trim().toLowerCase(),n=y0;return _0.has(i)&&(n=_0.get(i)),Array.isArray(n)?n[0]:n},detectExtension(e){if(!e)return Rq;let t=(e||"").toLowerCase().trim().split("/"),i=t.shift().trim(),n=t.join("/").trim();if(w0.has(i+"/"+n)){let s=w0.get(i+"/"+n);return Array.isArray(s)?s[0]:s}switch(i){case"text":return"txt";default:return"bin"}}}});var qu=w((p9,q0)=>{"use strict";var S0="-",qq=/^xn--/,Pq=/[^\0-\x7F]/,Oq=/[\x2E\u3002\uFF0E\uFF61]/g,Iq={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ju=35,Ni=Math.floor,Ru=String.fromCharCode;function Ln(e){throw new RangeError(Iq[e])}function $q(e,t){let i=[],n=e.length;for(;n--;)i[n]=t(e[n]);return i}function A0(e,t){let i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]),e=e.replace(Oq,".");let s=e.split("."),a=$q(s,t).join(".");return n+a}function T0(e){let t=[],i=0,n=e.length;for(;i<n;){let s=e.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){let a=e.charCodeAt(i++);(a&64512)==56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),i--)}else t.push(s)}return t}var Nq=e=>String.fromCodePoint(...e),Fq=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:36},k0=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},C0=function(e,t,i){let n=0;for(e=i?Ni(e/700):e>>1,e+=Ni(e/t);e>ju*26>>1;n+=36)e=Ni(e/ju);return Ni(n+(ju+1)*e/(e+38))},j0=function(e){let t=[],i=e.length,n=0,s=128,a=72,r=e.lastIndexOf(S0);r<0&&(r=0);for(let o=0;o<r;++o)e.charCodeAt(o)>=128&&Ln("not-basic"),t.push(e.charCodeAt(o));for(let o=r>0?r+1:0;o<i;){let c=n;for(let p=1,u=36;;u+=36){o>=i&&Ln("invalid-input");let d=Fq(e.charCodeAt(o++));d>=36&&Ln("invalid-input"),d>Ni((2147483647-n)/p)&&Ln("overflow"),n+=d*p;let m=u<=a?1:u>=a+26?26:u-a;if(d<m)break;let f=36-m;p>Ni(2147483647/f)&&Ln("overflow"),p*=f}let l=t.length+1;a=C0(n-c,l,c==0),Ni(n/l)>2147483647-s&&Ln("overflow"),s+=Ni(n/l),n%=l,t.splice(n++,0,s)}return String.fromCodePoint(...t)},R0=function(e){let t=[];e=T0(e);let i=e.length,n=128,s=0,a=72;for(let c of e)c<128&&t.push(Ru(c));let r=t.length,o=r;for(r&&t.push(S0);o<i;){let c=2147483647;for(let p of e)p>=n&&p<c&&(c=p);let l=o+1;c-n>Ni((2147483647-s)/l)&&Ln("overflow"),s+=(c-n)*l,n=c;for(let p of e)if(p<n&&++s>2147483647&&Ln("overflow"),p===n){let u=s;for(let d=36;;d+=36){let m=d<=a?1:d>=a+26?26:d-a;if(u<m)break;let f=u-m,x=36-m;t.push(Ru(k0(m+f%x,0))),u=Ni(f/x)}t.push(Ru(k0(u,0))),a=C0(s,l,o===r),s=0,++o}++s,++n}return t.join("")},Lq=function(e){return A0(e,function(t){return qq.test(t)?j0(t.slice(4).toLowerCase()):t})},Mq=function(e){return A0(e,function(t){return Pq.test(t)?"xn--"+R0(t):t})},Dq={version:"2.3.1",ucs2:{decode:T0,encode:Nq},decode:j0,encode:R0,toASCII:Mq,toUnicode:Lq};q0.exports=Dq});var $u=w((u9,P0)=>{"use strict";var Bq=require("stream").Transform;function Pu(e){return typeof e=="string"&&(e=Buffer.from(e,"utf-8")),e.toString("base64")}function Ou(e,t){if(e=(e||"").toString(),t=t||76,e.length<=t)return e;let i=[],n=0,s=t*1024;for(;n<e.length;){let a=e.substr(n,s).replace(new RegExp(".{"+t+"}","g"),`$&\r
`).trim();i.push(a),n+=s}return i.join(`\r
`).trim()}var Iu=class extends Bq{constructor(t){super(),this.options=t||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(t,i,n){if(i!=="buffer"&&(t=Buffer.from(t,i)),!t||!t.length)return setImmediate(n);this.inputBytes+=t.length,this._remainingBytes&&this._remainingBytes.length&&(t=Buffer.concat([this._remainingBytes,t],this._remainingBytes.length+t.length),this._remainingBytes=!1),t.length%3?(this._remainingBytes=t.slice(t.length-t.length%3),t=t.slice(0,t.length-t.length%3)):this._remainingBytes=!1;let s=this._curLine+Pu(t);if(this.options.lineLength){s=Ou(s,this.options.lineLength);let a=s.lastIndexOf(`
`);a<0?(this._curLine=s,s=""):a===s.length-1?this._curLine="":(this._curLine=s.substr(a+1),s=s.substr(0,a+1))}s&&(this.outputBytes+=s.length,this.push(Buffer.from(s,"ascii"))),setImmediate(n)}_flush(t){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=Pu(this._remainingBytes)),this._curLine&&(this._curLine=Ou(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),t()}};P0.exports={encode:Pu,wrap:Ou,Encoder:Iu}});var Lu=w((d9,I0)=>{"use strict";var zq=require("stream").Transform;function Nu(e){typeof e=="string"&&(e=Buffer.from(e,"utf-8"));let t=[[9],[10],[13],[32,60],[62,126]],i="",n;for(let s=0,a=e.length;s<a;s++){if(n=e[s],Uq(n,t)&&!((n===32||n===9)&&(s===a-1||e[s+1]===10||e[s+1]===13))){i+=String.fromCharCode(n);continue}i+="="+(n<16?"0":"")+n.toString(16).toUpperCase()}return i}function O0(e,t){if(e=(e||"").toString(),t=t||76,e.length<=t)return e;let i=0,n=e.length,s,a,r,o=Math.floor(t/3),c="";for(;i<n;){if(r=e.substr(i,t),s=r.match(/\r\n/)){r=r.substr(0,s.index+s[0].length),c+=r,i+=r.length;continue}if(r.substr(-1)===`
`){c+=r,i+=r.length;continue}else if(s=r.substr(-o).match(/\n.*?$/)){r=r.substr(0,r.length-(s[0].length-1)),c+=r,i+=r.length;continue}else if(r.length>t-o&&(s=r.substr(-o).match(/[ \t.,!?][^ \t.,!?]*$/)))r=r.substr(0,r.length-(s[0].length-1));else if(r.match(/[=][\da-f]{0,2}$/i))for((s=r.match(/[=][\da-f]{0,1}$/i))&&(r=r.substr(0,r.length-s[0].length));r.length>3&&r.length<n-i&&!r.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(s=r.match(/[=][\da-f]{2}$/gi))&&(a=parseInt(s[0].substr(1,2),16),!(a<128||(r=r.substr(0,r.length-3),a>=192))););i+r.length<n&&r.substr(-1)!==`
`?(r.length===t&&r.match(/[=][\da-f]{2}$/i)?r=r.substr(0,r.length-3):r.length===t&&(r=r.substr(0,r.length-1)),i+=r.length,r+=`=\r
`):i+=r.length,c+=r}return c}function Uq(e,t){for(let i=t.length-1;i>=0;i--)if(t[i].length&&(t[i].length===1&&e===t[i][0]||t[i].length===2&&e>=t[i][0]&&e<=t[i][1]))return!0;return!1}var Fu=class extends zq{constructor(t){super(),this.options=t||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(t,i,n){let s;if(i!=="buffer"&&(t=Buffer.from(t,i)),!t||!t.length)return n();this.inputBytes+=t.length,this.options.lineLength?(s=this._curLine+Nu(t),s=O0(s,this.options.lineLength),s=s.replace(/(^|\n)([^\n]*)$/,(a,r,o)=>(this._curLine=o,r)),s&&(this.outputBytes+=s.length,this.push(s))):(s=Nu(t),this.outputBytes+=s.length,this.push(s,"ascii")),n()}_flush(t){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),t()}};I0.exports={encode:Nu,wrap:O0,Encoder:Fu}});var dr=w((m9,N0)=>{"use strict";var ur=$u(),Hq=Lu(),$0=Cu();N0.exports={isPlainText(e,t){return!(typeof e!="string"||(t?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(e))},hasLongerLines(e,t){return e.length>128*1024?!0:new RegExp("^.{"+(t+1)+",}","m").test(e)},encodeWord(e,t,i){t=(t||"Q").toString().toUpperCase().trim().charAt(0),i=i||0;let n,s="UTF-8";if(i&&i>7+s.length&&(i-=7+s.length),t==="Q"?n=Hq.encode(e).replace(/[^a-z0-9!*+\-/=]/gi,a=>{let r=a.charCodeAt(0).toString(16).toUpperCase();return a===" "?"_":"="+(r.length===1?"0"+r:r)}):t==="B"&&(n=typeof e=="string"?e:ur.encode(e),i=i?Math.max(3,(i-i%4)/4*3):0),i&&(t!=="B"?n:ur.encode(e)).length>i)if(t==="Q")n=this.splitMimeEncodedString(n,i).join("?= =?"+s+"?"+t+"?");else{let a=[],r="";for(let o=0,c=n.length;o<c;o++){let l=n.charAt(o);/[\ud83c\ud83d\ud83e]/.test(l)&&o<c-1&&(l+=n.charAt(++o)),Buffer.byteLength(r+l)<=i||o===0?r+=l:(a.push(ur.encode(r)),r=l)}r&&a.push(ur.encode(r)),a.length>1?n=a.join("?= =?"+s+"?"+t+"?"):n=a.join("")}else t==="B"&&(n=ur.encode(e));return"=?"+s+"?"+t+"?"+n+(n.substr(-2)==="?="?"":"?=")},encodeWords(e,t,i,n){i=i||0;let s,a=e.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!a)return e;if(n)return this.encodeWord(e,t,i);let r=e.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!r)return e;let o=a.index+(a[0].match(/[^\s]/)||{index:0}).index,c=r.index+(r[1]||"").length;return s=(o?e.substr(0,o):"")+this.encodeWord(e.substring(o,c),t||"Q",i)+(c<e.length?e.substr(c):""),s},buildHeaderValue(e){let t=[];return Object.keys(e.params||{}).forEach(i=>{let n=e.params[i];!this.isPlainText(n,!0)||n.length>=75?this.buildHeaderParam(i,n,50).forEach(s=>{!/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(s.value)||s.key.substr(-1)==="*"?t.push(s.key+"="+s.value):t.push(s.key+"="+JSON.stringify(s.value))}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(n)?t.push(i+"="+JSON.stringify(n)):t.push(i+"="+n)}),e.value+(t.length?"; "+t.join("; "):"")},buildHeaderParam(e,t,i){let n=[],s=typeof t=="string"?t:(t||"").toString(),a,r,o,c,l=0,p,u;if(i=i||50,this.isPlainText(t,!0)){if(s.length<=i)return[{key:e,value:s}];s=s.replace(new RegExp(".{"+i+"}","g"),d=>(n.push({line:d}),"")),s&&n.push({line:s})}else{if(/[\uD800-\uDBFF]/.test(s)){for(a=[],p=0,u=s.length;p<u;p++)r=s.charAt(p),o=r.charCodeAt(0),o>=55296&&o<=56319&&p<u-1?(r+=s.charAt(p+1),a.push(r),p++):a.push(r);s=a}c="utf-8''";let d=!0;for(l=0,p=0,u=s.length;p<u;p++){if(r=s[p],d)r=this.safeEncodeURIComponent(r);else if(r=r===" "?r:this.safeEncodeURIComponent(r),r!==s[p])if((this.safeEncodeURIComponent(c)+r).length>=i)n.push({line:c,encoded:d}),c="",l=p-1;else{d=!0,p=l,c="";continue}(c+r).length>=i?(n.push({line:c,encoded:d}),c=r=s[p]===" "?" ":this.safeEncodeURIComponent(s[p]),r===s[p]?(d=!1,l=p-1):d=!0):c+=r}c&&n.push({line:c,encoded:d})}return n.map((d,m)=>({key:e+"*"+m+(d.encoded?"*":""),value:d.line}))},parseHeaderValue(e){let t={value:!1,params:{}},i=!1,n="",s="value",a=!1,r=!1,o;for(let c=0,l=e.length;c<l;c++)if(o=e.charAt(c),s==="key"){if(o==="="){i=n.trim().toLowerCase(),s="value",n="";continue}n+=o}else{if(r)n+=o;else if(o==="\\"){r=!0;continue}else a&&o===a?a=!1:!a&&o==='"'?a=o:!a&&o===";"?(i===!1?t.value=n.trim():t.params[i]=n.trim(),s="key",n=""):n+=o;r=!1}return s==="value"?i===!1?t.value=n.trim():t.params[i]=n.trim():n.trim()&&(t.params[n.trim().toLowerCase()]=""),Object.keys(t.params).forEach(c=>{let l,p,u,d;(u=c.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(l=c.substr(0,u.index),p=Number(u[2]||u[3])||0,(!t.params[l]||typeof t.params[l]!="object")&&(t.params[l]={charset:!1,values:[]}),d=t.params[c],p===0&&u[0].substr(-1)==="*"&&(u=d.match(/^([^']*)'[^']*'(.*)$/))&&(t.params[l].charset=u[1]||"iso-8859-1",d=u[2]),t.params[l].values[p]=d,delete t.params[c])}),Object.keys(t.params).forEach(c=>{let l;t.params[c]&&Array.isArray(t.params[c].values)&&(l=t.params[c].values.map(p=>p||"").join(""),t.params[c].charset?t.params[c]="=?"+t.params[c].charset+"?Q?"+l.replace(/[=?_\s]/g,p=>{let u=p.charCodeAt(0).toString(16);return p===" "?"_":"%"+(u.length<2?"0":"")+u}).replace(/%/g,"=")+"?=":t.params[c]=l)}),t},detectExtension:e=>$0.detectExtension(e),detectMimeType:e=>$0.detectMimeType(e),foldLines(e,t,i){e=(e||"").toString(),t=t||76;let n=0,s=e.length,a="",r,o;for(;n<s;){if(r=e.substr(n,t),r.length<t){a+=r;break}if(o=r.match(/^[^\n\r]*(\r?\n|\r)/)){r=o[0],a+=r,n+=r.length;continue}else(o=r.match(/(\s+)[^\s]*$/))&&o[0].length-(i?(o[1]||"").length:0)<r.length?r=r.substr(0,r.length-(o[0].length-(i?(o[1]||"").length:0))):(o=e.substr(n+r.length).match(/^[^\s]+(\s*)/))&&(r=r+o[0].substr(0,o[0].length-(i?0:(o[1]||"").length)));a+=r,n+=r.length,n<s&&(a+=`\r
`)}return a},splitMimeEncodedString:(e,t)=>{let i,n,s,a,r=[];for(t=Math.max(t||0,12);e.length;){for(i=e.substr(0,t),(n=i.match(/[=][0-9A-F]?$/i))&&(i=i.substr(0,n.index)),a=!1;!a;)a=!0,(n=e.substr(i.length).match(/^[=]([0-9A-F]{2})/i))&&(s=parseInt(n[1],16),s<194&&s>127&&(i=i.substr(0,i.length-3),a=!1));i.length&&r.push(i),e=e.substr(i.length)}return r},encodeURICharComponent:e=>{let t="",i=e.charCodeAt(0).toString(16).toUpperCase();if(i.length%2&&(i="0"+i),i.length>2)for(let n=0,s=i.length/2;n<s;n++)t+="%"+i.substr(n,2);else t+="%"+i;return t},safeEncodeURIComponent(e){e=(e||"").toString();try{e=encodeURIComponent(e)}catch{return e.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return e.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,t=>this.encodeURICharComponent(t))}}});var M0=w((h9,L0)=>{"use strict";function Vq(e){let t=!1,i="text",n,s=[],a={address:[],comment:[],group:[],text:[]},r,o;for(r=0,o=e.length;r<o;r++){let c=e[r],l=r?e[r-1]:null;if(c.type==="operator")switch(c.value){case"<":i="address";break;case"(":i="comment";break;case":":i="group",t=!0;break;default:i="text";break}else c.value&&(i==="address"&&(c.value=c.value.replace(/^[^<]*<\s*/,"")),l&&l.noBreak&&a[i].length?a[i][a[i].length-1]+=c.value:a[i].push(c.value))}if(!a.text.length&&a.comment.length&&(a.text=a.comment,a.comment=[]),t)a.text=a.text.join(" "),s.push({name:a.text||n&&n.name,group:a.group.length?F0(a.group.join(",")):[]});else{if(!a.address.length&&a.text.length){for(r=a.text.length-1;r>=0;r--)if(a.text[r].match(/^[^@\s]+@[^@\s]+$/)){a.address=a.text.splice(r,1);break}let c=function(l){return a.address.length?l:(a.address=[l.trim()]," ")};if(!a.address.length)for(r=a.text.length-1;r>=0&&(a.text[r]=a.text[r].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,c).trim(),!a.address.length);r--);}if(!a.text.length&&a.comment.length&&(a.text=a.comment,a.comment=[]),a.address.length>1&&(a.text=a.text.concat(a.address.splice(1))),a.text=a.text.join(" "),a.address=a.address.join(" "),!a.address&&t)return[];n={address:a.address||a.text||"",name:a.text||a.address||""},n.address===n.name&&((n.address||"").match(/@/)?n.name="":n.address=""),s.push(n)}return s}var Mu=class{constructor(t){this.str=(t||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let t=[];for(let i=0,n=this.str.length;i<n;i++){let s=this.str.charAt(i),a=i<n-1?this.str.charAt(i+1):null;this.checkChar(s,a)}return this.list.forEach(i=>{i.value=(i.value||"").toString().trim(),i.value&&t.push(i)}),t}checkChar(t,i){if(!this.escaped){if(t===this.operatorExpecting){this.node={type:"operator",value:t},i&&![" ","	","\r",`
`,",",";"].includes(i)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&t in this.operators){this.node={type:"operator",value:t},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[t],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&t==="\\"){this.escaped=!0;return}}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),t===`
`&&(t=" "),(t.charCodeAt(0)>=33||[" ","	"].includes(t))&&(this.node.value+=t),this.escaped=!1}};function F0(e,t){t=t||{};let n=new Mu(e).tokenize(),s=[],a=[],r=[];if(n.forEach(o=>{o.type==="operator"&&(o.value===","||o.value===";")?(a.length&&s.push(a),a=[]):a.push(o)}),a.length&&s.push(a),s.forEach(o=>{o=Vq(o),o.length&&(r=r.concat(o))}),t.flatten){let o=[],c=l=>{l.forEach(p=>{if(p.group)return c(p.group);o.push(p)})};return c(r),o}return r}L0.exports=F0});var B0=w((f9,D0)=>{"use strict";var Kq=require("stream").Transform,Du=class extends Kq{constructor(){super(),this.lastByte=!1}_transform(t,i,n){t.length&&(this.lastByte=t[t.length-1]),this.push(t),n()}_flush(t){return this.lastByte===10?t():this.lastByte===13?(this.push(Buffer.from(`
`)),t()):(this.push(Buffer.from(`\r
`)),t())}};D0.exports=Du});var zu=w((g9,z0)=>{"use strict";var Wq=require("stream"),Gq=Wq.Transform,Bu=class extends Gq{constructor(t){super(t),this.options=t||{},this.lastByte=!1}_transform(t,i,n){let s,a=0;for(let r=0,o=t.length;r<o;r++)t[r]===10&&(r&&t[r-1]!==13||!r&&this.lastByte!==13)&&(r>a&&(s=t.slice(a,r),this.push(s)),this.push(Buffer.from(`\r
`)),a=r+1);a&&a<t.length?(s=t.slice(a),this.push(s)):a||this.push(t),this.lastByte=t[t.length-1],n()}};z0.exports=Bu});var H0=w((x9,U0)=>{"use strict";var Jq=require("stream"),Qq=Jq.Transform,Uu=class extends Qq{constructor(t){super(t),this.options=t||{}}_transform(t,i,n){let s,a=0;for(let r=0,o=t.length;r<o;r++)t[r]===13&&(s=t.slice(a,r),a=r+1,this.push(s));a&&a<t.length?(s=t.slice(a),this.push(s)):a||this.push(t),n()}};U0.exports=Uu});var dc=w((v9,V0)=>{"use strict";var Hu=require("crypto"),Yq=require("fs"),Zq=qu(),mr=require("stream").PassThrough,Xq=ft(),hi=dr(),eP=Lu(),tP=$u(),iP=M0(),nP=lr(),sP=B0(),aP=zu(),rP=H0(),Vu=class e{constructor(t,i){this.nodeCounter=0,i=i||{},this.baseBoundary=i.baseBoundary||Hu.randomBytes(8).toString("hex"),this.boundaryPrefix=i.boundaryPrefix||"--_NmP",this.disableFileAccess=!!i.disableFileAccess,this.disableUrlAccess=!!i.disableUrlAccess,this.normalizeHeaderKey=i.normalizeHeaderKey,this.date=new Date,this.rootNode=i.rootNode||this,this.keepBcc=!!i.keepBcc,i.filename&&(this.filename=i.filename,t||(t=hi.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(i.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=i.parentNode,this.hostname=i.hostname,this.newline=i.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],t&&this.setHeader("Content-Type",t)}createChild(t,i){!i&&typeof t=="object"&&(i=t,t=void 0);let n=new e(t,i);return this.appendChild(n),n}appendChild(t){return t.rootNode!==this.rootNode&&(t.rootNode=this.rootNode,t._nodeId=++this.rootNode.nodeCounter),t.parentNode=this,this.childNodes.push(t),t}replace(t){return t===this?this:(this.parentNode.childNodes.forEach((i,n)=>{i===this&&(t.rootNode=this.rootNode,t.parentNode=this.parentNode,t._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,t.parentNode.childNodes[n]=t)}),t)}remove(){if(!this.parentNode)return this;for(let t=this.parentNode.childNodes.length-1;t>=0;t--)if(this.parentNode.childNodes[t]===this)return this.parentNode.childNodes.splice(t,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(t,i){let n=!1,s;if(!i&&t&&typeof t=="object")return t.key&&"value"in t?this.setHeader(t.key,t.value):Array.isArray(t)?t.forEach(a=>{this.setHeader(a.key,a.value)}):Object.keys(t).forEach(a=>{this.setHeader(a,t[a])}),this;t=this._normalizeHeaderKey(t),s={key:t,value:i};for(let a=0,r=this._headers.length;a<r;a++)this._headers[a].key===t&&(n?(this._headers.splice(a,1),a--,r--):(this._headers[a]=s,n=!0));return n||this._headers.push(s),this}addHeader(t,i){return!i&&t&&typeof t=="object"?(t.key&&t.value?this.addHeader(t.key,t.value):Array.isArray(t)?t.forEach(n=>{this.addHeader(n.key,n.value)}):Object.keys(t).forEach(n=>{this.addHeader(n,t[n])}),this):Array.isArray(i)?(i.forEach(n=>{this.addHeader(t,n)}),this):(this._headers.push({key:this._normalizeHeaderKey(t),value:i}),this)}getHeader(t){t=this._normalizeHeaderKey(t);for(let i=0,n=this._headers.length;i<n;i++)if(this._headers[i].key===t)return this._headers[i].value}setContent(t){return this.content=t,typeof this.content.pipe=="function"?(this._contentErrorHandler=i=>{this.content.removeListener("error",this._contentErrorHandler),this.content=i},this.content.once("error",this._contentErrorHandler)):typeof this.content=="string"&&(this._isPlainText=hi.isPlainText(this.content),this._isPlainText&&hi.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(t){let i;t||(i=new Promise((o,c)=>{t=Xq.callbackPromise(o,c)}));let n=this.createReadStream(),s=[],a=0,r=!1;return n.on("readable",()=>{let o;for(;(o=n.read())!==null;)s.push(o),a+=o.length}),n.once("error",o=>{if(!r)return r=!0,t(o)}),n.once("end",o=>{if(!r)return r=!0,o&&o.length&&(s.push(o),a+=o.length),t(null,Buffer.concat(s,a))}),i}getTransferEncoding(){let t=!1,i=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&(t=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),(!t||!["base64","quoted-printable"].includes(t))&&(/^text\//i.test(i)?this._isPlainText&&!this._hasLongLines?t="7bit":typeof this.content=="string"||this.content instanceof Buffer?t=this._getTextEncoding(this.content)==="Q"?"quoted-printable":"base64":t=this.textEncoding==="B"?"base64":"quoted-printable":/^(multipart|message)\//i.test(i)||(t=t||"base64"))),t}buildHeaders(){let t=this.getTransferEncoding(),i=[];if(t&&this.setHeader("Content-Transfer-Encoding",t),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let n=this._headers.length-2;n>=0;n--){let s=this._headers[n];s.key==="Content-Type"&&(this._headers.splice(n,1),this._headers.push(s))}}return this._headers.forEach(n=>{let s=n.key,a=n.value,r,o,c={};if(!(a&&typeof a=="object"&&!["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(s)&&(Object.keys(a).forEach(p=>{p!=="value"&&(c[p]=a[p])}),a=(a.value||"").toString(),!a.trim()))){if(c.prepared){c.foldLines?i.push(hi.foldLines(s+": "+a)):i.push(s+": "+a);return}switch(n.key){case"Content-Disposition":r=hi.parseHeaderValue(a),this.filename&&(r.params.filename=this.filename),a=hi.buildHeaderValue(r);break;case"Content-Type":r=hi.parseHeaderValue(a),this._handleContentType(r),r.value.match(/^text\/plain\b/)&&typeof this.content=="string"&&/[\u0080-\uFFFF]/.test(this.content)&&(r.params.charset="utf-8"),a=hi.buildHeaderValue(r),this.filename&&(o=this._encodeWords(this.filename),(o!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(o))&&(o='"'+o+'"'),a+="; name="+o);break;case"Bcc":if(!this.keepBcc)return;break}if(a=this._encodeHeaderValue(s,a),!!(a||"").toString().trim()){if(typeof this.normalizeHeaderKey=="function"){let p=this.normalizeHeaderKey(s,a);p&&typeof p=="string"&&p.length&&(s=p)}i.push(hi.foldLines(s+": "+a,76))}}}),i.join(`\r
`)}createReadStream(t){t=t||{};let i=new mr(t),n=i,s;this.stream(i,t,a=>{if(a){n.emit("error",a);return}i.end()});for(let a=0,r=this._transforms.length;a<r;a++)s=typeof this._transforms[a]=="function"?this._transforms[a]():this._transforms[a],n.once("error",o=>{s.emit("error",o)}),n=n.pipe(s);s=new sP,n.once("error",a=>{s.emit("error",a)}),n=n.pipe(s);for(let a=0,r=this._processFuncs.length;a<r;a++)s=this._processFuncs[a],n=s(n);if(this.newline){let r=["win","windows","dos",`\r
`].includes(this.newline.toString().toLowerCase())?new aP:new rP,o=n.pipe(r);return n.on("error",c=>o.emit("error",c)),o}return n}transform(t){this._transforms.push(t)}processFunc(t){this._processFuncs.push(t)}stream(t,i,n){let s=this.getTransferEncoding(),a,r,o=!1,c=u=>{o||(o=!0,n(u))},l=()=>{let u=0,d=()=>{if(u>=this.childNodes.length)return t.write(`\r
--`+this.boundary+`--\r
`),c();let m=this.childNodes[u++];t.write((u>1?`\r
`:"")+"--"+this.boundary+`\r
`),m.stream(t,i,f=>{if(f)return c(f);setImmediate(d)})};if(this.multipart)setImmediate(d);else return c()},p=()=>{if(this.content){if(Object.prototype.toString.call(this.content)==="[object Error]")return c(this.content);typeof this.content.pipe=="function"&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=d=>c(d),this.content.once("error",this._contentErrorHandler));let u=()=>{["quoted-printable","base64"].includes(s)?(a=new(s==="base64"?tP:eP).Encoder(i),a.pipe(t,{end:!1}),a.once("end",l),a.once("error",d=>c(d)),r=this._getStream(this.content),r.pipe(a)):(r=this._getStream(this.content),r.pipe(t,{end:!1}),r.once("end",l)),r.once("error",d=>c(d))};if(this.content._resolve){let d=[],m=0,f=!1,x=this._getStream(this.content);x.on("error",E=>{f||(f=!0,c(E))}),x.on("readable",()=>{let E;for(;(E=x.read())!==null;)d.push(E),m+=E.length}),x.on("end",()=>{f||(f=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(d,m),setImmediate(u))})}else setImmediate(u);return}else return setImmediate(l)};this._raw?setImmediate(()=>{if(Object.prototype.toString.call(this._raw)==="[object Error]")return c(this._raw);typeof this._raw.pipe=="function"&&this._raw.removeListener("error",this._contentErrorHandler);let u=this._getStream(this._raw);u.pipe(t,{end:!1}),u.on("error",d=>t.emit("error",d)),u.on("end",l)}):(t.write(this.buildHeaders()+`\r
\r
`),setImmediate(p))}setEnvelope(t){let i;this._envelope={from:!1,to:[]},t.from&&(i=[],this._convertAddresses(this._parseAddresses(t.from),i),i=i.filter(s=>s&&s.address),i.length&&i[0]&&(this._envelope.from=i[0].address)),["to","cc","bcc"].forEach(s=>{t[s]&&this._convertAddresses(this._parseAddresses(t[s]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(s=>s.address).filter(s=>s);let n=["to","cc","bcc","from"];return Object.keys(t).forEach(s=>{n.includes(s)||(this._envelope[s]=t[s])}),this}getAddresses(){let t={};return this._headers.forEach(i=>{let n=i.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(n)&&(Array.isArray(t[n])||(t[n]=[]),this._convertAddresses(this._parseAddresses(i.value),t[n]))}),t}getEnvelope(){if(this._envelope)return this._envelope;let t={from:!1,to:[]};return this._headers.forEach(i=>{let n=[];i.key==="From"||!t.from&&["Reply-To","Sender"].includes(i.key)?(this._convertAddresses(this._parseAddresses(i.value),n),n.length&&n[0]&&(t.from=n[0].address)):["To","Cc","Bcc"].includes(i.key)&&this._convertAddresses(this._parseAddresses(i.value),t.to)}),t.to=t.to.map(i=>i.address),t}messageId(){let t=this.getHeader("Message-ID");return t||(t=this._generateMessageId(),this.setHeader("Message-ID",t)),t}setRaw(t){return this._raw=t,this._raw&&typeof this._raw.pipe=="function"&&(this._contentErrorHandler=i=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=i},this._raw.once("error",this._contentErrorHandler)),this}_getStream(t){let i;return t._resolvedValue?(i=new mr,setImmediate(()=>{try{i.end(t._resolvedValue)}catch(n){i.emit("error",n)}}),i):typeof t.pipe=="function"?t:t&&typeof t.path=="string"&&!t.href?this.disableFileAccess?(i=new mr,setImmediate(()=>i.emit("error",new Error("File access rejected for "+t.path))),i):Yq.createReadStream(t.path):t&&typeof t.href=="string"?this.disableUrlAccess?(i=new mr,setImmediate(()=>i.emit("error",new Error("Url access rejected for "+t.href))),i):nP(t.href,{headers:t.httpHeaders}):(i=new mr,setImmediate(()=>{try{i.end(t||"")}catch(n){i.emit("error",n)}}),i)}_parseAddresses(t){return[].concat.apply([],[].concat(t).map(i=>i&&i.address?(i.address=this._normalizeAddress(i.address),i.name=i.name||"",[i]):iP(i)))}_normalizeHeaderKey(t){return t=(t||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,i=>i.toUpperCase()).replace(/^Content-Features$/i,"Content-features"),t}_handleContentType(t){this.contentType=t.value.trim().toLowerCase(),this.multipart=/^multipart\//i.test(this.contentType)?this.contentType.substr(this.contentType.indexOf("/")+1):!1,this.multipart?this.boundary=t.params.boundary=t.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(t,i){switch(t=this._normalizeHeaderKey(t),t){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(i));case"Message-ID":case"In-Reply-To":case"Content-Id":return i=(i||"").toString().replace(/\r?\n|\r/g," "),i.charAt(0)!=="<"&&(i="<"+i),i.charAt(i.length-1)!==">"&&(i=i+">"),i;case"References":return i=[].concat.apply([],[].concat(i||"").map(n=>(n=(n||"").toString().replace(/\r?\n|\r/g," ").trim(),n.replace(/<[^>]*>/g,s=>s.replace(/\s/g,"")).split(/\s+/)))).map(n=>(n.charAt(0)!=="<"&&(n="<"+n),n.charAt(n.length-1)!==">"&&(n=n+">"),n)),i.join(" ").trim();case"Date":return Object.prototype.toString.call(i)==="[object Date]"?i.toUTCString().replace(/GMT/,"+0000"):(i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i));case"Content-Type":case"Content-Disposition":return(i||"").toString().replace(/\r?\n|\r/g," ");default:return i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i)}}_convertAddresses(t,i){let n=[];return i=i||[],[].concat(t||[]).forEach(s=>{if(s.address)s.address=this._normalizeAddress(s.address),s.name?s.name&&n.push(`${this._encodeAddressName(s.name)} <${s.address}>`):n.push(s.address.indexOf(" ")>=0?`<${s.address}>`:`${s.address}`),s.address&&(i.filter(a=>a.address===s.address).length||i.push(s));else if(s.group){let a=(s.group.length?this._convertAddresses(s.group,i):"").trim();n.push(`${this._encodeAddressName(s.name)}:${a};`)}}),n.join(", ")}_normalizeAddress(t){t=(t||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim();let i=t.lastIndexOf("@");if(i<0)return t;let n=t.substr(0,i),s=t.substr(i+1),a;try{a=Zq.toASCII(s.toLowerCase())}catch{}return n.indexOf(" ")>=0&&(n.charAt(0)!=='"'&&(n='"'+n),n.substr(-1)!=='"'&&(n=n+'"')),`${n}@${a}`}_encodeAddressName(t){return/^[\w ]*$/.test(t)?t:/^[\x20-\x7e]*$/.test(t)?'"'+t.replace(/([\\"])/g,"\\$1")+'"':hi.encodeWord(t,this._getTextEncoding(t),52)}_encodeWords(t){return hi.encodeWords(t,this._getTextEncoding(t),52,!0)}_getTextEncoding(t){t=(t||"").toString();let i=this.textEncoding,n,s;return i||(s=(t.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,n=(t.match(/[a-z]/gi)||[]).length,i=s<n?"Q":"B"),i}_generateMessageId(){return"<"+[2,2,2,6].reduce((t,i)=>t+"-"+Hu.randomBytes(i).toString("hex"),Hu.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}};V0.exports=Vu});var W0=w((b9,K0)=>{"use strict";var hr=dc(),Ku=dr(),oP=ft().parseDataURI,Wu=class{constructor(t){this.mail=t||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(t=>/^text\/html\b/i.test(t.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&this._attachments.attached.length===1,this.mail.raw?this.message=new hr("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(t=>{let i=t.replace(/-(\w)/g,(n,s)=>s.toUpperCase());this.mail[i]&&this.message.setHeader(t,this.mail[i])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(t){let i,n,s=[].concat(this.mail.attachments||[]).map((a,r)=>{let o;/^data:/i.test(a.path||a.href)&&(a=this._processDataUrl(a));let c=a.contentType||Ku.detectMimeType(a.filename||a.path||a.href||"bin"),l=/^image\//i.test(c),p=/^message\//i.test(c),u=a.contentDisposition||(p||l&&a.cid?"inline":"attachment"),d;return"contentTransferEncoding"in a?d=a.contentTransferEncoding:p?d="7bit":d="base64",o={contentType:c,contentDisposition:u,contentTransferEncoding:d},a.filename?o.filename=a.filename:!p&&a.filename!==!1&&(o.filename=(a.path||a.href||"").split("/").pop().split("?").shift()||"attachment-"+(r+1),o.filename.indexOf(".")<0&&(o.filename+="."+Ku.detectExtension(o.contentType))),/^https?:\/\//i.test(a.path)&&(a.href=a.path,a.path=void 0),a.cid&&(o.cid=a.cid),a.raw?o.raw=a.raw:a.path?o.content={path:a.path}:a.href?o.content={href:a.href,httpHeaders:a.httpHeaders}:o.content=a.content||"",a.encoding&&(o.encoding=a.encoding),a.headers&&(o.headers=a.headers),o});return this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?i=this.mail.icalEvent:i={content:this.mail.icalEvent},n={},Object.keys(i).forEach(a=>{n[a]=i[a]}),n.contentType="application/ics",n.headers||(n.headers={}),n.filename=n.filename||"invite.ics",n.headers["Content-Disposition"]="attachment",n.headers["Content-Transfer-Encoding"]="base64"),t?{attached:s.filter(a=>!a.cid).concat(n||[]),related:s.filter(a=>!!a.cid)}:{attached:s.concat(n||[]),related:[]}}getAlternatives(){let t=[],i,n,s,a,r,o;return this.mail.text&&(typeof this.mail.text=="object"&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?i=this.mail.text:i={content:this.mail.text},i.contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&(typeof this.mail.watchHtml=="object"&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?s=this.mail.watchHtml:s={content:this.mail.watchHtml},s.contentType="text/watch-html; charset=utf-8"),this.mail.amp&&(typeof this.mail.amp=="object"&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?a=this.mail.amp:a={content:this.mail.amp},a.contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?r=this.mail.icalEvent:r={content:this.mail.icalEvent},o={},Object.keys(r).forEach(c=>{o[c]=r[c]}),o.content&&typeof o.content=="object"&&(o.content._resolve=!0),o.filename=!1,o.contentType="text/calendar; charset=utf-8; method="+(o.method||"PUBLISH").toString().trim().toUpperCase(),o.headers||(o.headers={})),this.mail.html&&(typeof this.mail.html=="object"&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?n=this.mail.html:n={content:this.mail.html},n.contentType="text/html; charset=utf-8"),[].concat(i||[]).concat(s||[]).concat(a||[]).concat(n||[]).concat(o||[]).concat(this.mail.alternatives||[]).forEach(c=>{let l;/^data:/i.test(c.path||c.href)&&(c=this._processDataUrl(c)),l={contentType:c.contentType||Ku.detectMimeType(c.filename||c.path||c.href||"txt"),contentTransferEncoding:c.contentTransferEncoding},c.filename&&(l.filename=c.filename),/^https?:\/\//i.test(c.path)&&(c.href=c.path,c.path=void 0),c.raw?l.raw=c.raw:c.path?l.content={path:c.path}:c.href?l.content={href:c.href}:l.content=c.content||"",c.encoding&&(l.encoding=c.encoding),c.headers&&(l.headers=c.headers),t.push(l)}),t}_createMixed(t){let i;return t?i=t.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new hr("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(i):this._useRelated&&this._createRelated(i),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(n=>{(!this._useRelated||n!==this._htmlNode)&&this._createContentNode(i,n)}),i}_createAlternative(t){let i;return t?i=t.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new hr("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(n=>{this._useRelated&&this._htmlNode===n?this._createRelated(i):this._createContentNode(i,n)}),i}_createRelated(t){let i;return t?i=t.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new hr('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(i,this._htmlNode),this._attachments.related.forEach(n=>this._createContentNode(i,n)),i}_createContentNode(t,i){i=i||{},i.content=i.content||"";let n,s=(i.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return t?n=t.createChild(i.contentType,{filename:i.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):n=new hr(i.contentType,{filename:i.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),i.headers&&n.addHeader(i.headers),i.cid&&n.setHeader("Content-Id","<"+i.cid.replace(/[<>]/g,"")+">"),i.contentTransferEncoding?n.setHeader("Content-Transfer-Encoding",i.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(i.contentType)&&n.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(i.contentType)||i.contentDisposition)&&n.setHeader("Content-Disposition",i.contentDisposition||(i.cid&&/^image\//i.test(i.contentType)?"inline":"attachment")),typeof i.content=="string"&&!["utf8","usascii","ascii"].includes(s)&&(i.content=Buffer.from(i.content,s)),i.raw?n.setRaw(i.raw):n.setContent(i.content),n}_processDataUrl(t){let i;return(t.path||t.href).match(/^data:/)&&(i=oP(t.path||t.href)),i&&(t.content=i.data,t.contentType=t.contentType||i.contentType,"path"in t&&(t.path=!1),"href"in t&&(t.href=!1)),t}};K0.exports=Wu});var J0=w((y9,G0)=>{"use strict";var cP=require("stream").Transform,Gu=class extends cP{constructor(t){super(t),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(t){let i=this.lastBytes.length,n=Math.min(t.length,i);for(let s=0,a=i-n;s<a;s++)this.lastBytes[s]=this.lastBytes[s+n];for(let s=1;s<=n;s++)this.lastBytes[i-s]=t[t.length-s]}checkHeaders(t){if(this.headersParsed)return!0;let i=this.lastBytes.length,n=0;this.curLinePos=0;for(let s=0,a=this.lastBytes.length+t.length;s<a;s++){let r;if(s<i?r=this.lastBytes[s]:r=t[s-i],r===10&&s){let o=s-1<i?this.lastBytes[s-1]:t[s-1-i],c=s>1?s-2<i?this.lastBytes[s-2]:t[s-2-i]:!1;if(o===10){this.headersParsed=!0,n=s-i+1,this.headerBytes+=n;break}else if(o===13&&c===10){this.headersParsed=!0,n=s-i+1,this.headerBytes+=n;break}}}if(this.headersParsed){if(this.headerChunks.push(t.slice(0,n)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),t.length-1>n){let s=t.slice(n);this.bodySize+=s.length,setImmediate(()=>this.push(s))}return!1}else this.headerBytes+=t.length,this.headerChunks.push(t);return this.updateLastBytes(t),!1}_transform(t,i,n){if(!t||!t.length)return n();typeof t=="string"&&(t=Buffer.from(t,i));let s;try{s=this.checkHeaders(t)}catch(a){return n(a)}s&&(this.bodySize+=t.length,this.push(t)),setImmediate(n)}_flush(t){if(this.headerChunks){let i=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=i.length,this.push(i),this.headerChunks=null}t()}parseHeaders(){let t=(this.rawHeaders||"").toString().split(/\r?\n/);for(let i=t.length-1;i>0;i--)/^\s/.test(t[i])&&(t[i-1]+=`
`+t[i],t.splice(i,1));return t.filter(i=>i.trim()).map(i=>({key:i.substr(0,i.indexOf(":")).trim().toLowerCase(),line:i}))}};G0.exports=Gu});var Y0=w((w9,Q0)=>{"use strict";var lP=require("stream").Transform,pP=require("crypto"),Ju=class extends lP{constructor(t){super(),t=t||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=pP.createHash(t.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=t.debug,this._debugBody=t.debug?[]:!1}updateHash(t){let i,n="",s="file";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(s==="file"&&(o===10||o===13))){if(s==="file"&&(o===9||o===32))s="line";else if(!(s==="line"&&(o===9||o===32))){if((s==="file"||s==="line")&&(s="body",r===t.length-1))break}}if(r===0){if(s==="file"&&(!this.remainder||/[\r\n]$/.test(this.remainder))||s==="line"&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=t.toString("binary");return}else if(s==="line"||s==="file"){n=t.toString("binary"),t=!1;break}}if(s==="body"){n=t.slice(r+1).toString("binary"),t=t.slice(0,r+1);break}}let a=!!this.remainder;if(t&&!a){for(let r=0,o=t.length;r<o;r++)if(r&&t[r]===10&&t[r-1]!==13){a=!0;break}else if(r&&t[r]===13&&t[r-1]===32){a=!0;break}else if(r&&t[r]===32&&t[r-1]===32){a=!0;break}else if(t[r]===9){a=!0;break}}a?(i=this.remainder+(t?t.toString("binary"):""),this.remainder=n,i=i.replace(/\r?\n/g,`
`).replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,`\r
`),t=Buffer.from(i,"binary")):n&&(this.remainder=n),this.debug&&this._debugBody.push(t),this.bodyHash.update(t)}_transform(t,i,n){if(!t||!t.length)return n();typeof t=="string"&&(t=Buffer.from(t,i)),this.updateHash(t),this.byteLength+=t.length,this.push(t),n()}_flush(t){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from(`\r
`)),this.byteLength||this.push(Buffer.from(`\r
`)),this.emit("hash",this.bodyHash.digest("base64"),this.debug?Buffer.concat(this._debugBody):!1),t()}};Q0.exports=Ju});var ew=w((_9,Qu)=>{"use strict";var uP=qu(),dP=dr(),mP=require("crypto");Qu.exports=(e,t,i,n)=>{n=n||{};let a=n.headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",r=Z0(e,a,n.skipFields),o=hP(n.domainName,n.keySelector,r.fieldNames,t,i),c,l;r.headers+="dkim-signature:"+X0(o),c=mP.createSign(("rsa-"+t).toUpperCase()),c.update(r.headers);try{l=c.sign(n.privateKey,"base64")}catch{return!1}return o+l.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,`$&\r
 `).trim()};Qu.exports.relaxedHeaders=Z0;function hP(e,t,i,n,s){let a=["v=1","a=rsa-"+n,"c=relaxed/relaxed","d="+uP.toASCII(e),"q=dns/txt","s="+t,"bh="+s,"h="+i].join("; ");return dP.foldLines("DKIM-Signature: "+a,76)+`;\r
 b=`}function Z0(e,t,i){let n=new Set,s=new Set,a=new Map;(i||"").toLowerCase().split(":").forEach(c=>{s.add(c.trim())}),(t||"").toLowerCase().split(":").filter(c=>!s.has(c.trim())).forEach(c=>{n.add(c.trim())});for(let c=e.length-1;c>=0;c--){let l=e[c];n.has(l.key)&&!a.has(l.key)&&a.set(l.key,X0(l.line))}let r=[],o=[];return n.forEach(c=>{a.has(c)&&(o.push(c),r.push(c+":"+a.get(c)))}),{headers:r.join(`\r
`)+`\r
`,fieldNames:o.join(":")}}function X0(e){return e.substr(e.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}});var iw=w((E9,tw)=>{"use strict";var fP=J0(),gP=Y0(),xP=ew(),Yu=require("stream").PassThrough,Zu=require("fs"),vP=require("path"),bP=require("crypto"),yP="sha256",wP=2*1024*1024,Xu=class{constructor(t,i,n,s){this.options=t||{},this.keys=i,this.cacheTreshold=Number(this.options.cacheTreshold)||wP,this.hashAlgo=this.options.hashAlgo||yP,this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=this.cacheDir?vP.join(this.cacheDir,"message."+Date.now()+"-"+bP.randomBytes(14).toString("hex")):!1,this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=n,this.output=s,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",a=>{this.hasErrored=!0,this.cleanup(),s.emit("error",a)})}cleanup(){!this.cache||!this.cachePath||Zu.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=Zu.createReadStream(this.cachePath),this.cache.once("error",t=>{this.cleanup(),this.output.emit("error",t)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let t=this.chunks[this.readPos++];if(this.output.write(t)===!1)return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let t=0,i=()=>{if(t>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let n=this.keys[t++],s=xP(this.headers,this.hashAlgo,this.bodyHash,{domainName:n.domainName,keySelector:n.keySelector,privateKey:n.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return s&&this.output.write(Buffer.from(s+`\r
`)),setImmediate(i)};if(this.bodyHash&&this.headers)return i();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=Zu.createWriteStream(this.cachePath),this.cache.once("error",t=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;this.relaxedBody.read()!==null;);}),this.hasErrored=!0,this.output.emit("error",t)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new fP,this.relaxedBody=new gP({hashAlgo:this.hashAlgo}),this.parser.on("headers",t=>{this.headers=t}),this.relaxedBody.on("hash",t=>{this.bodyHash=t}),this.relaxedBody.on("readable",()=>{let t;if(!this.cache){for(;(t=this.relaxedBody.read())!==null;)if(this.chunks.push(t),this.chunklen+=t.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}},ed=class{constructor(t){this.options=t||{},this.keys=[].concat(this.options.keys||{domainName:t.domainName,keySelector:t.keySelector,privateKey:t.privateKey})}sign(t,i){let n=new Yu,s=t,a=!1;Buffer.isBuffer(t)?(a=t,s=new Yu):typeof t=="string"&&(a=Buffer.from(t),s=new Yu);let r=this.options;i&&Object.keys(i).length&&(r={},Object.keys(this.options||{}).forEach(c=>{r[c]=this.options[c]}),Object.keys(i||{}).forEach(c=>{c in r||(r[c]=i[c])}));let o=new Xu(r,this.keys,s,n);return setImmediate(()=>{o.signStream(),a&&setImmediate(()=>{s.end(a)})}),n}};tw.exports=ed});var ow=w((k9,rw)=>{"use strict";var nw=require("net"),sw=require("tls"),_P=require("url");function aw(e,t,i,n){let s=_P.parse(e),a,r,o;a={host:s.hostname,port:Number(s.port)?Number(s.port):s.protocol==="https:"?443:80},s.protocol==="https:"?(a.rejectUnauthorized=!1,r=sw.connect.bind(sw)):r=nw.connect.bind(nw);let c=!1,l=u=>{if(!c){c=!0;try{o.destroy()}catch{}n(u)}},p=()=>{let u=new Error("Proxy socket timed out");u.code="ETIMEDOUT",l(u)};o=r(a,()=>{if(c)return;let u={Host:i+":"+t,Connection:"close"};s.auth&&(u["Proxy-Authorization"]="Basic "+Buffer.from(s.auth).toString("base64")),o.write("CONNECT "+i+":"+t+` HTTP/1.1\r
`+Object.keys(u).map(f=>f+": "+u[f]).join(`\r
`)+`\r
\r
`);let d="",m=f=>{let x,E;if(!c&&(d+=f.toString("binary"),x=d.match(/\r\n\r\n/))){if(o.removeListener("data",m),E=d.substr(x.index+x[0].length),d=d.substr(0,x.index),E&&o.unshift(Buffer.from(E,"binary")),c=!0,x=d.match(/^HTTP\/\d+\.\d+ (\d+)/i),!x||(x[1]||"").charAt(0)!=="2"){try{o.destroy()}catch{}return n(new Error("Invalid response from proxy"+(x&&": "+x[1]||"")))}return o.removeListener("error",l),o.removeListener("timeout",p),o.setTimeout(0),n(null,o)}};o.on("data",m)}),o.setTimeout(aw.timeout||30*1e3),o.on("timeout",p),o.once("error",l)}rw.exports=aw});var pw=w((S9,lw)=>{"use strict";var cw=ft(),EP=dc(),sa=dr(),td=class{constructor(t,i){this.mailer=t,this.data={},this.message=null,i=i||{};let n=t.options||{},s=t._defaults||{};Object.keys(i).forEach(a=>{this.data[a]=i[a]}),this.data.headers=this.data.headers||{},Object.keys(s).forEach(a=>{a in this.data?a==="headers"&&Object.keys(s.headers).forEach(r=>{r in this.data.headers||(this.data.headers[r]=s.headers[r])}):this.data[a]=s[a]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(a=>{a in n&&(this.data[a]=n[a])})}resolveContent(...t){return cw.resolveContent(...t)}resolveAll(t){let i=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((c,l)=>{i.push([this.data.alternatives,l])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((c,l)=>{c.filename||(c.filename=(c.path||c.href||"").split("/").pop().split("?").shift()||"attachment-"+(l+1),c.filename.indexOf(".")<0&&(c.filename+="."+sa.detectExtension(c.contentType))),c.contentType||(c.contentType=sa.detectMimeType(c.filename||c.path||c.href||"bin")),i.push([this.data.attachments,l])});let n=new EP;["from","to","cc","bcc","sender","replyTo"].forEach(c=>{let l;this.message?l=[].concat(n._parseAddresses(this.message.getHeader(c==="replyTo"?"reply-to":c))||[]):this.data[c]&&(l=[].concat(n._parseAddresses(this.data[c])||[])),l&&l.length?this.data[c]=l:c in this.data&&(this.data[c]=null)}),["from","sender"].forEach(c=>{this.data[c]&&(this.data[c]=this.data[c].shift())});let r=0,o=()=>{if(r>=i.length)return t(null,this.data);let c=i[r++];if(!c[0]||!c[0][c[1]])return o();cw.resolveContent(...c,(l,p)=>{if(l)return t(l);let u={content:p};c[0][c[1]]&&typeof c[0][c[1]]=="object"&&!Buffer.isBuffer(c[0][c[1]])&&Object.keys(c[0][c[1]]).forEach(d=>{!(d in u)&&!["content","path","href","raw"].includes(d)&&(u[d]=c[0][c[1]][d])}),c[0][c[1]]=u,o()})};setImmediate(()=>o())}normalize(t){let i=this.data.envelope||this.message.getEnvelope(),n=this.message.messageId();this.resolveAll((s,a)=>s?t(s):(a.envelope=i,a.messageId=n,["html","text","watchHtml","amp"].forEach(r=>{a[r]&&a[r].content&&(typeof a[r].content=="string"?a[r]=a[r].content:Buffer.isBuffer(a[r].content)&&(a[r]=a[r].content.toString()))}),a.icalEvent&&Buffer.isBuffer(a.icalEvent.content)&&(a.icalEvent.content=a.icalEvent.content.toString("base64"),a.icalEvent.encoding="base64"),a.alternatives&&a.alternatives.length&&a.alternatives.forEach(r=>{r&&r.content&&Buffer.isBuffer(r.content)&&(r.content=r.content.toString("base64"),r.encoding="base64")}),a.attachments&&a.attachments.length&&a.attachments.forEach(r=>{r&&r.content&&Buffer.isBuffer(r.content)&&(r.content=r.content.toString("base64"),r.encoding="base64")}),a.normalizedHeaders={},Object.keys(a.headers||{}).forEach(r=>{let o=[].concat(a.headers[r]||[]).shift();o=o&&o.value||o,o&&(["references","in-reply-to","message-id","content-id"].includes(r)&&(o=this.message._encodeHeaderValue(r,o)),a.normalizedHeaders[r]=o)}),a.list&&typeof a.list=="object"&&this._getListHeaders(a.list).forEach(o=>{a.normalizedHeaders[o.key]=o.value.map(c=>c&&c.value||c).join(", ")}),a.references&&(a.normalizedHeaders.references=this.message._encodeHeaderValue("references",a.references)),a.inReplyTo&&(a.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",a.inReplyTo)),t(null,a)))}setMailerHeader(){!this.message||!this.data.xMailer||this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(!(!this.message||!this.data.priority))switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low");break;default:}}setListHeaders(){!this.message||!this.data.list||typeof this.data.list!="object"||this.data.list&&typeof this.data.list=="object"&&this._getListHeaders(this.data.list).forEach(t=>{t.value.forEach(i=>{this.message.addHeader(t.key,i)})})}_getListHeaders(t){return Object.keys(t).map(i=>({key:"list-"+i.toLowerCase().trim(),value:[].concat(t[i]||[]).map(n=>({prepared:!0,foldLines:!0,value:[].concat(n||[]).map(s=>{if(typeof s=="string"&&(s={url:s}),s&&s.url){if(i.toLowerCase().trim()==="id"){let r=s.comment||"";return sa.isPlainText(r)?r='"'+r+'"':r=sa.encodeWord(r),(s.comment?r+" ":"")+this._formatListUrl(s.url).replace(/^<[^:]+\/{,2}/,"")}let a=s.comment||"";return sa.isPlainText(a)||(a=sa.encodeWord(a)),this._formatListUrl(s.url)+(s.comment?" ("+a+")":"")}return""}).filter(s=>s).join(", ")}))}))}_formatListUrl(t){return t=t.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(t)?"<"+t+">":/^[^@]+@[^@]+$/.test(t)?"<mailto:"+t+">":"<http://"+t+">"}};lw.exports=td});var hw=w((A9,mw)=>{"use strict";var kP=require("events"),uw=ft(),SP=Cu(),AP=W0(),dw=iw(),TP=ow(),CP=require("util"),jP=require("url"),id=mi(),RP=pw(),qP=require("net"),PP=require("dns"),OP=require("crypto"),nd=class extends kP{constructor(t,i,n){super(),this.options=i||{},this._defaults=n||{},this._defaultPlugins={compile:[(...s)=>this._convertDataImages(...s)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=this.options.dkim?new dw(this.options.dkim):!1,this.transporter=t,this.transporter.mailer=this,this.logger=uw.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),typeof this.transporter.on=="function"&&(this.transporter.on("log",s=>{this.logger.debug({tnx:"transport"},"%s: %s",s.type,s.message)}),this.transporter.on("error",s=>{this.logger.error({err:s,tnx:"transport"},"Transport Error: %s",s.message),this.emit("error",s)}),this.transporter.on("idle",(...s)=>{this.emit("idle",...s)})),["close","isIdle","verify"].forEach(s=>{this[s]=(...a)=>typeof this.transporter[s]=="function"?(s==="verify"&&typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[s](...a)):(this.logger.warn({tnx:"transport",methodName:s},"Non existing method %s called for transport",s),!1)}),this.options.proxy&&typeof this.options.proxy=="string"&&this.setupProxy(this.options.proxy)}use(t,i){return t=(t||"").toString(),this._userPlugins.hasOwnProperty(t)?this._userPlugins[t].push(i):this._userPlugins[t]=[i],this}sendMail(t,i=null){let n;i||(n=new Promise((a,r)=>{i=uw.callbackPromise(a,r)})),typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let s=new RP(this,t);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",s,a=>{if(a)return this.logger.error({err:a,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",a.message),i(a);s.message=new AP(s.data).compile(),s.setMailerHeader(),s.setPriorityHeaders(),s.setListHeaders(),this._processPlugins("stream",s,r=>{if(r)return this.logger.error({err:r,tnx:"plugin",action:"stream"},"PluginStream Error: %s",r.message),i(r);(s.data.dkim||this.dkim)&&s.message.processFunc(o=>{let c=s.data.dkim?new dw(s.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:s.message.messageId(),dkimDomains:c.keys.map(l=>l.keySelector+"."+l.domainName).join(", ")},"Signing outgoing message with %s keys",c.keys.length),c.sign(o,s.data._dkim)}),this.transporter.send(s,(...o)=>{o[0]&&this.logger.error({err:o[0],tnx:"transport",action:"send"},"Send Error: %s",o[0].message),i(...o)})})}),n}getVersionString(){return CP.format("%s (%s; +%s; %s/%s)",id.name,id.version,id.homepage,this.transporter.name,this.transporter.version)}_processPlugins(t,i,n){if(t=(t||"").toString(),!this._userPlugins.hasOwnProperty(t))return n();let s=this._userPlugins[t]||[],a=this._defaultPlugins[t]||[];if(s.length&&this.logger.debug({tnx:"transaction",pluginCount:s.length,step:t},"Using %s plugins for %s",s.length,t),s.length+a.length===0)return n();let r=0,o="default",c=()=>{let l=o==="default"?a:s;if(r>=l.length)if(o==="default"&&s.length)o="user",r=0,l=s;else return n();let p=l[r++];p(i,u=>{if(u)return n(u);c()})};c()}setupProxy(t){let i=jP.parse(t);this.getSocket=(n,s)=>{let a=i.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+a))return this.meta.get("proxy_handler_"+a)(i,n,s);switch(a){case"http":case"https":TP(i.href,n.port,n.host,(r,o)=>r?s(r):s(null,{connection:o}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return s(new Error("Socks module not loaded"));let r=o=>{let c=!!this.meta.get("proxy_socks_module").SocksClient,l=c?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),p=Number(i.protocol.replace(/\D/g,""))||5,u={proxy:{ipaddress:o,port:Number(i.port),type:p},[c?"destination":"target"]:{host:n.host,port:n.port},command:"connect"};if(i.auth){let d=decodeURIComponent(i.auth.split(":").shift()),m=decodeURIComponent(i.auth.split(":").pop());c?(u.proxy.userId=d,u.proxy.password=m):p===4?u.userid=d:u.authentication={username:d,password:m}}l.createConnection(u,(d,m)=>d?s(d):s(null,{connection:m.socket||m}))};return qP.isIP(i.hostname)?r(i.hostname):PP.resolve(i.hostname,(o,c)=>{if(o)return s(o);r(Array.isArray(c)?c[0]:c)})}}s(new Error("Unknown proxy configuration"))}}_convertDataImages(t,i){if(!this.options.attachDataUrls&&!t.data.attachDataUrls||!t.data.html)return i();t.resolveContent(t.data,"html",(n,s)=>{if(n)return i(n);let a=0;s=(s||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(r,o,c,l)=>{let p=OP.randomBytes(10).toString("hex")+"@localhost";return t.data.attachments||(t.data.attachments=[]),Array.isArray(t.data.attachments)||(t.data.attachments=[].concat(t.data.attachments||[])),t.data.attachments.push({path:c,cid:p,filename:"image-"+ ++a+"."+SP.detectExtension(l)}),o+"cid:"+p}),t.data.html=s,i()})}set(t,i){return this.meta.set(t,i)}get(t){return this.meta.get(t)}};mw.exports=nd});var gw=w((T9,fw)=>{"use strict";var IP=require("stream"),$P=IP.Transform,sd=class extends $P{constructor(t){super(t),this.options=t||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(t,i,n){let s=[],a=0,r,o,c=0,l;if(!t||!t.length)return n();for(typeof t=="string"&&(t=Buffer.from(t)),this.inByteCount+=t.length,r=0,o=t.length;r<o;r++)t[r]===46?(r&&t[r-1]===10||!r&&(!this.lastByte||this.lastByte===10))&&(l=t.slice(c,r+1),s.push(l),s.push(Buffer.from(".")),a+=l.length+1,c=r+1):t[r]===10&&(r&&t[r-1]!==13||!r&&this.lastByte!==13)&&(r>c?(l=t.slice(c,r),s.push(l),a+=l.length+2):a+=2,s.push(Buffer.from(`\r
`)),c=r+1);a?(c<t.length&&(l=t.slice(c),s.push(l),a+=l.length),this.outByteCount+=a,this.push(Buffer.concat(s,a))):(this.outByteCount+=t.length,this.push(t)),this.lastByte=t[t.length-1],n()}_flush(t){let i;this.lastByte===10?i=Buffer.from(`.\r
`):this.lastByte===13?i=Buffer.from(`
.\r
`):i=Buffer.from(`\r
.\r
`),this.outByteCount+=i.length,this.push(i),t()}};fw.exports=sd});var mc=w((C9,_w)=>{"use strict";var NP=mi(),FP=require("events").EventEmitter,xw=require("net"),vw=require("tls"),LP=require("os"),bw=require("crypto"),MP=gw(),yw=require("stream").PassThrough,Xi=ft(),DP=2*60*1e3,ww=10*60*1e3,BP=30*1e3,zP=30*1e3,ad=class extends FP{constructor(t){super(t),this.id=bw.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=t||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:xw.isIP(this.host)?!1:this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,typeof this.options.secure>"u"&&this.port===465&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=Xi.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(i=>{let n=(i||"").toString().trim().toUpperCase();n&&this.customAuth.set(n,this.options.customAuth[i])}),this.version=NP.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=i=>this._onData(i),this._onSocketError=i=>this._onError(i,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(t){if(typeof t=="function"){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),t()});let s=this._isDestroyedMessage("connect");if(s)return t(this._formatError(s,"ECONNECTION",!1,"CONN"))}let i={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||zP};this.options.localAddress&&(i.localAddress=this.options.localAddress);let n=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||DP),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,n(),this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(s=>{if(s){this._onError(new Error("Error initiating TLS - "+(s.message||s)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}else return this.options.socket?(this._socket=this.options.socket,Xi.resolveHostname(i,(s,a)=>{if(s)return setImmediate(()=>this._onError(s,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(r=>{r.charAt(0)!=="_"&&a[r]&&(i[r]=a[r])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),n()}catch(r){return setImmediate(()=>this._onError(r,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(s=>{i[s]=this.options.tls[s]}),this.servername&&!i.servername&&(i.servername=this.servername),Xi.resolveHostname(i,(s,a)=>{if(s)return setImmediate(()=>this._onError(s,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(r=>{r.charAt(0)!=="_"&&a[r]&&(i[r]=a[r])});try{this._socket=vw.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),n()}catch(r){return setImmediate(()=>this._onError(r,"ECONNECTION",!1,"CONN"))}})):Xi.resolveHostname(i,(s,a)=>{if(s)return setImmediate(()=>this._onError(s,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(r=>{r.charAt(0)!=="_"&&a[r]&&(i[r]=a[r])});try{this._socket=xw.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),n()}catch(r){return setImmediate(()=>this._onError(r,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let t="end";this.stage==="init"&&(t="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',t);let i=this._socket&&this._socket.socket||this._socket;if(i&&!i.destroyed)try{i[t]()}catch{}this._destroy()}login(t,i){let n=this._isDestroyedMessage("login");if(n)return i(this._formatError(n,"ECONNECTION",!1,"API"));if(this._auth=t||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,!this._authMethod&&this._auth.oauth2&&!this._auth.credentials?this._authMethod="XOAUTH2":(!this._authMethod||this._authMethod==="XOAUTH2"&&!this._auth.oauth2)&&(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()),this._authMethod!=="XOAUTH2"&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod))this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};else return i(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));if(this.customAuth.has(this._authMethod)){let s=this.customAuth.get(this._authMethod),a,r=!1,o=()=>{r||(r=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0))},c=p=>{r||(r=!0,i(this._formatError(p,"EAUTH",a,"AUTH "+this._authMethod)))},l=s({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(p,u)=>{let d;return u||(d=new Promise((m,f)=>{u=Xi.callbackPromise(m,f)})),this._responseActions.push(m=>{a=m;let f=m.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),x={command:p,response:m};f?(x.status=Number(f[1])||0,f[2]&&(x.code=f[2]),x.text=m.substr(f[0].length)):(x.text=m,x.status=0),u(null,x)}),setImmediate(()=>this._sendCommand(p)),d},resolve:o,reject:c});l&&typeof l.catch=="function"&&l.then(o).catch(c);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,i);return;case"LOGIN":this._responseActions.push(s=>{this._actionAUTH_LOGIN_USER(s,i)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(s=>{this._actionAUTHComplete(s,i)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(s=>{this._actionAUTH_CRAM_MD5(s,i)}),this._sendCommand("AUTH CRAM-MD5");return}return i(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(t,i,n){if(!i)return n(this._formatError("Empty message","EMESSAGE",!1,"API"));let s=this._isDestroyedMessage("send message");if(s)return n(this._formatError(s,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&t.size>this._maxAllowedSize)return setImmediate(()=>{n(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let a=!1,r=function(){a||(a=!0,n(...arguments))};typeof i.on=="function"&&i.on("error",c=>r(this._formatError(c,"ESTREAM",!1,"API")));let o=Date.now();this._setEnvelope(t,(c,l)=>{if(c){let d=new yw;return typeof i.pipe=="function"?i.pipe(d):(d.write(i),d.end()),r(c)}let p=Date.now(),u=this._createSendStream((d,m)=>d?r(d):(l.envelopeTime=p-o,l.messageTime=Date.now()-p,l.messageSize=u.outByteCount,l.response=m,r(null,l)));typeof i.pipe=="function"?i.pipe(u):(u.write(i),u.end())})}reset(t){this._sendCommand("RSET"),this._responseActions.push(i=>i.charAt(0)!=="2"?t(this._formatError("Could not reset session state. response="+i,"EPROTOCOL",i,"RSET")):(this._envelope=!1,t(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||ww),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||BP),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(t){if(this._destroyed||!t||!t.length)return;let i=(t||"").toString("binary"),n=(this._remainder+i).split(/\r?\n/),s;this._remainder=n.pop();for(let a=0,r=n.length;a<r;a++){if(this._responseQueue.length&&(s=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(s.split(`
`).pop()))){this._responseQueue[this._responseQueue.length-1]+=`
`+n[a];continue}this._responseQueue.push(n[a])}this._responseQueue.length&&(s=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(s.split(`
`).pop()))||this._processResponse()}_onError(t,i,n,s){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),!this._destroyed&&(t=this._formatError(t,i,n,s),this.logger.error(n,t.message),this.emit("error",t),this.close())}_formatError(t,i,n,s){let a;/Error\]$/i.test(Object.prototype.toString.call(t))?a=t:a=new Error(t),i&&i!=="Error"&&(a.code=i),n&&(a.response=n,a.message+=": "+n);let r=typeof n=="string"&&Number((n.match(/^\d+/)||[])[0])||!1;return r&&(a.responseCode=r),s&&(a.command=s),a}_onClose(){let t=!1;if(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=t=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ETLS",t,"CONN");if(![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",t,"CONN");if(/^[45]\d{2}\b/.test(t))return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",t,"CONN");this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(t){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let i=this._socket,n={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(s=>{n[s]=this.options.tls[s]}),this.servername&&!n.servername&&(n.servername=this.servername),this.upgrading=!0;try{this._socket=vw.connect(n,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),i.removeListener("close",this._onSocketClose),i.removeListener("end",this._onSocketEnd),t(null,!0)))}catch(s){return t(s)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||ww),this._socket.on("timeout",this._onSocketTimeout),i.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let t=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(t.split(`
`).pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},t.replace(/\r?\n$/,"")),t.trim()||setImmediate(()=>this._processResponse());let i=this._responseActions.shift();if(typeof i=="function")i.call(this,t),setImmediate(()=>this._processResponse());else return this._onError(new Error("Unexpected Response"),"EPROTOCOL",t,"CONN")}_sendCommand(t,i){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(i||t||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(t+`\r
`,"utf-8"))}}_setEnvelope(t,i){let n=[],s=!1;if(this._envelope=t||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(a=>(a&&a.address||a||"").toString().trim()),!this._envelope.to.length)return i(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return i(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(s=!0);for(let a=0,r=this._envelope.to.length;a<r;a++){if(!this._envelope.to[a]||/[\r\n<>]/.test(this._envelope.to[a]))return i(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[a]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[a])&&(s=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(a){return i(this._formatError("Invalid DSN "+a.message,"EENVELOPE",!1,"API"))}this._responseActions.push(a=>{this._actionMAIL(a,i)}),s&&this._supportedExtensions.includes("SMTPUTF8")&&(n.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(n.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&n.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&n.push("RET="+Xi.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&n.push("ENVID="+Xi.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(n.length?" "+n.join(" "):""))}_setDsnEnvelope(t){let i=(t.ret||t.return||"").toString().toUpperCase()||null;if(i)switch(i){case"HDRS":case"HEADERS":i="HDRS";break;case"FULL":case"BODY":i="FULL";break}if(i&&!["FULL","HDRS"].includes(i))throw new Error("ret: "+JSON.stringify(i));let n=(t.envid||t.id||"").toString()||null,s=t.notify||null;if(s){typeof s=="string"&&(s=s.split(",")),s=s.map(c=>c.trim().toUpperCase());let r=["NEVER","SUCCESS","FAILURE","DELAY"];if(s.filter(c=>!r.includes(c)).length||s.length>1&&s.includes("NEVER"))throw new Error("notify: "+JSON.stringify(s.join(",")));s=s.join(",")}let a=(t.recipient||t.orcpt||"").toString()||null;return a&&a.indexOf(";")<0&&(a="rfc822;"+a),{ret:i,envid:n,notify:s,orcpt:a}}_getDsnRcptToArgs(){let t=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&t.push("NOTIFY="+Xi.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&t.push("ORCPT="+Xi.encodeXText(this._envelope.dsn.orcpt))),t.length?" "+t.join(" "):""}_createSendStream(t){let i=new MP,n;return this.options.lmtp?this._envelope.accepted.forEach((s,a)=>{let r=a===this._envelope.accepted.length-1;this._responseActions.push(o=>{this._actionLMTPStream(s,r,o,t)})}):this._responseActions.push(s=>{this._actionSMTPStream(s,t)}),i.pipe(this._socket,{end:!1}),this.options.debug&&(n=new yw,n.on("readable",()=>{let s;for(;s=n.read();)this.logger.debug({tnx:"message"},s.toString("binary").replace(/\r?\n$/,""))}),i.pipe(n)),i.once("end",()=>{this.logger.info({tnx:"message",inByteCount:i.inByteCount,outByteCount:i.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",i.outByteCount,i.inByteCount)}),i}_actionGreeting(t){if(clearTimeout(this._greetingTimeout),t.substr(0,3)!=="220"){this._onError(new Error("Invalid greeting. response="+t),"EPROTOCOL",t,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(t){if(t.charAt(0)!=="2"){this._onError(new Error("Invalid LHLO. response="+t),"EPROTOCOL",t,"LHLO");return}this._actionEHLO(t)}_actionEHLO(t){let i;if(t.substr(0,3)==="421"){this._onError(new Error("Server terminates connection. response="+t),"ECONNECTION",t,"EHLO");return}if(t.charAt(0)!=="2"){if(this.options.requireTLS){this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+t),"ECONNECTION",t,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=t.split(/\r?\n/).map(n=>n.replace(/^\d+[ -]/,"").trim()).filter(n=>n).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(t)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(t)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(t)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(t)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(t)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(t)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(t)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(t)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(t)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(t)&&this._supportedAuth.push("XOAUTH2"),(i=t.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(i[1])||0),this.emit("connect")}_actionHELO(t){if(t.charAt(0)!=="2"){this._onError(new Error("Invalid HELO. response="+t),"EPROTOCOL",t,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(t){if(t.charAt(0)!=="2"){if(this.options.opportunisticTLS)return this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect");this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",t,"STARTTLS");return}this._upgradeConnection((i,n)=>{if(i){this._onError(new Error("Error initiating TLS - "+(i.message||i)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),n?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(t,i){if(!/^334[ -]/.test(t)){i(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",t,"AUTH LOGIN"));return}this._responseActions.push(n=>{this._actionAUTH_LOGIN_PASS(n,i)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(t,i){let n=t.match(/^334\s+(.+)$/),s="";if(n)s=n[1];else return i(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",t,"AUTH CRAM-MD5"));let a=Buffer.from(s,"base64").toString("ascii"),r=bw.createHmac("md5",this._auth.credentials.pass);r.update(a);let o=this._auth.credentials.user+" "+r.digest("hex");this._responseActions.push(c=>{this._actionAUTH_CRAM_MD5_PASS(c,i)}),this._sendCommand(Buffer.from(o).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(t,i){if(!t.match(/^235\s+/))return i(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",t,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0)}_actionAUTH_LOGIN_PASS(t,i){if(!/^334[ -]/.test(t))return i(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",t,"AUTH LOGIN"));this._responseActions.push(n=>{this._actionAUTHComplete(n,i)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(t,i,n){if(!n&&typeof i=="function"&&(n=i,i=!1),t.substr(0,3)==="334"){this._responseActions.push(s=>{i||this._authMethod!=="XOAUTH2"?this._actionAUTHComplete(s,!0,n):setImmediate(()=>this._handleXOauth2Token(!0,n))}),this._sendCommand("");return}if(t.charAt(0)!=="2")return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),n(this._formatError("Invalid login","EAUTH",t,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,n(null,!0)}_actionMAIL(t,i){let n,s;if(Number(t.charAt(0))!==2)return this._usingSmtpUtf8&&/^550 /.test(t)&&/[\x80-\uFFFF]/.test(this._envelope.from)?n="Internationalized mailbox name not allowed":n="Mail command failed",i(this._formatError(n,"EENVELOPE",t,"MAIL FROM"));if(this._envelope.rcptQueue.length)if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)s=this._envelope.rcptQueue.shift(),this._recipientQueue.push(s),this._responseActions.push(a=>{this._actionRCPT(a,i)}),this._sendCommand("RCPT TO:<"+s+">"+this._getDsnRcptToArgs());else s=this._envelope.rcptQueue.shift(),this._recipientQueue.push(s),this._responseActions.push(a=>{this._actionRCPT(a,i)}),this._sendCommand("RCPT TO:<"+s+">"+this._getDsnRcptToArgs());else return i(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"))}_actionRCPT(t,i){let n,s,a=this._recipientQueue.shift();if(Number(t.charAt(0))!==2?(this._usingSmtpUtf8&&/^553 /.test(t)&&/[\x80-\uFFFF]/.test(a)?n="Internationalized mailbox name not allowed":n="Recipient command failed",this._envelope.rejected.push(a),s=this._formatError(n,"EENVELOPE",t,"RCPT TO"),s.recipient=a,this._envelope.rejectedErrors.push(s)):this._envelope.accepted.push(a),!this._envelope.rcptQueue.length&&!this._recipientQueue.length)if(this._envelope.rejected.length<this._envelope.to.length)this._responseActions.push(r=>{this._actionDATA(r,i)}),this._sendCommand("DATA");else return s=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",t,"RCPT TO"),s.rejected=this._envelope.rejected,s.rejectedErrors=this._envelope.rejectedErrors,i(s);else this._envelope.rcptQueue.length&&(a=this._envelope.rcptQueue.shift(),this._recipientQueue.push(a),this._responseActions.push(r=>{this._actionRCPT(r,i)}),this._sendCommand("RCPT TO:<"+a+">"+this._getDsnRcptToArgs()))}_actionDATA(t,i){if(!/^[23]/.test(t))return i(this._formatError("Data command failed","EENVELOPE",t,"DATA"));let n={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(n.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(n.rejectedErrors=this._envelope.rejectedErrors),i(null,n)}_actionSMTPStream(t,i){return Number(t.charAt(0))!==2?i(this._formatError("Message failed","EMESSAGE",t,"DATA")):i(null,t)}_actionLMTPStream(t,i,n,s){let a;if(Number(n.charAt(0))!==2){a=this._formatError("Message failed for recipient "+t,"EMESSAGE",n,"DATA"),a.recipient=t,this._envelope.rejected.push(t),this._envelope.rejectedErrors.push(a);for(let r=0,o=this._envelope.accepted.length;r<o;r++)this._envelope.accepted[r]===t&&this._envelope.accepted.splice(r,1)}if(i)return s(null,n)}_handleXOauth2Token(t,i){this._auth.oauth2.getToken(t,(n,s)=>{if(n)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),i(this._formatError(n,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(a=>{this._actionAUTHComplete(a,t,i)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(s),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(t){if(this._destroyed)return"Cannot "+t+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+t+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+t+" - smtp connection socket is already half-closed."}}_getHostname(){let t;try{t=LP.hostname()||""}catch{t="localhost"}return(!t||t.indexOf(".")<0)&&(t="[127.0.0.1]"),t.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(t="["+t+"]"),t}};_w.exports=ad});var od=w((j9,Ew)=>{"use strict";var UP=require("stream").Stream,HP=lr(),VP=require("crypto"),KP=ft(),rd=class extends UP{constructor(t,i){if(super(),this.options=t||{},t&&t.serviceClient){if(!t.privateKey||!t.user){setImmediate(()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!')));return}let n=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=n||5*60}if(this.logger=KP.getLogger({logger:i},{component:this.options.component||"OAuth2"}),this.provisionCallback=typeof this.options.provisionCallback=="function"?this.options.provisionCallback:!1,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let n=Math.max(Number(this.options.timeout)||0,0);this.expires=n&&Date.now()+n*1e3||0}}getToken(t,i){if(!t&&this.accessToken&&(!this.expires||this.expires>Date.now()))return i(null,this.accessToken);let n=(...s)=>{s[0]?this.logger.error({err:s[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),i(...s)};this.provisionCallback?this.provisionCallback(this.options.user,!!t,(s,a,r)=>{!s&&a&&(this.accessToken=a,this.expires=r||0),n(s,a)}):this.generateToken(n)}updateToken(t,i){this.accessToken=t,i=Math.max(Number(i)||0,0),this.expires=i&&Date.now()+i*1e3||0,this.emit("token",{user:this.options.user,accessToken:t||"",expires:this.expires})}generateToken(t){let i,n;if(this.options.serviceClient){let s=Math.floor(Date.now()/1e3),a={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:s,exp:s+this.options.serviceRequestTimeout},r;try{r=this.jwtSignRS256(a)}catch{return t(new Error("Can't generate token. Check your auth options"))}i={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:r},n={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:a}}else{if(!this.options.refreshToken)return t(new Error("Can't create new access token for user"));i={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},n={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(s=>{i[s]=this.options.customParams[s],n[s]=this.options.customParams[s]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(n)),this.postRequest(this.options.accessUrl,i,this.options,(s,a)=>{let r;if(s)return t(s);try{r=JSON.parse(a.toString())}catch(c){return t(c)}if(!r||typeof r!="object")return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(a||"").toString()),t(new Error("Invalid authentication response"));let o={};if(Object.keys(r).forEach(c=>{c!=="access_token"?o[c]=r[c]:o[c]=(r[c]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(o)),r.error){let c=r.error;return r.error_description&&(c+=": "+r.error_description),r.error_uri&&(c+=" ("+r.error_uri+")"),t(new Error(c))}return r.access_token?(this.updateToken(r.access_token,r.expires_in),t(null,this.accessToken)):t(new Error("No access token"))})}buildXOAuth2Token(t){let i=["user="+(this.options.user||""),"auth=Bearer "+(t||this.accessToken),"",""];return Buffer.from(i.join(""),"utf-8").toString("base64")}postRequest(t,i,n,s){let a=!1,r=[],o=0,c=HP(t,{method:"post",headers:n.customHeaders,body:i,allowErrorResponse:!0});c.on("readable",()=>{let l;for(;(l=c.read())!==null;)r.push(l),o+=l.length}),c.once("error",l=>{if(!a)return a=!0,s(l)}),c.once("end",()=>{if(!a)return a=!0,s(null,Buffer.concat(r,o))})}toBase64URL(t){return typeof t=="string"&&(t=Buffer.from(t)),t.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(t){t=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(t)].map(n=>this.toBase64URL(n)).join(".");let i=VP.createSign("RSA-SHA256").update(t).sign(this.options.privateKey);return t+"."+this.toBase64URL(i)}};Ew.exports=rd});var Sw=w((R9,kw)=>{"use strict";var WP=mc(),GP=ft().assign,JP=od(),QP=require("events"),cd=class extends QP{constructor(t){if(super(),this.pool=t,this.options=t.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let i=new JP(this.options.auth,this.logger);i.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||i.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:i,method:"XOAUTH2"},i.on("token",n=>this.pool.mailer.emit("token",n)),i.on("error",n=>this.emit("error",n));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(t){this.pool.getSocket(this.options,(i,n)=>{if(i)return t(i);let s=!1,a=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,a.host||"",a.port||""),a=GP(!1,a),Object.keys(n).forEach(r=>{a[r]=n[r]})),this.connection=new WP(a),this.connection.once("error",r=>{if(this.emit("error",r),!s)return s=!0,t(r)}),this.connection.once("end",()=>{if(this.close(),s)return;s=!0;let r=setTimeout(()=>{if(s)return;let o=new Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(o.code="ETLS"),t(o)},1e3);try{r.unref()}catch{}}),this.connection.connect(()=>{if(!s)if(this.auth&&(this.connection.allowsAuth||a.forceAuth))this.connection.login(this.auth,r=>{if(!s){if(s=!0,r)return this.connection.close(),this.emit("error",r),t(r);this._connected=!0,t(null,!0)}});else return s=!0,this._connected=!0,t(null,!0)})})}send(t,i){if(!this._connected)return this.connect(r=>r?i(r):this.send(t,i));let n=t.message.getEnvelope(),s=t.message.messageId(),a=[].concat(n.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:s,cid:this.id},"Sending message %s using #%s to <%s>",s,this.id,a.join(", ")),t.data.dsn&&(n.dsn=t.data.dsn),this.connection.send(n,t.message.createReadStream(),(r,o)=>{if(this.messages++,r)return this.connection.close(),this.emit("error",r),i(r);o.envelope={from:n.from,to:n.to},o.messageId=s,setImmediate(()=>{let c;this.messages>=this.options.maxMessages?(c=new Error("Resource exhausted"),c.code="EMAXLIMIT",this.connection.close(),this.emit("error",c)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),i(null,o)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}};kw.exports=cd});var Aw=w((q9,YP)=>{YP.exports={"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},Aliyun:{domains:["aliyun.com"],host:"smtp.aliyun.com",port:465,secure:!0},AOL:{domains:["aol.com"],host:"smtp.aol.com",port:587},Bluewin:{host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},DebugMail:{host:"debugmail.io",port:25},DynectEmail:{aliases:["Dynect"],host:"smtp.dynect.net",port:25},Ethereal:{aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},FastMail:{domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},"Feishu Mail":{aliases:["Feishu","FeishuMail"],domains:["www.feishu.cn"],host:"smtp.feishu.cn",port:465,secure:!0},GandiMail:{aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},Gmail:{aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},Godaddy:{host:"smtpout.secureserver.net",port:25},GodaddyAsia:{host:"smtp.asia.secureserver.net",port:25},GodaddyEurope:{host:"smtp.europe.secureserver.net",port:25},"hot.ee":{host:"mail.hot.ee"},Hotmail:{aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},iCloud:{aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},Infomaniak:{host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},Loopia:{host:"mailcluster.loopia.se",port:465},"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},"Mailcatch.app":{host:"sandbox-smtp.mailcatch.app",port:2525},Maildev:{port:1025,ignoreTLS:!0},Mailgun:{host:"smtp.mailgun.org",port:465,secure:!0},Mailjet:{host:"in.mailjet.com",port:587},Mailosaur:{host:"mailosaur.io",port:25},Mailtrap:{host:"live.smtp.mailtrap.io",port:587},Mandrill:{host:"smtp.mandrillapp.com",port:587},Naver:{host:"smtp.naver.com",port:587},One:{host:"send.one.com",port:465,secure:!0},OpenMailBox:{aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Outlook365:{host:"smtp.office365.com",port:587,secure:!1},OhMySMTP:{host:"smtp.ohmysmtp.com",port:587,secure:!1},Postmark:{aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},Proton:{aliases:["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],domains:["proton.me","protonmail.com","pm.me","protonmail.ch"],host:"smtp.protonmail.ch",port:587,requireTLS:!0},"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:{domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},QQex:{aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},SendCloud:{host:"smtp.sendcloud.net",port:2525},SendGrid:{host:"smtp.sendgrid.net",port:587},SendinBlue:{aliases:["Brevo"],host:"smtp-relay.brevo.com",port:587},SendPulse:{host:"smtp-pulse.com",port:465,secure:!0},SES:{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTH-1":{host:"email-smtp.ap-south-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-1":{host:"email-smtp.ap-northeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-2":{host:"email-smtp.ap-northeast-2.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-3":{host:"email-smtp.ap-northeast-3.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-1":{host:"email-smtp.ap-southeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-2":{host:"email-smtp.ap-southeast-2.amazonaws.com",port:465,secure:!0},Seznam:{aliases:["Seznam Email"],domains:["seznam.cz","email.cz","post.cz","spoluzaci.cz"],host:"smtp.seznam.cz",port:465,secure:!0},Sparkpost:{aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Tipimail:{host:"smtp.tipimail.com",port:587},Yahoo:{domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},Yandex:{domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},Zoho:{host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"},"126":{host:"smtp.126.com",port:465,secure:!0},"163":{host:"smtp.163.com",port:465,secure:!0}}});var pd=w((P9,Cw)=>{"use strict";var Tw=Aw(),hc={};Object.keys(Tw).forEach(e=>{let t=Tw[e];hc[fc(e)]=ld(t),[].concat(t.aliases||[]).forEach(i=>{hc[fc(i)]=ld(t)}),[].concat(t.domains||[]).forEach(i=>{hc[fc(i)]=ld(t)})});function fc(e){return e.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function ld(e){let t=["domains","aliases"],i={};return Object.keys(e).forEach(n=>{t.indexOf(n)<0&&(i[n]=e[n])}),i}Cw.exports=function(e){return e=fc(e.split("@").pop()),hc[e]||!1}});var Pw=w((O9,qw)=>{"use strict";var ZP=require("events"),jw=Sw(),Rw=mc(),XP=pd(),fr=ft(),e4=mi(),ud=class extends ZP{constructor(t){super(),t=t||{},typeof t=="string"&&(t={url:t});let i,n=t.service;typeof t.getSocket=="function"&&(this.getSocket=t.getSocket),t.url&&(i=fr.parseConnectionUrl(t.url),n=n||i.service),this.options=fr.assign(!1,t,i,n&&XP(n)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=fr.getLogger(this.options,{component:this.options.component||"smtp-pool"});let s=new Rw(this.options);this.name="SMTP (pool)",this.version=e4.version+"[client:"+s.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(t,i){return setImmediate(()=>i(null,!1))}send(t,i){return this._closed?!1:(this._queue.push({mail:t,requeueAttempts:0,callback:i}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let t,i=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!i&&!this._queue.length)return;for(let s=i-1;s>=0;s--)this._connections[s]&&this._connections[s].available&&(t=this._connections[s],t.close(),this.logger.info({tnx:"connection",cid:t.id,action:"removed"},"Connection #%s removed",t.id));if(i&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let n=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let s=this._queue.shift();if(s&&typeof s.callback=="function")try{s.callback(new Error("Connection pool was closed"))}catch(a){this.logger.error({err:a,tnx:"callback",cid:t.id},"Callback error for #%s: %s",t.id,a.message)}setImmediate(n)};setImmediate(n)}_processMessages(){let t,i,n;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(i=0,n=this._connections.length;i<n;i++)if(this._connections[i].available){t=this._connections[i];break}if(!t&&this._connections.length<this.options.maxConnections&&(t=this._createConnection()),!t){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let s=t.queueEntry=this._queue.shift();s.messageId=(t.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),t.available=!1,this.logger.debug({tnx:"pool",cid:t.id,messageId:s.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",s.messageId,t.id,t.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),t.send(s.mail,(a,r)=>{if(s===t.queueEntry){try{s.callback(a,r)}catch(o){this.logger.error({err:o,tnx:"callback",cid:t.id},"Callback error for #%s: %s",t.id,o.message)}t.queueEntry=!1}})}_createConnection(){let t=new jw(this);return t.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:t.id,action:"conection"},"Created new pool resource #%s",t.id),t.on("available",()=>{this.logger.debug({tnx:"connection",cid:t.id,action:"available"},"Connection #%s became available",t.id),this._closed?this.close():this._processMessages()}),t.once("error",i=>{if(i.code!=="EMAXLIMIT"?this.logger.error({err:i,tnx:"pool",cid:t.id},"Pool Error for #%s: %s",t.id,i.message):this.logger.debug({tnx:"pool",cid:t.id,action:"maxlimit"},"Max messages limit exchausted for #%s",t.id),t.queueEntry){try{t.queueEntry.callback(i)}catch(n){this.logger.error({err:n,tnx:"callback",cid:t.id},"Callback error for #%s: %s",t.id,n.message)}t.queueEntry=!1}this._removeConnection(t),this._continueProcessing()}),t.once("close",()=>{this.logger.info({tnx:"connection",cid:t.id,action:"closed"},"Connection #%s was closed",t.id),this._removeConnection(t),t.queueEntry?setTimeout(()=>{t.queueEntry&&(this._shouldRequeuOnConnectionClose(t.queueEntry)?this._requeueEntryOnConnectionClose(t):this._failDeliveryOnConnectionClose(t)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(t),t}_shouldRequeuOnConnectionClose(t){return this.options.maxRequeues===void 0||this.options.maxRequeues<0?!0:t.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(t){if(t.queueEntry&&t.queueEntry.callback){try{t.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(i){this.logger.error({err:i,tnx:"callback",messageId:t.queueEntry.messageId,cid:t.id},"Callback error for #%s: %s",t.id,i.message)}t.queueEntry=!1}}_requeueEntryOnConnectionClose(t){t.queueEntry.requeueAttempts=t.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:t.id,messageId:t.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",t.queueEntry.messageId,t.id,t.queueEntry.requeueAttempts),this._queue.unshift(t.queueEntry),t.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(t){let i=this._connections.indexOf(t);i!==-1&&this._connections.splice(i,1)}_checkRateLimit(t){if(!this._rateLimit.limit)return t();let i=Date.now();if(this._rateLimit.counter<this._rateLimit.limit)return t();if(this._rateLimit.waiting.push(t),this._rateLimit.checkpoint<=i-this._rateLimit.delta)return this._clearRateLimit();this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(i-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=i)}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let t=this._rateLimit.waiting.shift();setImmediate(t)}}isIdle(){return this.idling}verify(t){let i;t||(i=new Promise((s,a)=>{t=fr.callbackPromise(s,a)}));let n=new jw(this).auth;return this.getSocket(this.options,(s,a)=>{if(s)return t(s);let r=this.options;a&&a.connection&&(this.logger.info({tnx:"proxy",remoteAddress:a.connection.remoteAddress,remotePort:a.connection.remotePort,destHost:r.host||"",destPort:r.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",a.connection.remoteAddress,a.connection.remotePort,r.host||"",r.port||""),r=fr.assign(!1,r),Object.keys(a).forEach(p=>{r[p]=a[p]}));let o=new Rw(r),c=!1;o.once("error",p=>{if(!c)return c=!0,o.close(),t(p)}),o.once("end",()=>{if(!c)return c=!0,t(new Error("Connection closed"))});let l=()=>{if(!c)return c=!0,o.quit(),t(null,!0)};o.connect(()=>{if(!c)if(n&&(o.allowsAuth||r.forceAuth))o.login(n,p=>{if(!c){if(p)return c=!0,o.close(),t(p);l()}});else if(!n&&o.allowsAuth&&r.forceAuth){let p=new Error("Authentication info was not provided");return p.code="NoAuth",c=!0,o.close(),t(p)}else l()})}),i}};qw.exports=ud});var Iw=w((I9,Ow)=>{"use strict";var t4=require("events"),dd=mc(),i4=pd(),aa=ft(),n4=od(),s4=mi(),md=class extends t4{constructor(t){super(),t=t||{},typeof t=="string"&&(t={url:t});let i,n=t.service;typeof t.getSocket=="function"&&(this.getSocket=t.getSocket),t.url&&(i=aa.parseConnectionUrl(t.url),n=n||i.service),this.options=aa.assign(!1,t,i,n&&i4(n)),this.logger=aa.getLogger(this.options,{component:this.options.component||"smtp-transport"});let s=new dd(this.options);this.name="SMTP",this.version=s4.version+"[client:"+s.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(t,i){return setImmediate(()=>i(null,!1))}getAuth(t){if(!t)return this.auth;let i=!1,n={};if(this.options.auth&&typeof this.options.auth=="object"&&Object.keys(this.options.auth).forEach(s=>{i=!0,n[s]=this.options.auth[s]}),t&&typeof t=="object"&&Object.keys(t).forEach(s=>{i=!0,n[s]=t[s]}),!i)return!1;switch((n.type||"").toString().toUpperCase()){case"OAUTH2":{if(!n.service&&!n.user)return!1;let s=new n4(n,this.logger);return s.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||s.provisionCallback,s.on("token",a=>this.mailer.emit("token",a)),s.on("error",a=>this.emit("error",a)),{type:"OAUTH2",user:n.user,oauth2:s,method:"XOAUTH2"}}default:return{type:(n.type||"").toString().toUpperCase()||"LOGIN",user:n.user,credentials:{user:n.user||"",pass:n.pass,options:n.options},method:(n.method||"").trim().toUpperCase()||this.options.authMethod||!1}}}send(t,i){this.getSocket(this.options,(n,s)=>{if(n)return i(n);let a=!1,r=this.options;s&&s.connection&&(this.logger.info({tnx:"proxy",remoteAddress:s.connection.remoteAddress,remotePort:s.connection.remotePort,destHost:r.host||"",destPort:r.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",s.connection.remoteAddress,s.connection.remotePort,r.host||"",r.port||""),r=aa.assign(!1,r),Object.keys(s).forEach(l=>{r[l]=s[l]}));let o=new dd(r);o.once("error",l=>{if(!a)return a=!0,o.close(),i(l)}),o.once("end",()=>{if(a)return;let l=setTimeout(()=>{if(a)return;a=!0;let p=new Error("Unexpected socket close");o&&o._socket&&o._socket.upgrading&&(p.code="ETLS"),i(p)},1e3);try{l.unref()}catch{}});let c=()=>{let l=t.message.getEnvelope(),p=t.message.messageId(),u=[].concat(l.to||[]);u.length>3&&u.push("...and "+u.splice(2).length+" more"),t.data.dsn&&(l.dsn=t.data.dsn),this.logger.info({tnx:"send",messageId:p},"Sending message %s to <%s>",p,u.join(", ")),o.send(l,t.message.createReadStream(),(d,m)=>{if(a=!0,o.close(),d)return this.logger.error({err:d,tnx:"send"},"Send error for %s: %s",p,d.message),i(d);m.envelope={from:l.from,to:l.to},m.messageId=p;try{return i(null,m)}catch(f){this.logger.error({err:f,tnx:"callback"},"Callback error for %s: %s",p,f.message)}})};o.connect(()=>{if(a)return;let l=this.getAuth(t.data.auth);l&&(o.allowsAuth||r.forceAuth)?o.login(l,p=>{if(l&&l!==this.auth&&l.oauth2&&l.oauth2.removeAllListeners(),!a){if(p)return a=!0,o.close(),i(p);c()}}):c()})})}verify(t){let i;return t||(i=new Promise((n,s)=>{t=aa.callbackPromise(n,s)})),this.getSocket(this.options,(n,s)=>{if(n)return t(n);let a=this.options;s&&s.connection&&(this.logger.info({tnx:"proxy",remoteAddress:s.connection.remoteAddress,remotePort:s.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",s.connection.remoteAddress,s.connection.remotePort,a.host||"",a.port||""),a=aa.assign(!1,a),Object.keys(s).forEach(l=>{a[l]=s[l]}));let r=new dd(a),o=!1;r.once("error",l=>{if(!o)return o=!0,r.close(),t(l)}),r.once("end",()=>{if(!o)return o=!0,t(new Error("Connection closed"))});let c=()=>{if(!o)return o=!0,r.quit(),t(null,!0)};r.connect(()=>{if(o)return;let l=this.getAuth({});if(l&&(r.allowsAuth||a.forceAuth))r.login(l,p=>{if(!o){if(p)return o=!0,r.close(),t(p);c()}});else if(!l&&r.allowsAuth&&a.forceAuth){let p=new Error("Authentication info was not provided");return p.code="NoAuth",o=!0,r.close(),t(p)}else c()})}),i}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}};Ow.exports=md});var Nw=w(($9,$w)=>{"use strict";var a4=require("child_process").spawn,r4=mi(),o4=ft(),hd=class{constructor(t){t=t||{},this._spawn=a4,this.options=t||{},this.name="Sendmail",this.version=r4.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=o4.getLogger(this.options,{component:this.options.component||"sendmail"}),t&&(typeof t=="string"?this.path=t:typeof t=="object"&&(t.path&&(this.path=t.path),Array.isArray(t.args)&&(this.args=t.args),this.winbreak=["win","windows","dos",`\r
`].includes((t.newline||"").toString().toLowerCase())))}send(t,i){t.message.keepBcc=!0;let n=t.data.envelope||t.message.getEnvelope(),s=t.message.messageId(),a,r,o;if([].concat(n.from||[]).concat(n.to||[]).some(p=>/^-/.test(p)))return i(new Error("Can not send mail. Invalid envelope addresses."));this.args?a=["-i"].concat(this.args).concat(n.to):a=["-i"].concat(n.from?["-f",n.from]:[]).concat(n.to);let l=p=>{if(!o&&(o=!0,typeof i=="function"))return p?i(p):i(null,{envelope:t.data.envelope||t.message.getEnvelope(),messageId:s,response:"Messages queued for delivery"})};try{r=this._spawn(this.path,a)}catch(p){return this.logger.error({err:p,tnx:"spawn",messageId:s},"Error occurred while spawning sendmail. %s",p.message),l(p)}if(r){r.on("error",d=>{this.logger.error({err:d,tnx:"spawn",messageId:s},"Error occurred when sending message %s. %s",s,d.message),l(d)}),r.once("exit",d=>{if(!d)return l();let m;d===127?m=new Error("Sendmail command not found, process exited with code "+d):m=new Error("Sendmail exited with code "+d),this.logger.error({err:m,tnx:"stdin",messageId:s},"Error sending message %s to sendmail. %s",s,m.message),l(m)}),r.once("close",l),r.stdin.on("error",d=>{this.logger.error({err:d,tnx:"stdin",messageId:s},"Error occurred when piping message %s to sendmail. %s",s,d.message),l(d)});let p=[].concat(n.to||[]);p.length>3&&p.push("...and "+p.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:s},"Sending message %s to <%s>",s,p.join(", "));let u=t.message.createReadStream();u.once("error",d=>{this.logger.error({err:d,tnx:"stdin",messageId:s},"Error occurred when generating message %s. %s",s,d.message),r.kill("SIGINT"),l(d)}),u.pipe(r.stdin)}else return l(new Error("sendmail was not found"))}};$w.exports=hd});var Lw=w((N9,Fw)=>{"use strict";var c4=mi(),l4=ft(),fd=class{constructor(t){t=t||{},this.options=t||{},this.name="StreamTransport",this.version=c4.version,this.logger=l4.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos",`\r
`].includes((t.newline||"").toString().toLowerCase())}send(t,i){t.message.keepBcc=!0;let n=t.data.envelope||t.message.getEnvelope(),s=t.message.messageId(),a=[].concat(n.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:s},"Sending message %s to <%s> using %s line breaks",s,a.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let r;try{r=t.message.createReadStream()}catch(l){return this.logger.error({err:l,tnx:"send",messageId:s},"Creating send stream failed for %s. %s",s,l.message),i(l)}if(!this.options.buffer)return r.once("error",l=>{this.logger.error({err:l,tnx:"send",messageId:s},"Failed creating message for %s. %s",s,l.message)}),i(null,{envelope:t.data.envelope||t.message.getEnvelope(),messageId:s,message:r});let o=[],c=0;r.on("readable",()=>{let l;for(;(l=r.read())!==null;)o.push(l),c+=l.length}),r.once("error",l=>(this.logger.error({err:l,tnx:"send",messageId:s},"Failed creating message for %s. %s",s,l.message),i(l))),r.on("end",()=>i(null,{envelope:t.data.envelope||t.message.getEnvelope(),messageId:s,message:Buffer.concat(o,c)}))})}};Fw.exports=fd});var Dw=w((F9,Mw)=>{"use strict";var p4=mi(),u4=ft(),gd=class{constructor(t){t=t||{},this.options=t||{},this.name="JSONTransport",this.version=p4.version,this.logger=u4.getLogger(this.options,{component:this.options.component||"json-transport"})}send(t,i){t.message.keepBcc=!0;let n=t.data.envelope||t.message.getEnvelope(),s=t.message.messageId(),a=[].concat(n.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:s},"Composing JSON structure of %s to <%s>",s,a.join(", ")),setImmediate(()=>{t.normalize((r,o)=>r?(this.logger.error({err:r,tnx:"send",messageId:s},"Failed building JSON structure for %s. %s",s,r.message),i(r)):(delete o.envelope,delete o.normalizedHeaders,i(null,{envelope:n,messageId:s,message:this.options.skipEncoding?o:JSON.stringify(o)})))})}};Mw.exports=gd});var Uw=w((L9,zw)=>{"use strict";var d4=require("events"),m4=mi(),Bw=ft(),h4=zu(),f4=dc(),xd=class extends d4{constructor(t){super(),t=t||{},this.options=t||{},this.ses=this.options.SES,this.name="SESTransport",this.version=m4.version,this.logger=Bw.getLogger(this.options,{component:this.options.component||"ses-transport"})}getRegion(t){return this.ses.sesClient.config&&typeof this.ses.sesClient.config.region=="function"?this.ses.sesClient.config.region().then(i=>t(null,i)).catch(i=>t(i)):t(null,!1)}send(t,i){let n={ts:Date.now(),pending:!0},s=t.message._headers.find(l=>/^from$/i.test(l.key));if(s){let l=new f4("text/plain");s=l._convertAddresses(l._parseAddresses(s.value))}let a=t.data.envelope||t.message.getEnvelope(),r=t.message.messageId(),o=[].concat(a.to||[]);o.length>3&&o.push("...and "+o.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:r},"Sending message %s to <%s>",r,o.join(", "));let c=l=>{t.data._dkim||(t.data._dkim={}),t.data._dkim.skipFields&&typeof t.data._dkim.skipFields=="string"?t.data._dkim.skipFields+=":date:message-id":t.data._dkim.skipFields="date:message-id";let p=t.message.createReadStream(),u=p.pipe(new h4),d=[],m=0;u.on("readable",()=>{let f;for(;(f=u.read())!==null;)d.push(f),m+=f.length}),p.once("error",f=>u.emit("error",f)),u.once("error",f=>{l(f)}),u.once("end",()=>l(null,Buffer.concat(d,m)))};setImmediate(()=>c((l,p)=>{if(l)return this.logger.error({err:l,tnx:"send",messageId:r},"Failed creating message for %s. %s",r,l.message),n.pending=!1,i(l);let u={Content:{Raw:{Data:p}},FromEmailAddress:s||a.from,Destination:{ToAddresses:a.to}};Object.keys(t.data.ses||{}).forEach(d=>{u[d]=t.data.ses[d]}),this.getRegion((d,m)=>{(d||!m)&&(m="us-east-1");let f=new this.ses.SendEmailCommand(u);this.ses.sesClient.send(f).then(E=>{m==="us-east-1"&&(m="email"),n.pending=!0,i(null,{envelope:{from:a.from,to:a.to},messageId:"<"+E.MessageId+(/@/.test(E.MessageId)?"":"@"+m+".amazonses.com")+">",response:E.MessageId,raw:p})}).catch(E=>{this.logger.error({err:E,tnx:"send"},"Send error for %s: %s",r,E.message),n.pending=!1,i(E)})})}))}verify(t){let i;t||(i=new Promise((a,r)=>{t=Bw.callbackPromise(a,r)}));let n=a=>a&&!["InvalidParameterValue","MessageRejected"].includes(a.code||a.Code||a.name)?t(a):t(null,!0),s={Content:{Raw:{Data:Buffer.from(`From: <invalid@invalid>\r
To: <invalid@invalid>\r
 Subject: Invalid\r
\r
Invalid`)}},FromEmailAddress:"invalid@invalid",Destination:{ToAddresses:["invalid@invalid"]}};return this.getRegion((a,r)=>{(a||!r)&&(r="us-east-1");let o=new this.ses.SendEmailCommand(s);this.ses.sesClient.send(o).then(l=>n(null,l)).catch(l=>n(l))}),i}};zw.exports=xd});var Ww=w((M9,gc)=>{"use strict";var g4=hw(),Kw=ft(),x4=Pw(),v4=Iw(),b4=Nw(),y4=Lw(),w4=Dw(),_4=Uw(),E4=lr(),Hw=mi(),k4=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),S4=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),Vw=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,A4=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),gr=!1;gc.exports.createTransport=function(e,t){let i,n,s;if(typeof e=="object"&&typeof e.send!="function"||typeof e=="string"&&/^(smtps?|direct):/i.test(e))if((i=typeof e=="string"?e:e.url)?n=Kw.parseConnectionUrl(i):n=e,n.pool)e=new x4(n);else if(n.sendmail)e=new b4(n);else if(n.streamTransport)e=new y4(n);else if(n.jsonTransport)e=new w4(n);else if(n.SES){if(n.SES.ses&&n.SES.aws){let a=new Error("Using legacy SES configuration, expecting @aws-sdk/client-sesv2, see https://nodemailer.com/transports/ses/");throw a.code="LegacyConfig",a}e=new _4(n)}else e=new v4(n);return s=new g4(e,n,t),s};gc.exports.createTestAccount=function(e,t){let i;if(!t&&typeof e=="function"&&(t=e,e=!1),t||(i=new Promise((c,l)=>{t=Kw.callbackPromise(c,l)})),A4&&gr)return setImmediate(()=>t(null,gr)),i;e=e||k4;let n=[],s=0,a={},r={requestor:Hw.name,version:Hw.version};Vw&&(a.Authorization="Bearer "+Vw);let o=E4(e+"/user",{contentType:"application/json",method:"POST",headers:a,body:Buffer.from(JSON.stringify(r))});return o.on("readable",()=>{let c;for(;(c=o.read())!==null;)n.push(c),s+=c.length}),o.once("error",c=>t(c)),o.once("end",()=>{let c=Buffer.concat(n,s),l,p;try{l=JSON.parse(c.toString())}catch(u){p=u}if(p)return t(p);if(l.status!=="success"||l.error)return t(new Error(l.error||"Request failed"));delete l.status,gr=l,t(null,gr)}),i};gc.exports.getTestMessageUrl=function(e){if(!e||!e.response)return!1;let t=new Map;return e.response.replace(/\[([^\]]+)\]$/,(i,n)=>{n.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(s,a,r)=>{t.set(a,r)})}),t.has("STATUS")&&t.has("MSGID")?(gr.web||S4)+"/message/"+t.get("MSGID"):!1}});var Zw=$t(Ug());var Hg=(e=0)=>t=>`\x1B[${t+e}m`,Vg=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Kg=(e=0)=>(t,i,n)=>`\x1B[${38+e};2;${t};${i};${n}m`,fe={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},II=Object.keys(fe.modifier),Ck=Object.keys(fe.color),jk=Object.keys(fe.bgColor),$I=[...Ck,...jk];function Rk(){let e=new Map;for(let[t,i]of Object.entries(fe)){for(let[n,s]of Object.entries(i))fe[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},i[n]=fe[n],e.set(s[0],s[1]);Object.defineProperty(fe,t,{value:i,enumerable:!1})}return Object.defineProperty(fe,"codes",{value:e,enumerable:!1}),fe.color.close="\x1B[39m",fe.bgColor.close="\x1B[49m",fe.color.ansi=Hg(),fe.color.ansi256=Vg(),fe.color.ansi16m=Kg(),fe.bgColor.ansi=Hg(10),fe.bgColor.ansi256=Vg(10),fe.bgColor.ansi16m=Kg(10),Object.defineProperties(fe,{rgbToAnsi256:{value(t,i,n){return t===i&&i===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},enumerable:!1},hexToRgb:{value(t){let i=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!i)return[0,0,0];let[n]=i;n.length===3&&(n=[...n].map(a=>a+a).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:t=>fe.rgbToAnsi256(...fe.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let i,n,s;if(t>=232)i=((t-232)*10+8)/255,n=i,s=i;else{t-=16;let o=t%36;i=Math.floor(t/36)/5,n=Math.floor(o/6)/5,s=o%6/5}let a=Math.max(i,n,s)*2;if(a===0)return 30;let r=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(i));return a===2&&(r+=60),r},enumerable:!1},rgbToAnsi:{value:(t,i,n)=>fe.ansi256ToAnsi(fe.rgbToAnsi256(t,i,n)),enumerable:!1},hexToAnsi:{value:t=>fe.ansi256ToAnsi(fe.hexToAnsi256(t)),enumerable:!1}}),fe}var qk=Rk(),ci=qk;var oo=$t(require("node:process"),1),Gg=$t(require("node:os"),1),jl=$t(require("node:tty"),1);function Kt(e,t=globalThis.Deno?globalThis.Deno.args:oo.default.argv){let i=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(i+e),s=t.indexOf("--");return n!==-1&&(s===-1||n<s)}var{env:Ee}=oo.default,ro;Kt("no-color")||Kt("no-colors")||Kt("color=false")||Kt("color=never")?ro=0:(Kt("color")||Kt("colors")||Kt("color=true")||Kt("color=always"))&&(ro=1);function Pk(){if("FORCE_COLOR"in Ee)return Ee.FORCE_COLOR==="true"?1:Ee.FORCE_COLOR==="false"?0:Ee.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Ee.FORCE_COLOR,10),3)}function Ok(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Ik(e,{streamIsTTY:t,sniffFlags:i=!0}={}){let n=Pk();n!==void 0&&(ro=n);let s=i?ro:n;if(s===0)return 0;if(i){if(Kt("color=16m")||Kt("color=full")||Kt("color=truecolor"))return 3;if(Kt("color=256"))return 2}if("TF_BUILD"in Ee&&"AGENT_NAME"in Ee)return 1;if(e&&!t&&s===void 0)return 0;let a=s||0;if(Ee.TERM==="dumb")return a;if(oo.default.platform==="win32"){let r=Gg.default.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Ee)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(r=>r in Ee)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(r=>r in Ee)||Ee.CI_NAME==="codeship"?1:a;if("TEAMCITY_VERSION"in Ee)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ee.TEAMCITY_VERSION)?1:0;if(Ee.COLORTERM==="truecolor"||Ee.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in Ee){let r=Number.parseInt((Ee.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ee.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ee.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ee.TERM)||"COLORTERM"in Ee?1:a}function Wg(e,t={}){let i=Ik(e,{streamIsTTY:e&&e.isTTY,...t});return Ok(i)}var $k={stdout:Wg({isTTY:jl.default.isatty(1)}),stderr:Wg({isTTY:jl.default.isatty(2)})},Jg=$k;function Qg(e,t,i){let n=e.indexOf(t);if(n===-1)return e;let s=t.length,a=0,r="";do r+=e.slice(a,n)+t+i,a=n+s,n=e.indexOf(t,a);while(n!==-1);return r+=e.slice(a),r}function Yg(e,t,i,n){let s=0,a="";do{let r=e[n-1]==="\r";a+=e.slice(s,r?n-1:n)+t+(r?`\r
`:`
`)+i,s=n+1,n=e.indexOf(`
`,s)}while(n!==-1);return a+=e.slice(s),a}var{stdout:Zg,stderr:Xg}=Jg,Rl=Symbol("GENERATOR"),Os=Symbol("STYLER"),Ca=Symbol("IS_EMPTY"),ex=["ansi","ansi","ansi256","ansi16m"],Is=Object.create(null),Nk=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let i=Zg?Zg.level:0;e.level=t.level===void 0?i:t.level};var Fk=e=>{let t=(...i)=>i.join(" ");return Nk(t,e),Object.setPrototypeOf(t,ja.prototype),t};function ja(e){return Fk(e)}Object.setPrototypeOf(ja.prototype,Function.prototype);for(let[e,t]of Object.entries(ci))Is[e]={get(){let i=co(this,Pl(t.open,t.close,this[Os]),this[Ca]);return Object.defineProperty(this,e,{value:i}),i}};Is.visible={get(){let e=co(this,this[Os],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var ql=(e,t,i,...n)=>e==="rgb"?t==="ansi16m"?ci[i].ansi16m(...n):t==="ansi256"?ci[i].ansi256(ci.rgbToAnsi256(...n)):ci[i].ansi(ci.rgbToAnsi(...n)):e==="hex"?ql("rgb",t,i,...ci.hexToRgb(...n)):ci[i][e](...n),Lk=["rgb","hex","ansi256"];for(let e of Lk){Is[e]={get(){let{level:i}=this;return function(...n){let s=Pl(ql(e,ex[i],"color",...n),ci.color.close,this[Os]);return co(this,s,this[Ca])}}};let t="bg"+e[0].toUpperCase()+e.slice(1);Is[t]={get(){let{level:i}=this;return function(...n){let s=Pl(ql(e,ex[i],"bgColor",...n),ci.bgColor.close,this[Os]);return co(this,s,this[Ca])}}}}var Mk=Object.defineProperties(()=>{},{...Is,level:{enumerable:!0,get(){return this[Rl].level},set(e){this[Rl].level=e}}}),Pl=(e,t,i)=>{let n,s;return i===void 0?(n=e,s=t):(n=i.openAll+e,s=t+i.closeAll),{open:e,close:t,openAll:n,closeAll:s,parent:i}},co=(e,t,i)=>{let n=(...s)=>Dk(n,s.length===1?""+s[0]:s.join(" "));return Object.setPrototypeOf(n,Mk),n[Rl]=e,n[Os]=t,n[Ca]=i,n},Dk=(e,t)=>{if(e.level<=0||!t)return e[Ca]?"":t;let i=e[Os];if(i===void 0)return t;let{openAll:n,closeAll:s}=i;if(t.includes("\x1B"))for(;i!==void 0;)t=Qg(t,i.close,i.open),i=i.parent;let a=t.indexOf(`
`);return a!==-1&&(t=Yg(t,s,n,a)),n+t+s};Object.defineProperties(ja.prototype,Is);var Bk=ja(),zI=ja({level:Xg?Xg.level:0});var li=Bk;var Ol=class{static info(t){console.log(`${li.blue("[INFO]")} ${li.gray(`[${new Date().toISOString()}]`)} ${t}`)}static warn(t){console.warn(`${li.yellow("[WARN]")} ${li.gray(`[${new Date().toISOString()}]`)} ${t}`)}static error(t){console.error(`${li.red("[ERROR]")} ${li.gray(`[${new Date().toISOString()}]`)} ${t}`)}static success(t){console.log(`${li.green("[SUCCESS]")} ${li.gray(`[${new Date().toISOString()}]`)} ${t}`)}static debug(t){console.debug(`${li.magenta("[DEBUG]")} ${li.gray(`[${new Date().toISOString()}]`)} ${t}`)}},ae=Ol;var tx=[],ix=[],xn=class{static registerRoutes(t){ae.info("Setting Routes..."),ix.push(...t)}static registerControllers(t){ae.info("Setting Controllers..."),tx.push(...t)}static async registerPlugins(t,i){ae.info("Registering Plugins..."),await Promise.all(i.map(n=>{t.register(n)}))}static registerHandlers(t){ae.info("Registering Handlers..."),ix.forEach(i=>{if(typeof i.handler=="string"){let n=i.handler.split(".")[0],s=i.handler.split(".")[1],a=tx.find(r=>r.name===n);a?s in a?(ae.info(`Registering ${i.handler} with method=${i.method} for endpoint=${i.path}`),t.route([{...i,handler:a[s].bind(a)}])):(ae.error(`Could not find corresponding method handler '${s}' for controller '${n}'`),process.exit(1)):(ae.error(`Could not find controller for ${i.handler}`),process.exit(1))}else t.route(i)})}static async registerModules(t){ae.info("Registering Modules..."),await Promise.all(t.map(i=>{ae.info("Registering "+i.name),i.init()}))}};var my=$t(dy()),Kp=class{static{this._instance=null}constructor(){}static getInstance(){return this._instance||(this._instance=new my.PrismaClient),this._instance}static async disconnect(){this._instance&&await this._instance.$disconnect()}},je=Kp;var xy=$t(gy());var ir=class{constructor(t){this.server=t;this.name="AuthModule"}async init(){await this.registerPlugin(),this.addStrategy("session","cookie")}async registerPlugin(){await this.server.register(xy.default)}addStrategy(t,i){this.server.auth.strategy(t,i,{cookie:{name:"sid-example",password:process.env.COOKIE_SECRET??"CO4NRP1HMALxxCFnRZABFA7GOJtzU_gI",isSecure:process.env.ENV!=="dev",isHttpOnly:!0,path:"/"},redirectTo:"/login",validate:this.validate}),this.server.auth.default("session")}async validate(t,i){let n=await je.getInstance().user.findUnique({where:{id:i.id}});return n?{isValid:!0,credentials:n}:{isValid:!1}}};var Xw=$t(require("path")),e_=$t(Py());var Oy=[{method:"POST",path:"/tournament",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"TournamentController.createTournament"},{method:"GET",path:"/tournaments",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"TournamentController.getTournaments"},{method:"GET",path:"/tournaments/{id}",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"TournamentController.getTournamentById"},{method:"DELETE",path:"/tournaments/{id}",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"TournamentController.deleteTournamentById"},{method:"POST",path:"/join/tournament/{id}",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"TournamentController.joinTournamentById"},{method:"PATCH",path:"/tournament/{id}",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"TournamentController.patchTournamentById"}];function Ys(){return function(e){let t=Object.getOwnPropertyNames(e.prototype).filter(i=>i!=="constructor"&&typeof e.prototype[i]=="function");for(let i of t){let n=e.prototype[i];e.prototype[i]=function(...s){let a=s[0];return a?.method&&a?.url&&ae.debug(`${e.name}.${i} - method=${a.method} path=${a.url}`),n.apply(this,s)}}}}var Iy=".:-:.";var Ye=[];for(let e=0;e<256;++e)Ye.push((e+256).toString(16).slice(1));function $y(e,t=0){return(Ye[e[t+0]]+Ye[e[t+1]]+Ye[e[t+2]]+Ye[e[t+3]]+"-"+Ye[e[t+4]]+Ye[e[t+5]]+"-"+Ye[e[t+6]]+Ye[e[t+7]]+"-"+Ye[e[t+8]]+Ye[e[t+9]]+"-"+Ye[e[t+10]]+Ye[e[t+11]]+Ye[e[t+12]]+Ye[e[t+13]]+Ye[e[t+14]]+Ye[e[t+15]]).toLowerCase()}var Ny=require("node:crypto"),Jo=new Uint8Array(256),Go=Jo.length;function uu(){return Go>Jo.length-16&&((0,Ny.randomFillSync)(Jo),Go=0),Jo.slice(Go,Go+=16)}var Fy=require("node:crypto"),du={randomUUID:Fy.randomUUID};function Z3(e,t,i){e=e||{};let n=e.random??e.rng?.()??uu();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(i=i||0,i<0||i+16>t.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let s=0;s<16;++s)t[i+s]=n[s];return t}return $y(n)}function X3(e,t,i){return du.randomUUID&&!t&&!e?du.randomUUID():Z3(e,t,i)}var Qo=X3;var Zs=class{constructor(){this.name="TournamentController"}async getTournaments(t,i){let n=await je.getInstance().tournament.findMany({where:{created_by:Number(t.auth.credentials.id)}});return i.response(n).code(200)}async createTournament(t,i){let{name:n}=t.payload;return n?(await je.getInstance().tournament.create({data:{id:Qo(),created_on:new Date,created_by:Number(t.auth.credentials.id),name:n}}),i.redirect("/userprofile?created=true")):i.response().code(400)}async getTournamentById(t,i){let{id:n=""}=t.params;if(!n)return i.response().code(400);let s=await je.getInstance().tournament.findUnique({where:{id:n},include:{players:{include:{player:!0}}}});return s?i.response(s).code(200):i.response().code(404)}async deleteTournamentById(t,i){let{id:n=""}=t.params;return n?await je.getInstance().tournament.delete({where:{id:n}})?i.response().code(204):i.response().code(404):i.response().code(400)}async joinTournamentById(t,i){let{name:n=""}=t.payload,{id:s=""}=t.params;if(!n||!s)return i.response(`
                <html>
                    <head>
                        <meta
                            name="viewport"
                            content="width=device-width, initial-scale=1.0"
                        />
                        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
                    </head>
                    <body>
                        <div class="container mt-5">
                            <div class="alert alert-danger" role="alert">
                                You did not specify a name or the name is already registered. Please try again by scanning the QR Code or entering the join URL in the browser.
                            </div>
                            <button onclick="window.history.back();" class="btn btn-primary">Back</button>
                        </div>
                    </body>
                </html>`);let a=n+Iy+Qo();return ae.info(`Saving Player=${a} into database and connecting to tournament with id=${s}`),await je.getInstance().player.create({data:{name:a,tournaments:{create:{tournament:{connect:{id:s}}}}}}),i.response(`
            <html>
                <head>
                    <meta
                        name="viewport"
                        content="width=device-width, initial-scale=1.0"
                    />
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
                </head>
                <body>
                    <div class="container mt-5">
                        <div class="alert alert-success" role="alert">
                            You have been added to the Tournament! Your name will be displayed in the Admin Panel shortly!
                            <br>
                            You can close this window now.
                        </div>
                    </div>
                </body>
            </html>`)}async patchTournamentById(t,i){let{id:n}=t.params,s={};t.payload.name!==void 0&&(s.name=t.payload.name),t.payload.created_on!==void 0&&(s.created_on=t.payload.created_on),t.payload.created_on!==void 0&&(s.created_on=t.payload.created_on),t.payload.started!==void 0&&(s.started=!!t.payload.started);try{let a=await je.getInstance().tournament.update({where:{id:n},data:s});return ae.debug(`Updated Record: ${JSON.stringify(a)}`),i.response(a).code(200)}catch(a){return ae.error(a),i.response().code(500)}}};Zs=ms([Ys()],Zs);var Yo=$t(require("path")),mu=$t(require("fs")),My=Yo.default.join(__dirname,"../../client/dist"),eq=Yo.default.join(__dirname,"../uploads"),Dy=[{method:"GET",path:"/uploads/{param*}",handler:{directory:{path:eq,index:!1,listing:!1}}},{method:"GET",path:"/{param*}",options:{auth:{mode:"try"},files:{relativeTo:My}},handler:async(e,t)=>{let i=e.params.param||"index.html",n=Yo.default.join(My,i);return mu.default.existsSync(n)&&mu.default.statSync(n).isFile()?t.file(i):t.file("index.html")}}];var By=[{method:"POST",path:"/login",handler:"AuthController.login",options:{auth:{mode:"try"}}},{method:"POST",path:"/forgot",handler:"AuthController.forgot",options:{auth:{mode:"try"}}},{method:["GET","post"],options:{auth:{mode:"try"}},path:"/change-password",handler:"AuthController.changePassword"},{method:"GET",path:"/profile",handler:"AuthController.user",options:{plugins:{cookie:{redirectTo:!1}}}},{method:"POST",path:"/logout",handler:"AuthController.logout"},{method:"POST",path:"/register",handler:"AuthController.register",options:{auth:{mode:"try"}}}];var xc=$t(Vy());var Ct=new TextEncoder,Qt=new TextDecoder,y8=2**32;function Zo(...e){let t=e.reduce((s,{length:a})=>s+a,0),i=new Uint8Array(t),n=0;for(let s of e)i.set(s,n),n+=s.length;return i}function Ky(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=32768,i=[];for(let n=0;n<e.length;n+=t)i.push(String.fromCharCode.apply(null,e.subarray(n,n+t)));return btoa(i.join(""))}function Wy(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);let t=atob(e),i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}function Xs(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof e=="string"?e:Qt.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=Qt.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Wy(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Xo(e){let t=e;return typeof t=="string"&&(t=Ct.encode(t)),Uint8Array.prototype.toBase64?t.toBase64({alphabet:"base64url",omitPadding:!0}):Ky(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var Qi=class extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(t,i){super(t,i),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},It=class extends Qi{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(t,i,n="unspecified",s="unspecified"){super(t,{cause:{claim:n,reason:s,payload:i}}),this.claim=n,this.reason=s,this.payload=i}},ar=class extends Qi{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(t,i,n="unspecified",s="unspecified"){super(t,{cause:{claim:n,reason:s,payload:i}}),this.claim=n,this.reason=s,this.payload=i}},ec=class extends Qi{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"},di=class extends Qi{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"};var le=class extends Qi{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"},Nn=class extends Qi{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"};var tc=class extends Qi{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(t="signature verification failed",i){super(t,i)}};function Yi(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function rr(e,t){return e.name===t}function hu(e){return parseInt(e.name.slice(4),10)}function sq(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function aq(e,t){if(t&&!e.usages.includes(t))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)}function Gy(e,t,i){switch(t){case"HS256":case"HS384":case"HS512":{if(!rr(e.algorithm,"HMAC"))throw Yi("HMAC");let n=parseInt(t.slice(2),10);if(hu(e.algorithm.hash)!==n)throw Yi(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!rr(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Yi("RSASSA-PKCS1-v1_5");let n=parseInt(t.slice(2),10);if(hu(e.algorithm.hash)!==n)throw Yi(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!rr(e.algorithm,"RSA-PSS"))throw Yi("RSA-PSS");let n=parseInt(t.slice(2),10);if(hu(e.algorithm.hash)!==n)throw Yi(`SHA-${n}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!rr(e.algorithm,"Ed25519"))throw Yi("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!rr(e.algorithm,"ECDSA"))throw Yi("ECDSA");let n=sq(t);if(e.algorithm.namedCurve!==n)throw Yi(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}aq(e,i)}function Jy(e,t,...i){if(i=i.filter(Boolean),i.length>2){let n=i.pop();e+=`one of type ${i.join(", ")}, or ${n}.`}else i.length===2?e+=`one of type ${i[0]} or ${i[1]}.`:e+=`of type ${i[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}var Qy=(e,...t)=>Jy("Key must be ",e,...t);function fu(e,t,...i){return Jy(`Key for the ${e} algorithm must be `,t,...i)}function gu(e){return e?.[Symbol.toStringTag]==="CryptoKey"}function xu(e){return e?.[Symbol.toStringTag]==="KeyObject"}var vu=e=>gu(e)||xu(e);var ic=(...e)=>{let t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let i;for(let n of t){let s=Object.keys(n);if(!i||i.size===0){i=new Set(s);continue}for(let a of s){if(i.has(a))return!1;i.add(a)}}return!0};function rq(e){return typeof e=="object"&&e!==null}var Fn=e=>{if(!rq(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};var nc=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:i}=t.algorithm;if(typeof i!="number"||i<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function oq(e){let t,i;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},i=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},i=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},i=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new di('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},i=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},i=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},i=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},i=e.d?["deriveBits"]:[];break;default:throw new di('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},i=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},i=e.d?["deriveBits"]:[];break;default:throw new di('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new di('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:i}}var Yy=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:i}=oq(e),n={...e};return delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??!e.d,e.key_ops??i)};var sc=(e,t,i,n,s)=>{if(s.crit!==void 0&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(r=>typeof r!="string"||r.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;i!==void 0?a=new Map([...Object.entries(i),...t.entries()]):a=t;for(let r of n.crit){if(!a.has(r))throw new di(`Extension Header Parameter "${r}" is not recognized`);if(s[r]===void 0)throw new e(`Extension Header Parameter "${r}" is missing`);if(a.get(r)&&n[r]===void 0)throw new e(`Extension Header Parameter "${r}" MUST be integrity protected`)}return new Set(n.crit)};var Zy=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(i=>typeof i!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};function or(e){return Fn(e)&&typeof e.kty=="string"}function Xy(e){return e.kty!=="oct"&&typeof e.d=="string"}function e0(e){return e.kty!=="oct"&&typeof e.d>"u"}function t0(e){return e.kty==="oct"&&typeof e.k=="string"}var ea,i0=async(e,t,i,n=!1)=>{ea||=new WeakMap;let s=ea.get(e);if(s?.[i])return s[i];let a=await Yy({...t,alg:i});return n&&Object.freeze(e),s?s[i]=a:ea.set(e,{[i]:a}),a},lq=(e,t)=>{ea||=new WeakMap;let i=ea.get(e);if(i?.[t])return i[t];let n=e.type==="public",s=!!n,a;if(e.asymmetricKeyType==="x25519"){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}a=e.toCryptoKey(e.asymmetricKeyType,s,n?[]:["deriveBits"])}if(e.asymmetricKeyType==="ed25519"){if(t!=="EdDSA"&&t!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");a=e.toCryptoKey(e.asymmetricKeyType,s,[n?"verify":"sign"])}if(e.asymmetricKeyType==="rsa"){let r;switch(t){case"RSA-OAEP":r="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":r="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":r="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":r="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:r},s,n?["encrypt"]:["decrypt"]);a=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:r},s,[n?"verify":"sign"])}if(e.asymmetricKeyType==="ec"){let o=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!o)throw new TypeError("given KeyObject instance cannot be used for this algorithm");t==="ES256"&&o==="P-256"&&(a=e.toCryptoKey({name:"ECDSA",namedCurve:o},s,[n?"verify":"sign"])),t==="ES384"&&o==="P-384"&&(a=e.toCryptoKey({name:"ECDSA",namedCurve:o},s,[n?"verify":"sign"])),t==="ES512"&&o==="P-521"&&(a=e.toCryptoKey({name:"ECDSA",namedCurve:o},s,[n?"verify":"sign"])),t.startsWith("ECDH-ES")&&(a=e.toCryptoKey({name:"ECDH",namedCurve:o},s,n?[]:["deriveBits"]))}if(!a)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return i?i[t]=a:ea.set(e,{[t]:a}),a},ac=async(e,t)=>{if(e instanceof Uint8Array||gu(e))return e;if(xu(e)){if(e.type==="secret")return e.export();if("toCryptoKey"in e&&typeof e.toCryptoKey=="function")try{return lq(e,t)}catch(n){if(n instanceof TypeError)throw n}let i=e.export({format:"jwk"});return i0(e,i,t)}if(or(e))return e.k?Xs(e.k):i0(e,e,t,!0);throw new Error("unreachable")};var ta=e=>e?.[Symbol.toStringTag],bu=(e,t,i)=>{if(t.use!==void 0){let n;switch(i){case"sign":case"verify":n="sig";break;case"encrypt":case"decrypt":n="enc";break}if(t.use!==n)throw new TypeError(`Invalid key for this operation, its "use" must be "${n}" when present`)}if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case(i==="sign"||i==="verify"):case e==="dir":case e.includes("CBC-HS"):n=i;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):!e.includes("GCM")&&e.endsWith("KW")?n=i==="encrypt"?"wrapKey":"unwrapKey":n=i;break;case(i==="encrypt"&&e.startsWith("RSA")):n="wrapKey";break;case i==="decrypt":n=e.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(n&&t.key_ops?.includes?.(n)===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},pq=(e,t,i)=>{if(!(t instanceof Uint8Array)){if(or(t)){if(t0(t)&&bu(e,t,i))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!vu(t))throw new TypeError(fu(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(t.type!=="secret")throw new TypeError(`${ta(t)} instances for symmetric algorithms must be of type "secret"`)}},uq=(e,t,i)=>{if(or(t))switch(i){case"decrypt":case"sign":if(Xy(t)&&bu(e,t,i))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(e0(t)&&bu(e,t,i))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!vu(t))throw new TypeError(fu(e,t,"CryptoKey","KeyObject","JSON Web Key"));if(t.type==="secret")throw new TypeError(`${ta(t)} instances for asymmetric algorithms must not be of type "secret"`);if(t.type==="public")switch(i){case"sign":throw new TypeError(`${ta(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${ta(t)} instances for asymmetric algorithm decryption must be of type "private"`);default:break}if(t.type==="private")switch(i){case"verify":throw new TypeError(`${ta(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${ta(t)} instances for asymmetric algorithm encryption must be of type "public"`);default:break}},rc=(e,t,i)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?pq(e,t,i):uq(e,t,i)};var oc=(e,t)=>{let i=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:i,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:i,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:i,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:i,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new di(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};var cc=async(e,t,i)=>{if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Qy(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[i])}return Gy(t,e,i),t};var n0=async(e,t,i,n)=>{let s=await cc(e,t,"verify");nc(e,s);let a=oc(e,s.algorithm);try{return await crypto.subtle.verify(a,s,i,n)}catch{return!1}};async function s0(e,t,i){if(!Fn(e))throw new le("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new le('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new le("JWS Protected Header incorrect type");if(e.payload===void 0)throw new le("JWS Payload missing");if(typeof e.signature!="string")throw new le("JWS Signature missing or incorrect type");if(e.header!==void 0&&!Fn(e.header))throw new le("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{let E=Xs(e.protected);n=JSON.parse(Qt.decode(E))}catch{throw new le("JWS Protected Header is invalid")}if(!ic(n,e.header))throw new le("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let s={...n,...e.header},a=sc(le,new Map([["b64",!0]]),i?.crit,n,s),r=!0;if(a.has("b64")&&(r=n.b64,typeof r!="boolean"))throw new le('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:o}=s;if(typeof o!="string"||!o)throw new le('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=i&&Zy("algorithms",i.algorithms);if(c&&!c.has(o))throw new ec('"alg" (Algorithm) Header Parameter value not allowed');if(r){if(typeof e.payload!="string")throw new le("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new le("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof t=="function"&&(t=await t(n,e),l=!0),rc(o,t,"verify");let p=Zo(Ct.encode(e.protected??""),Ct.encode("."),typeof e.payload=="string"?Ct.encode(e.payload):e.payload),u;try{u=Xs(e.signature)}catch{throw new le("Failed to base64url decode the signature")}let d=await ac(t,o);if(!await n0(o,d,u,p))throw new tc;let f;if(r)try{f=Xs(e.payload)}catch{throw new le("Failed to base64url decode the payload")}else typeof e.payload=="string"?f=Ct.encode(e.payload):f=e.payload;let x={payload:f};return e.protected!==void 0&&(x.protectedHeader=n),e.header!==void 0&&(x.unprotectedHeader=e.header),l?{...x,key:d}:x}async function a0(e,t,i){if(e instanceof Uint8Array&&(e=Qt.decode(e)),typeof e!="string")throw new le("Compact JWS must be a string or Uint8Array");let{0:n,1:s,2:a,length:r}=e.split(".");if(r!==3)throw new le("Invalid Compact JWS");let o=await s0({payload:s,protected:n,signature:a},t,i),c={payload:o.payload,protectedHeader:o.protectedHeader};return typeof t=="function"?{...c,key:o.key}:c}var Zi=e=>Math.floor(e.getTime()/1e3);var dq=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,ia=e=>{let t=dq.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");let i=parseFloat(t[2]),n=t[3].toLowerCase(),s;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":s=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":s=Math.round(i*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":s=Math.round(i*3600);break;case"day":case"days":case"d":s=Math.round(i*86400);break;case"week":case"weeks":case"w":s=Math.round(i*604800);break;default:s=Math.round(i*31557600);break}return t[1]==="-"||t[4]==="ago"?-s:s};function us(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}var r0=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,mq=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1;function o0(e,t,i={}){let n;try{n=JSON.parse(Qt.decode(t))}catch{}if(!Fn(n))throw new Nn("JWT Claims Set must be a top-level JSON object");let{typ:s}=i;if(s&&(typeof e.typ!="string"||r0(e.typ)!==r0(s)))throw new It('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:a=[],issuer:r,subject:o,audience:c,maxTokenAge:l}=i,p=[...a];l!==void 0&&p.push("iat"),c!==void 0&&p.push("aud"),o!==void 0&&p.push("sub"),r!==void 0&&p.push("iss");for(let f of new Set(p.reverse()))if(!(f in n))throw new It(`missing required "${f}" claim`,n,f,"missing");if(r&&!(Array.isArray(r)?r:[r]).includes(n.iss))throw new It('unexpected "iss" claim value',n,"iss","check_failed");if(o&&n.sub!==o)throw new It('unexpected "sub" claim value',n,"sub","check_failed");if(c&&!mq(n.aud,typeof c=="string"?[c]:c))throw new It('unexpected "aud" claim value',n,"aud","check_failed");let u;switch(typeof i.clockTolerance){case"string":u=ia(i.clockTolerance);break;case"number":u=i.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:d}=i,m=Zi(d||new Date);if((n.iat!==void 0||l)&&typeof n.iat!="number")throw new It('"iat" claim must be a number',n,"iat","invalid");if(n.nbf!==void 0){if(typeof n.nbf!="number")throw new It('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>m+u)throw new It('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(n.exp!==void 0){if(typeof n.exp!="number")throw new It('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=m-u)throw new ar('"exp" claim timestamp check failed',n,"exp","check_failed")}if(l){let f=m-n.iat,x=typeof l=="number"?l:ia(l);if(f-u>x)throw new ar('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(f<0-u)throw new It('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}var lc=class{#e;constructor(t){if(!Fn(t))throw new TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(t)}data(){return Ct.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(t){this.#e.iss=t}get sub(){return this.#e.sub}set sub(t){this.#e.sub=t}get aud(){return this.#e.aud}set aud(t){this.#e.aud=t}set jti(t){this.#e.jti=t}set nbf(t){typeof t=="number"?this.#e.nbf=us("setNotBefore",t):t instanceof Date?this.#e.nbf=us("setNotBefore",Zi(t)):this.#e.nbf=Zi(new Date)+ia(t)}set exp(t){typeof t=="number"?this.#e.exp=us("setExpirationTime",t):t instanceof Date?this.#e.exp=us("setExpirationTime",Zi(t)):this.#e.exp=Zi(new Date)+ia(t)}set iat(t){typeof t>"u"?this.#e.iat=Zi(new Date):t instanceof Date?this.#e.iat=us("setIssuedAt",Zi(t)):typeof t=="string"?this.#e.iat=us("setIssuedAt",Zi(new Date)+ia(t)):this.#e.iat=us("setIssuedAt",t)}};async function yu(e,t,i){let n=await a0(e,t,i);if(n.protectedHeader.crit?.includes("b64")&&n.protectedHeader.b64===!1)throw new Nn("JWTs MUST NOT use unencoded payload");let a={payload:o0(n.protectedHeader,n.payload,i),protectedHeader:n.protectedHeader};return typeof t=="function"?{...a,key:n.key}:a}var c0=async(e,t,i)=>{let n=await cc(e,t,"sign");nc(e,n);let s=await crypto.subtle.sign(oc(e,n.algorithm),n,i);return new Uint8Array(s)};var pc=class{#e;#t;#i;constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this.#e=t}setProtectedHeader(t){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=t,this}setUnprotectedHeader(t){if(this.#i)throw new TypeError("setUnprotectedHeader can only be called once");return this.#i=t,this}async sign(t,i){if(!this.#t&&!this.#i)throw new le("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!ic(this.#t,this.#i))throw new le("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this.#t,...this.#i},s=sc(le,new Map([["b64",!0]]),i?.crit,this.#t,n),a=!0;if(s.has("b64")&&(a=this.#t.b64,typeof a!="boolean"))throw new le('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:r}=n;if(typeof r!="string"||!r)throw new le('JWS "alg" (Algorithm) Header Parameter missing or invalid');rc(r,t,"sign");let o=this.#e;a&&(o=Ct.encode(Xo(o)));let c;this.#t?c=Ct.encode(Xo(JSON.stringify(this.#t))):c=Ct.encode("");let l=Zo(c,Ct.encode("."),o),p=await ac(t,r),u=await c0(r,p,l),d={signature:Xo(u),payload:""};return a&&(d.payload=Qt.decode(o)),this.#i&&(d.header=this.#i),this.#t&&(d.protected=Qt.decode(c)),d}};var uc=class{#e;constructor(t){this.#e=new pc(t)}setProtectedHeader(t){return this.#e.setProtectedHeader(t),this}async sign(t,i){let n=await this.#e.sign(t,i);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}};var cr=class{#e;#t;constructor(t={}){this.#t=new lc(t)}setIssuer(t){return this.#t.iss=t,this}setSubject(t){return this.#t.sub=t,this}setAudience(t){return this.#t.aud=t,this}setJti(t){return this.#t.jti=t,this}setNotBefore(t){return this.#t.nbf=t,this}setExpirationTime(t){return this.#t.exp=t,this}setIssuedAt(t){return this.#t.iat=t,this}setProtectedHeader(t){return this.#e=t,this}async sign(t,i){let n=new uc(this.#t.data());if(n.setProtectedHeader(this.#e),Array.isArray(this.#e?.crit)&&this.#e.crit.includes("b64")&&this.#e.b64===!1)throw new Nn("JWTs MUST NOT use unencoded payload");return n.sign(t,i)}};var wu=class{static getCurrentUnixTimestampSeconds(){return Number((Date.now()/1e3).toFixed(0))}},l0=wu;var na=class extends Error{constructor(t){super(t),this.type="invalid-token-error"}};var _u=class{static{this.secretEncoded=new TextEncoder().encode(process.env.JWT_SECRET??"TO4NRP1HMALxxCFnRZABFA7GOJtzU_gI")}static{this.issuer=process.env.JWT_AUD??""}static async generateJWTEmailReset(t){return await new cr({email:t}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("1h").setAudience(this.issuer).sign(this.secretEncoded)}static async verfyJWTSecretEmailReset(t){try{let i=await yu(t,this.secretEncoded),{iat:n,exp:s,aud:a}=i.payload,r=l0.getCurrentUnixTimestampSeconds();if(!((s??1/0)>r))throw new na("Token already expired!");if(n&&r<n)throw new na("The Token was issued somewhere in the future!");if(a&&a!==this.issuer)throw new na("The Token was issued from someone unknown!");return{email:i.payload.email,success:!0}}catch(i){return i instanceof Error?ae.error(i.message):ae.error("Failed to validate JWT secret from email"),{email:"",success:!1}}}},Eu=_u;var Gw=$t(Ww());var vd=class{constructor(){this.transporter=null;this.sentMail=async(t,i,n)=>{let s=await this?.transporter?.sendMail({from:'"Food Planner" <simon.ranflt@student.tugraz.at>',to:t,subject:i,html:n});ae.info("Message sent: "+s.messageId)};this.transporter=Gw.default.createTransport({host:"mailrelay.tugraz.at",port:465,secure:!0,auth:{user:"eder13",pass:"gaFo$R1+RR"}})}},Jw=vd;var Qw=10,ra=class{constructor(){this.name="AuthController";this.mailService=new Jw}async login(t,i){let{email:n,password:s}=t.payload;if(!n||!s)return i.response({message:"Server Side Validation Failed."}).type("application/json").code(401);let a=await je.getInstance().user.findUnique({where:{email:n}});return a&&await xc.default.compare(s,a.password)?(t.cookieAuth.set({id:a.id}),i.redirect("/userprofile")):i.redirect("/signin?username_password_error=true")}async forgot(t,i){let{email:n}=t.payload;if(!n)return i.response({message:"Server Side Validation Failed."}).type("application/json").code(401);if(!await je.getInstance().user.findUnique({where:{email:n}}))return i.response({message:"User could not be found"}).type("application/json").code(401);let a=await Eu.generateJWTEmailReset(n);console.log("#####** process.env.PROTOCOL, process.env.HOST, process.env.PROTOCOL, process.env.PROTOCOL",process.env.PROTOCOL,process.env.HOST,process.env.PROTOCOL,process.env.PROTOCOL);let r=new URL(`${process.env.PROTOCOL}://${process.env.HOST}${process.env.PORT?":"+process.env.PORT:""}/change-password`);r.searchParams.set("token",a);try{await this.mailService.sentMail(n,"Password Reset",`
                    <h1>Reset Email</h1> 
                    <a href="${r}">Click Here To Reset Email</a> 
                    <br /> <br /> 
                    <small>You have 1 hour before this email expires</small>
                `)}catch(o){return o instanceof Error?ae.error(o.message):ae.error("Failed to sent Mail"),i.redirect("/forgot-password?email_error_generating=true").code(500)}return i.redirect("/forgot-password?email_successfully_sent=true")}async changePassword(t,i){let{token:n}=t.query;if(!n)return i.response({message:"Server Side Validation Failed."}).type("application/json").code(401);let s=await Eu.verfyJWTSecretEmailReset(n);return s.success?t.payload?.password&&t.payload?.confirmpassword&&t.method==="post"?await je.getInstance().user.findUnique({where:{email:s.email}})?(await je.getInstance().user.update({where:{email:s.email},data:{password:await xc.default.hash(t.payload.password,Qw)}}),i.redirect("/forgot-password?password_successfully_reset=true")):i.response({message:"User does not exist."}).type("application/json").code(401):i.response(`
                <html>
                    <head>
                        <meta
                            name="viewport"
                            content="width=device-width, initial-scale=1.0"
                        />
                        <style>
                            form {
                                display: flex;
                                flex-flow: column nowrap;
                                max-width: 500px;
                            }
                        </style>
                        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
                    </head>
                    <body>
                        <div class="container mt-5">
                            <form method="post" action="/change-password?token=${n}">
                                <h1 class="mb-5">Set New Password</h1>
                                <div class="mb-3">
                                    <label class="form-label" for="password">Password: </label>
                                    <input class="form-control" id="password" name="password" type="password">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="confirmpassword">Confirm Password: </label>
                                    <input class="form-control" id="confirmpassword" name="confirmpassword" type="password"/>
                                </div>
                                <div class="mb-3">
                                    <input class="btn btn-primary" value="Change Password" type="submit">
                                </div>
                            </form>
                        </div>
                    </body>
                </html>`):i.response({message:"Password Reset Token already expired, please get a new one."}).type("application/json").code(401)}user(t,i){return i.response({id:t.auth.credentials.id,email:t.auth.credentials.email}).code(200).type("application/json")}logout(t,i){return t.cookieAuth.clear(),i.redirect("/")}async register(t,i){let{email:n,password:s,confirmPassword:a}=t.payload;if(!n||!s||!a)return i.response({message:"Server Side Validation Failed."}).type("application/json").code(400);if(await je.getInstance().user.findUnique({where:{email:n}})!==null)return i.response({message:"This E-Mail Already exists"}).type("application/json").code(400);await je.getInstance().user.create({data:{email:n,password:await xc.default.hash(s,Qw)}});let o=await je.getInstance().user.findUnique({where:{email:n}});return t.cookieAuth.set({id:o?.id}),i.redirect("/userprofile")}};ra=ms([Ys()],ra);var oa=class{constructor(){this.name="PlayerController"}async deletePlayerById(t,i){let{id:n=-1}=t.params;if(n===-1)return i.response().code(400);try{return await je.getInstance().player.delete({where:{id:Number(n)}})?i.response().code(204):i.response().code(404)}catch(s){return ae.error(s),i.response().code(500)}}};oa=ms([Ys()],oa);var Yw=[{method:"DELETE",path:"/players/{id}",options:{auth:{mode:"required"},plugins:{cookie:{redirectTo:!1}}},handler:"PlayerController.deletePlayerById"}];var t_=process.env.PORT??3100,vc=new Zw.default.Server({port:t_,host:"0.0.0.0",routes:{files:{relativeTo:Xw.default.join(__dirname,"../../client/dist")}}});(async()=>(await xn.registerPlugins(vc,[e_.default]),await xn.registerModules([new ir(vc)]),xn.registerRoutes([...Dy,...By,...Oy,...Yw]),xn.registerControllers([new ra,new Zs,new oa]),xn.registerHandlers(vc),vc.start().then(()=>{ae.info(`Listening on port ${t_}...`)}).catch(e=>{ae.error("Could not start server, reason: "+e.message),je.disconnect(),process.exit(1)})))();
/*! Bundled license information:

@prisma/client/runtime/library.js:
  (*! Bundled license information:
  
  decimal.js/decimal.mjs:
    (*!
     *  decimal.js v10.5.0
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     *)
  *)

bcryptjs/dist/bcrypt.js:
  (**
   * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
   * Released under the Apache License, Version 2.0
   * see: https://github.com/dcodeIO/bcrypt.js for details
   *)
*/
